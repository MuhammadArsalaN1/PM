var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(e&&(t=e(e=0)),t),s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=e=>{let n={};for(var r in e)t(n,r,{get:e[r],enumerable:!0});return n},l=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},u=(n,r,a)=>(a=n==null?{}:e(i(n)),l(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),d=e=>l(t({},`__esModule`,{value:!0}),e);(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var f=s((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function C(){}var w={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function E(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function D(e,t){return E(e.type,t,e.props)}function O(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function ee(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var te=/\/+/g;function ne(e,t){return typeof e==`object`&&e&&e.key!=null?ee(``+e.key):t.toString(36)}function k(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(C,C):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function re(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,re(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+ne(e,0):a,S(o)?(i=``,c!=null&&(i=c.replace(te,`$&/`)+`/`),re(o,r,i,``,function(e){return e})):o!=null&&(O(o)&&(o=D(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(te,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(S(e))for(var u=0;u<e.length;u++)a=e[u],s=l+ne(a,u),c+=re(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+ne(a,u++),c+=re(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return re(k(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function ie(e,t,n){if(e==null)return e;var r=[],i=0;return re(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function ae(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var A=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},j={map:ie,forEach:function(e,t,n){ie(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ie(e,function(){t++}),t},toArray:function(e){return ie(e,function(e){return e})||[]},only:function(e){if(!O(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=j,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!T.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return E(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)T.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return E(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=O,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:ae}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(C,A)}catch(e){A(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),w.T=t}},e.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},e.use=function(e){return w.H.use(e)},e.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},e.useCallback=function(e,t){return w.H.useCallback(e,t)},e.useContext=function(e){return w.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return w.H.useEffect(e,t)},e.useEffectEvent=function(e){return w.H.useEffectEvent(e)},e.useId=function(){return w.H.useId()},e.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return w.H.useMemo(e,t)},e.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},e.useRef=function(e){return w.H.useRef(e)},e.useState=function(e){return w.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return w.H.useTransition()},e.version=`19.2.1`})),p=s(((e,t)=>{t.exports=f()})),m=s((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,S||(S=!0,O());else{var t=n(l);t!==null&&ne(x,t.startTime-e)}}var S=!1,C=-1,w=5,T=-1;function E(){return g?!0:!(e.unstable_now()-T<w)}function D(){if(g=!1,S){var t=e.unstable_now();T=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(C),C=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&E());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&ne(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?O():S=!1}}}var O;if(typeof y==`function`)O=function(){y(D)};else if(typeof MessageChannel<`u`){var ee=new MessageChannel,te=ee.port2;ee.port1.onmessage=D,O=function(){te.postMessage(null)}}else O=function(){_(D,0)};function ne(t,n){C=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):w=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(C),C=-1):h=!0,ne(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,S||(S=!0,O()))),r},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),h=s(((e,t)=>{t.exports=m()})),g=s((e=>{var t=p();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},e.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},e.useFormStatus=function(){return s.H.useHostTransitionStatus()},e.version=`19.2.1`})),_=s(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=g()})),v=s((e=>{var t=h(),n=p(),r=_();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(i(188))}function u(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return l(a),e;if(s===r)return l(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,r=s;break}if(u===r){c=!0,r=a,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,r=a;break}if(u===r){c=!0,r=s,n=a;break}u=u.sibling}if(!c)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function d(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=d(e),t!==null)return t;e=e.sibling}return null}var f=Object.assign,m=Symbol.for(`react.element`),g=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),S=Symbol.for(`react.consumer`),C=Symbol.for(`react.context`),w=Symbol.for(`react.forward_ref`),T=Symbol.for(`react.suspense`),E=Symbol.for(`react.suspense_list`),D=Symbol.for(`react.memo`),O=Symbol.for(`react.lazy`),ee=Symbol.for(`react.activity`),te=Symbol.for(`react.memo_cache_sentinel`),ne=Symbol.iterator;function k(e){return typeof e!=`object`||!e?null:(e=ne&&e[ne]||e[`@@iterator`],typeof e==`function`?e:null)}var re=Symbol.for(`react.client.reference`);function ie(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===re?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case T:return`Suspense`;case E:return`SuspenseList`;case ee:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case C:return e.displayName||`Context`;case S:return(e._context.displayName||`Context`)+`.Consumer`;case w:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case D:return t=e.displayName||null,t===null?ie(e.type)||`Memo`:t;case O:t=e._payload,e=e._init;try{return ie(e(t))}catch{}}return null}var ae=Array.isArray,A=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},se=[],ce=-1;function M(e){return{current:e}}function le(e){0>ce||(e.current=se[ce],se[ce]=null,ce--)}function N(e,t){ce++,se[ce]=e.current,e.current=t}var ue=M(null),de=M(null),fe=M(null),pe=M(null);function me(e,t){switch(N(fe,t),N(de,e),N(ue,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Vd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Vd(t),e=Hd(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}le(ue),N(ue,e)}function he(){le(ue),le(de),le(fe)}function ge(e){e.memoizedState!==null&&N(pe,e);var t=ue.current,n=Hd(t,e.type);t!==n&&(N(de,e),N(ue,n))}function _e(e){de.current===e&&(le(ue),le(de)),pe.current===e&&(le(pe),Qf._currentValue=oe)}var ve,ye;function be(e){if(ve===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);ve=t&&t[1]||``,ye=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+ve+e+ye}var P=!1;function xe(e,t){if(!e||P)return``;P=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{P=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?be(n):``}function Se(e,t){switch(e.tag){case 26:case 27:case 5:return be(e.type);case 16:return be(`Lazy`);case 13:return e.child!==t&&t!==null?be(`Suspense Fallback`):be(`Suspense`);case 19:return be(`SuspenseList`);case 0:case 15:return xe(e.type,!1);case 11:return xe(e.type.render,!1);case 1:return xe(e.type,!0);case 31:return be(`Activity`);default:return``}}function Ce(e){try{var t=``,n=null;do t+=Se(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var we=Object.prototype.hasOwnProperty,Te=t.unstable_scheduleCallback,Ee=t.unstable_cancelCallback,De=t.unstable_shouldYield,Oe=t.unstable_requestPaint,ke=t.unstable_now,Ae=t.unstable_getCurrentPriorityLevel,je=t.unstable_ImmediatePriority,Me=t.unstable_UserBlockingPriority,Ne=t.unstable_NormalPriority,Pe=t.unstable_LowPriority,Fe=t.unstable_IdlePriority,Ie=t.log,Le=t.unstable_setDisableYieldValue,F=null,Re=null;function I(e){if(typeof Ie==`function`&&Le(e),Re&&typeof Re.setStrictMode==`function`)try{Re.setStrictMode(F,e)}catch{}}var ze=Math.clz32?Math.clz32:He,Be=Math.log,Ve=Math.LN2;function He(e){return e>>>=0,e===0?32:31-(Be(e)/Ve|0)|0}var Ue=256,We=262144,Ge=4194304;function Ke(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function qe(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=Ke(n))):i=Ke(o):i=Ke(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=Ke(n))):i=Ke(o)):i=Ke(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function Je(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ye(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xe(){var e=Ge;return Ge<<=1,!(Ge&62914560)&&(Ge=4194304),e}function Ze(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qe(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function $e(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-ze(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&et(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function et(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ze(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function tt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ze(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function nt(e,t){var n=t&-t;return n=n&42?1:rt(n),(n&(e.suspendedLanes|t))===0?n:0}function rt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function it(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function at(){var e=j.p;return e===0?(e=window.event,e===void 0?32:mp(e.type)):e}function ot(e,t){var n=j.p;try{return j.p=e,t()}finally{j.p=n}}var st=Math.random().toString(36).slice(2),ct=`__reactFiber$`+st,lt=`__reactProps$`+st,ut=`__reactContainer$`+st,dt=`__reactEvents$`+st,ft=`__reactListeners$`+st,pt=`__reactHandles$`+st,mt=`__reactResources$`+st,ht=`__reactMarker$`+st;function gt(e){delete e[ct],delete e[lt],delete e[dt],delete e[ft],delete e[pt]}function _t(e){var t=e[ct];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ut]||n[ct]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=df(e);e!==null;){if(n=e[ct])return n;e=df(e)}return t}e=n,n=e.parentNode}return null}function vt(e){if(e=e[ct]||e[ut]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function yt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function bt(e){var t=e[mt];return t||=e[mt]={hoistableStyles:new Map,hoistableScripts:new Map},t}function xt(e){e[ht]=!0}var St=new Set,Ct={};function wt(e,t){Tt(e,t),Tt(e+`Capture`,t)}function Tt(e,t){for(Ct[e]=t,e=0;e<t.length;e++)St.add(t[e])}var Et=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),Dt={},Ot={};function kt(e){return we.call(Ot,e)?!0:we.call(Dt,e)?!1:Et.test(e)?Ot[e]=!0:(Dt[e]=!0,!1)}function At(e,t,n){if(kt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function jt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function Mt(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function Nt(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Pt(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Ft(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function It(e){if(!e._valueTracker){var t=Pt(e)?`checked`:`value`;e._valueTracker=Ft(e,t,``+e[t])}}function Lt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Pt(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Rt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var zt=/[\n"\\]/g;function Bt(e){return e.replace(zt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Vt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+Nt(t)):e.value!==``+Nt(t)&&(e.value=``+Nt(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Ut(e,o,Nt(n)):Ut(e,o,Nt(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+Nt(s):e.removeAttribute(`name`)}function Ht(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){It(e);return}n=n==null?``:``+Nt(n),t=t==null?n:``+Nt(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),It(e)}function Ut(e,t,n){t===`number`&&Rt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Wt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+Nt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Gt(e,t,n){if(t!=null&&(t=``+Nt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+Nt(n)}function Kt(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(ae(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=Nt(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),It(e)}function qt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jt=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function Yt(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||Jt.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function Xt(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Yt(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&Yt(e,o,t[o])}function Zt(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var Qt=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),$t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function en(e){return $t.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function tn(){}var nn=null;function rn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var an=null,on=null;function sn(e){var t=vt(e);if(t&&(e=t.stateNode)){var n=e[lt]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Bt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[lt]||null;if(!a)throw Error(i(90));Vt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Lt(r)}break a;case`textarea`:Gt(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Wt(e,!!n.multiple,t,!1)}}}var cn=!1;function ln(e,t,n){if(cn)return e(t,n);cn=!0;try{return e(t)}finally{if(cn=!1,(an!==null||on!==null)&&(vu(),an&&(t=an,e=on,on=an=null,sn(t),e)))for(t=0;t<e.length;t++)sn(e[t])}}function un(e,t){var n=e.stateNode;if(n===null)return null;var r=n[lt]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var dn=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),fn=!1;if(dn)try{var pn={};Object.defineProperty(pn,`passive`,{get:function(){fn=!0}}),window.addEventListener(`test`,pn,pn),window.removeEventListener(`test`,pn,pn)}catch{fn=!1}var mn=null,hn=null,gn=null;function _n(){if(gn)return gn;var e,t=hn,n=t.length,r,i=`value`in mn?mn.value:mn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return gn=i.slice(e,1<r?1-r:void 0)}function vn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function yn(){return!0}function bn(){return!1}function xn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?yn:bn,this.isPropagationStopped=bn,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=yn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=yn)},persist:function(){},isPersistent:yn}),t}var Sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cn=xn(Sn),wn=f({},Sn,{view:0,detail:0}),Tn=xn(wn),En,Dn,On,kn=f({},wn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==On&&(On&&e.type===`mousemove`?(En=e.screenX-On.screenX,Dn=e.screenY-On.screenY):Dn=En=0,On=e),En)},movementY:function(e){return`movementY`in e?e.movementY:Dn}}),An=xn(kn),jn=xn(f({},kn,{dataTransfer:0})),Mn=xn(f({},wn,{relatedTarget:0})),Nn=xn(f({},Sn,{animationName:0,elapsedTime:0,pseudoElement:0})),L=xn(f({},Sn,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}})),Pn=xn(f({},Sn,{data:0})),Fn={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},In={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Ln={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function Rn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ln[e])?!!t[e]:!1}function zn(){return Rn}var Bn=xn(f({},wn,{key:function(e){if(e.key){var t=Fn[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=vn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?In[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zn,charCode:function(e){return e.type===`keypress`?vn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?vn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}})),Vn=xn(f({},kn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Hn=xn(f({},wn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zn})),Un=xn(f({},Sn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Wn=xn(f({},kn,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Gn=xn(f({},Sn,{newState:0,oldState:0})),Kn=[9,13,27,32],qn=dn&&`CompositionEvent`in window,Jn=null;dn&&`documentMode`in document&&(Jn=document.documentMode);var Yn=dn&&`TextEvent`in window&&!Jn,Xn=dn&&(!qn||Jn&&8<Jn&&11>=Jn),Zn=` `,Qn=!1;function $n(e,t){switch(e){case`keyup`:return Kn.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function er(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var tr=!1;function nr(e,t){switch(e){case`compositionend`:return er(t);case`keypress`:return t.which===32?(Qn=!0,Zn):null;case`textInput`:return e=t.data,e===Zn&&Qn?null:e;default:return null}}function rr(e,t){if(tr)return e===`compositionend`||!qn&&$n(e,t)?(e=_n(),gn=hn=mn=null,tr=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return Xn&&t.locale!==`ko`?null:t.data;default:return null}}var ir={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!ir[e.type]:t===`textarea`}function or(e,t,n,r){an?on?on.push(r):on=[r]:an=r,t=Td(t,`onChange`),0<t.length&&(n=new Cn(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var sr=null,cr=null;function lr(e){vd(e,0)}function ur(e){if(Lt(yt(e)))return e}function dr(e,t){if(e===`change`)return t}var fr=!1;if(dn){var pr;if(dn){var mr=`oninput`in document;if(!mr){var hr=document.createElement(`div`);hr.setAttribute(`oninput`,`return;`),mr=typeof hr.oninput==`function`}pr=mr}else pr=!1;fr=pr&&(!document.documentMode||9<document.documentMode)}function gr(){sr&&(sr.detachEvent(`onpropertychange`,_r),cr=sr=null)}function _r(e){if(e.propertyName===`value`&&ur(cr)){var t=[];or(t,cr,e,rn(e)),ln(lr,t)}}function vr(e,t,n){e===`focusin`?(gr(),sr=t,cr=n,sr.attachEvent(`onpropertychange`,_r)):e===`focusout`&&gr()}function yr(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return ur(cr)}function br(e,t){if(e===`click`)return ur(t)}function xr(e,t){if(e===`input`||e===`change`)return ur(t)}function Sr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var Cr=typeof Object.is==`function`?Object.is:Sr;function wr(e,t){if(Cr(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!we.call(t,i)||!Cr(e[i],t[i]))return!1}return!0}function Tr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Er(e,t){var n=Tr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Tr(n)}}function Dr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Dr(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Or(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Rt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Rt(e.document)}return t}function kr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var Ar=dn&&`documentMode`in document&&11>=document.documentMode,jr=null,Mr=null,Nr=null,Pr=!1;function Fr(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pr||jr==null||jr!==Rt(r)||(r=jr,`selectionStart`in r&&kr(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nr&&wr(Nr,r)||(Nr=r,r=Td(Mr,`onSelect`),0<r.length&&(t=new Cn(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=jr)))}function Ir(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var Lr={animationend:Ir(`Animation`,`AnimationEnd`),animationiteration:Ir(`Animation`,`AnimationIteration`),animationstart:Ir(`Animation`,`AnimationStart`),transitionrun:Ir(`Transition`,`TransitionRun`),transitionstart:Ir(`Transition`,`TransitionStart`),transitioncancel:Ir(`Transition`,`TransitionCancel`),transitionend:Ir(`Transition`,`TransitionEnd`)},Rr={},zr={};dn&&(zr=document.createElement(`div`).style,`AnimationEvent`in window||(delete Lr.animationend.animation,delete Lr.animationiteration.animation,delete Lr.animationstart.animation),`TransitionEvent`in window||delete Lr.transitionend.transition);function Br(e){if(Rr[e])return Rr[e];if(!Lr[e])return e;var t=Lr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zr)return Rr[e]=t[n];return e}var Vr=Br(`animationend`),Hr=Br(`animationiteration`),Ur=Br(`animationstart`),Wr=Br(`transitionrun`),Gr=Br(`transitionstart`),Kr=Br(`transitioncancel`),qr=Br(`transitionend`),Jr=new Map,Yr=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);Yr.push(`scrollEnd`);function Xr(e,t){Jr.set(e,t),wt(t,[e])}var Zr=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},Qr=[],$r=0,ei=0;function ti(){for(var e=$r,t=ei=$r=0;t<e;){var n=Qr[t];Qr[t++]=null;var r=Qr[t];Qr[t++]=null;var i=Qr[t];Qr[t++]=null;var a=Qr[t];if(Qr[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&ai(n,i,a)}}function ni(e,t,n,r){Qr[$r++]=e,Qr[$r++]=t,Qr[$r++]=n,Qr[$r++]=r,ei|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function ri(e,t,n,r){return ni(e,t,n,r),oi(e)}function ii(e,t){return ni(e,null,null,t),oi(e)}function ai(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-ze(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function oi(e){if(50<lu)throw lu=0,uu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var si={};function ci(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(e,t,n,r){return new ci(e,t,n,r)}function ui(e){return e=e.prototype,!(!e||!e.isReactComponent)}function di(e,t){var n=e.alternate;return n===null?(n=li(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function fi(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function pi(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)ui(e)&&(s=1);else if(typeof e==`string`)s=Uf(e,n,ue.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case ee:return e=li(31,n,t,a),e.elementType=ee,e.lanes=o,e;case y:return mi(n.children,a,o,t);case b:s=8,a|=24;break;case x:return e=li(12,n,t,a|2),e.elementType=x,e.lanes=o,e;case T:return e=li(13,n,t,a),e.elementType=T,e.lanes=o,e;case E:return e=li(19,n,t,a),e.elementType=E,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case C:s=10;break a;case S:s=9;break a;case w:s=11;break a;case D:s=14;break a;case O:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=li(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function mi(e,t,n,r){return e=li(7,e,r,t),e.lanes=n,e}function hi(e,t,n){return e=li(6,e,null,t),e.lanes=n,e}function gi(e){var t=li(18,null,null,0);return t.stateNode=e,t}function _i(e,t,n){return t=li(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var vi=new WeakMap;function yi(e,t){if(typeof e==`object`&&e){var n=vi.get(e);return n===void 0?(t={value:e,source:t,stack:Ce(t)},vi.set(e,t),t):n}return{value:e,source:t,stack:Ce(t)}}var bi=[],xi=0,Si=null,Ci=0,wi=[],R=0,Ti=null,Ei=1,Di=``;function Oi(e,t){bi[xi++]=Ci,bi[xi++]=Si,Si=e,Ci=t}function ki(e,t,n){wi[R++]=Ei,wi[R++]=Di,wi[R++]=Ti,Ti=e;var r=Ei;e=Di;var i=32-ze(r)-1;r&=~(1<<i),n+=1;var a=32-ze(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ei=1<<32-ze(t)+i|n<<i|r,Di=a+e}else Ei=1<<a|n<<i|r,Di=e}function Ai(e){e.return!==null&&(Oi(e,1),ki(e,1,0))}function ji(e){for(;e===Si;)Si=bi[--xi],bi[xi]=null,Ci=bi[--xi],bi[xi]=null;for(;e===Ti;)Ti=wi[--R],wi[R]=null,Di=wi[--R],wi[R]=null,Ei=wi[--R],wi[R]=null}function Mi(e,t){wi[R++]=Ei,wi[R++]=Di,wi[R++]=Ti,Ei=t.id,Di=t.overflow,Ti=e}var Ni=null,Pi=null,z=!1,Fi=null,Ii=!1,Li=Error(i(519));function Ri(e){throw Wi(yi(Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),e)),Li}function zi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ct]=e,t[lt]=r,n){case`dialog`:$(`cancel`,t),$(`close`,t);break;case`iframe`:case`object`:case`embed`:$(`load`,t);break;case`video`:case`audio`:for(n=0;n<gd.length;n++)$(gd[n],t);break;case`source`:$(`error`,t);break;case`img`:case`image`:case`link`:$(`error`,t),$(`load`,t);break;case`details`:$(`toggle`,t);break;case`input`:$(`invalid`,t),Ht(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:$(`invalid`,t);break;case`textarea`:$(`invalid`,t),Kt(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||jd(t.textContent,n)?(r.popover!=null&&($(`beforetoggle`,t),$(`toggle`,t)),r.onScroll!=null&&$(`scroll`,t),r.onScrollEnd!=null&&$(`scrollend`,t),r.onClick!=null&&(t.onclick=tn),t=!0):t=!1,t||Ri(e,!0)}function Bi(e){for(Ni=e.return;Ni;)switch(Ni.tag){case 5:case 31:case 13:Ii=!1;return;case 27:case 3:Ii=!0;return;default:Ni=Ni.return}}function Vi(e){if(e!==Ni)return!1;if(!z)return Bi(e),z=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||Ud(e.type,e.memoizedProps)),n=!n),n&&Pi&&Ri(e),Bi(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Pi=uf(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Pi=uf(e)}else t===27?(t=Pi,Zd(e.type)?(e=lf,lf=null,Pi=e):Pi=t):Pi=Ni?cf(e.stateNode.nextSibling):null;return!0}function Hi(){Pi=Ni=null,z=!1}function Ui(){var e=Fi;return e!==null&&(Xl===null?Xl=e:Xl.push.apply(Xl,e),Fi=null),e}function Wi(e){Fi===null?Fi=[e]:Fi.push(e)}var Gi=M(null),Ki=null,qi=null;function Ji(e,t,n){N(Gi,t._currentValue),t._currentValue=n}function Yi(e){e._currentValue=Gi.current,le(Gi)}function Xi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function Zi(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Xi(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Xi(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function Qi(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;Cr(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===pe.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[Qf]:e.push(Qf))}a=a.return}e!==null&&Zi(t,e,n,r),t.flags|=262144}function $i(e){for(e=e.firstContext;e!==null;){if(!Cr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ea(e){Ki=e,qi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ta(e){return ra(Ki,e)}function na(e,t){return Ki===null&&ea(e),ra(e,t)}function ra(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},qi===null){if(e===null)throw Error(i(308));qi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else qi=qi.next=t;return n}var ia=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},aa=t.unstable_scheduleCallback,oa=t.unstable_NormalPriority,sa={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ca(){return{controller:new ia,data:new Map,refCount:0}}function la(e){e.refCount--,e.refCount===0&&aa(oa,function(){e.controller.abort()})}var ua=null,da=0,fa=0,pa=null;function ma(e,t){if(ua===null){var n=ua=[];da=0,fa=ud(),pa={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return da++,t.then(ha,ha),t}function ha(){if(--da===0&&ua!==null){pa!==null&&(pa.status=`fulfilled`);var e=ua;ua=null,fa=0,pa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ga(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var _a=A.S;A.S=function(e,t){$l=ke(),typeof t==`object`&&t&&typeof t.then==`function`&&ma(e,t),_a!==null&&_a(e,t)};var va=M(null);function ya(){var e=va.current;return e===null?zl.pooledCache:e}function ba(e,t){t===null?N(va,va.current):N(va,t.pool)}function xa(){var e=ya();return e===null?null:{parent:sa._currentValue,pool:e}}var Sa=Error(i(460)),Ca=Error(i(474)),wa=Error(i(542)),Ta={then:function(){}};function Ea(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Da(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(tn,tn),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,ja(e),e;default:if(typeof t.status==`string`)t.then(tn,tn);else{if(e=zl,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,ja(e),e}throw ka=t,Sa}}function Oa(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(ka=e,Sa):e}}var ka=null;function Aa(){if(ka===null)throw Error(i(459));var e=ka;return ka=null,e}function ja(e){if(e===Sa||e===wa)throw Error(i(483))}var Ma=null,Na=0;function Pa(e){var t=Na;return Na+=1,Ma===null&&(Ma=[]),Da(Ma,e,t)}function Fa(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Ia(e,t){throw t.$$typeof===m?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function La(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=di(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=hi(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===O&&Oa(i)===t.type)?(t=a(t,n.props),Fa(t,n),t.return=e,t):(t=pi(n.type,n.key,n.props,null,e.mode,r),Fa(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=_i(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=mi(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=hi(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case g:return n=pi(t.type,t.key,t.props,null,e.mode,n),Fa(n,t),n.return=e,n;case v:return t=_i(t,e.mode,n),t.return=e,t;case O:return t=Oa(t),f(e,t,n)}if(ae(t)||k(t))return t=mi(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,Pa(t),n);if(t.$$typeof===C)return f(e,na(e,t),n);Ia(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case g:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case O:return n=Oa(n),p(e,t,n,r)}if(ae(n)||k(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,Pa(n),r);if(n.$$typeof===C)return p(e,t,na(e,n),r);Ia(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case g:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case O:return r=Oa(r),m(e,t,n,r,i)}if(ae(r)||k(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,Pa(r),i);if(r.$$typeof===C)return m(e,t,n,na(t,r),i);Ia(t,r)}return null}function h(i,a,s,c){for(var l=null,u=null,d=a,h=a=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),z&&Oi(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(a=o(d,a,h),u===null?l=d:u.sibling=d,u=d);return z&&Oi(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),a=o(g,a,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),z&&Oi(i,h),l}function _(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,h=s,g=s=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(a,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(a,h),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(a,h),z&&Oi(a,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return z&&Oi(a,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),z&&Oi(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===y&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case g:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===y){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===O&&Oa(l)===r.type){n(e,r.sibling),c=a(r,o.props),Fa(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===y?(c=mi(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=pi(o.type,o.key,o.props,null,e.mode,c),Fa(c,o),c.return=e,e=c)}return s(e);case v:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=_i(o,e.mode,c),c.return=e,e=c}return s(e);case O:return o=Oa(o),b(e,r,o,c)}if(ae(o))return h(e,r,o,c);if(k(o)){if(l=k(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),_(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,Pa(o),c);if(o.$$typeof===C)return b(e,r,na(e,o),c);Ia(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=hi(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{Na=0;var i=b(e,t,n,r);return Ma=null,i}catch(t){if(t===Sa||t===wa)throw t;var a=li(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var Ra=La(!0),za=La(!1),Ba=!1;function Va(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ha(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ua(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Wa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,K&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=oi(e),ai(e,null,n),t}return ni(e,r,t,n),oi(e)}function Ga(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tt(e,n)}}function Ka(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var qa=!1;function Ja(){if(qa){var e=pa;if(e!==null)throw e}}function Ya(e,t,n,r){qa=!1;var i=e.updateQueue;Ba=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var p=s.lane&-536870913,m=p!==s.lane;if(m?(J&p)===p:(r&p)===p){p!==0&&p===fa&&(qa=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var h=e,g=s;p=t;var _=n;switch(g.tag){case 1:if(h=g.payload,typeof h==`function`){d=h.call(_,d,p);break a}d=h;break a;case 3:h.flags=h.flags&-65537|128;case 0:if(h=g.payload,p=typeof h==`function`?h.call(_,d,p):h,p==null)break a;d=f({},d,p);break a;case 2:Ba=!0}}p=s.callback,p!==null&&(e.flags|=64,m&&(e.flags|=8192),m=i.callbacks,m===null?i.callbacks=[p]:m.push(p))}else m={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=m,c=d):u=u.next=m,o|=p;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;m=s,s=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),X|=o,e.lanes=o,e.memoizedState=d}}function Xa(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function Za(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Xa(n[e],t)}var Qa=M(null),$a=M(0);function eo(e,t){e=Gl,N($a,e),N(Qa,t),Gl=e|t.baseLanes}function to(){N($a,Gl),N(Qa,Qa.current)}function no(){Gl=$a.current,le(Qa),le($a)}var ro=M(null),io=null;function ao(e){var t=e.alternate;N(uo,uo.current&1),N(ro,e),io===null&&(t===null||Qa.current!==null||t.memoizedState!==null)&&(io=e)}function oo(e){N(uo,uo.current),N(ro,e),io===null&&(io=e)}function so(e){e.tag===22?(N(uo,uo.current),N(ro,e),io===null&&(io=e)):co(e)}function co(){N(uo,uo.current),N(ro,ro.current)}function lo(e){le(ro),io===e&&(io=null),le(uo)}var uo=M(0);function fo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||af(n)||of(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var po=0,B=null,mo=null,V=null,ho=!1,go=!1,_o=!1,vo=0,yo=0,bo=null,xo=0;function So(){throw Error(i(321))}function Co(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Cr(e[n],t[n]))return!1;return!0}function wo(e,t,n,r,i,a){return po=a,B=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=e===null||e.memoizedState===null?Bs:Vs,_o=!1,a=n(r,i),_o=!1,go&&(a=Eo(t,n,r,i)),To(e),a}function To(e){A.H=zs;var t=mo!==null&&mo.next!==null;if(po=0,V=mo=B=null,ho=!1,yo=0,bo=null,t)throw Error(i(300));e===null||U||(e=e.dependencies,e!==null&&$i(e)&&(U=!0))}function Eo(e,t,n,r){B=e;var a=0;do{if(go&&(bo=null),yo=0,go=!1,25<=a)throw Error(i(301));if(a+=1,V=mo=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}A.H=Hs,o=t(n,r)}while(go);return o}function Do(){var e=A.H,t=e.useState()[0];return t=typeof t.then==`function`?Po(t):t,e=e.useState()[0],(mo===null?null:mo.memoizedState)!==e&&(B.flags|=1024),t}function Oo(){var e=vo!==0;return vo=0,e}function ko(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ao(e){if(ho){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ho=!1}po=0,V=mo=B=null,go=!1,yo=vo=0,bo=null}function jo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return V===null?B.memoizedState=V=e:V=V.next=e,V}function Mo(){if(mo===null){var e=B.alternate;e=e===null?null:e.memoizedState}else e=mo.next;var t=V===null?B.memoizedState:V.next;if(t!==null)V=t,mo=e;else{if(e===null)throw B.alternate===null?Error(i(467)):Error(i(310));mo=e,e={memoizedState:mo.memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},V===null?B.memoizedState=V=e:V=V.next=e}return V}function No(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Po(e){var t=yo;return yo+=1,bo===null&&(bo=[]),e=Da(bo,e,t),t=B,(V===null?t.memoizedState:V.next)===null&&(t=t.alternate,A.H=t===null||t.memoizedState===null?Bs:Vs),e}function Fo(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return Po(e);if(e.$$typeof===C)return ta(e)}throw Error(i(438,String(e)))}function Io(e){var t=null,n=B.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=B.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=No(),B.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=te;return t.index++,n}function Lo(e,t){return typeof t==`function`?t(e):t}function Ro(e){return zo(Mo(),mo,e)}function zo(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(po&f)===f:(J&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===fa&&(d=!0);else if((po&p)===p){u=u.next,p===fa&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,B.lanes|=p,X|=p;f=u.action,_o&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,B.lanes|=f,X|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!Cr(o,e.memoizedState)&&(U=!0,d&&(n=pa,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Bo(e){var t=Mo(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);Cr(o,t.memoizedState)||(U=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Vo(e,t,n){var r=B,a=Mo(),o=z;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!Cr((mo||a).memoizedState,n);if(s&&(a.memoizedState=n,U=!0),a=a.queue,fs(Wo.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||V!==null&&V.memoizedState.tag&1){if(r.flags|=2048,ss(9,{destroy:void 0},Uo.bind(null,r,a,n,t),null),zl===null)throw Error(i(349));o||po&127||Ho(r,t,n)}return n}function Ho(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=B.updateQueue,t===null?(t=No(),B.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Uo(e,t,n,r){t.value=n,t.getSnapshot=r,Go(t)&&Ko(e)}function Wo(e,t,n){return n(function(){Go(t)&&Ko(e)})}function Go(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Cr(e,n)}catch{return!0}}function Ko(e){var t=ii(e,2);t!==null&&pu(t,e,2)}function qo(e){var t=jo();if(typeof e==`function`){var n=e;if(e=n(),_o){I(!0);try{n()}finally{I(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:e},t}function Jo(e,t,n,r){return e.baseState=n,zo(e,mo,typeof r==`function`?r:Lo)}function Yo(e,t,n,r,a){if(Is(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};A.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,Xo(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Xo(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=A.T,o={};A.T=o;try{var s=n(i,r),c=A.S;c!==null&&c(o,s),Zo(e,t,s)}catch(n){$o(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),A.T=a}}else try{a=n(i,r),Zo(e,t,a)}catch(n){$o(e,t,n)}}function Zo(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){Qo(e,t,n)},function(n){return $o(e,t,n)}):Qo(e,t,n)}function Qo(e,t,n){t.status=`fulfilled`,t.value=n,es(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Xo(e,n)))}function $o(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,es(t),t=t.next;while(t!==r)}e.action=null}function es(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ts(e,t){return t}function ns(e,t){if(z){var n=zl.formState;if(n!==null){a:{var r=B;if(z){if(Pi){b:{for(var i=Pi,a=Ii;i.nodeType!==8;){if(!a){i=null;break b}if(i=cf(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Pi=cf(i.nextSibling),r=i.data===`F!`;break a}}Ri(r)}r=!1}r&&(t=n[0])}}return n=jo(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:t},n.queue=r,n=Ns.bind(null,B,r),r.dispatch=n,r=qo(!1),a=Fs.bind(null,B,!1,r.queue),r=jo(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=Yo.bind(null,B,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function rs(e){return is(Mo(),mo,e)}function is(e,t,n){if(t=zo(e,t,ts)[0],e=Ro(Lo)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=Po(t)}catch(e){throw e===Sa?wa:e}else r=t;t=Mo();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(B.flags|=2048,ss(9,{destroy:void 0},as.bind(null,i,n),null)),[r,a,e]}function as(e,t){e.action=t}function os(e){var t=Mo(),n=mo;if(n!==null)return is(t,n,e);Mo(),t=t.memoizedState,n=Mo();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ss(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=B.updateQueue,t===null&&(t=No(),B.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function cs(){return Mo().memoizedState}function ls(e,t,n,r){var i=jo();B.flags|=e,i.memoizedState=ss(1|t,{destroy:void 0},n,r===void 0?null:r)}function us(e,t,n,r){var i=Mo();r=r===void 0?null:r;var a=i.memoizedState.inst;mo!==null&&r!==null&&Co(r,mo.memoizedState.deps)?i.memoizedState=ss(t,a,n,r):(B.flags|=e,i.memoizedState=ss(1|t,a,n,r))}function ds(e,t){ls(8390656,8,e,t)}function fs(e,t){us(2048,8,e,t)}function ps(e){B.flags|=4;var t=B.updateQueue;if(t===null)t=No(),B.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function ms(e){var t=Mo().memoizedState;return ps({ref:t,nextImpl:e}),function(){if(K&2)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function hs(e,t){return us(4,2,e,t)}function gs(e,t){return us(4,4,e,t)}function _s(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vs(e,t,n){n=n==null?null:n.concat([e]),us(4,4,_s.bind(null,t,e),n)}function ys(){}function bs(e,t){var n=Mo();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&Co(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xs(e,t){var n=Mo();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&Co(t,r[1]))return r[0];if(r=e(),_o){I(!0);try{e()}finally{I(!1)}}return n.memoizedState=[r,t],r}function Ss(e,t,n){return n===void 0||po&1073741824&&!(J&261930)?e.memoizedState=t:(e.memoizedState=n,e=fu(),B.lanes|=e,X|=e,n)}function H(e,t,n,r){return Cr(n,t)?n:Qa.current===null?!(po&42)||po&1073741824&&!(J&261930)?(U=!0,e.memoizedState=n):(e=fu(),B.lanes|=e,X|=e,t):(e=Ss(e,n,r),Cr(e,t)||(U=!0),e)}function Cs(e,t,n,r,i){var a=j.p;j.p=a!==0&&8>a?a:8;var o=A.T,s={};A.T=s,Fs(e,!1,t,n);try{var c=i(),l=A.S;l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`?Ps(e,t,ga(c,r),du(e)):Ps(e,t,r,du(e))}catch(n){Ps(e,t,{then:function(){},status:`rejected`,reason:n},du())}finally{j.p=a,o!==null&&s.types!==null&&(o.types=s.types),A.T=o}}function ws(){}function Ts(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=Es(e).queue;Cs(e,a,t,oe,n===null?ws:function(){return Ds(e),n(r)})}function Es(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:oe},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ds(e){var t=Es(e);t.next===null&&(t=e.alternate.memoizedState),Ps(e,t.next.queue,{},du())}function Os(){return ta(Qf)}function ks(){return Mo().memoizedState}function As(){return Mo().memoizedState}function js(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=du();e=Ua(n);var r=Wa(t,e,n);r!==null&&(pu(r,t,n),Ga(r,t,n)),t={cache:ca()},e.payload=t;return}t=t.return}}function Ms(e,t,n){var r=du();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Is(e)?Ls(t,n):(n=ri(e,t,n,r),n!==null&&(pu(n,e,r),Rs(n,t,r)))}function Ns(e,t,n){Ps(e,t,n,du())}function Ps(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Is(e))Ls(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Cr(s,o))return ni(e,t,i,0),zl===null&&ti(),!1}catch{}if(n=ri(e,t,i,r),n!==null)return pu(n,e,r),Rs(n,t,r),!0}return!1}function Fs(e,t,n,r){if(r={lane:2,revertLane:ud(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Is(e)){if(t)throw Error(i(479))}else t=ri(e,n,r,2),t!==null&&pu(t,e,2)}function Is(e){var t=e.alternate;return e===B||t!==null&&t===B}function Ls(e,t){go=ho=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Rs(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tt(e,n)}}var zs={readContext:ta,use:Fo,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useLayoutEffect:So,useInsertionEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useSyncExternalStore:So,useId:So,useHostTransitionStatus:So,useFormState:So,useActionState:So,useOptimistic:So,useMemoCache:So,useCacheRefresh:So};zs.useEffectEvent=So;var Bs={readContext:ta,use:Fo,useCallback:function(e,t){return jo().memoizedState=[e,t===void 0?null:t],e},useContext:ta,useEffect:ds,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),ls(4194308,4,_s.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ls(4194308,4,e,t)},useInsertionEffect:function(e,t){ls(4,2,e,t)},useMemo:function(e,t){var n=jo();t=t===void 0?null:t;var r=e();if(_o){I(!0);try{e()}finally{I(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=jo();if(n!==void 0){var i=n(t);if(_o){I(!0);try{n(t)}finally{I(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Ms.bind(null,B,e),[r.memoizedState,e]},useRef:function(e){var t=jo();return e={current:e},t.memoizedState=e},useState:function(e){e=qo(e);var t=e.queue,n=Ns.bind(null,B,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ys,useDeferredValue:function(e,t){return Ss(jo(),e,t)},useTransition:function(){var e=qo(!1);return e=Cs.bind(null,B,e.queue,!0,!1),jo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=B,a=jo();if(z){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),zl===null)throw Error(i(349));J&127||Ho(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,ds(Wo.bind(null,r,o,e),[e]),r.flags|=2048,ss(9,{destroy:void 0},Uo.bind(null,r,o,n,t),null),n},useId:function(){var e=jo(),t=zl.identifierPrefix;if(z){var n=Di,r=Ei;n=(r&~(1<<32-ze(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=vo++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=xo++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:Os,useFormState:ns,useActionState:ns,useOptimistic:function(e){var t=jo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Fs.bind(null,B,!0,n),n.dispatch=t,[e,t]},useMemoCache:Io,useCacheRefresh:function(){return jo().memoizedState=js.bind(null,B)},useEffectEvent:function(e){var t=jo(),n={impl:e};return t.memoizedState=n,function(){if(K&2)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},Vs={readContext:ta,use:Fo,useCallback:bs,useContext:ta,useEffect:fs,useImperativeHandle:vs,useInsertionEffect:hs,useLayoutEffect:gs,useMemo:xs,useReducer:Ro,useRef:cs,useState:function(){return Ro(Lo)},useDebugValue:ys,useDeferredValue:function(e,t){return H(Mo(),mo.memoizedState,e,t)},useTransition:function(){var e=Ro(Lo)[0],t=Mo().memoizedState;return[typeof e==`boolean`?e:Po(e),t]},useSyncExternalStore:Vo,useId:ks,useHostTransitionStatus:Os,useFormState:rs,useActionState:rs,useOptimistic:function(e,t){return Jo(Mo(),mo,e,t)},useMemoCache:Io,useCacheRefresh:As};Vs.useEffectEvent=ms;var Hs={readContext:ta,use:Fo,useCallback:bs,useContext:ta,useEffect:fs,useImperativeHandle:vs,useInsertionEffect:hs,useLayoutEffect:gs,useMemo:xs,useReducer:Bo,useRef:cs,useState:function(){return Bo(Lo)},useDebugValue:ys,useDeferredValue:function(e,t){var n=Mo();return mo===null?Ss(n,e,t):H(n,mo.memoizedState,e,t)},useTransition:function(){var e=Bo(Lo)[0],t=Mo().memoizedState;return[typeof e==`boolean`?e:Po(e),t]},useSyncExternalStore:Vo,useId:ks,useHostTransitionStatus:Os,useFormState:os,useActionState:os,useOptimistic:function(e,t){var n=Mo();return mo===null?(n.baseState=e,[e,n.queue.dispatch]):Jo(n,mo,e,t)},useMemoCache:Io,useCacheRefresh:As};Hs.useEffectEvent=ms;function Us(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:f({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ws={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=du(),i=Ua(r);i.payload=t,n!=null&&(i.callback=n),t=Wa(e,i,r),t!==null&&(pu(t,e,r),Ga(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=du(),i=Ua(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Wa(e,i,r),t!==null&&(pu(t,e,r),Ga(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=du(),r=Ua(n);r.tag=2,t!=null&&(r.callback=t),t=Wa(e,r,n),t!==null&&(pu(t,e,n),Ga(t,e,n))}};function Gs(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!wr(n,r)||!wr(i,a):!0}function Ks(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ws.enqueueReplaceState(t,t.state,null)}function qs(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=f({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function Js(e){Zr(e)}function Ys(e){console.error(e)}function Xs(e){Zr(e)}function Zs(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function Qs(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function $s(e,t,n){return n=Ua(n),n.tag=3,n.payload={element:null},n.callback=function(){Zs(e,t)},n}function ec(e){return e=Ua(e),e.tag=3,e}function tc(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){Qs(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){Qs(t,n,r),typeof i!=`function`&&(nu===null?nu=new Set([this]):nu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function nc(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&Qi(t,n,a,!0),n=ro.current,n!==null){switch(n.tag){case 31:case 13:return io===null?Tu():n.alternate===null&&Y===0&&(Y=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Ta?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),Wu(e,r,a)),!1;case 22:return n.flags|=65536,r===Ta?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),Wu(e,r,a)),!1}throw Error(i(435,n.tag))}return Wu(e,r,a),Tu(),!1}if(z)return t=ro.current,t===null?(r!==Li&&(t=Error(i(423),{cause:r}),Wi(yi(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=yi(r,n),a=$s(e.stateNode,r,a),Ka(e,a),Y!==4&&(Y=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==Li&&(e=Error(i(422),{cause:r}),Wi(yi(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=yi(o,n),Yl===null?Yl=[o]:Yl.push(o),Y!==4&&(Y=2),t===null)return!0;r=yi(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=$s(n.stateNode,r,e),Ka(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(nu===null||!nu.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=ec(a),tc(a,e,n,r),Ka(n,a),!1}n=n.return}while(n!==null);return!1}var rc=Error(i(461)),U=!1;function ic(e,t,n,r){t.child=e===null?za(t,null,n,r):Ra(t,e.child,n,r)}function ac(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return ea(t),r=wo(e,t,n,o,a,i),s=Oo(),e!==null&&!U?(ko(e,t,i),kc(e,t,i)):(z&&s&&Ai(t),t.flags|=1,ic(e,t,r,i),t.child)}function oc(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!ui(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,sc(e,t,a,r,i)):(e=pi(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Ac(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?wr:n,n(o,r)&&e.ref===t.ref)return kc(e,t,i)}return t.flags|=1,e=di(a,r),e.ref=t.ref,e.return=t,t.child=e}function sc(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(wr(a,r)&&e.ref===t.ref)if(U=!1,t.pendingProps=r=a,Ac(e,i))e.flags&131072&&(U=!0);else return t.lanes=e.lanes,kc(e,t,i)}return hc(e,t,n,r,i)}function cc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return uc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ba(t,a===null?null:a.cachePool),a===null?to():eo(t,a),so(t);else return r=t.lanes=536870912,uc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&ba(t,null),to(),co(t)):(ba(t,a.cachePool),eo(t,a),co(t),t.memoizedState=null);return ic(e,t,i,n),t.child}function lc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function uc(e,t,n,r,i){var a=ya();return a=a===null?null:{parent:sa._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&ba(t,null),to(),so(t),e!==null&&Qi(e,t,r,!0),t.childLanes=i,null}function dc(e,t){return t=wc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function fc(e,t,n){return Ra(t,e.child,null,n),e=dc(t,t.pendingProps),e.flags|=2,lo(t),t.memoizedState=null,e}function pc(e,t,n){var r=t.pendingProps,a=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(z){if(r.mode===`hidden`)return e=dc(t,r),t.lanes=536870912,lc(null,e);if(oo(t),(e=Pi)?(e=rf(e,Ii),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ti===null?null:{id:Ei,overflow:Di},retryLane:536870912,hydrationErrors:null},n=gi(e),n.return=t,t.child=n,Ni=t,Pi=null)):e=null,e===null)throw Ri(t);return t.lanes=536870912,null}return dc(t,r)}var o=e.memoizedState;if(o!==null){var s=o.dehydrated;if(oo(t),a)if(t.flags&256)t.flags&=-257,t=fc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(U||Qi(e,t,n,!1),a=(n&e.childLanes)!==0,U||a){if(r=zl,r!==null&&(s=nt(r,n),s!==0&&s!==o.retryLane))throw o.retryLane=s,ii(e,s),pu(r,e,s),rc;Tu(),t=fc(e,t,n)}else e=o.treeContext,Pi=cf(s.nextSibling),Ni=t,z=!0,Fi=null,Ii=!1,e!==null&&Mi(t,e),t=dc(t,r),t.flags|=4096;return t}return e=di(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function mc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function hc(e,t,n,r,i){return ea(t),n=wo(e,t,n,r,void 0,i),r=Oo(),e!==null&&!U?(ko(e,t,i),kc(e,t,i)):(z&&r&&Ai(t),t.flags|=1,ic(e,t,n,i),t.child)}function gc(e,t,n,r,i,a){return ea(t),t.updateQueue=null,n=Eo(t,r,n,i),To(e),r=Oo(),e!==null&&!U?(ko(e,t,a),kc(e,t,a)):(z&&r&&Ai(t),t.flags|=1,ic(e,t,n,a),t.child)}function _c(e,t,n,r,i){if(ea(t),t.stateNode===null){var a=si,o=n.contextType;typeof o==`object`&&o&&(a=ta(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ws,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Va(t),o=n.contextType,a.context=typeof o==`object`&&o?ta(o):si,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(Us(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&Ws.enqueueReplaceState(a,a.state,null),Ya(t,r,a,i),Ja(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=qs(n,s);a.props=c;var l=a.context,u=n.contextType;o=si,typeof u==`object`&&u&&(o=ta(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&Ks(t,a,r,o),Ba=!1;var f=t.memoizedState;a.state=f,Ya(t,r,a,i),Ja(),l=t.memoizedState,s||f!==l||Ba?(typeof d==`function`&&(Us(t,n,d,r),l=t.memoizedState),(c=Ba||Gs(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ha(e,t),o=t.memoizedProps,u=qs(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=si,typeof l==`object`&&l&&(c=ta(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&Ks(t,a,r,c),Ba=!1,f=t.memoizedState,a.state=f,Ya(t,r,a,i),Ja();var p=t.memoizedState;o!==d||f!==p||Ba||e!==null&&e.dependencies!==null&&$i(e.dependencies)?(typeof s==`function`&&(Us(t,n,s,r),p=t.memoizedState),(u=Ba||Gs(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&$i(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,mc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Ra(t,e.child,null,i),t.child=Ra(t,null,n,i)):ic(e,t,n,i),t.memoizedState=a.state,e=t.child):e=kc(e,t,i),e}function vc(e,t,n,r){return Hi(),t.flags|=256,ic(e,t,n,r),t.child}var yc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bc(e){return{baseLanes:e,cachePool:xa()}}function xc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=ql),e}function Sc(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(uo.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(z){if(a?ao(t):co(t),(e=Pi)?(e=rf(e,Ii),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ti===null?null:{id:Ei,overflow:Di},retryLane:536870912,hydrationErrors:null},n=gi(e),n.return=t,t.child=n,Ni=t,Pi=null)):e=null,e===null)throw Ri(t);return of(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,a?(co(t),a=t.mode,c=wc({mode:`hidden`,children:c},a),r=mi(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=bc(n),r.childLanes=xc(e,s,n),t.memoizedState=yc,lc(null,r)):(ao(t),Cc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?(ao(t),t.flags&=-257,t=Tc(e,t,n)):t.memoizedState===null?(co(t),c=r.fallback,a=t.mode,r=wc({mode:`visible`,children:r.children},a),c=mi(c,a,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,Ra(t,e.child,null,n),r=t.child,r.memoizedState=bc(n),r.childLanes=xc(e,s,n),t.memoizedState=yc,t=lc(null,r)):(co(t),t.child=e.child,t.flags|=128,t=null);else if(ao(t),of(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,Wi({value:r,source:null,stack:null}),t=Tc(e,t,n)}else if(U||Qi(e,t,n,!1),s=(n&e.childLanes)!==0,U||s){if(s=zl,s!==null&&(r=nt(s,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,ii(e,r),pu(s,e,r),rc;af(c)||Tu(),t=Tc(e,t,n)}else af(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Pi=cf(c.nextSibling),Ni=t,z=!0,Fi=null,Ii=!1,e!==null&&Mi(t,e),t=Cc(t,r.children),t.flags|=4096);return t}return a?(co(t),c=r.fallback,a=t.mode,l=e.child,u=l.sibling,r=di(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=mi(c,a,n,null),c.flags|=2):c=di(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,lc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=bc(n):(a=c.cachePool,a===null?a=xa():(l=sa._currentValue,a=a.parent===l?a:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:a}),r.memoizedState=c,r.childLanes=xc(e,s,n),t.memoizedState=yc,lc(e.child,r)):(ao(t),n=e.child,e=n.sibling,n=di(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Cc(e,t){return t=wc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function wc(e,t){return e=li(22,e,null,t),e.lanes=0,e}function Tc(e,t,n){return Ra(t,e.child,null,n),e=Cc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ec(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Xi(e.return,t,n)}function Dc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function Oc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=uo.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,N(uo,o),ic(e,t,r,n),r=z?Ci:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ec(e,n,t);else if(e.tag===19)Ec(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&fo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Dc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&fo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Dc(t,!0,n,null,a,r);break;case`together`:Dc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function kc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),X|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Qi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=di(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=di(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ac(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&$i(e))):!0}function jc(e,t,n){switch(t.tag){case 3:me(t,t.stateNode.containerInfo),Ji(t,sa,e.memoizedState.cache),Hi();break;case 27:case 5:ge(t);break;case 4:me(t,t.stateNode.containerInfo);break;case 10:Ji(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,oo(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(ao(t),e=kc(e,t,n),e===null?null:e.sibling):Sc(e,t,n):(ao(t),t.flags|=128,null);ao(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(Qi(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return Oc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),N(uo,uo.current),r)break;return null;case 22:return t.lanes=0,cc(e,t,n,t.pendingProps);case 24:Ji(t,sa,e.memoizedState.cache)}return kc(e,t,n)}function Mc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)U=!0;else{if(!Ac(e,n)&&!(t.flags&128))return U=!1,jc(e,t,n);U=!!(e.flags&131072)}else U=!1,z&&t.flags&1048576&&ki(t,Ci,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Oa(t.elementType),t.type=e,typeof e==`function`)ui(e)?(r=qs(e,r),t.tag=1,t=_c(null,t,e,r,n)):(t.tag=0,t=hc(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===w){t.tag=11,t=ac(null,t,e,r,n);break a}else if(a===D){t.tag=14,t=oc(null,t,e,r,n);break a}}throw t=ie(e)||e,Error(i(306,t,``))}}return t;case 0:return hc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=qs(r,t.pendingProps),_c(e,t,r,a,n);case 3:a:{if(me(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,Ha(e,t),Ya(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Ji(t,sa,r),r!==o.cache&&Zi(t,[sa],n,!0),Ja(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=vc(e,t,r,n);break a}else if(r!==a){a=yi(Error(i(424)),t),Wi(a),t=vc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Pi=cf(e.firstChild),Ni=t,z=!0,Fi=null,Ii=!0,n=za(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Hi(),r===a){t=kc(e,t,n);break a}ic(e,t,r,n)}t=t.child}return t;case 26:return mc(e,t),e===null?(n=kf(t.type,null,t.pendingProps,null))?t.memoizedState=n:z||(n=t.type,e=t.pendingProps,r=Bd(fe.current).createElement(n),r[ct]=t,r[lt]=e,Pd(r,n,e),xt(r),t.stateNode=r):t.memoizedState=kf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ge(t),e===null&&z&&(r=t.stateNode=ff(t.type,t.pendingProps,fe.current),Ni=t,Ii=!0,a=Pi,Zd(t.type)?(lf=a,Pi=cf(r.firstChild)):Pi=a),ic(e,t,t.pendingProps.children,n),mc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&z&&((a=r=Pi)&&(r=tf(r,t.type,t.pendingProps,Ii),r===null?a=!1:(t.stateNode=r,Ni=t,Pi=cf(r.firstChild),Ii=!1,a=!0)),a||Ri(t)),ge(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,Ud(a,o)?r=null:s!==null&&Ud(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=wo(e,t,Do,null,null,n),Qf._currentValue=a),mc(e,t),ic(e,t,r,n),t.child;case 6:return e===null&&z&&((e=n=Pi)&&(n=nf(n,t.pendingProps,Ii),n===null?e=!1:(t.stateNode=n,Ni=t,Pi=null,e=!0)),e||Ri(t)),null;case 13:return Sc(e,t,n);case 4:return me(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ra(t,null,r,n):ic(e,t,r,n),t.child;case 11:return ac(e,t,t.type,t.pendingProps,n);case 7:return ic(e,t,t.pendingProps,n),t.child;case 8:return ic(e,t,t.pendingProps.children,n),t.child;case 12:return ic(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ji(t,t.type,r.value),ic(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,ea(t),a=ta(a),r=r(a),t.flags|=1,ic(e,t,r,n),t.child;case 14:return oc(e,t,t.type,t.pendingProps,n);case 15:return sc(e,t,t.type,t.pendingProps,n);case 19:return Oc(e,t,n);case 31:return pc(e,t,n);case 22:return cc(e,t,n,t.pendingProps);case 24:return ea(t),r=ta(sa),e===null?(a=ya(),a===null&&(a=zl,o=ca(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},Va(t),Ji(t,sa,a)):((e.lanes&n)!==0&&(Ha(e,t),Ya(t,null,null,n),Ja()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,Ji(t,sa,r),r!==a.cache&&Zi(t,[sa],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),Ji(t,sa,r))),ic(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Nc(e){e.flags|=4}function Pc(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Su())e.flags|=8192;else throw ka=Ta,Ca}else e.flags&=-16777217}function Fc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Wf(t))if(Su())e.flags|=8192;else throw ka=Ta,Ca}function Ic(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:Xe(),e.lanes|=t,Jl|=t)}function Lc(e,t){if(!z)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Rc(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function zc(e,t,n){var r=t.pendingProps;switch(ji(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rc(t),null;case 1:return Rc(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Yi(sa),he(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(Vi(t)?Nc(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ui())),Rc(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(Nc(t),o===null?(Rc(t),Pc(t,a,null,r,n)):(Rc(t),Fc(t,o))):o?o===e.memoizedState?(Rc(t),t.flags&=-16777217):(Nc(t),Rc(t),Fc(t,o)):(e=e.memoizedProps,e!==r&&Nc(t),Rc(t),Pc(t,a,e,r,n)),null;case 27:if(_e(t),n=fe.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Nc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Rc(t),null}e=ue.current,Vi(t)?zi(t,e):(e=ff(a,r,n),t.stateNode=e,Nc(t))}return Rc(t),null;case 5:if(_e(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Nc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Rc(t),null}if(o=ue.current,Vi(t))zi(t,o);else{var s=Bd(fe.current);switch(o){case 1:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case 2:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;default:switch(a){case`svg`:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case`math`:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;case`script`:o=s.createElement(`div`),o.innerHTML=`<script><\/script>`,o=o.removeChild(o.firstChild);break;case`select`:o=typeof r.is==`string`?s.createElement(`select`,{is:r.is}):s.createElement(`select`),r.multiple?o.multiple=!0:r.size&&(o.size=r.size);break;default:o=typeof r.is==`string`?s.createElement(a,{is:r.is}):s.createElement(a)}}o[ct]=t,o[lt]=r;a:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break a;for(;s.sibling===null;){if(s.return===null||s.return===t)break a;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=o;a:switch(Pd(o,a,r),a){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&Nc(t)}}return Rc(t),Pc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Nc(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=fe.current,Vi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=Ni,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[ct]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||jd(e.nodeValue,n)),e||Ri(t,!0)}else e=Bd(e).createTextNode(r),e[ct]=t,t.stateNode=e}return Rc(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Vi(t),n!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(557));e[ct]=t}else Hi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Rc(t),e=!1}else n=Ui(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(lo(t),t):(lo(t),null);if(t.flags&128)throw Error(i(558))}return Rc(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Vi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[ct]=t}else Hi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Rc(t),a=!1}else a=Ui(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(lo(t),t):(lo(t),null)}return lo(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Ic(t,t.updateQueue),Rc(t),null);case 4:return he(),e===null&&xd(t.stateNode.containerInfo),Rc(t),null;case 10:return Yi(t.type),Rc(t),null;case 19:if(le(uo),r=t.memoizedState,r===null)return Rc(t),null;if(a=(t.flags&128)!=0,o=r.rendering,o===null)if(a)Lc(r,!1);else{if(Y!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=fo(e),o!==null){for(t.flags|=128,Lc(r,!1),e=o.updateQueue,t.updateQueue=e,Ic(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)fi(n,e),n=n.sibling;return N(uo,uo.current&1|2),z&&Oi(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&ke()>eu&&(t.flags|=128,a=!0,Lc(r,!1),t.lanes=4194304)}else{if(!a)if(e=fo(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Ic(t,e),Lc(r,!0),r.tail===null&&r.tailMode===`hidden`&&!o.alternate&&!z)return Rc(t),null}else 2*ke()-r.renderingStartTime>eu&&n!==536870912&&(t.flags|=128,a=!0,Lc(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e===null?t.child=o:e.sibling=o,r.last=o)}return r.tail===null?(Rc(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ke(),e.sibling=null,n=uo.current,N(uo,a?n&1|2:n&1),z&&Oi(t,r.treeForkCount),e);case 22:case 23:return lo(t),no(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(Rc(t),t.subtreeFlags&6&&(t.flags|=8192)):Rc(t),n=t.updateQueue,n!==null&&Ic(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&le(va),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Yi(sa),Rc(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Bc(e,t){switch(ji(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yi(sa),he(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return _e(t),null;case 31:if(t.memoizedState!==null){if(lo(t),t.alternate===null)throw Error(i(340));Hi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(lo(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Hi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return le(uo),null;case 4:return he(),null;case 10:return Yi(t.type),null;case 22:case 23:return lo(t),no(),e!==null&&le(va),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Yi(sa),null;case 25:return null;default:return null}}function Vc(e,t){switch(ji(t),t.tag){case 3:Yi(sa),he();break;case 26:case 27:case 5:_e(t);break;case 4:he();break;case 31:t.memoizedState!==null&&lo(t);break;case 13:lo(t);break;case 19:le(uo);break;case 10:Yi(t.type);break;case 22:case 23:lo(t),no(),e!==null&&le(va);break;case 24:Yi(sa)}}function Hc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){Uu(t,t.return,e)}}function Uc(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){Uu(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){Uu(t,t.return,e)}}function Wc(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Za(t,n)}catch(t){Uu(e,e.return,t)}}}function Gc(e,t,n){n.props=qs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){Uu(e,t,n)}}function Kc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){Uu(e,t,n)}}function qc(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){Uu(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){Uu(e,t,n)}else n.current=null}function Jc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){Uu(e,e.return,t)}}function Yc(e,t,n){try{var r=e.stateNode;Fd(r,e.type,n,t),r[lt]=t}catch(t){Uu(e,e.return,t)}}function Xc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Zd(e.type)||e.tag===4}function Zc(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||Xc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Zd(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=tn));else if(r!==4&&(r===27&&Zd(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Qc(e,t,n),e=e.sibling;e!==null;)Qc(e,t,n),e=e.sibling}function $c(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&Zd(e.type)&&(n=e.stateNode),e=e.child,e!==null))for($c(e,t,n),e=e.sibling;e!==null;)$c(e,t,n),e=e.sibling}function el(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Pd(t,r,n),t[ct]=e,t[lt]=n}catch(t){Uu(e,e.return,t)}}var tl=!1,nl=!1,rl=!1,il=typeof WeakSet==`function`?WeakSet:Set,al=null;function ol(e,t){if(e=e.containerInfo,Rd=sp,e=Or(e),kr(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(zd={focusedElem:e,selectionRange:n},sp=!1,al=t;al!==null;)if(t=al,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,al=e;else for(;al!==null;){switch(t=al,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=qs(n.type,a);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){Uu(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)ef(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:ef(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,al=e;break}al=t.return}}function sl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Sl(e,n),r&4&&Hc(5,n);break;case 1:if(Sl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){Uu(n,n.return,e)}else{var i=qs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){Uu(n,n.return,e)}}r&64&&Wc(n),r&512&&Kc(n,n.return);break;case 3:if(Sl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Za(e,t)}catch(e){Uu(n,n.return,e)}}break;case 27:t===null&&r&4&&el(n);case 26:case 5:Sl(e,n),t===null&&r&4&&Jc(n),r&512&&Kc(n,n.return);break;case 12:Sl(e,n);break;case 31:Sl(e,n),r&4&&pl(e,n);break;case 13:Sl(e,n),r&4&&ml(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=qu.bind(null,n),sf(e,n))));break;case 22:if(r=n.memoizedState!==null||tl,!r){t=t!==null&&t.memoizedState!==null||nl,i=tl;var a=nl;tl=r,(nl=t)&&!a?wl(e,n,(n.subtreeFlags&8772)!=0):Sl(e,n),tl=i,nl=a}break;case 30:break;default:Sl(e,n)}}function cl(e){var t=e.alternate;t!==null&&(e.alternate=null,cl(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&gt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ll=null,ul=!1;function dl(e,t,n){for(n=n.child;n!==null;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(Re&&typeof Re.onCommitFiberUnmount==`function`)try{Re.onCommitFiberUnmount(F,n)}catch{}switch(n.tag){case 26:nl||qc(n,t),dl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:nl||qc(n,t);var r=ll,i=ul;Zd(n.type)&&(ll=n.stateNode,ul=!1),dl(e,t,n),pf(n.stateNode),ll=r,ul=i;break;case 5:nl||qc(n,t);case 6:if(r=ll,i=ul,ll=null,dl(e,t,n),ll=r,ul=i,ll!==null)if(ul)try{(ll.nodeType===9?ll.body:ll.nodeName===`HTML`?ll.ownerDocument.body:ll).removeChild(n.stateNode)}catch(e){Uu(n,t,e)}else try{ll.removeChild(n.stateNode)}catch(e){Uu(n,t,e)}break;case 18:ll!==null&&(ul?(e=ll,Qd(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Np(e)):Qd(ll,n.stateNode));break;case 4:r=ll,i=ul,ll=n.stateNode.containerInfo,ul=!0,dl(e,t,n),ll=r,ul=i;break;case 0:case 11:case 14:case 15:Uc(2,n,t),nl||Uc(4,n,t),dl(e,t,n);break;case 1:nl||(qc(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&Gc(n,t,r)),dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:nl=(r=nl)||n.memoizedState!==null,dl(e,t,n),nl=r;break;default:dl(e,t,n)}}function pl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Np(e)}catch(e){Uu(t,t.return,e)}}}function ml(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Np(e)}catch(e){Uu(t,t.return,e)}}function hl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new il),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new il),t;default:throw Error(i(435,e.tag))}}function gl(e,t){var n=hl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Ju.bind(null,e,t);t.then(r,r)}})}function _l(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if(Zd(c.type)){ll=c.stateNode,ul=!1;break a}break;case 5:ll=c.stateNode,ul=!1;break a;case 3:case 4:ll=c.stateNode.containerInfo,ul=!0;break a}c=c.return}if(ll===null)throw Error(i(160));fl(o,s,a),ll=null,ul=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)yl(t,e),t=t.sibling}var vl=null;function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_l(t,e),bl(e),r&4&&(Uc(3,e,e.return),Hc(3,e),Uc(5,e,e.return));break;case 1:_l(t,e),bl(e),r&512&&(nl||n===null||qc(n,n.return)),r&64&&tl&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=vl;if(_l(t,e),bl(e),r&512&&(nl||n===null||qc(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[ht]||o[ct]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),Pd(o,r,n),o[ct]=e,xt(o),r=o;break a;case`link`:var s=Vf(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),Pd(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=Vf(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),Pd(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[ct]=e,xt(o),r=o}e.stateNode=r}else Hf(a,e.type,e.stateNode);else e.stateNode=If(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&Yc(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?Hf(a,e.type,e.stateNode):If(a,r,e.memoizedProps))}break;case 27:_l(t,e),bl(e),r&512&&(nl||n===null||qc(n,n.return)),n!==null&&r&4&&Yc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(_l(t,e),bl(e),r&512&&(nl||n===null||qc(n,n.return)),e.flags&32){a=e.stateNode;try{qt(a,``)}catch(t){Uu(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,Yc(e,a,n===null?a:n.memoizedProps)),r&1024&&(rl=!0);break;case 6:if(_l(t,e),bl(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){Uu(e,e.return,t)}}break;case 3:if(Bf=null,a=vl,vl=gf(t.containerInfo),_l(t,e),vl=a,bl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Np(t.containerInfo)}catch(t){Uu(e,e.return,t)}rl&&(rl=!1,xl(e));break;case 4:r=vl,vl=gf(e.stateNode.containerInfo),_l(t,e),bl(e),vl=r;break;case 12:_l(t,e),bl(e);break;case 31:_l(t,e),bl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,gl(e,r)));break;case 13:_l(t,e),bl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Ql=ke()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,gl(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=tl,d=nl;if(tl=u||a,nl=d||l,_l(t,e),nl=d,tl=u,bl(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||tl||nl||Cl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){Uu(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){Uu(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;a?$d(m,!0):$d(l.stateNode,!1)}catch(e){Uu(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,gl(e,n))));break;case 19:_l(t,e),bl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,gl(e,r)));break;case 30:break;case 21:break;default:_l(t,e),bl(e)}}function bl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Xc(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode;$c(e,Zc(e),a);break;case 5:var o=n.stateNode;n.flags&32&&(qt(o,``),n.flags&=-33),$c(e,Zc(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;Qc(e,Zc(e),s);break;default:throw Error(i(161))}}catch(t){Uu(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;xl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Sl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)sl(e,t.alternate,t),t=t.sibling}function Cl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Uc(4,t,t.return),Cl(t);break;case 1:qc(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&Gc(t,t.return,n),Cl(t);break;case 27:pf(t.stateNode);case 26:case 5:qc(t,t.return),Cl(t);break;case 22:t.memoizedState===null&&Cl(t);break;case 30:Cl(t);break;default:Cl(t)}e=e.sibling}}function wl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:wl(i,a,n),Hc(4,a);break;case 1:if(wl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){Uu(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)Xa(c[i],s)}catch(e){Uu(r,r.return,e)}}n&&o&64&&Wc(a),Kc(a,a.return);break;case 27:el(a);case 26:case 5:wl(i,a,n),n&&r===null&&o&4&&Jc(a),Kc(a,a.return);break;case 12:wl(i,a,n);break;case 31:wl(i,a,n),n&&o&4&&pl(i,a);break;case 13:wl(i,a,n),n&&o&4&&ml(i,a);break;case 22:a.memoizedState===null&&wl(i,a,n),Kc(a,a.return);break;case 30:break;default:wl(i,a,n)}t=t.sibling}}function Tl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&la(n))}function El(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&la(e))}function Dl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ol(e,t,n,r),t=t.sibling}function Ol(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Dl(e,t,n,r),i&2048&&Hc(9,t);break;case 1:Dl(e,t,n,r);break;case 3:Dl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&la(e)));break;case 12:if(i&2048){Dl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){Uu(t,t.return,e)}}else Dl(e,t,n,r);break;case 31:Dl(e,t,n,r);break;case 13:Dl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Dl(e,t,n,r):(a._visibility|=2,kl(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?Dl(e,t,n,r):Al(e,t),i&2048&&Tl(o,t);break;case 24:Dl(e,t,n,r),i&2048&&El(t.alternate,t);break;default:Dl(e,t,n,r)}}function kl(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:kl(a,o,s,c,i),Hc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,kl(a,o,s,c,i)):u._visibility&2?kl(a,o,s,c,i):Al(a,o),i&&l&2048&&Tl(o.alternate,o);break;case 24:kl(a,o,s,c,i),i&&l&2048&&El(o.alternate,o);break;default:kl(a,o,s,c,i)}t=t.sibling}}function Al(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Al(n,r),i&2048&&Tl(r.alternate,r);break;case 24:Al(n,r),i&2048&&El(r.alternate,r);break;default:Al(n,r)}t=t.sibling}}var W=8192;function jl(e,t,n){if(e.subtreeFlags&W)for(e=e.child;e!==null;)G(e,t,n),e=e.sibling}function G(e,t,n){switch(e.tag){case 26:jl(e,t,n),e.flags&W&&e.memoizedState!==null&&Gf(n,vl,e.memoizedState,e.memoizedProps);break;case 5:jl(e,t,n);break;case 3:case 4:var r=vl;vl=gf(e.stateNode.containerInfo),jl(e,t,n),vl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=W,W=16777216,jl(e,t,n),W=r):jl(e,t,n));break;default:jl(e,t,n)}}function Ml(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Nl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];al=r,Il(r,e)}Ml(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Pl(e),e=e.sibling}function Pl(e){switch(e.tag){case 0:case 11:case 15:Nl(e),e.flags&2048&&Uc(9,e,e.return);break;case 3:Nl(e);break;case 12:Nl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Fl(e)):Nl(e);break;default:Nl(e)}}function Fl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];al=r,Il(r,e)}Ml(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Uc(8,t,t.return),Fl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Fl(t));break;default:Fl(t)}e=e.sibling}}function Il(e,t){for(;al!==null;){var n=al;switch(n.tag){case 0:case 11:case 15:Uc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:la(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,al=r;else a:for(n=e;al!==null;){r=al;var i=r.sibling,a=r.return;if(cl(r),r===n){al=null;break a}if(i!==null){i.return=a,al=i;break a}al=a}}}var Ll={getCacheForType:function(e){var t=ta(sa),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ta(sa).controller.signal}},Rl=typeof WeakMap==`function`?WeakMap:Map,K=0,zl=null,q=null,J=0,Bl=0,Vl=null,Hl=!1,Ul=!1,Wl=!1,Gl=0,Y=0,X=0,Z=0,Kl=0,ql=0,Jl=0,Yl=null,Xl=null,Zl=!1,Ql=0,$l=0,eu=1/0,tu=null,nu=null,Q=0,ru=null,iu=null,au=0,ou=0,su=null,cu=null,lu=0,uu=null;function du(){return K&2&&J!==0?J&-J:A.T===null?at():ud()}function fu(){if(ql===0)if(!(J&536870912)||z){var e=We;We<<=1,!(We&3932160)&&(We=262144),ql=e}else ql=536870912;return e=ro.current,e!==null&&(e.flags|=32),ql}function pu(e,t,n){(e===zl&&(Bl===2||Bl===9)||e.cancelPendingCommit!==null)&&(bu(e,0),_u(e,J,ql,!1)),Qe(e,n),(!(K&2)||e!==zl)&&(e===zl&&(!(K&2)&&(Z|=n),Y===4&&_u(e,J,ql,!1)),nd(e))}function mu(e,t,n){if(K&6)throw Error(i(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||Je(e,t),a=r?Ou(e,t):Eu(e,t,!0),o=r;do{if(a===0){Ul&&!r&&_u(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!gu(n)){a=Eu(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=Yl;var l=c.current.memoizedState.isDehydrated;if(l&&(bu(c,s).flags|=256),s=Eu(c,s,!1),s!==2){if(Wl&&!l){c.errorRecoveryDisabledLanes|=o,Z|=o,a=4;break a}o=Xl,Xl=a,o!==null&&(Xl===null?Xl=o:Xl.push.apply(Xl,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){bu(e,0),_u(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:_u(r,t,ql,!Hl);break a;case 2:Xl=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=Ql+300-ke(),10<a)){if(_u(r,t,ql,!Hl),qe(r,0,!0)!==0)break a;au=t,r.timeoutHandle=Kd(hu.bind(null,r,n,Xl,tu,Zl,t,ql,Z,Jl,Hl,o,`Throttled`,-0,0),a);break a}hu(r,n,Xl,tu,Zl,t,ql,Z,Jl,Hl,o,null,-0,0)}}break}while(1);nd(e)}function hu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tn},G(t,a,d);var m=(a&62914560)===a?Ql-ke():(a&4194048)===a?$l-ke():0;if(m=qf(d,m),m!==null){au=a,e.cancelPendingCommit=m(Fu.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),_u(e,a,o,!l);return}}Fu(e,t,a,n,r,i,o,s,c)}function gu(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Cr(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _u(e,t,n,r){t&=~Kl,t&=~Z,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-ze(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&et(e,n,t)}function vu(){return K&6?!0:(rd(0,!1),!1)}function yu(){if(q!==null){if(Bl===0)var e=q.return;else e=q,qi=Ki=null,Ao(e),Ma=null,Na=0,e=q;for(;e!==null;)Vc(e.alternate,e),e=e.return;q=null}}function bu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,qd(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),au=0,yu(),zl=e,q=n=di(e.current,null),J=t,Bl=0,Vl=null,Hl=!1,Ul=Je(e,t),Wl=!1,Jl=ql=Kl=Z=X=Y=0,Xl=Yl=null,Zl=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-ze(r),a=1<<i;t|=e[i],r&=~a}return Gl=t,ti(),n}function xu(e,t){B=null,A.H=zs,t===Sa||t===wa?(t=Aa(),Bl=3):t===Ca?(t=Aa(),Bl=4):Bl=t===rc?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Vl=t,q===null&&(Y=1,Zs(e,yi(t,e.current)))}function Su(){var e=ro.current;return e===null?!0:(J&4194048)===J?io===null:(J&62914560)===J||J&536870912?e===io:!1}function Cu(){var e=A.H;return A.H=zs,e===null?zs:e}function wu(){var e=A.A;return A.A=Ll,e}function Tu(){Y=4,Hl||(J&4194048)!==J&&ro.current!==null||(Ul=!0),!(X&134217727)&&!(Z&134217727)||zl===null||_u(zl,J,ql,!1)}function Eu(e,t,n){var r=K;K|=2;var i=Cu(),a=wu();(zl!==e||J!==t)&&(tu=null,bu(e,t)),t=!1;var o=Y;a:do try{if(Bl!==0&&q!==null){var s=q,c=Vl;switch(Bl){case 8:yu(),o=6;break a;case 3:case 2:case 9:case 6:ro.current===null&&(t=!0);var l=Bl;if(Bl=0,Vl=null,Mu(e,s,c,l),n&&Ul){o=0;break a}break;default:l=Bl,Bl=0,Vl=null,Mu(e,s,c,l)}}Du(),o=Y;break}catch(t){xu(e,t)}while(1);return t&&e.shellSuspendCounter++,qi=Ki=null,K=r,A.H=i,A.A=a,q===null&&(zl=null,J=0,ti()),o}function Du(){for(;q!==null;)Au(q)}function Ou(e,t){var n=K;K|=2;var r=Cu(),a=wu();zl!==e||J!==t?(tu=null,eu=ke()+500,bu(e,t)):Ul=Je(e,t);a:do try{if(Bl!==0&&q!==null){t=q;var o=Vl;b:switch(Bl){case 1:Bl=0,Vl=null,Mu(e,t,o,1);break;case 2:case 9:if(Ea(o)){Bl=0,Vl=null,ju(t);break}t=function(){Bl!==2&&Bl!==9||zl!==e||(Bl=7),nd(e)},o.then(t,t);break a;case 3:Bl=7;break a;case 4:Bl=5;break a;case 7:Ea(o)?(Bl=0,Vl=null,ju(t)):(Bl=0,Vl=null,Mu(e,t,o,7));break;case 5:var s=null;switch(q.tag){case 26:s=q.memoizedState;case 5:case 27:var c=q;if(s?Wf(s):c.stateNode.complete){Bl=0,Vl=null;var l=c.sibling;if(l!==null)q=l;else{var u=c.return;u===null?q=null:(q=u,Nu(u))}break b}}Bl=0,Vl=null,Mu(e,t,o,5);break;case 6:Bl=0,Vl=null,Mu(e,t,o,6);break;case 8:yu(),Y=6;break a;default:throw Error(i(462))}}ku();break}catch(t){xu(e,t)}while(1);return qi=Ki=null,A.H=r,A.A=a,K=n,q===null?(zl=null,J=0,ti(),Y):0}function ku(){for(;q!==null&&!De();)Au(q)}function Au(e){var t=Mc(e.alternate,e,Gl);e.memoizedProps=e.pendingProps,t===null?Nu(e):q=t}function ju(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=gc(n,t,t.pendingProps,t.type,void 0,J);break;case 11:t=gc(n,t,t.pendingProps,t.type.render,t.ref,J);break;case 5:Ao(t);default:Vc(n,t),t=q=fi(t,Gl),t=Mc(n,t,Gl)}e.memoizedProps=e.pendingProps,t===null?Nu(e):q=t}function Mu(e,t,n,r){qi=Ki=null,Ao(t),Ma=null,Na=0;var i=t.return;try{if(nc(e,i,t,n,J)){Y=1,Zs(e,yi(n,e.current)),q=null;return}}catch(t){if(i!==null)throw q=i,t;Y=1,Zs(e,yi(n,e.current)),q=null;return}t.flags&32768?(z||r===1?e=!0:Ul||J&536870912?e=!1:(Hl=e=!0,(r===2||r===9||r===3||r===6)&&(r=ro.current,r!==null&&r.tag===13&&(r.flags|=16384))),Pu(t,e)):Nu(t)}function Nu(e){var t=e;do{if(t.flags&32768){Pu(t,Hl);return}e=t.return;var n=zc(t.alternate,t,Gl);if(n!==null){q=n;return}if(t=t.sibling,t!==null){q=t;return}q=t=e}while(t!==null);Y===0&&(Y=5)}function Pu(e,t){do{var n=Bc(e.alternate,e);if(n!==null){n.flags&=32767,q=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){q=e;return}q=e=n}while(e!==null);Y=6,q=null}function Fu(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do Bu();while(Q!==0);if(K&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=ei,$e(e,n,o,s,c,l),e===zl&&(q=zl=null,J=0),iu=t,ru=e,au=n,ou=o,su=a,cu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Yu(Ne,function(){return Vu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=A.T,A.T=null,a=j.p,j.p=2,s=K,K|=4;try{ol(e,t,n)}finally{K=s,j.p=a,A.T=r}}Q=1,Iu(),Lu(),Ru()}}function Iu(){if(Q===1){Q=0;var e=ru,t=iu,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=A.T,A.T=null;var r=j.p;j.p=2;var i=K;K|=4;try{yl(t,e);var a=zd,o=Or(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Dr(s.ownerDocument.documentElement,s)){if(c!==null&&kr(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Er(s,h),v=Er(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}sp=!!Rd,zd=Rd=null}finally{K=i,j.p=r,A.T=n}}e.current=t,Q=2}}function Lu(){if(Q===2){Q=0;var e=ru,t=iu,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=A.T,A.T=null;var r=j.p;j.p=2;var i=K;K|=4;try{sl(e,t.alternate,t)}finally{K=i,j.p=r,A.T=n}}Q=3}}function Ru(){if(Q===4||Q===3){Q=0,Oe();var e=ru,t=iu,n=au,r=cu;t.subtreeFlags&10256||t.flags&10256?Q=5:(Q=0,iu=ru=null,zu(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(nu=null),it(n),t=t.stateNode,Re&&typeof Re.onCommitFiberRoot==`function`)try{Re.onCommitFiberRoot(F,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=A.T,i=j.p,j.p=2,A.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{A.T=t,j.p=i}}au&3&&Bu(),nd(e),i=e.pendingLanes,n&261930&&i&42?e===uu?lu++:(lu=0,uu=e):lu=0,rd(0,!1)}}function zu(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,la(t)))}function Bu(){return Iu(),Lu(),Ru(),Vu()}function Vu(){if(Q!==5)return!1;var e=ru,t=ou;ou=0;var n=it(au),r=A.T,a=j.p;try{j.p=32>n?32:n,A.T=null,n=su,su=null;var o=ru,s=au;if(Q=0,iu=ru=null,au=0,K&6)throw Error(i(331));var c=K;if(K|=4,Pl(o.current),Ol(o,o.current,s,n),K=c,rd(0,!1),Re&&typeof Re.onPostCommitFiberRoot==`function`)try{Re.onPostCommitFiberRoot(F,o)}catch{}return!0}finally{j.p=a,A.T=r,zu(e,t)}}function Hu(e,t,n){t=yi(n,t),t=$s(e.stateNode,t,2),e=Wa(e,t,2),e!==null&&(Qe(e,2),nd(e))}function Uu(e,t,n){if(e.tag===3)Hu(e,e,n);else for(;t!==null;){if(t.tag===3){Hu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(nu===null||!nu.has(r))){e=yi(n,e),n=ec(2),r=Wa(t,n,2),r!==null&&(tc(n,r,t,e),Qe(r,2),nd(r));break}}t=t.return}}function Wu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Rl;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(Wl=!0,i.add(n),e=Gu.bind(null,e,t,n),t.then(e,e))}function Gu(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,zl===e&&(J&n)===n&&(Y===4||Y===3&&(J&62914560)===J&&300>ke()-Ql?!(K&2)&&bu(e,0):Kl|=n,Jl===J&&(Jl=0)),nd(e)}function Ku(e,t){t===0&&(t=Xe()),e=ii(e,t),e!==null&&(Qe(e,t),nd(e))}function qu(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ku(e,n)}function Ju(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),Ku(e,n)}function Yu(e,t){return Te(e,t)}var Xu=null,Zu=null,Qu=!1,$u=!1,ed=!1,td=0;function nd(e){e!==Zu&&e.next===null&&(Zu===null?Xu=Zu=e:Zu=Zu.next=e),$u=!0,Qu||(Qu=!0,ld())}function rd(e,t){if(!ed&&$u){ed=!0;do for(var n=!1,r=Xu;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-ze(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,cd(r,a))}else a=J,a=qe(r,r===zl?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||Je(r,a)||(n=!0,cd(r,a));r=r.next}while(n);ed=!1}}function id(){ad()}function ad(){$u=Qu=!1;var e=0;td!==0&&Gd()&&(e=td);for(var t=ke(),n=null,r=Xu;r!==null;){var i=r.next,a=od(r,t);a===0?(r.next=null,n===null?Xu=i:n.next=i,i===null&&(Zu=n)):(n=r,(e!==0||a&3)&&($u=!0)),r=i}Q!==0&&Q!==5||rd(e,!1),td!==0&&(td=0)}function od(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-ze(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=Ye(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=zl,n=J,n=qe(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(Bl===2||Bl===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Ee(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Je(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Ee(r),it(n)){case 2:case 8:n=Me;break;case 32:n=Ne;break;case 268435456:n=Fe;break;default:n=Ne}return r=sd.bind(null,e),n=Te(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Ee(r),e.callbackPriority=2,e.callbackNode=null,2}function sd(e,t){if(Q!==0&&Q!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Bu()&&e.callbackNode!==n)return null;var r=J;return r=qe(e,e===zl?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(mu(e,r,t),od(e,ke()),e.callbackNode!=null&&e.callbackNode===n?sd.bind(null,e):null)}function cd(e,t){if(Bu())return null;mu(e,t,!0)}function ld(){Yd(function(){K&6?Te(je,id):ad()})}function ud(){if(td===0){var e=fa;e===0&&(e=Ue,Ue<<=1,!(Ue&261888)&&(Ue=256)),td=e}return td}function dd(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:en(``+e)}function fd(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function pd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=dd((i[lt]||null).action),o=r.submitter;o&&(t=(t=o[lt]||null)?dd(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new Cn(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(td!==0){var e=o?fd(i,o):new FormData(i);Ts(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?fd(i,o):new FormData(i),Ts(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var md=0;md<Yr.length;md++){var hd=Yr[md];Xr(hd.toLowerCase(),`on`+(hd[0].toUpperCase()+hd.slice(1)))}Xr(Vr,`onAnimationEnd`),Xr(Hr,`onAnimationIteration`),Xr(Ur,`onAnimationStart`),Xr(`dblclick`,`onDoubleClick`),Xr(`focusin`,`onFocus`),Xr(`focusout`,`onBlur`),Xr(Wr,`onTransitionRun`),Xr(Gr,`onTransitionStart`),Xr(Kr,`onTransitionCancel`),Xr(qr,`onTransitionEnd`),Tt(`onMouseEnter`,[`mouseout`,`mouseover`]),Tt(`onMouseLeave`,[`mouseout`,`mouseover`]),Tt(`onPointerEnter`,[`pointerout`,`pointerover`]),Tt(`onPointerLeave`,[`pointerout`,`pointerover`]),wt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),wt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),wt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),wt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),wt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),wt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var gd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),_d=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(gd));function vd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Zr(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Zr(e)}i.currentTarget=null,a=c}}}}function $(e,t){var n=t[dt];n===void 0&&(n=t[dt]=new Set);var r=e+`__bubble`;n.has(r)||(Sd(t,e,2,!1),n.add(r))}function yd(e,t,n){var r=0;t&&(r|=4),Sd(n,e,r,t)}var bd=`_reactListening`+Math.random().toString(36).slice(2);function xd(e){if(!e[bd]){e[bd]=!0,St.forEach(function(t){t!==`selectionchange`&&(_d.has(t)||yd(t,!1,e),yd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bd]||(t[bd]=!0,yd(`selectionchange`,!1,t))}}function Sd(e,t,n,r){switch(mp(t)){case 2:var i=cp;break;case 8:i=lp;break;default:i=up}n=i.bind(null,t,n,e),i=void 0,!fn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Cd(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=_t(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}ln(function(){var r=a,i=rn(n),s=[];a:{var c=Jr.get(e);if(c!==void 0){var l=Cn,u=e;switch(e){case`keypress`:if(vn(n)===0)break a;case`keydown`:case`keyup`:l=Bn;break;case`focusin`:u=`focus`,l=Mn;break;case`focusout`:u=`blur`,l=Mn;break;case`beforeblur`:case`afterblur`:l=Mn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=An;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=jn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=Hn;break;case Vr:case Hr:case Ur:l=Nn;break;case qr:l=Un;break;case`scroll`:case`scrollend`:l=Tn;break;case`wheel`:l=Wn;break;case`copy`:case`cut`:case`paste`:l=L;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=Vn;break;case`toggle`:case`beforetoggle`:l=Gn}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=un(m,p),g!=null&&d.push(wd(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==nn&&(u=n.relatedTarget||n.fromElement)&&(_t(u)||u[ut]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?_t(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=An,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=Vn,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:yt(l),h=u==null?c:yt(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,_t(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=Ed,p=l,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;l!==null&&Dd(s,c,l,d,!1),u!==null&&f!==null&&Dd(s,f,u,d,!0)}}a:{if(c=r?yt(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var v=dr;else if(ar(c))if(fr)v=xr;else{v=yr;var y=vr}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&Zt(r.elementType)&&(v=dr):v=br;if(v&&=v(e,r)){or(s,v,n,i);break a}y&&y(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Ut(c,`number`,c.value)}switch(y=r?yt(r):window,e){case`focusin`:(ar(y)||y.contentEditable===`true`)&&(jr=y,Mr=r,Nr=null);break;case`focusout`:Nr=Mr=jr=null;break;case`mousedown`:Pr=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Pr=!1,Fr(s,n,i);break;case`selectionchange`:if(Ar)break;case`keydown`:case`keyup`:Fr(s,n,i)}var b;if(qn)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else tr?$n(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(Xn&&n.locale!==`ko`&&(tr||x!==`onCompositionStart`?x===`onCompositionEnd`&&tr&&(b=_n()):(mn=i,hn=`value`in mn?mn.value:mn.textContent,tr=!0)),y=Td(r,x),0<y.length&&(x=new Pn(x,e,null,n,i),s.push({event:x,listeners:y}),b?x.data=b:(b=er(n),b!==null&&(x.data=b)))),(b=Yn?nr(e,n):rr(e,n))&&(x=Td(r,`onBeforeInput`),0<x.length&&(y=new Pn(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:y,listeners:x}),y.data=b)),pd(s,e,r,n,i)}vd(s,t)})}function wd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Td(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=un(e,n),i!=null&&r.unshift(wd(e,i,a)),i=un(e,t),i!=null&&r.push(wd(e,i,a))),e.tag===3)return r;e=e.return}return[]}function Ed(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dd(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=un(n,a),l!=null&&o.unshift(wd(n,l,c))):i||(l=un(n,a),l!=null&&o.push(wd(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Od=/\r\n?/g,kd=/\u0000|\uFFFD/g;function Ad(e){return(typeof e==`string`?e:``+e).replace(Od,`
`).replace(kd,``)}function jd(e,t){return t=Ad(t),Ad(e)===t}function Md(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||qt(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&qt(e,``+r);break;case`className`:jt(e,`class`,r);break;case`tabIndex`:jt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:jt(e,n,r);break;case`style`:Xt(e,r,o);break;case`data`:if(t!==`object`){jt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=en(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&Md(e,t,`name`,a.name,a,null),Md(e,t,`formEncType`,a.formEncType,a,null),Md(e,t,`formMethod`,a.formMethod,a,null),Md(e,t,`formTarget`,a.formTarget,a,null)):(Md(e,t,`encType`,a.encType,a,null),Md(e,t,`method`,a.method,a,null),Md(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=en(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=tn);break;case`onScroll`:r!=null&&$(`scroll`,e);break;case`onScrollEnd`:r!=null&&$(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=en(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:$(`beforetoggle`,e),$(`toggle`,e),At(e,`popover`,r);break;case`xlinkActuate`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:Mt(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:Mt(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:Mt(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:At(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=Qt.get(n)||n,At(e,n,r))}}function Nd(e,t,n,r,a,o){switch(n){case`style`:Xt(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?qt(e,r):(typeof r==`number`||typeof r==`bigint`)&&qt(e,``+r);break;case`onScroll`:r!=null&&$(`scroll`,e);break;case`onScrollEnd`:r!=null&&$(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=tn);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!Ct.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[lt]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):At(e,n,r)}}}function Pd(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:$(`error`,e),$(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Md(e,t,o,s,n,null)}}a&&Md(e,t,`srcSet`,n.srcSet,n,null),r&&Md(e,t,`src`,n.src,n,null);return;case`input`:$(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:Md(e,t,r,d,n,null)}}Ht(e,o,c,l,u,s,a,!1);return;case`select`:for(a in $(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:Md(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&Wt(e,!!r,n,!0):Wt(e,!!r,t,!1);return;case`textarea`:for(s in $(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:Md(e,t,s,c,n,null)}Kt(e,r,a,o);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Md(e,t,l,r,n,null)}return;case`dialog`:$(`beforetoggle`,e),$(`toggle`,e),$(`cancel`,e),$(`close`,e);break;case`iframe`:case`object`:$(`load`,e);break;case`video`:case`audio`:for(r=0;r<gd.length;r++)$(gd[r],e);break;case`image`:$(`error`,e),$(`load`,e);break;case`details`:$(`toggle`,e);break;case`embed`:case`source`:case`link`:$(`error`,e),$(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Md(e,t,u,r,n,null)}return;default:if(Zt(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Nd(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Md(e,t,c,r,n,null))}function Fd(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Md(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&Md(e,t,p,m,r,f)}}Vt(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||Md(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&Md(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?Wt(e,!!n,n?[]:``,!1):Wt(e,!!n,t,!0)):Wt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Md(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&Md(e,t,s,a,r,o)}Gt(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Md(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Md(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Md(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:Md(e,t,u,p,r,m)}return;default:if(Zt(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Nd(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Nd(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Md(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Md(e,t,f,p,r,m)}function Id(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function Ld(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&Id(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&Id(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var Rd=null,zd=null;function Bd(e){return e.nodeType===9?e:e.ownerDocument}function Vd(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function Hd(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function Ud(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wd=null;function Gd(){var e=window.event;return e&&e.type===`popstate`?e===Wd?!1:(Wd=e,!0):(Wd=null,!1)}var Kd=typeof setTimeout==`function`?setTimeout:void 0,qd=typeof clearTimeout==`function`?clearTimeout:void 0,Jd=typeof Promise==`function`?Promise:void 0,Yd=typeof queueMicrotask==`function`?queueMicrotask:Jd===void 0?Kd:function(e){return Jd.resolve(null).then(e).catch(Xd)};function Xd(e){setTimeout(function(){throw e})}function Zd(e){return e===`head`}function Qd(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Np(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)pf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,pf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[ht]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&pf(e.ownerDocument.body);n=i}while(n);Np(t)}function $d(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function ef(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:ef(n),gt(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function tf(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[ht])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=cf(e.nextSibling),e===null)break}return null}function nf(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=cf(e.nextSibling),e===null))return null;return e}function rf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=cf(e.nextSibling),e===null))return null;return e}function af(e){return e.data===`$?`||e.data===`$~`}function of(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function sf(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function cf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var lf=null;function uf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return cf(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function df(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function ff(e,t,n){switch(t=Bd(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function pf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);gt(e)}var mf=new Map,hf=new Set;function gf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var _f=j.d;j.d={f:vf,r:yf,D:Sf,C:Cf,L:wf,m:Tf,X:Df,S:Ef,M:Of};function vf(){var e=_f.f(),t=vu();return e||t}function yf(e){var t=vt(e);t!==null&&t.tag===5&&t.type===`form`?Ds(t):_f.r(e)}var bf=typeof document>`u`?null:document;function xf(e,t,n){var r=bf;if(r&&typeof t==`string`&&t){var i=Bt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),hf.has(i)||(hf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Pd(t,`link`,e),xt(t),r.head.appendChild(t)))}}function Sf(e){_f.D(e),xf(`dns-prefetch`,e,null)}function Cf(e,t){_f.C(e,t),xf(`preconnect`,e,t)}function wf(e,t,n){_f.L(e,t,n);var r=bf;if(r&&e&&t){var i=`link[rel="preload"][as="`+Bt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Bt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Bt(n.imageSizes)+`"]`)):i+=`[href="`+Bt(e)+`"]`;var a=i;switch(t){case`style`:a=Af(e);break;case`script`:a=Pf(e)}mf.has(a)||(e=f({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),mf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(jf(a))||t===`script`&&r.querySelector(Ff(a))||(t=r.createElement(`link`),Pd(t,`link`,e),xt(t),r.head.appendChild(t)))}}function Tf(e,t){_f.m(e,t);var n=bf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Bt(r)+`"][href="`+Bt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=Pf(e)}if(!mf.has(a)&&(e=f({rel:`modulepreload`,href:e},t),mf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(Ff(a)))return}r=n.createElement(`link`),Pd(r,`link`,e),xt(r),n.head.appendChild(r)}}}function Ef(e,t,n){_f.S(e,t,n);var r=bf;if(r&&e){var i=bt(r).hoistableStyles,a=Af(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(jf(a)))s.loading=5;else{e=f({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=mf.get(a))&&Rf(e,n);var c=o=r.createElement(`link`);xt(c),Pd(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,Lf(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function Df(e,t){_f.X(e,t);var n=bf;if(n&&e){var r=bt(n).hoistableScripts,i=Pf(e),a=r.get(i);a||(a=n.querySelector(Ff(i)),a||(e=f({src:e,async:!0},t),(t=mf.get(i))&&zf(e,t),a=n.createElement(`script`),xt(a),Pd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Of(e,t){_f.M(e,t);var n=bf;if(n&&e){var r=bt(n).hoistableScripts,i=Pf(e),a=r.get(i);a||(a=n.querySelector(Ff(i)),a||(e=f({src:e,async:!0,type:`module`},t),(t=mf.get(i))&&zf(e,t),a=n.createElement(`script`),xt(a),Pd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function kf(e,t,n,r){var a=(a=fe.current)?gf(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=Af(n.href),n=bt(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=Af(n.href);var o=bt(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(jf(e)))&&!o._p&&(s.instance=o,s.state.loading=5),mf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},mf.set(e,n),o||Nf(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=Pf(n),n=bt(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Af(e){return`href="`+Bt(e)+`"`}function jf(e){return`link[rel="stylesheet"][`+e+`]`}function Mf(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Nf(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Pd(t,`link`,n),xt(t),e.head.appendChild(t))}function Pf(e){return`[src="`+Bt(e)+`"]`}function Ff(e){return`script[async]`+e}function If(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Bt(n.href)+`"]`);if(r)return t.instance=r,xt(r),r;var a=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),xt(r),Pd(r,`style`,a),Lf(r,n.precedence,e),t.instance=r;case`stylesheet`:a=Af(n.href);var o=e.querySelector(jf(a));if(o)return t.state.loading|=4,t.instance=o,xt(o),o;r=Mf(n),(a=mf.get(a))&&Rf(r,a),o=(e.ownerDocument||e).createElement(`link`),xt(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Pd(o,`link`,r),t.state.loading|=4,Lf(o,n.precedence,e),t.instance=o;case`script`:return o=Pf(n.src),(a=e.querySelector(Ff(o)))?(t.instance=a,xt(a),a):(r=n,(a=mf.get(o))&&(r=f({},n),zf(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),xt(a),Pd(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Lf(r,n.precedence,e));return t.instance}function Lf(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Rf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function zf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var Bf=null;function Vf(e,t,n){if(Bf===null){var r=new Map,i=Bf=new Map;i.set(n,r)}else i=Bf,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[ht]||a[ct]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Hf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function Uf(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function Wf(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function Gf(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=Af(r.href),a=t.querySelector(jf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=Jf.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,xt(a);return}a=t.ownerDocument||t,r=Mf(r),(i=mf.get(i))&&Rf(r,i),a=a.createElement(`link`),xt(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Pd(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Jf.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var Kf=0;function qf(e,t){return e.stylesheets&&e.count===0&&Xf(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&Xf(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&Kf===0&&(Kf=62500*Ld());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Xf(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>Kf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function Jf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yf=null;function Xf(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yf=new Map,t.forEach(Zf,e),Yf=null,Jf.call(e))}function Zf(e,t){if(!(t.state.loading&4)){var n=Yf.get(e);if(n)var r=n.get(null);else{n=new Map,Yf.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=Jf.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Qf={$$typeof:C,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function $f(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ze(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ze(0),this.hiddenUpdates=Ze(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function ep(e,t,n,r,i,a,o,s,c,l,u,d){return e=new $f(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=li(3,null,null,t),e.current=a,a.stateNode=e,t=ca(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Va(a),e}function tp(e){return e?(e=si,e):si}function np(e,t,n,r,i,a){i=tp(i),r.context===null?r.context=i:r.pendingContext=i,r=Ua(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Wa(e,r,t),n!==null&&(pu(n,e,t),Ga(n,e,t))}function rp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ip(e,t){rp(e,t),(e=e.alternate)&&rp(e,t)}function ap(e){if(e.tag===13||e.tag===31){var t=ii(e,67108864);t!==null&&pu(t,e,67108864),ip(e,67108864)}}function op(e){if(e.tag===13||e.tag===31){var t=du();t=rt(t);var n=ii(e,t);n!==null&&pu(n,e,t),ip(e,t)}}var sp=!0;function cp(e,t,n,r){var i=A.T;A.T=null;var a=j.p;try{j.p=2,up(e,t,n,r)}finally{j.p=a,A.T=i}}function lp(e,t,n,r){var i=A.T;A.T=null;var a=j.p;try{j.p=8,up(e,t,n,r)}finally{j.p=a,A.T=i}}function up(e,t,n,r){if(sp){var i=dp(r);if(i===null)Cd(e,t,r,fp,n),Cp(e,r);else if(Tp(i,e,t,n,r))r.stopPropagation();else if(Cp(e,r),t&4&&-1<Sp.indexOf(e)){for(;i!==null;){var a=vt(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=Ke(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-ze(o);s.entanglements[1]|=c,o&=~c}nd(a),!(K&6)&&(eu=ke()+500,rd(0,!1))}}break;case 31:case 13:s=ii(a,2),s!==null&&pu(s,a,2),vu(),ip(a,2)}if(a=dp(r),a===null&&Cd(e,t,r,fp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Cd(e,t,r,null,n)}}function dp(e){return e=rn(e),pp(e)}var fp=null;function pp(e){if(fp=null,e=_t(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===31){if(e=c(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return fp=e,null}function mp(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(Ae()){case je:return 2;case Me:return 8;case Ne:case Pe:return 32;case Fe:return 268435456;default:return 32}default:return 32}}var hp=!1,gp=null,_p=null,vp=null,yp=new Map,bp=new Map,xp=[],Sp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function Cp(e,t){switch(e){case`focusin`:case`focusout`:gp=null;break;case`dragenter`:case`dragleave`:_p=null;break;case`mouseover`:case`mouseout`:vp=null;break;case`pointerover`:case`pointerout`:yp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:bp.delete(t.pointerId)}}function wp(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=vt(t),t!==null&&ap(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Tp(e,t,n,r,i){switch(t){case`focusin`:return gp=wp(gp,e,t,n,r,i),!0;case`dragenter`:return _p=wp(_p,e,t,n,r,i),!0;case`mouseover`:return vp=wp(vp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return yp.set(a,wp(yp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,bp.set(a,wp(bp.get(a)||null,e,t,n,r,i)),!0}return!1}function Ep(e){var t=_t(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,ot(e.priority,function(){op(n)});return}}else if(t===31){if(t=c(n),t!==null){e.blockedOn=t,ot(e.priority,function(){op(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Dp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=dp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);nn=r,n.target.dispatchEvent(r),nn=null}else return t=vt(n),t!==null&&ap(t),e.blockedOn=n,!1;t.shift()}return!0}function Op(e,t,n){Dp(e)&&n.delete(t)}function kp(){hp=!1,gp!==null&&Dp(gp)&&(gp=null),_p!==null&&Dp(_p)&&(_p=null),vp!==null&&Dp(vp)&&(vp=null),yp.forEach(Op),bp.forEach(Op)}function Ap(e,n){e.blockedOn===n&&(e.blockedOn=null,hp||(hp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,kp)))}var jp=null;function Mp(e){jp!==e&&(jp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){jp===e&&(jp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(pp(r||n)===null)continue;break}var a=vt(n);a!==null&&(e.splice(t,3),t-=3,Ts(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Np(e){function t(t){return Ap(t,e)}gp!==null&&Ap(gp,e),_p!==null&&Ap(_p,e),vp!==null&&Ap(vp,e),yp.forEach(t),bp.forEach(t);for(var n=0;n<xp.length;n++){var r=xp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<xp.length&&(n=xp[0],n.blockedOn===null);)Ep(n),n.blockedOn===null&&xp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[lt]||null;if(typeof a==`function`)o||Mp(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[lt]||null)s=o.formAction;else if(pp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Mp(n)}}}function Pp(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function Fp(e){this._internalRoot=e}Ip.prototype.render=Fp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current;np(n,du(),e,t,null,null)},Ip.prototype.unmount=Fp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;np(e.current,2,null,e,null,null),vu(),t[ut]=null}};function Ip(e){this._internalRoot=e}Ip.prototype.unstable_scheduleHydration=function(e){if(e){var t=at();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xp.length&&t!==0&&t<xp[n].priority;n++);xp.splice(n,0,e),n===0&&Ep(e)}};var Lp=n.version;if(Lp!==`19.2.1`)throw Error(i(527,Lp,`19.2.1`));j.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=u(t),e=e===null?null:d(e),e=e===null?null:e.stateNode,e};var Rp={bundleType:0,version:`19.2.1`,rendererPackageName:`react-dom`,currentDispatcherRef:A,reconcilerVersion:`19.2.1`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var zp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zp.isDisabled&&zp.supportsFiber)try{F=zp.inject(Rp),Re=zp}catch{}}e.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=Js,s=Ys,c=Xs;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=ep(e,1,!1,null,null,n,r,null,o,s,c,Pp),e[ut]=t.current,xd(e),new Fp(t)}})),y=s(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=v()})),b=`modulepreload`,x=function(e){return`/`+e},S={};const C=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=x(t,n),t in S)return;S[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:b,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[])e.status===`rejected`&&i(e.reason);return e().catch(i)})};var w=u(p(),1),T=`popstate`;function E(e={}){function t(e,t){let{pathname:n,search:r,hash:i}=e.location;return ne(``,{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||`default`)}function n(e,t){return typeof t==`string`?t:k(t)}return ie(t,n,null,e)}function D(e,t){if(e===!1||e==null)throw Error(t)}function O(e,t){if(!e){typeof console<`u`&&console.warn(t);try{throw Error(t)}catch{}}}function ee(){return Math.random().toString(36).substring(2,10)}function te(e,t){return{usr:e.state,key:e.key,idx:t}}function ne(e,t,n=null,r){return{pathname:typeof e==`string`?e:e.pathname,search:``,hash:``,...typeof t==`string`?re(t):t,state:n,key:t&&t.key||r||ee()}}function k({pathname:e=`/`,search:t=``,hash:n=``}){return t&&t!==`?`&&(e+=t.charAt(0)===`?`?t:`?`+t),n&&n!==`#`&&(e+=n.charAt(0)===`#`?n:`#`+n),e}function re(e){let t={};if(e){let n=e.indexOf(`#`);n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf(`?`);r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function ie(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s=`POP`,c=null,l=u();l??(l=0,o.replaceState({...o.state,idx:l},``));function u(){return(o.state||{idx:null}).idx}function d(){s=`POP`;let e=u(),t=e==null?null:e-l;l=e,c&&c({action:s,location:h.location,delta:t})}function f(e,t){s=`PUSH`;let r=ne(h.location,e,t);n&&n(r,e),l=u()+1;let d=te(r,l),f=h.createHref(r);try{o.pushState(d,``,f)}catch(e){if(e instanceof DOMException&&e.name===`DataCloneError`)throw e;i.location.assign(f)}a&&c&&c({action:s,location:h.location,delta:1})}function p(e,t){s=`REPLACE`;let r=ne(h.location,e,t);n&&n(r,e),l=u();let i=te(r,l),d=h.createHref(r);o.replaceState(i,``,d),a&&c&&c({action:s,location:h.location,delta:0})}function m(e){return ae(e)}let h={get action(){return s},get location(){return e(i,o)},listen(e){if(c)throw Error(`A history only accepts one active listener`);return i.addEventListener(T,d),c=e,()=>{i.removeEventListener(T,d),c=null}},createHref(e){return t(i,e)},createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:f,replace:p,go(e){return o.go(e)}};return h}function ae(e,t=!1){let n=`http://localhost`;typeof window<`u`&&(n=window.location.origin===`null`?window.location.href:window.location.origin),D(n,`No window.location.(origin|href) available to create URL`);let r=typeof e==`string`?e:k(e);return r=r.replace(/ $/,`%20`),!t&&r.startsWith(`//`)&&(r=n+r),new URL(r,n)}function A(e,t,n=`/`){return j(e,t,n,!1)}function j(e,t,n,r){let i=P((typeof t==`string`?re(t):t).pathname||`/`,n);if(i==null)return null;let a=se(e);M(a);let o=null;for(let e=0;o==null&&e<a.length;++e){let t=be(i);o=_e(a[e],t,r)}return o}function oe(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],loaderData:t[n.id],handle:n.handle}}function se(e,t=[],n=[],r=``,i=!1){let a=(e,a,o=i,s)=>{let c={relativePath:s===void 0?e.path||``:s,caseSensitive:e.caseSensitive===!0,childrenIndex:a,route:e};if(c.relativePath.startsWith(`/`)){if(!c.relativePath.startsWith(r)&&o)return;D(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let l=ke([r,c.relativePath]),u=n.concat(c);e.children&&e.children.length>0&&(D(e.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),se(e.children,t,u,l,o)),!(e.path==null&&!e.index)&&t.push({path:l,score:he(l,e.index),routesMeta:u})};return e.forEach((e,t)=>{if(e.path===``||!e.path?.includes(`?`))a(e,t);else for(let n of ce(e.path))a(e,t,!0,n)}),t}function ce(e){let t=e.split(`/`);if(t.length===0)return[];let[n,...r]=t,i=n.endsWith(`?`),a=n.replace(/\?$/,``);if(r.length===0)return i?[a,``]:[a];let o=ce(r.join(`/`)),s=[];return s.push(...o.map(e=>e===``?a:[a,e].join(`/`))),i&&s.push(...o),s.map(t=>e.startsWith(`/`)&&t===``?`/`:t)}function M(e){e.sort((e,t)=>e.score===t.score?ge(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)):t.score-e.score)}var le=/^:[\w-]+$/,N=3,ue=2,de=1,fe=10,pe=-2,me=e=>e===`*`;function he(e,t){let n=e.split(`/`),r=n.length;return n.some(me)&&(r+=pe),t&&(r+=ue),n.filter(e=>!me(e)).reduce((e,t)=>e+(le.test(t)?N:t===``?de:fe),r)}function ge(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}function _e(e,t,n=!1){let{routesMeta:r}=e,i={},a=`/`,o=[];for(let e=0;e<r.length;++e){let s=r[e],c=e===r.length-1,l=a===`/`?t:t.slice(a.length)||`/`,u=ve({path:s.relativePath,caseSensitive:s.caseSensitive,end:c},l),d=s.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=ve({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},l)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:ke([a,u.pathname]),pathnameBase:Ae(ke([a,u.pathnameBase])),route:d}),u.pathnameBase!==`/`&&(a=ke([a,u.pathnameBase]))}return o}function ve(e,t){typeof e==`string`&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=ye(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,`$1`),s=i.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if(t===`*`){let e=s[r]||``;o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,`$1`)}let i=s[r];return n&&!i?e[t]=void 0:e[t]=(i||``).replace(/%2F/g,`/`),e},{}),pathname:a,pathnameBase:o,pattern:e}}function ye(e,t=!1,n=!0){O(e===`*`||!e.endsWith(`*`)||e.endsWith(`/*`),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,`/*`)}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,`/*`)}".`);let r=[],i=`^`+e.replace(/\/*\*?$/,``).replace(/^\/*/,`/`).replace(/[\\.*+^${}|()[\]]/g,`\\$&`).replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:n!=null}),n?`/?([^\\/]+)?`:`/([^\\/]+)`)).replace(/\/([\w-]+)\?(\/|$)/g,`(/$1)?$2`);return e.endsWith(`*`)?(r.push({paramName:`*`}),i+=e===`*`||e===`/*`?`(.*)$`:`(?:\\/(.+)|\\/*)$`):n?i+=`\\/*$`:e!==``&&e!==`/`&&(i+=`(?:(?=\\/|$))`),[new RegExp(i,t?void 0:`i`),r]}function be(e){try{return e.split(`/`).map(e=>decodeURIComponent(e).replace(/\//g,`%2F`)).join(`/`)}catch(t){return O(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function P(e,t){if(t===`/`)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith(`/`)?t.length-1:t.length,r=e.charAt(n);return r&&r!==`/`?null:e.slice(n)||`/`}var xe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Se=e=>xe.test(e);function Ce(e,t=`/`){let{pathname:n,search:r=``,hash:i=``}=typeof e==`string`?re(e):e,a;if(n)if(Se(n))a=n;else{if(n.includes(`//`)){let e=n;n=n.replace(/\/\/+/g,`/`),O(!1,`Pathnames cannot have embedded double slashes - normalizing ${e} -> ${n}`)}a=n.startsWith(`/`)?we(n.substring(1),`/`):we(n,t)}else a=t;return{pathname:a,search:je(r),hash:Me(i)}}function we(e,t){let n=t.replace(/\/+$/,``).split(`/`);return e.split(`/`).forEach(e=>{e===`..`?n.length>1&&n.pop():e!==`.`&&n.push(e)}),n.length>1?n.join(`/`):`/`}function Te(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ee(e){return e.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function De(e){let t=Ee(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Oe(e,t,n,r=!1){let i;typeof e==`string`?i=re(e):(i={...e},D(!i.pathname||!i.pathname.includes(`?`),Te(`?`,`pathname`,`search`,i)),D(!i.pathname||!i.pathname.includes(`#`),Te(`#`,`pathname`,`hash`,i)),D(!i.search||!i.search.includes(`#`),Te(`#`,`search`,`hash`,i)));let a=e===``||i.pathname===``,o=a?`/`:i.pathname,s;if(o==null)s=n;else{let e=t.length-1;if(!r&&o.startsWith(`..`)){let t=o.split(`/`);for(;t[0]===`..`;)t.shift(),--e;i.pathname=t.join(`/`)}s=e>=0?t[e]:`/`}let c=Ce(i,s),l=o&&o!==`/`&&o.endsWith(`/`),u=(a||o===`.`)&&n.endsWith(`/`);return!c.pathname.endsWith(`/`)&&(l||u)&&(c.pathname+=`/`),c}var ke=e=>e.join(`/`).replace(/\/\/+/g,`/`),Ae=e=>e.replace(/\/+$/,``).replace(/^\/*/,`/`),je=e=>!e||e===`?`?``:e.startsWith(`?`)?e:`?`+e,Me=e=>!e||e===`#`?``:e.startsWith(`#`)?e:`#`+e;function Ne(e){return e!=null&&typeof e.status==`number`&&typeof e.statusText==`string`&&typeof e.internal==`boolean`&&`data`in e}function Pe(e){return e.map(e=>e.route.path).filter(Boolean).join(`/`).replace(/\/\/*/g,`/`)||`/`}Object.getOwnPropertyNames(Object.prototype).sort().join(`\0`);var Fe=w.createContext(null);Fe.displayName=`DataRouter`;var Ie=w.createContext(null);Ie.displayName=`DataRouterState`,w.createContext(!1);var Le=w.createContext({isTransitioning:!1});Le.displayName=`ViewTransition`;var F=w.createContext(new Map);F.displayName=`Fetchers`;var Re=w.createContext(null);Re.displayName=`Await`;var I=w.createContext(null);I.displayName=`Navigation`;var ze=w.createContext(null);ze.displayName=`Location`;var Be=w.createContext({outlet:null,matches:[],isDataRoute:!1});Be.displayName=`Route`;var Ve=w.createContext(null);Ve.displayName=`RouteError`;function He(e,{relative:t}={}){D(Ue(),`useHref() may be used only in the context of a <Router> component.`);let{basename:n,navigator:r}=w.useContext(I),{hash:i,pathname:a,search:o}=Ye(e,{relative:t}),s=a;return n!==`/`&&(s=a===`/`?n:ke([n,a])),r.createHref({pathname:s,search:o,hash:i})}function Ue(){return w.useContext(ze)!=null}function We(){return D(Ue(),`useLocation() may be used only in the context of a <Router> component.`),w.useContext(ze).location}var Ge=`You should call navigate() in a React.useEffect(), not when your component is first rendered.`;function Ke(e){w.useContext(I).static||w.useLayoutEffect(e)}function qe(){let{isDataRoute:e}=w.useContext(Be);return e?ft():Je()}function Je(){D(Ue(),`useNavigate() may be used only in the context of a <Router> component.`);let e=w.useContext(Fe),{basename:t,navigator:n}=w.useContext(I),{matches:r}=w.useContext(Be),{pathname:i}=We(),a=JSON.stringify(De(r)),o=w.useRef(!1);return Ke(()=>{o.current=!0}),w.useCallback((r,s={})=>{if(O(o.current,Ge),!o.current)return;if(typeof r==`number`){n.go(r);return}let c=Oe(r,JSON.parse(a),i,s.relative===`path`);e==null&&t!==`/`&&(c.pathname=c.pathname===`/`?t:ke([t,c.pathname])),(s.replace?n.replace:n.push)(c,s.state,s)},[t,n,a,i,e])}w.createContext(null);function Ye(e,{relative:t}={}){let{matches:n}=w.useContext(Be),{pathname:r}=We(),i=JSON.stringify(De(n));return w.useMemo(()=>Oe(e,JSON.parse(i),r,t===`path`),[e,i,r,t])}function Xe(e,t){return Ze(e,t)}function Ze(e,t,n,r,i){D(Ue(),`useRoutes() may be used only in the context of a <Router> component.`);let{navigator:a}=w.useContext(I),{matches:o}=w.useContext(Be),s=o[o.length-1],c=s?s.params:{},l=s?s.pathname:`/`,u=s?s.pathnameBase:`/`,d=s&&s.route;{let e=d&&d.path||``;mt(l,!d||e.endsWith(`*`)||e.endsWith(`*?`),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${e}"> to <Route path="${e===`/`?`*`:`${e}/*`}">.`)}let f=We(),p;if(t){let e=typeof t==`string`?re(t):t;D(u===`/`||e.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=f;let m=p.pathname||`/`,h=m;if(u!==`/`){let e=u.replace(/^\//,``).split(`/`);h=`/`+m.replace(/^\//,``).split(`/`).slice(e.length).join(`/`)}let g=A(e,{pathname:h});O(d||g!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),O(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=nt(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ke([u,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,`%3F`).replace(/#/g,`%23`)).pathname:e.pathname]),pathnameBase:e.pathnameBase===`/`?u:ke([u,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,`%3F`).replace(/#/g,`%23`)).pathname:e.pathnameBase])})),o,n,r,i);return t&&_?w.createElement(ze.Provider,{value:{location:{pathname:`/`,search:``,hash:``,state:null,key:`default`,...p},navigationType:`POP`}},_):_}function Qe(){let e=dt(),t=Ne(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r=`rgba(200,200,200, 0.5)`,i={padding:`0.5rem`,backgroundColor:r},a={padding:`2px 4px`,backgroundColor:r},o=null;return console.error(`Error handled by React Router default ErrorBoundary:`,e),o=w.createElement(w.Fragment,null,w.createElement(`p`,null,` Hey developer `),w.createElement(`p`,null,`You can provide a way better UX than this when your app throws errors by providing your own `,w.createElement(`code`,{style:a},`ErrorBoundary`),` or`,` `,w.createElement(`code`,{style:a},`errorElement`),` prop on your route.`)),w.createElement(w.Fragment,null,w.createElement(`h2`,null,`Unexpected Application Error!`),w.createElement(`h3`,{style:{fontStyle:`italic`}},t),n?w.createElement(`pre`,{style:i},n):null,o)}var $e=w.createElement(Qe,null),et=class extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!==`idle`&&e.revalidation===`idle`?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error===void 0?t.error:e.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error(`React Router caught the following error during render`,e)}render(){return this.state.error===void 0?this.props.children:w.createElement(Be.Provider,{value:this.props.routeContext},w.createElement(Ve.Provider,{value:this.state.error,children:this.props.component}))}};function tt({routeContext:e,match:t,children:n}){let r=w.useContext(Fe);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(Be.Provider,{value:e},n)}function nt(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let e=a.findIndex(e=>e.route.id&&o?.[e.route.id]!==void 0);D(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(`,`)}`),a=a.slice(0,Math.min(a.length,e+1))}let s=!1,c=-1;if(n)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(c=e),t.route.id){let{loaderData:e,errors:r}=n,i=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!r||r[t.route.id]===void 0);if(t.route.lazy||i){s=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}let l=n&&r?(e,t)=>{r(e,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Pe(n.matches),errorInfo:t})}:void 0;return a.reduceRight((e,r,i)=>{let u,d=!1,f=null,p=null;n&&(u=o&&r.route.id?o[r.route.id]:void 0,f=r.route.errorElement||$e,s&&(c<0&&i===0?(mt(`route-fallback`,!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):c===i&&(d=!0,p=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,i+1)),h=()=>{let t;return t=u?f:d?p:r.route.Component?w.createElement(r.route.Component,null):r.route.element?r.route.element:e,w.createElement(tt,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:n!=null},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||i===0)?w.createElement(et,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:h(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:l}):h()},null)}function rt(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function it(e){let t=w.useContext(Fe);return D(t,rt(e)),t}function at(e){let t=w.useContext(Ie);return D(t,rt(e)),t}function ot(e){let t=w.useContext(Be);return D(t,rt(e)),t}function st(e){let t=ot(e),n=t.matches[t.matches.length-1];return D(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function ct(){return st(`useRouteId`)}function lt(){return at(`useNavigation`).navigation}function ut(){let{matches:e,loaderData:t}=at(`useMatches`);return w.useMemo(()=>e.map(e=>oe(e,t)),[e,t])}function dt(){let e=w.useContext(Ve),t=at(`useRouteError`),n=st(`useRouteError`);return e===void 0?t.errors?.[n]:e}function ft(){let{router:e}=it(`useNavigate`),t=st(`useNavigate`),n=w.useRef(!1);return Ke(()=>{n.current=!0}),w.useCallback(async(r,i={})=>{O(n.current,Ge),n.current&&(typeof r==`number`?await e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var pt={};function mt(e,t,n){!t&&!pt[e]&&(pt[e]=!0,O(!1,n))}w.useOptimistic,w.memo(ht);function ht({routes:e,future:t,state:n,unstable_onError:r}){return Ze(e,void 0,n,r,t)}function gt({to:e,replace:t,state:n,relative:r}){D(Ue(),`<Navigate> may be used only in the context of a <Router> component.`);let{static:i}=w.useContext(I);O(!i,`<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.`);let{matches:a}=w.useContext(Be),{pathname:o}=We(),s=qe(),c=Oe(e,De(a),o,r===`path`),l=JSON.stringify(c);return w.useEffect(()=>{s(JSON.parse(l),{replace:t,state:n,relative:r})},[s,l,r,t,n]),null}function _t(e){D(!1,`A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.`)}function vt({basename:e=`/`,children:t=null,location:n,navigationType:r=`POP`,navigator:i,static:a=!1,unstable_useTransitions:o}){D(!Ue(),`You cannot render a <Router> inside another <Router>. You should never have more than one in your app.`);let s=e.replace(/^\/*/,`/`),c=w.useMemo(()=>({basename:s,navigator:i,static:a,unstable_useTransitions:o,future:{}}),[s,i,a,o]);typeof n==`string`&&(n=re(n));let{pathname:l=`/`,search:u=``,hash:d=``,state:f=null,key:p=`default`}=n,m=w.useMemo(()=>{let e=P(l,s);return e==null?null:{location:{pathname:e,search:u,hash:d,state:f,key:p},navigationType:r}},[s,l,u,d,f,p,r]);return O(m!=null,`<Router basename="${s}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:w.createElement(I.Provider,{value:c},w.createElement(ze.Provider,{children:t,value:m}))}function yt({children:e,location:t}){return Xe(bt(e),t)}function bt(e,t=[]){let n=[];return w.Children.forEach(e,(e,r)=>{if(!w.isValidElement(e))return;let i=[...t,r];if(e.type===w.Fragment){n.push.apply(n,bt(e.props.children,i));return}D(e.type===_t,`[${typeof e.type==`string`?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),D(!e.props.index||!e.props.children,`An index route cannot have child routes.`);let a={id:e.props.id||i.join(`-`),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:e.props.hasErrorBoundary===!0||e.props.ErrorBoundary!=null||e.props.errorElement!=null,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=bt(e.props.children,i)),n.push(a)}),n}var xt=`get`,St=`application/x-www-form-urlencoded`;function Ct(e){return typeof HTMLElement<`u`&&e instanceof HTMLElement}function wt(e){return Ct(e)&&e.tagName.toLowerCase()===`button`}function Tt(e){return Ct(e)&&e.tagName.toLowerCase()===`form`}function Et(e){return Ct(e)&&e.tagName.toLowerCase()===`input`}function Dt(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ot(e,t){return e.button===0&&(!t||t===`_self`)&&!Dt(e)}var kt=null;function At(){if(kt===null)try{new FormData(document.createElement(`form`),0),kt=!1}catch{kt=!0}return kt}var jt=new Set([`application/x-www-form-urlencoded`,`multipart/form-data`,`text/plain`]);function Mt(e){return e!=null&&!jt.has(e)?(O(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${St}"`),null):e}function Nt(e,t){let n,r,i,a,o;if(Tt(e)){let o=e.getAttribute(`action`);r=o?P(o,t):null,n=e.getAttribute(`method`)||xt,i=Mt(e.getAttribute(`enctype`))||St,a=new FormData(e)}else if(wt(e)||Et(e)&&(e.type===`submit`||e.type===`image`)){let o=e.form;if(o==null)throw Error(`Cannot submit a <button> or <input type="submit"> without a <form>`);let s=e.getAttribute(`formaction`)||o.getAttribute(`action`);if(r=s?P(s,t):null,n=e.getAttribute(`formmethod`)||o.getAttribute(`method`)||xt,i=Mt(e.getAttribute(`formenctype`))||Mt(o.getAttribute(`enctype`))||St,a=new FormData(o,e),!At()){let{name:t,type:n,value:r}=e;if(n===`image`){let e=t?`${t}.`:``;a.append(`${e}x`,`0`),a.append(`${e}y`,`0`)}else t&&a.append(t,r)}}else if(Ct(e))throw Error(`Cannot submit element that is not <form>, <button>, or <input type="submit|image">`);else n=xt,r=null,i=St,o=e;return a&&i===`text/plain`&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join(`\0`);function Pt(e,t){if(e===!1||e==null)throw Error(t)}function Ft(e,t,n){let r=typeof e==`string`?new URL(e,typeof window>`u`?`server://singlefetch/`:window.location.origin):e;return r.pathname===`/`?r.pathname=`_root.${n}`:t&&P(r.pathname,t)===`/`?r.pathname=`${t.replace(/\/$/,``)}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,``)}.${n}`,r}async function It(e,t){if(e.id in t)return t[e.id];try{let n=await C(()=>import(e.module),[]);return t[e.id]=n,n}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Lt(e){return e!=null&&typeof e.page==`string`}function Rt(e){return e==null?!1:e.href==null?e.rel===`preload`&&typeof e.imageSrcSet==`string`&&typeof e.imageSizes==`string`:typeof e.rel==`string`&&typeof e.href==`string`}async function zt(e,t,n){return Wt((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await It(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Rt).filter(e=>e.rel===`stylesheet`||e.rel===`preload`).map(e=>e.rel===`stylesheet`?{...e,rel:`prefetch`,as:`style`}:{...e,rel:`prefetch`}))}function Bt(e,t,n,r,i,a){let o=(e,t)=>n[t]?e.route.id!==n[t].route.id:!0,s=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith(`*`)&&n[t].params[`*`]!==e.params[`*`];return a===`assets`?t.filter((e,t)=>o(e,t)||s(e,t)):a===`data`?t.filter((t,a)=>{let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(o(t,a)||s(t,a))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if(typeof r==`boolean`)return r}return!0}):[]}function Vt(e,t,{includeHydrateFallback:n}={}){return Ht(e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function Ht(e){return[...new Set(e)]}function Ut(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Wt(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Lt(i)&&i.as===`script`&&i.href&&r.has(i.href))return e;let a=JSON.stringify(Ut(i));return n.has(a)||(n.add(a),e.push({key:a,link:i})),e},[])}function Gt(){let e=w.useContext(Fe);return Pt(e,`You must render this element inside a <DataRouterContext.Provider> element`),e}function Kt(){let e=w.useContext(Ie);return Pt(e,`You must render this element inside a <DataRouterStateContext.Provider> element`),e}var qt=w.createContext(void 0);qt.displayName=`FrameworkContext`;function Jt(){let e=w.useContext(qt);return Pt(e,`You must render this element inside a <HydratedRouter> element`),e}function Yt(e,t){let n=w.useContext(qt),[r,i]=w.useState(!1),[a,o]=w.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=t,f=w.useRef(null);w.useEffect(()=>{if(e===`render`&&o(!0),e===`viewport`){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),w.useEffect(()=>{if(r){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{i(!0)},m=()=>{i(!1),o(!1)};return n?e===`intent`?[a,f,{onFocus:Xt(s,p),onBlur:Xt(c,m),onMouseEnter:Xt(l,p),onMouseLeave:Xt(u,m),onTouchStart:Xt(d,p)}]:[a,f,{}]:[!1,f,{}]}function Xt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Zt({page:e,...t}){let{router:n}=Gt(),r=w.useMemo(()=>A(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?w.createElement($t,{page:e,matches:r,...t}):null}function Qt(e){let{manifest:t,routeModules:n}=Jt(),[r,i]=w.useState([]);return w.useEffect(()=>{let r=!1;return zt(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),r}function $t({page:e,matches:t,...n}){let r=We(),{manifest:i,routeModules:a}=Jt(),{basename:o}=Gt(),{loaderData:s,matches:c}=Kt(),l=w.useMemo(()=>Bt(e,t,c,i,r,`data`),[e,t,c,i,r]),u=w.useMemo(()=>Bt(e,t,c,i,r,`assets`),[e,t,c,i,r]),d=w.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,c=!1;if(t.forEach(e=>{let t=i.routes[e.route.id];!t||!t.hasLoader||(!l.some(t=>t.route.id===e.route.id)&&e.route.id in s&&a[e.route.id]?.shouldRevalidate||t.hasClientLoader?c=!0:n.add(e.route.id))}),n.size===0)return[];let u=Ft(e,o,`data`);return c&&n.size>0&&u.searchParams.set(`_routes`,t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(`,`)),[u.pathname+u.search]},[o,s,r,i,l,t,e,a]),f=w.useMemo(()=>Vt(u,i),[u,i]),p=Qt(u);return w.createElement(w.Fragment,null,d.map(e=>w.createElement(`link`,{key:e,rel:`prefetch`,as:`fetch`,href:e,...n})),f.map(e=>w.createElement(`link`,{key:e,rel:`modulepreload`,href:e,...n})),p.map(({key:e,link:t})=>w.createElement(`link`,{key:e,nonce:n.nonce,...t})))}function en(...e){return t=>{e.forEach(e=>{typeof e==`function`?e(t):e!=null&&(e.current=t)})}}var tn=typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0;try{tn&&(window.__reactRouterVersion=`7.10.1`)}catch{}function nn({basename:e,children:t,unstable_useTransitions:n,window:r}){let i=w.useRef();i.current??=E({window:r,v5Compat:!0});let a=i.current,[o,s]=w.useState({action:a.action,location:a.location}),c=w.useCallback(e=>{n===!1?s(e):w.startTransition(()=>s(e))},[n]);return w.useLayoutEffect(()=>a.listen(c),[a,c]),w.createElement(vt,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:n===!0})}function rn({basename:e,children:t,history:n,unstable_useTransitions:r}){let[i,a]=w.useState({action:n.action,location:n.location}),o=w.useCallback(e=>{r===!1?a(e):w.startTransition(()=>a(e))},[r]);return w.useLayoutEffect(()=>n.listen(o),[n,o]),w.createElement(vt,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:n,unstable_useTransitions:r===!0})}rn.displayName=`unstable_HistoryRouter`;var an=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,on=w.forwardRef(function({onClick:e,discover:t=`render`,prefetch:n=`none`,relative:r,reloadDocument:i,replace:a,state:o,target:s,to:c,preventScrollReset:l,viewTransition:u,...d},f){let{basename:p,unstable_useTransitions:m}=w.useContext(I),h=typeof c==`string`&&an.test(c),g,_=!1;if(typeof c==`string`&&h&&(g=c,tn))try{let e=new URL(window.location.href),t=c.startsWith(`//`)?new URL(e.protocol+c):new URL(c),n=P(t.pathname,p);t.origin===e.origin&&n!=null?c=n+t.search+t.hash:_=!0}catch{O(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=He(c,{relative:r}),[y,b,x]=Yt(n,d),S=pn(c,{replace:a,state:o,target:s,preventScrollReset:l,relative:r,viewTransition:u,unstable_useTransitions:m});function C(t){e&&e(t),t.defaultPrevented||S(t)}let T=w.createElement(`a`,{...d,...x,href:g||v,onClick:_||i?e:C,ref:en(f,b),target:s,"data-discover":!h&&t===`render`?`true`:void 0});return y&&!h?w.createElement(w.Fragment,null,T,w.createElement(Zt,{page:v})):T});on.displayName=`Link`;var sn=w.forwardRef(function({"aria-current":e=`page`,caseSensitive:t=!1,className:n=``,end:r=!1,style:i,to:a,viewTransition:o,children:s,...c},l){let u=Ye(a,{relative:c.relative}),d=We(),f=w.useContext(Ie),{navigator:p,basename:m}=w.useContext(I),h=f!=null&&Cn(u)&&o===!0,g=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,_=d.pathname,v=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(_=_.toLowerCase(),v=v?v.toLowerCase():null,g=g.toLowerCase()),v&&m&&(v=P(v,m)||v);let y=g!==`/`&&g.endsWith(`/`)?g.length-1:g.length,b=_===g||!r&&_.startsWith(g)&&_.charAt(y)===`/`,x=v!=null&&(v===g||!r&&v.startsWith(g)&&v.charAt(g.length)===`/`),S={isActive:b,isPending:x,isTransitioning:h},C=b?e:void 0,T;T=typeof n==`function`?n(S):[n,b?`active`:null,x?`pending`:null,h?`transitioning`:null].filter(Boolean).join(` `);let E=typeof i==`function`?i(S):i;return w.createElement(on,{...c,"aria-current":C,className:T,ref:l,style:E,to:a,viewTransition:o},typeof s==`function`?s(S):s)});sn.displayName=`NavLink`;var cn=w.forwardRef(({discover:e=`render`,fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:o=xt,action:s,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,...f},p)=>{let{unstable_useTransitions:m}=w.useContext(I),h=gn(),g=_n(s,{relative:l}),_=o.toLowerCase()===`get`?`get`:`post`,v=typeof s==`string`&&an.test(s);return w.createElement(`form`,{ref:p,method:_,action:g,onSubmit:r?c:e=>{if(c&&c(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,s=r?.getAttribute(`formmethod`)||o,f=()=>h(r||e.currentTarget,{fetcherKey:t,method:s,navigate:n,replace:i,state:a,relative:l,preventScrollReset:u,viewTransition:d});m&&n!==!1?w.startTransition(()=>f()):f()},...f,"data-discover":!v&&e===`render`?`true`:void 0})});cn.displayName=`Form`;function ln({getKey:e,storageKey:t,...n}){let r=w.useContext(qt),{basename:i}=w.useContext(I),a=We(),o=ut();xn({getKey:e,storageKey:t});let s=w.useMemo(()=>{if(!r||!e)return null;let t=bn(a,o,i,e);return t===a.key?null:t},[]);if(!r||r.isSpaMode)return null;let c=((e,t)=>{if(!window.history.state||!window.history.state.key){let e=Math.random().toString(32).slice(2);window.history.replaceState({key:e},``)}try{let n=JSON.parse(sessionStorage.getItem(e)||`{}`)[t||window.history.state.key];typeof n==`number`&&window.scrollTo(0,n)}catch(t){console.error(t),sessionStorage.removeItem(e)}}).toString();return w.createElement(`script`,{...n,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${c})(${JSON.stringify(t||vn)}, ${JSON.stringify(s)})`}})}ln.displayName=`ScrollRestoration`;function un(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dn(e){let t=w.useContext(Fe);return D(t,un(e)),t}function fn(e){let t=w.useContext(Ie);return D(t,un(e)),t}function pn(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o,unstable_useTransitions:s}={}){let c=qe(),l=We(),u=Ye(e,{relative:a});return w.useCallback(d=>{if(Ot(d,t)){d.preventDefault();let t=n===void 0?k(l)===k(u):n,f=()=>c(e,{replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o});s?w.startTransition(()=>f()):f()}},[l,c,u,n,r,t,e,i,a,o,s])}var mn=0,hn=()=>`__${String(++mn)}__`;function gn(){let{router:e}=dn(`useSubmit`),{basename:t}=w.useContext(I),n=ct(),r=e.fetch,i=e.navigate;return w.useCallback(async(e,a={})=>{let{action:o,method:s,encType:c,formData:l,body:u}=Nt(e,t);a.navigate===!1?await r(a.fetcherKey||hn(),n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:l,body:u,formMethod:a.method||s,formEncType:a.encType||c,flushSync:a.flushSync}):await i(a.action||o,{preventScrollReset:a.preventScrollReset,formData:l,body:u,formMethod:a.method||s,formEncType:a.encType||c,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,t,n])}function _n(e,{relative:t}={}){let{basename:n}=w.useContext(I),r=w.useContext(Be);D(r,`useFormAction must be used inside a RouteContext`);let[i]=r.matches.slice(-1),a={...Ye(e||`.`,{relative:t})},o=We();if(e==null){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll(`index`);if(t.some(e=>e===``)){e.delete(`index`),t.filter(e=>e).forEach(t=>e.append(`index`,t));let n=e.toString();a.search=n?`?${n}`:``}}return(!e||e===`.`)&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,`?index&`):`?index`),n!==`/`&&(a.pathname=a.pathname===`/`?n:ke([n,a.pathname])),k(a)}var vn=`react-router-scroll-positions`,yn={};function bn(e,t,n,r){let i=null;return r&&(i=r(n===`/`?e:{...e,pathname:P(e.pathname,n)||e.pathname},t)),i??=e.key,i}function xn({getKey:e,storageKey:t}={}){let{router:n}=dn(`useScrollRestoration`),{restoreScrollPosition:r,preventScrollReset:i}=fn(`useScrollRestoration`),{basename:a}=w.useContext(I),o=We(),s=ut(),c=lt();w.useEffect(()=>(window.history.scrollRestoration=`manual`,()=>{window.history.scrollRestoration=`auto`}),[]),Sn(w.useCallback(()=>{if(c.state===`idle`){let t=bn(o,s,a,e);yn[t]=window.scrollY}try{sessionStorage.setItem(t||vn,JSON.stringify(yn))}catch(e){O(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${e}).`)}window.history.scrollRestoration=`auto`},[c.state,e,a,o,s,t])),typeof document<`u`&&(w.useLayoutEffect(()=>{try{let e=sessionStorage.getItem(t||vn);e&&(yn=JSON.parse(e))}catch{}},[t]),w.useLayoutEffect(()=>{let t=n?.enableScrollRestoration(yn,()=>window.scrollY,e?(t,n)=>bn(t,n,a,e):void 0);return()=>t&&t()},[n,a,e]),w.useLayoutEffect(()=>{if(r!==!1){if(typeof r==`number`){window.scrollTo(0,r);return}try{if(o.hash){let e=document.getElementById(decodeURIComponent(o.hash.slice(1)));if(e){e.scrollIntoView();return}}}catch{O(!1,`"${o.hash.slice(1)}" is not a decodable element ID. The view will not scroll to it.`)}i!==!0&&window.scrollTo(0,0)}},[o,r,i]))}function Sn(e,t){let{capture:n}=t||{};w.useEffect(()=>{let t=n==null?void 0:{capture:n};return window.addEventListener(`pagehide`,e,t),()=>{window.removeEventListener(`pagehide`,e,t)}},[e,n])}function Cn(e,{relative:t}={}){let n=w.useContext(Le);D(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=dn(`useViewTransitionState`),i=Ye(e,{relative:t});if(!n.isTransitioning)return!1;let a=P(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=P(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ve(i.pathname,o)!=null||ve(i.pathname,a)!=null}var wn=c({__addDisposableResource:()=>Zn,__assign:()=>tr,__asyncDelegator:()=>Un,__asyncGenerator:()=>Hn,__asyncValues:()=>Wn,__await:()=>Vn,__awaiter:()=>L,__classPrivateFieldGet:()=>Jn,__classPrivateFieldIn:()=>Xn,__classPrivateFieldSet:()=>Yn,__createBinding:()=>nr,__decorate:()=>Dn,__disposeResources:()=>Qn,__esDecorate:()=>kn,__exportStar:()=>Fn,__extends:()=>Tn,__generator:()=>Pn,__importDefault:()=>qn,__importStar:()=>Kn,__makeTemplateObject:()=>Gn,__metadata:()=>Nn,__param:()=>On,__propKey:()=>jn,__read:()=>Ln,__rest:()=>En,__rewriteRelativeImportExtension:()=>$n,__runInitializers:()=>An,__setFunctionName:()=>Mn,__spread:()=>Rn,__spreadArray:()=>Bn,__spreadArrays:()=>zn,__values:()=>In,default:()=>or});function Tn(e,t){if(typeof t!=`function`&&t!==null)throw TypeError(`Class extends value `+String(t)+` is not a constructor or null`);er(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function En(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Dn(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function On(e,t){return function(n,r){t(n,r,e)}}function kn(e,t,n,r,i,a){function o(e){if(e!==void 0&&typeof e!=`function`)throw TypeError(`Function expected`);return e}for(var s=r.kind,c=s===`getter`?`get`:s===`setter`?`set`:`value`,l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d,f=!1,p=n.length-1;p>=0;p--){var m={};for(var h in r)m[h]=h===`access`?{}:r[h];for(var h in r.access)m.access[h]=r.access[h];m.addInitializer=function(e){if(f)throw TypeError(`Cannot add initializers after decoration has completed`);a.push(o(e||null))};var g=(0,n[p])(s===`accessor`?{get:u.get,set:u.set}:u[c],m);if(s===`accessor`){if(g===void 0)continue;if(typeof g!=`object`||!g)throw TypeError(`Object expected`);(d=o(g.get))&&(u.get=d),(d=o(g.set))&&(u.set=d),(d=o(g.init))&&i.unshift(d)}else (d=o(g))&&(s===`field`?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,r.name,u),f=!0}function An(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function jn(e){return typeof e==`symbol`?e:`${e}`}function Mn(e,t,n){return typeof t==`symbol`&&(t=t.description?`[${t.description}]`:``),Object.defineProperty(e,`name`,{configurable:!0,value:n?`${n} ${t}`:t})}function Nn(e,t){if(typeof Reflect==`object`&&typeof Reflect.metadata==`function`)return Reflect.metadata(e,t)}function L(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})}function Pn(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o=Object.create((typeof Iterator==`function`?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(s){if(r)throw TypeError(`Generator is already executing.`);for(;o&&(o=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function Fn(e,t){for(var n in e)n!==`default`&&!Object.prototype.hasOwnProperty.call(t,n)&&nr(t,e,n)}function In(e){var t=typeof Symbol==`function`&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==`number`)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?`Object is not iterable.`:`Symbol.iterator is not defined.`)}function Ln(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function Rn(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ln(arguments[t]));return e}function zn(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function Bn(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function Vn(e){return this instanceof Vn?(this.v=e,this):new Vn(e)}function Hn(e,t,n){if(!Symbol.asyncIterator)throw TypeError(`Symbol.asyncIterator is not defined.`);var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator==`function`?AsyncIterator:Object).prototype),s(`next`),s(`throw`),s(`return`,o),i[Symbol.asyncIterator]=function(){return this},i;function o(e){return function(t){return Promise.resolve(t).then(e,d)}}function s(e,t){r[e]&&(i[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||c(e,t)})},t&&(i[e]=t(i[e])))}function c(e,t){try{l(r[e](t))}catch(e){f(a[0][3],e)}}function l(e){e.value instanceof Vn?Promise.resolve(e.value.v).then(u,d):f(a[0][2],e)}function u(e){c(`next`,e)}function d(e){c(`throw`,e)}function f(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}}function Un(e){var t,n;return t={},r(`next`),r(`throw`,function(e){throw e}),r(`return`),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:Vn(e[r](t)),done:!1}:i?i(t):t}:i}}function Wn(e){if(!Symbol.asyncIterator)throw TypeError(`Symbol.asyncIterator is not defined.`);var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof In==`function`?In(e):e[Symbol.iterator](),n={},r(`next`),r(`throw`),r(`return`),n[Symbol.asyncIterator]=function(){return this},n);function r(t){n[t]=e[t]&&function(n){return new Promise(function(r,a){n=e[t](n),i(r,a,n.done,n.value)})}}function i(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}}function Gn(e,t){return Object.defineProperty?Object.defineProperty(e,`raw`,{value:t}):e.raw=t,e}function Kn(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=ir(e),r=0;r<n.length;r++)n[r]!==`default`&&nr(t,e,n[r]);return rr(t,e),t}function qn(e){return e&&e.__esModule?e:{default:e}}function Jn(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)}function Yn(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n}function Xn(e,t){if(t===null||typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Cannot use 'in' operator on non-object`);return typeof e==`function`?t===e:e.has(t)}function Zn(e,t,n){if(t!=null){if(typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Object expected.`);var r,i;if(n){if(!Symbol.asyncDispose)throw TypeError(`Symbol.asyncDispose is not defined.`);r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw TypeError(`Symbol.dispose is not defined.`);r=t[Symbol.dispose],n&&(i=r)}if(typeof r!=`function`)throw TypeError(`Object not disposable.`);i&&(r=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}function Qn(e){function t(t){e.error=e.hasError?new ar(t,e.error,`An error was suppressed during disposal.`):t,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(i,function(e){return t(e),i()})}else r|=1}catch(e){t(e)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function $n(e,t){return typeof e==`string`&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,r,i,a){return n?t?`.jsx`:`.js`:r&&(!i||!a)?e:r+i+`.`+a.toLowerCase()+`js`}):e}var er,tr,nr,rr,ir,ar,or,sr=o((()=>{er=function(e,t){return er=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},er(e,t)},tr=function(){return tr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},tr.apply(this,arguments)},nr=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),rr=Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t},ir=function(e){return ir=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},ir(e)},ar=typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r},or={__extends:Tn,__assign:tr,__rest:En,__decorate:Dn,__param:On,__esDecorate:kn,__runInitializers:An,__propKey:jn,__setFunctionName:Mn,__metadata:Nn,__awaiter:L,__generator:Pn,__createBinding:nr,__exportStar:Fn,__values:In,__read:Ln,__spread:Rn,__spreadArrays:zn,__spreadArray:Bn,__await:Vn,__asyncGenerator:Hn,__asyncDelegator:Un,__asyncValues:Wn,__makeTemplateObject:Gn,__importStar:Kn,__importDefault:qn,__classPrivateFieldGet:Jn,__classPrivateFieldSet:Yn,__classPrivateFieldIn:Xn,__addDisposableResource:Zn,__disposeResources:Qn,__rewriteRelativeImportExtension:$n}})),cr,lr=o((()=>{cr=e=>e?(...t)=>e(...t):(...e)=>fetch(...e)})),ur,dr,fr,pr,mr,hr=o((()=>{ur=class extends Error{constructor(e,t=`FunctionsError`,n){super(e),this.name=t,this.context=n}},dr=class extends ur{constructor(e){super(`Failed to send a request to the Edge Function`,`FunctionsFetchError`,e)}},fr=class extends ur{constructor(e){super(`Relay Error invoking the Edge Function`,`FunctionsRelayError`,e)}},pr=class extends ur{constructor(e){super(`Edge Function returned a non-2xx status code`,`FunctionsHttpError`,e)}},(function(e){e.Any=`any`,e.ApNortheast1=`ap-northeast-1`,e.ApNortheast2=`ap-northeast-2`,e.ApSouth1=`ap-south-1`,e.ApSoutheast1=`ap-southeast-1`,e.ApSoutheast2=`ap-southeast-2`,e.CaCentral1=`ca-central-1`,e.EuCentral1=`eu-central-1`,e.EuWest1=`eu-west-1`,e.EuWest2=`eu-west-2`,e.EuWest3=`eu-west-3`,e.SaEast1=`sa-east-1`,e.UsEast1=`us-east-1`,e.UsWest1=`us-west-1`,e.UsWest2=`us-west-2`})(mr||={})})),gr,_r=o((()=>{sr(),lr(),hr(),gr=class{constructor(e,{headers:t={},customFetch:n,region:r=mr.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=cr(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return L(this,arguments,void 0,function*(e,t={}){let n,r;try{let{headers:i,method:a,body:o,signal:s,timeout:c}=t,l={},{region:u}=t;u||=this.region;let d=new URL(`${this.url}/${e}`);u&&u!==`any`&&(l[`x-region`]=u,d.searchParams.set(`forceFunctionRegion`,u));let f;o&&(i&&!Object.prototype.hasOwnProperty.call(i,`Content-Type`)||!i)?typeof Blob<`u`&&o instanceof Blob||o instanceof ArrayBuffer?(l[`Content-Type`]=`application/octet-stream`,f=o):typeof o==`string`?(l[`Content-Type`]=`text/plain`,f=o):typeof FormData<`u`&&o instanceof FormData?f=o:(l[`Content-Type`]=`application/json`,f=JSON.stringify(o)):f=o;let p=s;c&&(r=new AbortController,n=setTimeout(()=>r.abort(),c),s?(p=r.signal,s.addEventListener(`abort`,()=>r.abort())):p=r.signal);let m=yield this.fetch(d.toString(),{method:a||`POST`,headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:f,signal:p}).catch(e=>{throw new dr(e)}),h=m.headers.get(`x-relay-error`);if(h&&h===`true`)throw new fr(m);if(!m.ok)throw new pr(m);let g=(m.headers.get(`Content-Type`)??`text/plain`).split(`;`)[0].trim(),_;return _=g===`application/json`?yield m.json():g===`application/octet-stream`||g===`application/pdf`?yield m.blob():g===`text/event-stream`?m:g===`multipart/form-data`?yield m.formData():yield m.text(),{data:_,error:null,response:m}}catch(e){return{data:null,error:e,response:e instanceof pr||e instanceof fr?e.context:void 0}}finally{n&&clearTimeout(n)}})}}})),vr=c({FunctionRegion:()=>mr,FunctionsClient:()=>gr,FunctionsError:()=>ur,FunctionsFetchError:()=>dr,FunctionsHttpError:()=>pr,FunctionsRelayError:()=>fr}),yr=o((()=>{_r(),hr()})),br=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.default=class extends Error{constructor(e){super(e.message),this.name=`PostgrestError`,this.details=e.details,this.hint=e.hint,this.code=e.code}}})),xr=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0});var t=(sr(),d(wn)).__importDefault(br());e.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError??!1,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle??!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,n){this.schema===void 0||([`GET`,`HEAD`].includes(this.method)?this.headers.set(`Accept-Profile`,this.schema):this.headers.set(`Content-Profile`,this.schema)),this.method!==`GET`&&this.method!==`HEAD`&&this.headers.set(`Content-Type`,`application/json`);let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{let n=null,r=null,i=null,a=e.status,o=e.statusText;if(e.ok){if(this.method!==`HEAD`){let t=await e.text();t===``||(r=this.headers.get(`Accept`)===`text/csv`||this.headers.get(`Accept`)&&this.headers.get(`Accept`)?.includes(`application/vnd.pgrst.plan+text`)?t:JSON.parse(t))}let t=this.headers.get(`Prefer`)?.match(/count=(exact|planned|estimated)/),s=e.headers.get(`content-range`)?.split(`/`);t&&s&&s.length>1&&(i=parseInt(s[1])),this.isMaybeSingle&&this.method===`GET`&&Array.isArray(r)&&(r.length>1?(n={code:`PGRST116`,details:`Results contain ${r.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:`JSON object requested, multiple (or no) rows returned`},r=null,i=null,a=406,o=`Not Acceptable`):r=r.length===1?r[0]:null)}else{let i=await e.text();try{n=JSON.parse(i),Array.isArray(n)&&e.status===404&&(r=[],n=null,a=200,o=`OK`)}catch{e.status===404&&i===``?(a=204,o=`No Content`):n={message:i}}if(n&&this.isMaybeSingle&&(n?.details)?.includes(`0 rows`)&&(n=null,a=200,o=`OK`),n&&this.shouldThrowOnError)throw new t.default(n)}return{error:n,data:r,count:i,status:a,statusText:o}});return this.shouldThrowOnError||(i=i.catch(e=>{let t=``,n=e?.cause;if(n){let r=n?.message??``,i=n?.code??``;t=`${e?.name??`FetchError`}: ${e?.message}`,t+=`\n\nCaused by: ${n?.name??`Error`}: ${r}`,i&&(t+=` (${i})`),n?.stack&&(t+=`\n${n.stack}`)}else t=e?.stack??``;return{error:{message:`${e?.name??`FetchError`}: ${e?.message}`,details:t,hint:``,code:``},data:null,count:null,status:0,statusText:``}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}}})),Sr=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0});var t=(sr(),d(wn)).__importDefault(xr());e.default=class extends t.default{select(e){let t=!1,n=(e??`*`).split(``).map(e=>/\s/.test(e)&&!t?``:(e===`"`&&(t=!t),e)).join(``);return this.url.searchParams.set(`select`,n),this.headers.append(`Prefer`,`return=representation`),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){let a=i?`${i}.order`:`order`,o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:``}${e}.${t?`asc`:`desc`}${n===void 0?``:n?`.nullsfirst`:`.nullslast`}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){let r=n===void 0?`limit`:`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){let i=r===void 0?`offset`:`${r}.offset`,a=r===void 0?`limit`:`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set(`Accept`,`application/vnd.pgrst.object+json`),this}maybeSingle(){return this.method===`GET`?this.headers.set(`Accept`,`application/json`):this.headers.set(`Accept`,`application/vnd.pgrst.object+json`),this.isMaybeSingle=!0,this}csv(){return this.headers.set(`Accept`,`text/csv`),this}geojson(){return this.headers.set(`Accept`,`application/geo+json`),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:a=`text`}={}){let o=[e?`analyze`:null,t?`verbose`:null,n?`settings`:null,r?`buffers`:null,i?`wal`:null].filter(Boolean).join(`|`),s=this.headers.get(`Accept`)??`application/json`;return this.headers.set(`Accept`,`application/vnd.pgrst.plan+${a}; for="${s}"; options=${o};`),this}rollback(){return this.headers.append(`Prefer`,`tx=rollback`),this}returns(){return this}maxAffected(e){return this.headers.append(`Prefer`,`handling=strict`),this.headers.append(`Prefer`,`max-affected=${e}`),this}}})),Cr=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0});var t=(sr(),d(wn)).__importDefault(Sr()),n=RegExp(`[,()]`);e.default=class extends t.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(`,`)}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(`,`)}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(`,`)}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(`,`)}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(e=>typeof e==`string`&&n.test(e)?`"${e}"`:`${e}`).join(`,`);return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t==`string`?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(`,`)}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t==`string`?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(`,`)}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t==`string`?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(`,`)}}`),this}textSearch(e,t,{config:n,type:r}={}){let i=``;r===`plain`?i=`pl`:r===`phrase`?i=`ph`:r===`websearch`&&(i=`w`);let a=n===void 0?``:`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){let r=n?`${n}.or`:`or`;return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}})),wr=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0});var t=(sr(),d(wn)).__importDefault(Cr());e.default=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,n){let{head:r=!1,count:i}=n??{},a=r?`HEAD`:`GET`,o=!1,s=(e??`*`).split(``).map(e=>/\s/.test(e)&&!o?``:(e===`"`&&(o=!o),e)).join(``);return this.url.searchParams.set(`select`,s),i&&this.headers.append(`Prefer`,`count=${i}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){if(n&&this.headers.append(`Prefer`,`count=${n}`),r||this.headers.append(`Prefer`,`missing=default`),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set(`columns`,e.join(`,`))}}return new t.default({method:`POST`,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch??fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:a=!0}={}){if(this.headers.append(`Prefer`,`resolution=${r?`ignore`:`merge`}-duplicates`),n!==void 0&&this.url.searchParams.set(`on_conflict`,n),i&&this.headers.append(`Prefer`,`count=${i}`),a||this.headers.append(`Prefer`,`missing=default`),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set(`columns`,e.join(`,`))}}return new t.default({method:`POST`,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch??fetch})}update(e,{count:n}={}){return n&&this.headers.append(`Prefer`,`count=${n}`),new t.default({method:`PATCH`,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch??fetch})}delete({count:e}={}){return e&&this.headers.append(`Prefer`,`count=${e}`),new t.default({method:`DELETE`,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch??fetch})}}})),Tr=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0});var t=(sr(),d(wn)),n=t.__importDefault(wr()),r=t.__importDefault(Cr());e.default=class e{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){if(!e||typeof e!=`string`||e.trim()===``)throw Error(`Invalid relation name: relation must be a non-empty string.`);let t=new URL(`${this.url}/${e}`);return new n.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:i=!1,count:a}={}){let o,s=new URL(`${this.url}/rpc/${e}`),c;n||i?(o=n?`HEAD`:`GET`,Object.entries(t).filter(([e,t])=>t!==void 0).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(`,`)}}`:`${t}`]).forEach(([e,t])=>{s.searchParams.append(e,t)})):(o=`POST`,c=t);let l=new Headers(this.headers);return a&&l.set(`Prefer`,`count=${a}`),new r.default({method:o,url:s,headers:l,schema:this.schemaName,body:c,fetch:this.fetch??fetch})}}})),Er=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.PostgrestError=e.PostgrestBuilder=e.PostgrestTransformBuilder=e.PostgrestFilterBuilder=e.PostgrestQueryBuilder=e.PostgrestClient=void 0;var t=(sr(),d(wn)),n=t.__importDefault(Tr());e.PostgrestClient=n.default;var r=t.__importDefault(wr());e.PostgrestQueryBuilder=r.default;var i=t.__importDefault(Cr());e.PostgrestFilterBuilder=i.default;var a=t.__importDefault(Sr());e.PostgrestTransformBuilder=a.default;var o=t.__importDefault(xr());e.PostgrestBuilder=o.default;var s=t.__importDefault(br());e.PostgrestError=s.default,e.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:s.default}})),Dr,Or,kr=o((()=>{Dr=class{constructor(){}static detectEnvironment(){if(typeof WebSocket<`u`)return{type:`native`,constructor:WebSocket};if(typeof globalThis<`u`&&globalThis.WebSocket!==void 0)return{type:`native`,constructor:globalThis.WebSocket};if(typeof global<`u`&&global.WebSocket!==void 0)return{type:`native`,constructor:global.WebSocket};if(typeof globalThis<`u`&&globalThis.WebSocketPair!==void 0&&globalThis.WebSocket===void 0)return{type:`cloudflare`,error:`Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.`,workaround:`Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.`};if(typeof globalThis<`u`&&globalThis.EdgeRuntime||typeof navigator<`u`&&navigator.userAgent?.includes(`Vercel-Edge`))return{type:`unsupported`,error:`Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.`,workaround:`Use serverless functions or a different deployment target for WebSocket functionality.`};if(typeof process<`u`){let e=process.versions;if(e&&e.node){let t=e.node,n=parseInt(t.replace(/^v/,``).split(`.`)[0]);return n>=22?globalThis.WebSocket===void 0?{type:`unsupported`,error:`Node.js ${n} detected but native WebSocket not found.`,workaround:`Provide a WebSocket implementation via the transport option.`}:{type:`native`,constructor:globalThis.WebSocket}:{type:`unsupported`,error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:`unsupported`,error:`Unknown JavaScript runtime without WebSocket support.`,workaround:`Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.`}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||`WebSocket not supported in this environment.`;throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return e.type===`native`||e.type===`ws`}catch{return!1}}},Or=Dr})),Ar,jr=o((()=>{Ar=`2.86.2`})),Mr,Nr,Pr,Fr,Ir,Lr,Rr,zr,Br,Vr,Hr=o((()=>{jr(),Mr=`realtime-js/${Ar}`,Nr=`1.0.0`,Pr=`2.0.0`,Fr=Nr,Ir=1e4,(function(e){e[e.connecting=0]=`connecting`,e[e.open=1]=`open`,e[e.closing=2]=`closing`,e[e.closed=3]=`closed`})(Lr||={}),(function(e){e.closed=`closed`,e.errored=`errored`,e.joined=`joined`,e.joining=`joining`,e.leaving=`leaving`})(Rr||={}),(function(e){e.close=`phx_close`,e.error=`phx_error`,e.join=`phx_join`,e.reply=`phx_reply`,e.leave=`phx_leave`,e.access_token=`access_token`})(zr||={}),(function(e){e.websocket=`websocket`})(Br||={}),(function(e){e.Connecting=`connecting`,e.Open=`open`,e.Closing=`closing`,e.Closed=`closed`})(Vr||={})})),Ur,Wr=o((()=>{Ur=class{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT=`broadcast`,this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event==`string`)return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){return this._isArrayBuffer(e.payload?.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){let t=e.payload?.payload??new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,t)}_encodeJsonUserBroadcastPush(e){let t=e.payload?.payload??{},n=new TextEncoder().encode(JSON.stringify(t)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,n)}_encodeUserBroadcastPush(e,t,n){let r=e.topic,i=e.ref??``,a=e.join_ref??``,o=e.payload.event,s=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},c=Object.keys(s).length===0?``:JSON.stringify(s);if(a.length>255)throw Error(`joinRef length ${a.length} exceeds maximum of 255`);if(i.length>255)throw Error(`ref length ${i.length} exceeds maximum of 255`);if(r.length>255)throw Error(`topic length ${r.length} exceeds maximum of 255`);if(o.length>255)throw Error(`userEvent length ${o.length} exceeds maximum of 255`);if(c.length>255)throw Error(`metadata length ${c.length} exceeds maximum of 255`);let l=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+i.length+r.length+o.length+c.length,u=new ArrayBuffer(this.HEADER_LENGTH+l),d=new DataView(u),f=0;d.setUint8(f++,this.KINDS.userBroadcastPush),d.setUint8(f++,a.length),d.setUint8(f++,i.length),d.setUint8(f++,r.length),d.setUint8(f++,o.length),d.setUint8(f++,c.length),d.setUint8(f++,t),Array.from(a,e=>d.setUint8(f++,e.charCodeAt(0))),Array.from(i,e=>d.setUint8(f++,e.charCodeAt(0))),Array.from(r,e=>d.setUint8(f++,e.charCodeAt(0))),Array.from(o,e=>d.setUint8(f++,e.charCodeAt(0))),Array.from(c,e=>d.setUint8(f++,e.charCodeAt(0)));var p=new Uint8Array(u.byteLength+n.byteLength);return p.set(new Uint8Array(u),0),p.set(new Uint8Array(n),u.byteLength),p.buffer}decode(e,t){if(this._isArrayBuffer(e))return t(this._binaryDecode(e));if(typeof e==`string`){let[n,r,i,a,o]=JSON.parse(e);return t({join_ref:n,ref:r,topic:i,event:a,payload:o})}return t({})}_binaryDecode(e){let t=new DataView(e),n=t.getUint8(0),r=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,r)}}_decodeUserBroadcast(e,t,n){let r=t.getUint8(1),i=t.getUint8(2),a=t.getUint8(3),o=t.getUint8(4),s=this.HEADER_LENGTH+4,c=n.decode(e.slice(s,s+r));s+=r;let l=n.decode(e.slice(s,s+i));s+=i;let u=n.decode(e.slice(s,s+a));s+=a;let d=e.slice(s,e.byteLength),f=o===this.JSON_ENCODING?JSON.parse(n.decode(d)):d,p={type:this.BROADCAST_EVENT,event:l,payload:f};return a>0&&(p.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){return e instanceof ArrayBuffer||e?.constructor?.name===`ArrayBuffer`}_pick(e,t){return!e||typeof e!=`object`?{}:Object.fromEntries(Object.entries(e).filter(([e])=>t.includes(e)))}}})),Gr,Kr=o((()=>{Gr=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries+=1,this.callback()},this.timerCalc(this.tries+1))}}})),qr,Jr,Yr,Xr,Zr,Qr,$r,ei,ti,ni,ri,ii=o((()=>{(function(e){e.abstime=`abstime`,e.bool=`bool`,e.date=`date`,e.daterange=`daterange`,e.float4=`float4`,e.float8=`float8`,e.int2=`int2`,e.int4=`int4`,e.int4range=`int4range`,e.int8=`int8`,e.int8range=`int8range`,e.json=`json`,e.jsonb=`jsonb`,e.money=`money`,e.numeric=`numeric`,e.oid=`oid`,e.reltime=`reltime`,e.text=`text`,e.time=`time`,e.timestamp=`timestamp`,e.timestamptz=`timestamptz`,e.timetz=`timetz`,e.tsrange=`tsrange`,e.tstzrange=`tstzrange`})(qr||={}),Jr=(e,t,n={})=>{let r=n.skipTypes??[];return t?Object.keys(t).reduce((n,i)=>(n[i]=Yr(i,e,t,r),n),{}):{}},Yr=(e,t,n,r)=>{let i=t.find(t=>t.name===e)?.type,a=n[e];return i&&!r.includes(i)?Xr(i,a):Zr(a)},Xr=(e,t)=>{if(e.charAt(0)===`_`)return ti(t,e.slice(1,e.length));switch(e){case qr.bool:return Qr(t);case qr.float4:case qr.float8:case qr.int2:case qr.int4:case qr.int8:case qr.numeric:case qr.oid:return $r(t);case qr.json:case qr.jsonb:return ei(t);case qr.timestamp:return ni(t);case qr.abstime:case qr.date:case qr.daterange:case qr.int4range:case qr.int8range:case qr.money:case qr.reltime:case qr.text:case qr.time:case qr.timestamptz:case qr.timetz:case qr.tsrange:case qr.tstzrange:return Zr(t);default:return Zr(t)}},Zr=e=>e,Qr=e=>{switch(e){case`t`:return!0;case`f`:return!1;default:return e}},$r=e=>{if(typeof e==`string`){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ei=e=>{if(typeof e==`string`)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ti=(e,t)=>{if(typeof e!=`string`)return e;let n=e.length-1,r=e[n];if(e[0]===`{`&&r===`}`){let r,i=e.slice(1,n);try{r=JSON.parse(`[`+i+`]`)}catch{r=i?i.split(`,`):[]}return r.map(e=>Xr(t,e))}return e},ni=e=>typeof e==`string`?e.replace(` `,`T`):e,ri=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,`http`),t.pathname=t.pathname.replace(/\/+$/,``).replace(/\/socket\/websocket$/i,``).replace(/\/socket$/i,``).replace(/\/websocket$/i,``),t.pathname===``||t.pathname===`/`?t.pathname=`/api/broadcast`:t.pathname+=`/api/broadcast`,t.href}})),ai,oi=o((()=>{Hr(),ai=class{constructor(e,t,n={},r=Ir){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref=``,this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref=``,this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived(`timeout`)||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){return this._hasReceived(e)&&t(this.receivedResp?.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||=(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),setTimeout(()=>{this.trigger(`timeout`,{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}})),si,ci,li=o((()=>{(function(e){e.SYNC=`sync`,e.JOIN=`join`,e.LEAVE=`leave`})(si||={}),ci=class e{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=n?.events||{state:`presence_state`,diff:`presence_diff`};this.channel._on(r.state,{},t=>{let{onJoin:n,onLeave:r,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=e.syncState(this.state,t,n,r),this.pendingDiffs.forEach(t=>{this.state=e.syncDiff(this.state,t,n,r)}),this.pendingDiffs=[],i()}),this.channel._on(r.diff,{},t=>{let{onJoin:n,onLeave:r,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(t):(this.state=e.syncDiff(this.state,t,n,r),i())}),this.onJoin((e,t,n)=>{this.channel._trigger(`presence`,{event:`join`,key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger(`presence`,{event:`leave`,key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger(`presence`,{event:`sync`})})}static syncState(e,t,n,r){let i=this.cloneDeep(e),a=this.transformState(t),o={},s={};return this.map(i,(e,t)=>{a[e]||(s[e]=t)}),this.map(a,(e,t)=>{let n=i[e];if(n){let r=t.map(e=>e.presence_ref),i=n.map(e=>e.presence_ref),a=t.filter(e=>i.indexOf(e.presence_ref)<0),c=n.filter(e=>r.indexOf(e.presence_ref)<0);a.length>0&&(o[e]=a),c.length>0&&(s[e]=c)}else o[e]=t}),this.syncDiff(i,{joins:o,leaves:s},n,r)}static syncDiff(e,t,n,r){let{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||=()=>{},r||=()=>{},this.map(i,(t,r)=>{let i=e[t]??[];if(e[t]=this.cloneDeep(r),i.length>0){let n=e[t].map(e=>e.presence_ref),r=i.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,i,r)}),this.map(a,(t,n)=>{let i=e[t];if(!i)return;let a=n.map(e=>e.presence_ref);i=i.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=i,r(t,i,n),i.length===0&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{let r=e[n];return`metas`in r?t[n]=r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}})),ui,di,fi,pi,mi,hi=o((()=>{Hr(),oi(),Kr(),li(),ii(),(function(e){e.ALL=`*`,e.INSERT=`INSERT`,e.UPDATE=`UPDATE`,e.DELETE=`DELETE`})(ui||={}),(function(e){e.BROADCAST=`broadcast`,e.PRESENCE=`presence`,e.POSTGRES_CHANGES=`postgres_changes`,e.SYSTEM=`system`})(di||={}),(function(e){e.SUBSCRIBED=`SUBSCRIBED`,e.TIMED_OUT=`TIMED_OUT`,e.CLOSED=`CLOSED`,e.CHANNEL_ERROR=`CHANNEL_ERROR`})(fi||={}),pi=Rr,mi=class e{constructor(e,t={config:{}},n){if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Rr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,``),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:``,enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ai(this,zr.join,this.params,this.timeout),this.rejoinTimer=new Gr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive(`ok`,()=>{this.state=Rr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log(`channel`,`close ${this.topic} ${this._joinRef()}`),this.state=Rr.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log(`channel`,`error ${this.topic}`,e),this.state=Rr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive(`timeout`,()=>{this._isJoining()&&(this.socket.log(`channel`,`timeout ${this.topic}`,this.joinPush.timeout),this.state=Rr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive(`error`,e=>{this._isLeaving()||this._isClosed()||(this.socket.log(`channel`,`error ${this.topic}`,e),this.state=Rr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zr.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new ci(this),this.broadcastEndpointURL=ri(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&this.params.config?.broadcast?.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){if(this.socket.isConnected()||this.socket.connect(),this.state==Rr.closed){let{config:{broadcast:n,presence:r,private:i}}=this.params,a=this.bindings.postgres_changes?.map(e=>e.filter)??[],o=!!this.bindings[di.PRESENCE]&&this.bindings[di.PRESENCE].length>0||this.params.config.presence?.enabled===!0,s={},c={broadcast:n,presence:Object.assign(Object.assign({},r),{enabled:o}),postgres_changes:a,private:i};this.socket.accessTokenValue&&(s.access_token=this.socket.accessTokenValue),this._onError(t=>e?.(fi.CHANNEL_ERROR,t)),this._onClose(()=>e?.(fi.CLOSED)),this.updateJoinPayload(Object.assign({config:c},s)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive(`ok`,async({postgres_changes:t})=>{if(this.socket.setAuth(),t===void 0){e?.(fi.SUBSCRIBED);return}else{let n=this.bindings.postgres_changes,r=n?.length??0,i=[];for(let a=0;a<r;a++){let r=n[a],{filter:{event:o,schema:s,table:c,filter:l}}=r,u=t&&t[a];if(u&&u.event===o&&u.schema===s&&u.table===c&&u.filter===l)i.push(Object.assign(Object.assign({},r),{id:u.id}));else{this.unsubscribe(),this.state=Rr.errored,e?.(fi.CHANNEL_ERROR,Error(`mismatch between server and client bindings for postgres changes`));return}}this.bindings.postgres_changes=i,e&&e(fi.SUBSCRIBED);return}}).receive(`error`,t=>{this.state=Rr.errored,e?.(fi.CHANNEL_ERROR,Error(JSON.stringify(Object.values(t).join(`, `)||`error`)))}).receive(`timeout`,()=>{e?.(fi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:`presence`,event:`track`,payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:`presence`,event:`untrack`},e)}on(e,t,n){return this.state===Rr.joined&&e===di.PRESENCE&&(this.socket.log(`channel`,`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){let r=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:``;if(t==null)return Promise.reject(`Payload is required for httpSend()`);let i={method:`POST`,headers:{Authorization:r,apikey:this.socket.apiKey?this.socket.apiKey:``,"Content-Type":`application/json`},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,i,n.timeout??this.timeout);if(a.status===202)return{success:!0};let o=a.statusText;try{let e=await a.json();o=e.error||e.message||o}catch{}return Promise.reject(Error(o))}async send(e,t={}){if(!this._canPush()&&e.type===`broadcast`){console.warn(`Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.`);let{event:n,payload:r}=e,i={method:`POST`,headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:``,apikey:this.socket.apiKey?this.socket.apiKey:``,"Content-Type":`application/json`},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})};try{let e=await this._fetchWithTimeout(this.broadcastEndpointURL,i,t.timeout??this.timeout);return await e.body?.cancel(),e.ok?`ok`:`error`}catch(e){return e.name===`AbortError`?`timed out`:`error`}}else return new Promise(n=>{let r=this._push(e.type,e,t.timeout||this.timeout);e.type===`broadcast`&&!this.params?.config?.broadcast?.ack&&n(`ok`),r.receive(`ok`,()=>n(`ok`)),r.receive(`error`,()=>n(`error`)),r.receive(`timeout`,()=>n(`timed out`))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Rr.leaving;let t=()=>{this.socket.log(`channel`,`leave ${this.topic}`),this._trigger(zr.close,`leave`,this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new ai(this,zr.leave,{},e),n.receive(`ok`,()=>{t(),r(`ok`)}).receive(`timeout`,()=>{t(),r(`timed out`)}).receive(`error`,()=>{r(`error`)}),n.send(),this._canPush()||n.trigger(`ok`,{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Rr.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){let r=new AbortController,i=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new ai(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log(`channel`,`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;let a=e.toLocaleLowerCase(),{close:o,error:s,leave:c,join:l}=zr;if(n&&[o,s,c,l].indexOf(a)>=0&&n!==this._joinRef())return;let u=this._onMessage(a,t,n);if(t&&!u)throw`channel onMessage callbacks must return the payload, modified or unmodified`;[`insert`,`update`,`delete`].includes(a)?(r=this.bindings.postgres_changes)==null||r.filter(e=>e.filter?.event===`*`||(e.filter?.event)?.toLocaleLowerCase()===a).map(e=>e.callback(u,n)):(i=this.bindings[a])==null||i.filter(e=>{if([`broadcast`,`presence`,`postgres_changes`].includes(a))if(`id`in e){let n=e.id,r=e.filter?.event;return n&&t.ids?.includes(n)&&(r===`*`||r?.toLocaleLowerCase()===t.data?.type.toLocaleLowerCase())}else{let n=(e?.filter?.event)?.toLocaleLowerCase();return n===`*`||n===(t?.event)?.toLocaleLowerCase()}else return e.type.toLocaleLowerCase()===a}).map(e=>{if(typeof u==`object`&&`ids`in u){let e=u.data,{schema:t,table:n,commit_timestamp:r,type:i,errors:a}=e,o={schema:t,table:n,commit_timestamp:r,eventType:i,new:{},old:{},errors:a};u=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===Rr.closed}_isJoined(){return this.state===Rr.joined}_isJoining(){return this.state===Rr.joining}_isLeaving(){return this.state===Rr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){let r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(t,n){let r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(t=>!(t.type?.toLocaleLowerCase()===r&&e.isEqual(t.filter,n)))),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(zr.close,{},e)}_onError(e){this._on(zr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Rr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type===`INSERT`||e.type===`UPDATE`)&&(t.new=Jr(e.columns,e.record)),(e.type===`UPDATE`||e.type===`DELETE`)&&(t.old=Jr(e.columns,e.old_record)),t}}})),gi,_i,vi,yi,bi,xi,Si=o((()=>{kr(),Hr(),Wr(),Kr(),ii(),hi(),gi=()=>{},_i={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vi=[1e3,2e3,5e3,1e4],yi=1e4,bi=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,xi=class{constructor(e,t){if(this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint=``,this.httpEndpoint=``,this.headers={},this.params={},this.timeout=Ir,this.transport=null,this.heartbeatIntervalMs=_i.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gi,this.ref=0,this.reconnectTimer=null,this.vsn=Fr,this.logger=gi,this.conn=null,this.sendBuffer=[],this.serializer=new Ur,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState=`disconnected`,this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!t?.params?.apikey)throw Error(`API key is required to connect to Realtime`);this.apiKey=t.params.apikey,this.endPoint=`${e}/${Br.websocket}`,this.httpEndpoint=ri(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState(`connecting`),this.accessToken&&!this._authPromise&&this._setAuthSafely(`connect`),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Or.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState(`disconnected`);let t=e.message;throw t.includes(`Node.js`)?Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState(`disconnecting`,!0),this.conn){let n=setTimeout(()=>{this._setConnectionState(`disconnected`)},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState(`disconnected`)},typeof this.conn.close==`function`&&(e?this.conn.close(e,t??``):this.conn.close()),this._teardownConnection()}else this._setConnectionState(`disconnected`)}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Lr.connecting:return Vr.Connecting;case Lr.open:return Vr.Open;case Lr.closing:return Vr.Closing;default:return Vr.Closed}}isConnected(){return this.connectionState()===Vr.Open}isConnecting(){return this._connectionState===`connecting`}isDisconnecting(){return this._connectionState===`disconnecting`}channel(e,t={config:{}}){let n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{let n=new mi(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){let{topic:t,event:n,payload:r,ref:i}=e,a=()=>{this.encode(e,e=>{var t;(t=this.conn)==null||t.send(e)})};this.log(`push`,`${t} ${n} (${i})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback(`disconnected`)}catch(e){this.log(`error`,`error in heartbeat callback`,e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log(`transport`,`heartbeat timeout. Attempting to re-establish connection`);try{this.heartbeatCallback(`timeout`)}catch(e){this.log(`error`,`error in heartbeat callback`,e)}this._wasManualDisconnect=!1,(e=this.conn)==null||e.close(1e3,`heartbeat timeout`),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)==null||e.scheduleTimeout()},_i.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:`phoenix`,event:`heartbeat`,payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback(`sent`)}catch(e){this.log(`error`,`error in heartbeat callback`,e)}this._setAuthSafely(`heartbeat`)}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log(`transport`,`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if(e.topic===`phoenix`&&e.event===`phx_reply`)try{this.heartbeatCallback(e.payload.status===`ok`?`ok`:`error`)}catch(e){this.log(`error`,`error in heartbeat callback`,e)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:t,event:n,payload:r,ref:i}=e,a=i?`(${i})`:``,o=r.status||``;this.log(`receive`,`${o} ${t} ${n} ${a}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,i)),this._triggerStateCallbacks(`message`,e)})}_clearTimer(e){var t;e===`heartbeat`&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e===`reconnect`&&((t=this.reconnectTimer)==null||t.reset())}_clearAllTimers(){this._clearTimer(`heartbeat`),this._clearTimer(`reconnect`)}_setupConnectionHandlers(){this.conn&&(`binaryType`in this.conn&&(this.conn.binaryType=`arraybuffer`),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Lr.open||this.conn.readyState===Lr.connecting)try{this.conn.close()}catch(e){this.log(`error`,`Error closing connection`,e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState(`connected`),this.log(`transport`,`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log(`error`,`error waiting for auth on connect`,e),this.flushSendBuffer()}),this._clearTimer(`reconnect`),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks(`open`)}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log(`worker`,`starting worker for from ${this.workerUrl}`):this.log(`worker`,`starting default worker`);let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log(`worker`,`worker error`,e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event===`keepAlive`&&this.sendHeartbeat()},this.workerRef.postMessage({event:`start`,interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState(`disconnected`),this.log(`transport`,`close`,e),this._triggerChanError(),this._clearTimer(`heartbeat`),this._wasManualDisconnect||(t=this.reconnectTimer)==null||t.scheduleTimeout(),this._triggerStateCallbacks(`close`,e)}_onConnError(e){this._setConnectionState(`disconnected`),this.log(`transport`,`${e}`),this._triggerChanError(),this._triggerStateCallbacks(`error`,e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(zr.error))}_appendParams(e,t){return Object.keys(t).length===0?e:`${e}${e.match(/\?/)?`&`:`?`}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{let e=new Blob([bi],{type:`application/javascript`});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e===`connecting`?this._wasManualDisconnect=!1:e===`disconnecting`&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{let n={access_token:t,version:Mr};t&&e.updateJoinPayload(n),e.joinedOnce&&e._isJoined()&&e._push(zr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e=`general`){this.setAuth().catch(t=>{this.log(`error`,`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(t){this.log(`error`,`error in ${e} callback`,t)}})}catch(t){this.log(`error`,`error triggering ${e} callbacks`,t)}}_setupReconnectionTimer(){this.reconnectTimer=new Gr(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},_i.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){switch(this.transport=e?.transport??null,this.timeout=e?.timeout??Ir,this.heartbeatIntervalMs=e?.heartbeatIntervalMs??_i.HEARTBEAT_INTERVAL,this.worker=e?.worker??!1,this.accessToken=e?.accessToken??null,this.heartbeatCallback=e?.heartbeatCallback??gi,this.vsn=e?.vsn??Fr,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=e?.reconnectAfterMs??(e=>vi[e-1]||yi),this.vsn){case Nr:this.encode=e?.encode??((e,t)=>t(JSON.stringify(e))),this.decode=e?.decode??((e,t)=>t(JSON.parse(e)));break;case Pr:this.encode=e?.encode??this.serializer.encode.bind(this.serializer),this.decode=e?.decode??this.serializer.decode.bind(this.serializer);break;default:throw Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<`u`&&!window.Worker)throw Error(`Web Worker is not supported`);this.workerUrl=e?.workerUrl}}}})),Ci=c({REALTIME_CHANNEL_STATES:()=>pi,REALTIME_LISTEN_TYPES:()=>di,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:()=>ui,REALTIME_PRESENCE_LISTEN_EVENTS:()=>si,REALTIME_SUBSCRIBE_STATES:()=>fi,RealtimeChannel:()=>mi,RealtimeClient:()=>xi,RealtimePresence:()=>ci,WebSocketFactory:()=>Or}),wi=o((()=>{Si(),hi(),li(),kr()}));function R(e){return typeof e==`object`&&!!e&&`__isStorageError`in e}var Ti,Ei,Di,Oi=o((()=>{Ti=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name=`StorageError`}},Ei=class extends Ti{constructor(e,t,n){super(e),this.name=`StorageApiError`,this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Di=class extends Ti{constructor(e,t){super(e),this.name=`StorageUnknownError`,this.originalError=t}}})),ki,Ai,ji,Mi,Ni,Pi=o((()=>{ki=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),Ai=()=>Response,ji=e=>{if(Array.isArray(e))return e.map(e=>ji(e));if(typeof e==`function`||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([e,n])=>{let r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,``));t[r]=ji(n)}),t},Mi=e=>{if(typeof e!=`object`||!e)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ni=e=>!e||typeof e!=`string`||e.length===0||e.length>100||e.trim()!==e||e.includes(`/`)||e.includes(`\\`)?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e)}));function z(e,t,n,r,i,a){return L(this,void 0,void 0,function*(){return new Promise((o,s)=>{e(n,Hi(t,r,i,a)).then(e=>{if(!e.ok)throw e;return r?.noResolveJson?e:e.json()}).then(e=>o(e)).catch(e=>Vi(e,s,r))})})}function Fi(e,t,n,r){return L(this,void 0,void 0,function*(){return z(e,`GET`,t,n,r)})}function Ii(e,t,n,r,i){return L(this,void 0,void 0,function*(){return z(e,`POST`,t,r,i,n)})}function Li(e,t,n,r,i){return L(this,void 0,void 0,function*(){return z(e,`PUT`,t,r,i,n)})}function Ri(e,t,n,r){return L(this,void 0,void 0,function*(){return z(e,`HEAD`,t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function zi(e,t,n,r,i){return L(this,void 0,void 0,function*(){return z(e,`DELETE`,t,r,i,n)})}var Bi,Vi,Hi,Ui=o((()=>{sr(),Oi(),Pi(),Bi=e=>e.msg||e.message||e.error_description||(typeof e.error==`string`?e.error:e.error?.message)||JSON.stringify(e),Vi=(e,t,n)=>L(void 0,void 0,void 0,function*(){e instanceof(yield Ai())&&!n?.noResolveJson?e.json().then(n=>{let r=e.status||500,i=n?.statusCode||r+``;t(new Ei(Bi(n),r,i))}).catch(e=>{t(new Di(Bi(e),e))}):t(new Di(Bi(e),e))}),Hi=(e,t,n,r)=>{let i={method:e,headers:t?.headers||{}};return e===`GET`||!r?i:(Mi(r)?(i.headers=Object.assign({"Content-Type":`application/json`},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))}})),Wi,Gi=o((()=>{sr(),Oi(),Wi=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return L(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}}})),Ki,qi,Ji,Yi=o((()=>{sr(),Oi(),Gi(),qi=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Ki]=`BlobDownloadBuilder`,this.promise=null}asStream(){return new Wi(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||=this.execute(),this.promise}execute(){return L(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}},Ki=Symbol.toStringTag,Ji=qi})),Xi,Zi,Qi,$i=o((()=>{sr(),Oi(),Ui(),Pi(),Yi(),Xi={limit:100,offset:0,sortBy:{column:`name`,order:`asc`}},Zi={cacheControl:`3600`,contentType:`text/plain;charset=UTF-8`,upsert:!1},Qi=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=ki(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,r){return L(this,void 0,void 0,function*(){try{let i,a=Object.assign(Object.assign({},Zi),r),o=Object.assign(Object.assign({},this.headers),e===`POST`&&{"x-upsert":String(a.upsert)}),s=a.metadata;typeof Blob<`u`&&n instanceof Blob?(i=new FormData,i.append(`cacheControl`,a.cacheControl),s&&i.append(`metadata`,this.encodeMetadata(s)),i.append(``,n)):typeof FormData<`u`&&n instanceof FormData?(i=n,i.has(`cacheControl`)||i.append(`cacheControl`,a.cacheControl),s&&!i.has(`metadata`)&&i.append(`metadata`,this.encodeMetadata(s))):(i=n,o[`cache-control`]=`max-age=${a.cacheControl}`,o[`content-type`]=a.contentType,s&&(o[`x-metadata`]=this.toBase64(this.encodeMetadata(s))),(typeof ReadableStream<`u`&&i instanceof ReadableStream||i&&typeof i==`object`&&`pipe`in i&&typeof i.pipe==`function`)&&!a.duplex&&(a.duplex=`half`)),r?.headers&&(o=Object.assign(Object.assign({},o),r.headers));let c=this._removeEmptyFolders(t),l=this._getFinalPath(c),u=yield(e==`PUT`?Li:Ii)(this.fetch,`${this.url}/object/${l}`,i,Object.assign({headers:o},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:u.Id,fullPath:u.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}upload(e,t,n){return L(this,void 0,void 0,function*(){return this.uploadOrUpdate(`POST`,e,t,n)})}uploadToSignedUrl(e,t,n,r){return L(this,void 0,void 0,function*(){let i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set(`token`,t);try{let e,t=Object.assign({upsert:Zi.upsert},r),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});return typeof Blob<`u`&&n instanceof Blob?(e=new FormData,e.append(`cacheControl`,t.cacheControl),e.append(``,n)):typeof FormData<`u`&&n instanceof FormData?(e=n,e.append(`cacheControl`,t.cacheControl)):(e=n,a[`cache-control`]=`max-age=${t.cacheControl}`,a[`content-type`]=t.contentType),{data:{path:i,fullPath:(yield Li(this.fetch,o.toString(),e,{headers:a})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}createSignedUploadUrl(e,t){return L(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),r=Object.assign({},this.headers);t?.upsert&&(r[`x-upsert`]=`true`);let i=yield Ii(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+i.url),o=a.searchParams.get(`token`);if(!o)throw new Ti(`No token returned by API`);return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}update(e,t,n){return L(this,void 0,void 0,function*(){return this.uploadOrUpdate(`PUT`,e,t,n)})}move(e,t,n){return L(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}copy(e,t,n){return L(this,void 0,void 0,function*(){try{return{data:{path:(yield Ii(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}createSignedUrl(e,t,n){return L(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield Ii(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:this.headers}),a=n?.download?`&download=${n.download===!0?``:n.download}`:``;return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}createSignedUrls(e,t,n){return L(this,void 0,void 0,function*(){try{let r=yield Ii(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?``:n.download}`:``;return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}download(e,t){let n=t?.transform===void 0?`object`:`render/image/authenticated`,r=this.transformOptsToQueryString(t?.transform||{}),i=r?`?${r}`:``,a=this._getFinalPath(e);return new Ji(()=>Fi(this.fetch,`${this.url}/${n}/${a}${i}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return L(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return{data:ji(yield Fi(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers})),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}exists(e){return L(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield Ri(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e)&&e instanceof Di){let t=e.originalError;if([400,404].includes(t?.status))return{data:!1,error:e}}throw e}})}getPublicUrl(e,t){let n=this._getFinalPath(e),r=[],i=t?.download?`download=${t.download===!0?``:t.download}`:``;i!==``&&r.push(i);let a=t?.transform===void 0?`object`:`render/image`,o=this.transformOptsToQueryString(t?.transform||{});o!==``&&r.push(o);let s=r.join(`&`);return s!==``&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${s}`)}}}remove(e){return L(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}list(e,t,n){return L(this,void 0,void 0,function*(){try{let r=Object.assign(Object.assign(Object.assign({},Xi),t),{prefix:e||``});return{data:yield Ii(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}listV2(e,t){return L(this,void 0,void 0,function*(){try{let n=Object.assign({},e);return{data:yield Ii(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<`u`?Buffer.from(e).toString(`base64`):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,``)}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,``).replace(/\/+/g,`/`)}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join(`&`)}}})),ea,ta=o((()=>{ea=`2.86.2`})),na,ra=o((()=>{ta(),na={"X-Client-Info":`storage-js/${ea}`}})),ia,aa=o((()=>{sr(),ra(),Oi(),Ui(),Pi(),ia=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;let i=new URL(e);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes(`storage.supabase.`)&&(i.hostname=i.hostname.replace(`supabase.`,`storage.supabase.`)),this.url=i.href.replace(/\/$/,``),this.headers=Object.assign(Object.assign({},na),t),this.fetch=ki(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return L(this,void 0,void 0,function*(){try{let t=this.listBucketOptionsToQueryString(e);return{data:yield Fi(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}getBucket(e){return L(this,void 0,void 0,function*(){try{return{data:yield Fi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}createBucket(e){return L(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield Ii(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}updateBucket(e,t){return L(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}emptyBucket(e){return L(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}deleteBucket(e){return L(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}listBucketOptionsToQueryString(e){let t={};return e&&(`limit`in e&&(t.limit=String(e.limit)),`offset`in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?`?`+new URLSearchParams(t).toString():``}}}));function oa(e,t,n){let r=new URL(t,e);if(n)for(let[e,t]of Object.entries(n))t!==void 0&&r.searchParams.set(e,t);return r.toString()}async function sa(e){return!e||e.type===`none`?{}:e.type===`bearer`?{Authorization:`Bearer ${e.token}`}:e.type===`header`?{[e.name]:e.value}:e.type===`custom`?await e.getHeaders():{}}function ca(e){let t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:a,headers:o}){let s=oa(e.baseUrl,r,i),c=await sa(e.auth),l=await t(s,{method:n,headers:{...a?{"Content-Type":`application/json`}:{},...c,...o},body:a?JSON.stringify(a):void 0}),u=await l.text(),d=(l.headers.get(`content-type`)||``).includes(`application/json`),f=d&&u?JSON.parse(u):u;if(!l.ok){let e=d?f:void 0,t=e?.error;throw new da(t?.message??`Request failed with status ${l.status}`,{status:l.status,icebergType:t?.type,icebergCode:t?.code,details:e})}return{status:l.status,headers:l.headers,data:f}}}}function la(e){return e.join(``)}function ua(e){return e.join(``)}var da,fa,pa,ma,ha=o((()=>{da=class extends Error{constructor(e,t){super(e),this.name=`IcebergError`,this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType===`CommitStateUnknownException`||[500,502,504].includes(t.status)&&t.icebergType?.includes(`CommitState`)===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}},fa=class{constructor(e,t=``){this.client=e,this.prefix=t}async listNamespaces(e){let t=e?{parent:la(e.namespace)}:void 0;return(await this.client.request({method:`GET`,path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){let n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:`POST`,path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:`DELETE`,path:`${this.prefix}/namespaces/${la(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:`GET`,path:`${this.prefix}/namespaces/${la(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:`HEAD`,path:`${this.prefix}/namespaces/${la(e.namespace)}`}),!0}catch(e){if(e instanceof da&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(e){if(e instanceof da&&e.status===409)return;throw e}}},pa=class{constructor(e,t=``,n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:`GET`,path:`${this.prefix}/namespaces/${ua(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){let n={};return this.accessDelegation&&(n[`X-Iceberg-Access-Delegation`]=this.accessDelegation),(await this.client.request({method:`POST`,path:`${this.prefix}/namespaces/${ua(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){let n=await this.client.request({method:`POST`,path:`${this.prefix}/namespaces/${ua(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data[`metadata-location`],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:`DELETE`,path:`${this.prefix}/namespaces/${ua(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){let t={};return this.accessDelegation&&(t[`X-Iceberg-Access-Delegation`]=this.accessDelegation),(await this.client.request({method:`GET`,path:`${this.prefix}/namespaces/${ua(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){let t={};this.accessDelegation&&(t[`X-Iceberg-Access-Delegation`]=this.accessDelegation);try{return await this.client.request({method:`HEAD`,path:`${this.prefix}/namespaces/${ua(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(e){if(e instanceof da&&e.status===404)return!1;throw e}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof da&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},ma=class{constructor(e){let t=`v1`;e.catalogName&&(t+=`/${e.catalogName}`),this.client=ca({baseUrl:e.baseUrl.endsWith(`/`)?e.baseUrl:`${e.baseUrl}/`,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(`,`),this.namespaceOps=new fa(this.client,t),this.tableOps=new pa(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}}})),ga,_a=o((()=>{sr(),ha(),ra(),Oi(),Ui(),Pi(),ga=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,``),this.headers=Object.assign(Object.assign({},na),t),this.fetch=ki(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return L(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}listBuckets(e){return L(this,void 0,void 0,function*(){try{let t=new URLSearchParams;e?.limit!==void 0&&t.set(`limit`,e.limit.toString()),e?.offset!==void 0&&t.set(`offset`,e.offset.toString()),e?.sortColumn&&t.set(`sortColumn`,e.sortColumn),e?.sortOrder&&t.set(`sortOrder`,e.sortOrder),e?.search&&t.set(`search`,e.search);let n=t.toString(),r=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Fi(this.fetch,r,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}deleteBucket(e){return L(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}from(e){if(!Ni(e))throw new Ti(`Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.`);return new ma({baseUrl:this.url,catalogName:e,auth:{type:`custom`,getHeaders:()=>L(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}})),va,ya=o((()=>{ta(),va={"X-Client-Info":`storage-js/${ea}`,"Content-Type":`application/json`}}));function ba(e){return typeof e==`object`&&!!e&&`__isStorageVectorsError`in e}var xa,Sa,Ca,wa,Ta=o((()=>{xa=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name=`StorageVectorsError`}},Sa=class extends xa{constructor(e,t,n){super(e),this.name=`StorageVectorsApiError`,this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ca=class extends xa{constructor(e,t){super(e),this.name=`StorageVectorsUnknownError`,this.originalError=t}},(function(e){e.InternalError=`InternalError`,e.S3VectorConflictException=`S3VectorConflictException`,e.S3VectorNotFoundException=`S3VectorNotFoundException`,e.S3VectorBucketNotEmpty=`S3VectorBucketNotEmpty`,e.S3VectorMaxBucketsExceeded=`S3VectorMaxBucketsExceeded`,e.S3VectorMaxIndexesExceeded=`S3VectorMaxIndexesExceeded`})(wa||={})})),Ea,Da,Oa,ka,Aa,ja=o((()=>{Ea=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),Da=()=>Response,Oa=e=>{if(typeof e!=`object`||!e)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ka=e=>Array.from(new Float32Array(e)),Aa=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)}}));function Ma(e,t,n,r,i,a){return L(this,void 0,void 0,function*(){return new Promise((o,s)=>{e(n,Ia(t,r,i,a)).then(e=>{if(!e.ok)throw e;if(r?.noResolveJson)return e;let t=e.headers.get(`content-type`);return!t||!t.includes(`application/json`)?{}:e.json()}).then(e=>o(e)).catch(e=>Fa(e,s,r))})})}function Na(e,t,n,r,i){return L(this,void 0,void 0,function*(){return Ma(e,`POST`,t,r,i,n)})}var Pa,Fa,Ia,La=o((()=>{sr(),Ta(),ja(),Pa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Fa=(e,t,n)=>L(void 0,void 0,void 0,function*(){if(e&&typeof e==`object`&&`status`in e&&`ok`in e&&typeof e.status==`number`&&!n?.noResolveJson){let n=e.status||500,r=e;if(typeof r.json==`function`)r.json().then(e=>{let r=e?.statusCode||e?.code||n+``;t(new Sa(Pa(e),n,r))}).catch(()=>{let e=n+``;t(new Sa(r.statusText||`HTTP ${n} error`,n,e))});else{let e=n+``;t(new Sa(r.statusText||`HTTP ${n} error`,n,e))}}else t(new Ca(Pa(e),e))}),Ia=(e,t,n,r)=>{let i={method:e,headers:t?.headers||{}};return e===`GET`||!r?i:(Oa(r)?(i.headers=Object.assign({"Content-Type":`application/json`},t?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n))}})),Ra,za=o((()=>{sr(),ya(),Ta(),La(),ja(),Ra=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,``),this.headers=Object.assign(Object.assign({},va),t),this.fetch=Ea(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return L(this,void 0,void 0,function*(){try{return{data:(yield Na(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ba(e))return{data:null,error:e};throw e}})}getIndex(e,t){return L(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ba(e))return{data:null,error:e};throw e}})}listIndexes(e){return L(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ba(e))return{data:null,error:e};throw e}})}deleteIndex(e,t){return L(this,void 0,void 0,function*(){try{return{data:(yield Na(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ba(e))return{data:null,error:e};throw e}})}}})),Ba,Va=o((()=>{sr(),ya(),Ta(),La(),ja(),Ba=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,``),this.headers=Object.assign(Object.assign({},va),t),this.fetch=Ea(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return L(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw Error(`Vector batch size must be between 1 and 500 items`);return{data:(yield Na(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ba(e))return{data:null,error:e};throw e}})}getVectors(e){return L(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ba(e))return{data:null,error:e};throw e}})}listVectors(e){return L(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw Error(`segmentCount must be between 1 and 16`);if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Na(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ba(e))return{data:null,error:e};throw e}})}queryVectors(e){return L(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ba(e))return{data:null,error:e};throw e}})}deleteVectors(e){return L(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw Error(`Keys batch size must be between 1 and 500 items`);return{data:(yield Na(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ba(e))return{data:null,error:e};throw e}})}}})),Ha,Ua=o((()=>{sr(),ya(),Ta(),La(),ja(),Ha=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,``),this.headers=Object.assign(Object.assign({},va),t),this.fetch=Ea(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return L(this,void 0,void 0,function*(){try{return{data:(yield Na(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ba(e))return{data:null,error:e};throw e}})}getBucket(e){return L(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ba(e))return{data:null,error:e};throw e}})}listBuckets(){return L(this,arguments,void 0,function*(e={}){try{return{data:yield Na(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ba(e))return{data:null,error:e};throw e}})}deleteBucket(e){return L(this,void 0,void 0,function*(){try{return{data:(yield Na(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ba(e))return{data:null,error:e};throw e}})}}})),Wa,Ga,Ka,qa=o((()=>{sr(),za(),Va(),Ua(),Wa=class extends Ha{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Ga(this.url,this.headers,e,this.fetch)}createBucket(e){let t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return L(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){let t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return L(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){let e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return L(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){let t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return L(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}},Ga=class extends Ra{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}createIndex(e){let t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return L(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return L(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){let t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return L(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){let t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return L(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Ka(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Ka=class extends Ba{constructor(e,t,n,r,i){super(e,t,i),this.vectorBucketName=n,this.indexName=r}putVectors(e){let t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return L(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){let t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return L(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return L(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){let t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return L(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){let t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return L(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}})),Ja=o((()=>{qa(),Ua(),za(),Va(),Ta(),ja()})),Ya,Xa=o((()=>{$i(),aa(),_a(),Ja(),Ya=class extends ia{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new Qi(this.url,this.headers,e,this.fetch)}get vectors(){return new Wa(this.url+`/vector`,{headers:this.headers,fetch:this.fetch})}get analytics(){return new ga(this.url+`/iceberg`,this.headers,this.fetch)}}})),Za=o((()=>{})),Qa=c({StorageAnalyticsClient:()=>ga,StorageApiError:()=>Ei,StorageClient:()=>Ya,StorageError:()=>Ti,StorageUnknownError:()=>Di,StorageVectorsApiError:()=>Sa,StorageVectorsClient:()=>Wa,StorageVectorsError:()=>xa,StorageVectorsErrorCode:()=>wa,StorageVectorsUnknownError:()=>Ca,VectorBucketApi:()=>Ha,VectorBucketScope:()=>Ga,VectorDataApi:()=>Ba,VectorIndexApi:()=>Ra,VectorIndexScope:()=>Ka,isPlainObject:()=>Oa,isStorageError:()=>R,isStorageVectorsError:()=>ba,normalizeToFloat32:()=>ka,resolveFetch:()=>Ea,resolveResponse:()=>Da,validateVectorDimension:()=>Aa}),$a=o((()=>{Xa(),_a(),Za(),Oi(),Ja()})),eo=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.version=void 0,e.version=`2.86.2`})),to=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;var t=eo(),n=``;n=typeof Deno<`u`?`deno`:typeof document<`u`?`web`:typeof navigator<`u`&&navigator.product===`ReactNative`?`react-native`:`node`,e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:`public`},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:`implicit`},e.DEFAULT_REALTIME_OPTIONS={}})),no=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0,e.resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),e.resolveHeadersConstructor=()=>Headers,e.fetchWithAuth=(t,n,r)=>{let i=(0,e.resolveFetch)(r),a=(0,e.resolveHeadersConstructor)();return async(e,r)=>{let o=await n()??t,s=new a(r?.headers);return s.has(`apikey`)||s.set(`apikey`,t),s.has(`Authorization`)||s.set(`Authorization`,`Bearer ${o}`),i(e,Object.assign(Object.assign({},r),{headers:s}))}}})),ro=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.isBrowser=void 0,e.uuid=t,e.ensureTrailingSlash=n,e.applySettingDefaults=r,e.validateSupabaseUrl=i;function t(){return`xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx`.replace(/[xy]/g,function(e){var t=Math.random()*16|0;return(e==`x`?t:t&3|8).toString(16)})}function n(e){return e.endsWith(`/`)?e:e+`/`}e.isBrowser=()=>typeof window<`u`;function r(e,t){let{db:n,auth:r,realtime:i,global:a}=e,{db:o,auth:s,realtime:c,global:l}=t,u={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},s),r),realtime:Object.assign(Object.assign({},c),i),storage:{},global:Object.assign(Object.assign(Object.assign({},l),a),{headers:Object.assign(Object.assign({},l?.headers??{}),a?.headers??{})}),accessToken:async()=>``};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}function i(e){let t=e?.trim();if(!t)throw Error(`supabaseUrl is required.`);if(!t.match(/^https?:\/\//i))throw Error(`Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.`);try{return new URL(n(t))}catch{throw Error(`Invalid supabaseUrl: Provided URL is malformed.`)}}})),io,ao=o((()=>{io=`2.86.2`})),oo,so,co,lo,uo,fo,po,B,mo=o((()=>{ao(),oo=30*1e3,so=3*oo,co=`http://localhost:9999`,lo=`supabase.auth.token`,uo={"X-Client-Info":`gotrue-js/${io}`},fo=`X-Supabase-Api-Version`,po={"2024-01-01":{timestamp:Date.parse(`2024-01-01T00:00:00.0Z`),name:`2024-01-01`}},B=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i}));function V(e){return typeof e==`object`&&!!e&&`__isAuthError`in e}function ho(e){return V(e)&&e.name===`AuthApiError`}function go(e){return V(e)&&e.name===`AuthSessionMissingError`}function _o(e){return V(e)&&e.name===`AuthImplicitGrantRedirectError`}function vo(e){return V(e)&&e.name===`AuthRetryableFetchError`}function yo(e){return V(e)&&e.name===`AuthWeakPasswordError`}var bo,xo,So,Co,wo,To,Eo,Do,Oo,ko,Ao,jo,Mo=o((()=>{bo=class extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name=`AuthError`,this.status=t,this.code=n}},xo=class extends bo{constructor(e,t,n){super(e,t,n),this.name=`AuthApiError`,this.status=t,this.code=n}},So=class extends bo{constructor(e,t){super(e),this.name=`AuthUnknownError`,this.originalError=t}},Co=class extends bo{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}},wo=class extends Co{constructor(){super(`Auth session missing!`,`AuthSessionMissingError`,400,void 0)}},To=class extends Co{constructor(){super(`Auth session or user missing`,`AuthInvalidTokenResponseError`,500,void 0)}},Eo=class extends Co{constructor(e){super(e,`AuthInvalidCredentialsError`,400,void 0)}},Do=class extends Co{constructor(e,t=null){super(e,`AuthImplicitGrantRedirectError`,500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Oo=class extends Co{constructor(e,t=null){super(e,`AuthPKCEGrantCodeExchangeError`,500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},ko=class extends Co{constructor(e,t){super(e,`AuthRetryableFetchError`,t,void 0)}},Ao=class extends Co{constructor(e,t,n){super(e,`AuthWeakPasswordError`,t,`weak_password`),this.reasons=n}},jo=class extends Co{constructor(e){super(e,`AuthInvalidJwtError`,400,`invalid_jwt`)}}}));function No(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;)n(Ho[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6;else if(t.queuedBits>0)for(t.queue<<=6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;)n(Ho[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6}function Po(e,t,n){let r=Wo[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else if(r===-2)return;else throw Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}function Fo(e){let t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=e=>{Ro(e,r,n)};for(let t=0;t<e.length;t+=1)Po(e.charCodeAt(t),i,a);return t.join(``)}function Io(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Lo(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){let t=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|t)+65536,n+=1}Io(r,t)}}function Ro(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw Error(`Invalid UTF-8 sequence`);--t.utf8seq}else if(t.utf8seq>0){if(e<=127)throw Error(`Invalid UTF-8 sequence`);t.codepoint=t.codepoint<<6|e&63,--t.utf8seq,t.utf8seq===0&&n(t.codepoint)}}function zo(e){let t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let t=0;t<e.length;t+=1)Po(e.charCodeAt(t),n,r);return new Uint8Array(t)}function Bo(e){let t=[];return Lo(e,e=>t.push(e)),new Uint8Array(t)}function Vo(e){let t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>No(e,n,r)),No(null,n,r),t.join(``)}var Ho,Uo,Wo,Go=o((()=>{Ho=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_`.split(``),Uo=` 	
\r=`.split(``),Wo=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Uo.length;t+=1)e[Uo[t].charCodeAt(0)]=-2;for(let t=0;t<Ho.length;t+=1)e[Ho[t].charCodeAt(0)]=t;return e})()}));function Ko(e){return Math.round(Date.now()/1e3)+e}function qo(){return Symbol(`auth-callback`)}function Jo(e){let t={},n=new URL(e);if(n.hash&&n.hash[0]===`#`)try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch{}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}function Yo(e){let t=e.split(`.`);if(t.length!==3)throw new jo(`Invalid JWT structure`);for(let e=0;e<t.length;e++)if(!B.test(t[e]))throw new jo(`JWT not in base64url format`);return{header:JSON.parse(Fo(t[0])),payload:JSON.parse(Fo(t[1])),signature:zo(t[2]),raw:{header:t[0],payload:t[1]}}}async function Xo(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Zo(e,t){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{let r=await e(i);if(!t(i,null,r)){n(r);return}}catch(e){if(!t(i,e)){r(e);return}}})()})}function Qo(e){return(`0`+e.toString(16)).substr(-2)}function $o(){let e=new Uint32Array(56);if(typeof crypto>`u`){let e=``;for(let t=0;t<56;t++)e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~`.charAt(Math.floor(Math.random()*66));return e}return crypto.getRandomValues(e),Array.from(e,Qo).join(``)}async function es(e){let t=new TextEncoder().encode(e),n=await crypto.subtle.digest(`SHA-256`,t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join(``)}async function ts(e){if(!(typeof crypto<`u`&&crypto.subtle!==void 0&&typeof TextEncoder<`u`))return console.warn(`WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256.`),e;let t=await es(e);return btoa(t).replace(/\+/g,`-`).replace(/\//g,`_`).replace(/=+$/,``)}async function ns(e,t,n=!1){let r=$o(),i=r;n&&(i+=`/PASSWORD_RECOVERY`),await hs(e,`${t}-code-verifier`,i);let a=await ts(r);return[a,r===a?`plain`:`s256`]}function rs(e){let t=e.headers.get(fo);if(!t||!t.match(ys))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function is(e){if(!e)throw Error(`Missing exp claim`);if(e<=Math.floor(Date.now()/1e3))throw Error(`JWT has expired`)}function as(e){switch(e){case`RS256`:return{name:`RSASSA-PKCS1-v1_5`,hash:{name:`SHA-256`}};case`ES256`:return{name:`ECDSA`,namedCurve:`P-256`,hash:{name:`SHA-256`}};default:throw Error(`Invalid alg claim`)}}function os(e){if(!bs.test(e))throw Error(`@supabase/auth-js: Expected parameter to be UUID but is not`)}function ss(){return new Proxy({},{get:(e,t)=>{if(t===`__isUserNotAvailableProxy`)return!0;if(typeof t==`symbol`){let e=t.toString();if(e===`Symbol(Symbol.toPrimitive)`||e===`Symbol(Symbol.toStringTag)`||e===`Symbol(util.inspect.custom)`)return}throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cs(e,t){return new Proxy(e,{get:(e,n,r)=>{if(n===`__isInsecureUserWarningProxy`)return!0;if(typeof n==`symbol`){let t=n.toString();if(t===`Symbol(Symbol.toPrimitive)`||t===`Symbol(Symbol.toStringTag)`||t===`Symbol(util.inspect.custom)`||t===`Symbol(nodejs.util.inspect.custom)`)return Reflect.get(e,n,r)}return!t.value&&typeof n==`string`&&(console.warn(`Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.`),t.value=!0),Reflect.get(e,n,r)}})}function ls(e){return JSON.parse(JSON.stringify(e))}var us,ds,fs,ps,ms,hs,gs,_s,vs,ys,bs,xs=o((()=>{mo(),Mo(),Go(),us=()=>typeof window<`u`&&typeof document<`u`,ds={tested:!1,writable:!1},fs=()=>{if(!us())return!1;try{if(typeof globalThis.localStorage!=`object`)return!1}catch{return!1}if(ds.tested)return ds.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ds.tested=!0,ds.writable=!0}catch{ds.tested=!0,ds.writable=!1}return ds.writable},ps=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),ms=e=>typeof e==`object`&&!!e&&`status`in e&&`ok`in e&&`json`in e&&typeof e.json==`function`,hs=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},gs=async(e,t)=>{let n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},_s=async(e,t)=>{await e.removeItem(t)},vs=class e{constructor(){this.promise=new e.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}},vs.promiseConstructor=Promise,ys=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,bs=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/}));async function Ss(e){if(!ms(e))throw new ko(js(e),0);if(Ms.includes(e.status))throw new ko(js(e),e.status);let t;try{t=await e.json()}catch(e){throw new So(js(e),e)}let n,r=rs(e);if(r&&r.getTime()>=po[`2024-01-01`].timestamp&&typeof t==`object`&&t&&typeof t.code==`string`?n=t.code:typeof t==`object`&&t&&typeof t.error_code==`string`&&(n=t.error_code),n){if(n===`weak_password`)throw new Ao(js(t),e.status,t.weak_password?.reasons||[]);if(n===`session_not_found`)throw new wo}else if(typeof t==`object`&&t&&typeof t.weak_password==`object`&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((e,t)=>e&&typeof t==`string`,!0))throw new Ao(js(t),e.status,t.weak_password.reasons);throw new xo(js(t),e.status||500,n)}async function H(e,t,n,r){let i=Object.assign({},r?.headers);i[`X-Supabase-Api-Version`]||(i[fo]=po[`2024-01-01`].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);let a=r?.query??{};r?.redirectTo&&(a.redirect_to=r.redirectTo);let o=await Cs(e,t,n+(Object.keys(a).length?`?`+new URLSearchParams(a).toString():``),{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(o):{data:Object.assign({},o),error:null}}async function Cs(e,t,n,r,i,a){let o=Ns(t,r,i,a),s;try{s=await e(n,Object.assign({},o))}catch(e){throw console.error(e),new ko(js(e),0)}if(s.ok||await Ss(s),r?.noResolveJson)return s;try{return await s.json()}catch(e){await Ss(e)}}function ws(e){let t=null;As(e)&&(t=Object.assign({},e),e.expires_at||(t.expires_at=Ko(e.expires_in)));let n=e.user??e;return{data:{session:t,user:n},error:null}}function Ts(e){let t=ws(e);return!t.error&&e.weak_password&&typeof e.weak_password==`object`&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message==`string`&&e.weak_password.reasons.reduce((e,t)=>e&&typeof t==`string`,!0)&&(t.data.weak_password=e.weak_password),t}function Es(e){return{data:{user:e.user??e},error:null}}function Ds(e){return{data:e,error:null}}function Os(e){let{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=e,o=En(e,[`action_link`,`email_otp`,`hashed_token`,`redirect_to`,`verification_type`]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},user:Object.assign({},o)},error:null}}function ks(e){return e}function As(e){return e.access_token&&e.refresh_token&&e.expires_in}var js,Ms,Ns,Ps=o((()=>{sr(),mo(),xs(),Mo(),js=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ms=[502,503,504],Ns=(e,t,n,r)=>{let i={method:e,headers:t?.headers||{}};return e===`GET`?i:(i.headers=Object.assign({"Content-Type":`application/json;charset=UTF-8`},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))}})),Fs,Is=o((()=>{Fs=[`global`,`local`,`others`]})),Ls,Rs=o((()=>{sr(),Ps(),xs(),Is(),Mo(),Ls=class{constructor({url:e=``,headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=ps(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Fs[0]){if(Fs.indexOf(t)<0)throw Error(`@supabase/auth-js: Parameter scope must be one of ${Fs.join(`, `)}`);try{return await H(this.fetch,`POST`,`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await H(this.fetch,`POST`,`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Es})}catch(e){if(V(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{let{options:t}=e,n=En(e,[`options`]),r=Object.assign(Object.assign({},n),t);return`newEmail`in n&&(r.new_email=n?.newEmail,delete r.newEmail),await H(this.fetch,`POST`,`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Os,redirectTo:t?.redirectTo})}catch(e){if(V(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await H(this.fetch,`POST`,`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Es})}catch(e){if(V(e))return{data:{user:null},error:e};throw e}}async listUsers(e){try{let t={nextPage:null,lastPage:0,total:0},n=await H(this.fetch,`GET`,`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(e?.page)?.toString()??``,per_page:(e?.perPage)?.toString()??``},xform:ks});if(n.error)throw n.error;let r=await n.json(),i=n.headers.get(`x-total-count`)??0,a=n.headers.get(`link`)?.split(`,`)??[];return a.length>0&&(a.forEach(e=>{let n=parseInt(e.split(`;`)[0].split(`=`)[1].substring(0,1)),r=JSON.parse(e.split(`;`)[1].split(`=`)[1]);t[`${r}Page`]=n}),t.total=parseInt(i)),{data:Object.assign(Object.assign({},r),t),error:null}}catch(e){if(V(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){os(e);try{return await H(this.fetch,`GET`,`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Es})}catch(e){if(V(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){os(e);try{return await H(this.fetch,`PUT`,`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Es})}catch(e){if(V(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){os(e);try{return await H(this.fetch,`DELETE`,`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Es})}catch(e){if(V(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){os(e.userId);try{let{data:t,error:n}=await H(this.fetch,`GET`,`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(e){if(V(e))return{data:null,error:e};throw e}}async _deleteFactor(e){os(e.userId),os(e.id);try{return{data:await H(this.fetch,`DELETE`,`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}async _listOAuthClients(e){try{let t={nextPage:null,lastPage:0,total:0},n=await H(this.fetch,`GET`,`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(e?.page)?.toString()??``,per_page:(e?.perPage)?.toString()??``},xform:ks});if(n.error)throw n.error;let r=await n.json(),i=n.headers.get(`x-total-count`)??0,a=n.headers.get(`link`)?.split(`,`)??[];return a.length>0&&(a.forEach(e=>{let n=parseInt(e.split(`;`)[0].split(`=`)[1].substring(0,1)),r=JSON.parse(e.split(`;`)[1].split(`=`)[1]);t[`${r}Page`]=n}),t.total=parseInt(i)),{data:Object.assign(Object.assign({},r),t),error:null}}catch(e){if(V(e))return{data:{clients:[]},error:e};throw e}}async _createOAuthClient(e){try{return await H(this.fetch,`POST`,`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(V(e))return{data:null,error:e};throw e}}async _getOAuthClient(e){try{return await H(this.fetch,`GET`,`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(V(e))return{data:null,error:e};throw e}}async _updateOAuthClient(e,t){try{return await H(this.fetch,`PUT`,`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(V(e))return{data:null,error:e};throw e}}async _deleteOAuthClient(e){try{return await H(this.fetch,`DELETE`,`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(e){try{return await H(this.fetch,`POST`,`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(V(e))return{data:null,error:e};throw e}}}}));function zs(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}var Bs=o((()=>{}));async function Vs(e,t,n){Us.debug&&console.log(`@supabase/gotrue-js: navigatorLock: acquire lock`,e,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Us.debug&&console.log(`@supabase/gotrue-js: navigatorLock acquire timed out`,e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:`exclusive`,ifAvailable:!0}:{mode:`exclusive`,signal:r.signal},async r=>{if(r){Us.debug&&console.log(`@supabase/gotrue-js: navigatorLock: acquired`,e,r.name);try{return await n()}finally{Us.debug&&console.log(`@supabase/gotrue-js: navigatorLock: released`,e,r.name)}}else if(t===0)throw Us.debug&&console.log(`@supabase/gotrue-js: navigatorLock: not immediately available`,e),new Gs(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);else{if(Us.debug)try{let e=await globalThis.navigator.locks.query();console.log(`@supabase/gotrue-js: Navigator LockManager state`,JSON.stringify(e,null,`  `))}catch(e){console.warn(`@supabase/gotrue-js: Error when querying Navigator LockManager state`,e)}return console.warn(`@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request`),await n()}}))}async function Hs(e,t,n){let r=qs[e]??Promise.resolve(),i=Promise.race([r.catch(()=>null),t>=0?new Promise((n,r)=>{setTimeout(()=>{r(new Ks(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(e=>e)).catch(e=>{if(e&&e.isAcquireTimeout)throw e;return null}).then(async()=>await n());return qs[e]=i.catch(async e=>{if(e&&e.isAcquireTimeout)return await r,null;throw e}),await i}var Us,Ws,Gs,Ks,qs,Js=o((()=>{xs(),Us={debug:!!(globalThis&&fs()&&globalThis.localStorage&&globalThis.localStorage.getItem(`supabase.gotrue-js.locks.debug`)===`true`)},Ws=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},Gs=class extends Ws{},Ks=class extends Ws{},qs={}}));function Ys(){if(typeof globalThis!=`object`)try{Object.defineProperty(Object.prototype,`__magic__`,{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<`u`&&(self.globalThis=self)}}var Xs=o((()=>{}));function Zs(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Qs(e){return parseInt(e,16)}function $s(e){let t=new TextEncoder().encode(e);return`0x`+Array.from(t,e=>e.toString(16).padStart(2,`0`)).join(``)}function ec(e){let{chainId:t,domain:n,expirationTime:r,issuedAt:i=new Date,nonce:a,notBefore:o,requestId:s,resources:c,scheme:l,uri:u,version:d}=e;if(!Number.isInteger(t))throw Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw Error(`@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.`);if(a&&a.length<8)throw Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!u)throw Error(`@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.`);if(d!==`1`)throw Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(e.statement?.includes(`
`))throw Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);let f=Zs(e.address),p=`${l?`${l}://${n}`:n} wants you to sign in with your Ethereum account:\n${f}\n\n${e.statement?`${e.statement}\n`:``}`,m=`URI: ${u}\nVersion: ${d}\nChain ID: ${t}${a?`\nNonce: ${a}`:``}\nIssued At: ${i.toISOString()}`;if(r&&(m+=`\nExpiration Time: ${r.toISOString()}`),o&&(m+=`\nNot Before: ${o.toISOString()}`),s&&(m+=`\nRequest ID: ${s}`),c){let e=`
Resources:`;for(let t of c){if(!t||typeof t!=`string`)throw Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}m+=e}return`${p}\n${m}`}var tc=o((()=>{}));function nc({error:e,options:t}){let{publicKey:n}=t;if(!n)throw Error(`options was missing required publicKey property`);if(e.name===`AbortError`){if(t.signal instanceof AbortSignal)return new U({message:`Registration ceremony was sent an abort signal`,code:`ERROR_CEREMONY_ABORTED`,cause:e})}else if(e.name===`ConstraintError`){if(n.authenticatorSelection?.requireResidentKey===!0)return new U({message:`Discoverable credentials were required but no available authenticator supported it`,code:`ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT`,cause:e});if(t.mediation===`conditional`&&n.authenticatorSelection?.userVerification===`required`)return new U({message:`User verification was required during automatic registration but it could not be performed`,code:`ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE`,cause:e});if(n.authenticatorSelection?.userVerification===`required`)return new U({message:`User verification was required but no available authenticator supported it`,code:`ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT`,cause:e})}else if(e.name===`InvalidStateError`)return new U({message:`The authenticator was previously registered`,code:`ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED`,cause:e});else if(e.name===`NotAllowedError`)return new U({message:e.message,code:`ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY`,cause:e});else if(e.name===`NotSupportedError`)return n.pubKeyCredParams.filter(e=>e.type===`public-key`).length===0?new U({message:`No entry in pubKeyCredParams was of type "public-key"`,code:`ERROR_MALFORMED_PUBKEYCREDPARAMS`,cause:e}):new U({message:`No available authenticator supported any of the specified pubKeyCredParams algorithms`,code:`ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG`,cause:e});else if(e.name===`SecurityError`){let t=window.location.hostname;if(uc(t)){if(n.rp.id!==t)return new U({message:`The RP ID "${n.rp.id}" is invalid for this domain`,code:`ERROR_INVALID_RP_ID`,cause:e})}else return new U({message:`${window.location.hostname} is an invalid domain`,code:`ERROR_INVALID_DOMAIN`,cause:e})}else if(e.name===`TypeError`){if(n.user.id.byteLength<1||n.user.id.byteLength>64)return new U({message:`User ID was not between 1 and 64 characters`,code:`ERROR_INVALID_USER_ID_LENGTH`,cause:e})}else if(e.name===`UnknownError`)return new U({message:`The authenticator was unable to process the specified options, or could not create a new credential`,code:`ERROR_AUTHENTICATOR_GENERAL_ERROR`,cause:e});return new U({message:`a Non-Webauthn related error has occurred`,code:`ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY`,cause:e})}function rc({error:e,options:t}){let{publicKey:n}=t;if(!n)throw Error(`options was missing required publicKey property`);if(e.name===`AbortError`){if(t.signal instanceof AbortSignal)return new U({message:`Authentication ceremony was sent an abort signal`,code:`ERROR_CEREMONY_ABORTED`,cause:e})}else if(e.name===`NotAllowedError`)return new U({message:e.message,code:`ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY`,cause:e});else if(e.name===`SecurityError`){let t=window.location.hostname;if(uc(t)){if(n.rpId!==t)return new U({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:`ERROR_INVALID_RP_ID`,cause:e})}else return new U({message:`${window.location.hostname} is an invalid domain`,code:`ERROR_INVALID_DOMAIN`,cause:e})}else if(e.name===`UnknownError`)return new U({message:`The authenticator was unable to process the specified options, or could not create a new assertion signature`,code:`ERROR_AUTHENTICATOR_GENERAL_ERROR`,cause:e});return new U({message:`a Non-Webauthn related error has occurred`,code:`ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY`,cause:e})}var U,ic,ac=o((()=>{Sc(),U=class extends Error{constructor({message:e,code:t,cause:n,name:r}){super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=r??(n instanceof Error?n.name:void 0)??`Unknown Error`,this.code=t}},ic=class extends U{constructor(e,t){super({code:`ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY`,cause:t,message:e}),this.name=`WebAuthnUnknownError`,this.originalError=t}}}));function oc(e){if(!e)throw Error(`Credential creation options are required`);if(typeof PublicKeyCredential<`u`&&`parseCreationOptionsFromJSON`in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON==`function`)return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:n,excludeCredentials:r}=e,i=En(e,[`challenge`,`user`,`excludeCredentials`]),a=zo(t).buffer,o=Object.assign(Object.assign({},n),{id:zo(n.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:a,user:o});if(r&&r.length>0){s.excludeCredentials=Array(r.length);for(let e=0;e<r.length;e++){let t=r[e];s.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:zo(t.id).buffer,type:t.type||`public-key`,transports:t.transports})}}return s}function sc(e){if(!e)throw Error(`Credential request options are required`);if(typeof PublicKeyCredential<`u`&&`parseRequestOptionsFromJSON`in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON==`function`)return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:n}=e,r=En(e,[`challenge`,`allowCredentials`]),i=zo(t).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=Array(n.length);for(let e=0;e<n.length;e++){let t=n[e];a.allowCredentials[e]=Object.assign(Object.assign({},t),{id:zo(t.id).buffer,type:t.type||`public-key`,transports:t.transports})}}return a}function cc(e){if(`toJSON`in e&&typeof e.toJSON==`function`)return e.toJSON();let t=e;return{id:e.id,rawId:e.id,response:{attestationObject:Vo(new Uint8Array(e.response.attestationObject)),clientDataJSON:Vo(new Uint8Array(e.response.clientDataJSON))},type:`public-key`,clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:t.authenticatorAttachment??void 0}}function lc(e){if(`toJSON`in e&&typeof e.toJSON==`function`)return e.toJSON();let t=e,n=e.getClientExtensionResults(),r=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Vo(new Uint8Array(r.authenticatorData)),clientDataJSON:Vo(new Uint8Array(r.clientDataJSON)),signature:Vo(new Uint8Array(r.signature)),userHandle:r.userHandle?Vo(new Uint8Array(r.userHandle)):void 0},type:`public-key`,clientExtensionResults:n,authenticatorAttachment:t.authenticatorAttachment??void 0}}function uc(e){return e===`localhost`||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function dc(){return!!(us()&&`PublicKeyCredential`in window&&window.PublicKeyCredential&&`credentials`in navigator&&typeof(navigator==null?void 0:navigator.credentials)?.create==`function`&&typeof(navigator==null?void 0:navigator.credentials)?.get==`function`)}async function fc(e){try{let t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ic(`Browser returned unexpected credential type`,t)}:{data:null,error:new ic(`Empty credential response`,t)}}catch(t){return{data:null,error:nc({error:t,options:e})}}}async function pc(e){try{let t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ic(`Browser returned unexpected credential type`,t)}:{data:null,error:new ic(`Empty credential response`,t)}}catch(t){return{data:null,error:rc({error:t,options:e})}}}function mc(...e){let t=e=>typeof e==`object`&&!!e&&!Array.isArray(e),n=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),r={};for(let i of e)if(i)for(let e in i){let a=i[e];if(a!==void 0)if(Array.isArray(a))r[e]=a;else if(n(a))r[e]=a;else if(t(a)){let n=r[e];t(n)?r[e]=mc(n,a):r[e]=mc(a)}else r[e]=a}return r}function hc(e,t){return mc(yc,e,t||{})}function gc(e,t){return mc(bc,e,t||{})}var _c,vc,yc,bc,xc,Sc=o((()=>{sr(),Go(),Mo(),xs(),ac(),_c=class{createNewAbortSignal(){if(this.controller){let e=Error(`Cancelling existing WebAuthn API call for new one`);e.name=`AbortError`,this.controller.abort(e)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=Error(`Manually cancelling existing WebAuthn API call`);e.name=`AbortError`,this.controller.abort(e),this.controller=void 0}}},vc=new _c,yc={hints:[`security-key`],authenticatorSelection:{authenticatorAttachment:`cross-platform`,requireResidentKey:!1,userVerification:`preferred`,residentKey:`discouraged`},attestation:`direct`},bc={userVerification:`preferred`,hints:[`security-key`],attestation:`direct`},xc=class{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:`webauthn`}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:r},i){try{let{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!a)return{data:null,error:o};let s=r??vc.createNewAbortSignal();if(a.webauthn.type===`create`){let{user:e}=a.webauthn.credential_options.publicKey;e.name||=`${e.id}:${n}`,e.displayName||=e.name}switch(a.webauthn.type){case`create`:{let{data:t,error:n}=await fc({publicKey:hc(a.webauthn.credential_options.publicKey,i?.create),signal:s});return t?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:t}},error:null}:{data:null,error:n}}case`request`:{let t=gc(a.webauthn.credential_options.publicKey,i?.request),{data:n,error:r}=await pc(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:t,signal:s}));return n?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}}}catch(e){return V(e)?{data:null,error:e}:{data:null,error:new So(`Unexpected error in challenge`,e)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<`u`?window.location.hostname:void 0,rpOrigins:n=typeof window<`u`?[window.location.origin]:void 0,signal:r}={}},i){if(!t)return{data:null,error:new bo(`rpId is required for WebAuthn authentication`)};try{if(!dc())return{data:null,error:new So(`Browser does not support WebAuthn`,null)};let{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:r},{request:i});if(!a)return{data:null,error:o};let{webauthn:s}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:s.type,rpId:t,rpOrigins:n,credential_response:s.credential_response}})}catch(e){return V(e)?{data:null,error:e}:{data:null,error:new So(`Unexpected error in authenticate`,e)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<`u`?window.location.hostname:void 0,rpOrigins:n=typeof window<`u`?[window.location.origin]:void 0,signal:r}={}},i){if(!t)return{data:null,error:new bo(`rpId is required for WebAuthn registration`)};try{if(!dc())return{data:null,error:new So(`Browser does not support WebAuthn`,null)};let{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(t=>t.data?.all.find(t=>t.factor_type===`webauthn`&&t.friendly_name===e&&t.status!==`unverified`)).then(e=>e?this.client.mfa.unenroll({factorId:e?.id}):void 0),{data:null,error:o};let{data:s,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:r},{create:i});return s?this._verify({factorId:a.id,challengeId:s.challengeId,webauthn:{rpId:t,rpOrigins:n,type:s.webauthn.type,credential_response:s.webauthn.credential_response}}):{data:null,error:c}}catch(e){return V(e)?{data:null,error:e}:{data:null,error:new So(`Unexpected error in register`,e)}}}}}));async function Cc(e,t,n){return await n()}var wc,Tc,Ec,Dc,Oc=o((()=>{Rs(),mo(),Mo(),Ps(),xs(),Bs(),Js(),Xs(),ao(),Go(),tc(),Sc(),Ys(),wc={url:co,storageKey:lo,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:uo,flowType:`implicit`,debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1},Tc={},Ec=class e{get jwks(){return Tc[this.storageKey]?.jwks??{keys:[]}}set jwks(e){Tc[this.storageKey]=Object.assign(Object.assign({},Tc[this.storageKey]),{jwks:e})}get jwks_cached_at(){return Tc[this.storageKey]?.cachedAt??-(2**53-1)}set jwks_cached_at(e){Tc[this.storageKey]=Object.assign(Object.assign({},Tc[this.storageKey]),{cachedAt:e})}constructor(t){var n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let r=Object.assign(Object.assign({},wc),t);if(this.storageKey=r.storageKey,this.instanceID=e.nextInstanceID[this.storageKey]??0,e.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!r.debug,typeof r.debug==`function`&&(this.logger=r.debug),this.instanceID>0&&us()){let e=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=r.persistSession,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Ls({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=ps(r.fetch),this.lock=r.lock||Cc,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,this.throwOnError=r.throwOnError,r.lock?this.lock=r.lock:us()&&(globalThis==null?void 0:globalThis.navigator)?.locks?this.lock=Vs:this.lock=Cc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=-(2**53-1)),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new xc(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:fs()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zs(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=zs(this.memoryStorage)),us()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error(`Failed to create a new BroadcastChannel, multi-tab state changes will not be available`,e)}(n=this.broadcastChannel)==null||n.addEventListener(`message`,async e=>{this._debug(`received broadcast notification from other tab or client`,e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${io}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise||=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise}async _initialize(){try{let e={},t=`none`;if(us()&&(e=Jo(window.location.href),this._isImplicitGrantCallback(e)?t=`implicit`:await this._isPKCECallback(e)&&(t=`pkce`)),us()&&this.detectSessionInUrl&&t!==`none`){let{data:n,error:r}=await this._getSessionFromURL(e,t);if(r){if(this._debug(`#_initialize()`,`error detecting session from URL`,r),_o(r)){let e=r.details?.code;if(e===`identity_already_exists`||e===`identity_not_found`||e===`single_identity_not_deletable`)return{error:r}}return await this._removeSession(),{error:r}}let{session:i,redirectType:a}=n;return this._debug(`#_initialize()`,`detected session in URL`,i,`redirect type`,a),await this._saveSession(i),setTimeout(async()=>{a===`recovery`?await this._notifyAllSubscribers(`PASSWORD_RECOVERY`,i):await this._notifyAllSubscribers(`SIGNED_IN`,i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return V(e)?this._returnResult({error:e}):this._returnResult({error:new So(`Unexpected error during initialization`,e)})}finally{await this._handleVisibilityChange(),this._debug(`#_initialize()`,`end`)}}async signInAnonymously(e){try{let{data:t,error:n}=await H(this.fetch,`POST`,`${this.url}/signup`,{headers:this.headers,body:{data:e?.options?.data??{},gotrue_meta_security:{captcha_token:e?.options?.captchaToken}},xform:ws});if(n||!t)return this._returnResult({data:{user:null,session:null},error:n});let r=t.session,i=t.user;return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers(`SIGNED_IN`,r)),this._returnResult({data:{user:i,session:r},error:null})}catch(e){if(V(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signUp(e){try{let t;if(`email`in e){let{email:n,password:r,options:i}=e,a=null,o=null;this.flowType===`pkce`&&([a,o]=await ns(this.storage,this.storageKey)),t=await H(this.fetch,`POST`,`${this.url}/signup`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:{email:n,password:r,data:i?.data??{},gotrue_meta_security:{captcha_token:i?.captchaToken},code_challenge:a,code_challenge_method:o},xform:ws})}else if(`phone`in e){let{phone:n,password:r,options:i}=e;t=await H(this.fetch,`POST`,`${this.url}/signup`,{headers:this.headers,body:{phone:n,password:r,data:i?.data??{},channel:i?.channel??`sms`,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:ws})}else throw new Eo(`You must provide either an email or phone number and a password`);let{data:n,error:r}=t;if(r||!n)return await _s(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:r});let i=n.session,a=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers(`SIGNED_IN`,i)),this._returnResult({data:{user:a,session:i},error:null})}catch(e){if(await _s(this.storage,`${this.storageKey}-code-verifier`),V(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithPassword(e){try{let t;if(`email`in e){let{email:n,password:r,options:i}=e;t=await H(this.fetch,`POST`,`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:Ts})}else if(`phone`in e){let{phone:n,password:r,options:i}=e;t=await H(this.fetch,`POST`,`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:Ts})}else throw new Eo(`You must provide either an email or phone number and a password`);let{data:n,error:r}=t;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!n||!n.session||!n.user){let e=new To;return this._returnResult({data:{user:null,session:null},error:e})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers(`SIGNED_IN`,n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(e){if(V(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOAuth(e){return await this._handleProviderSignIn(e.provider,{redirectTo:e.options?.redirectTo,scopes:e.options?.scopes,queryParams:e.options?.queryParams,skipBrowserRedirect:e.options?.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:t}=e;switch(t){case`ethereum`:return await this.signInWithEthereum(e);case`solana`:return await this.signInWithSolana(e);default:throw Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){let t,n;if(`message`in e)t=e.message,n=e.signature;else{let{chain:r,wallet:i,statement:a,options:o}=e,s;if(us())if(typeof i==`object`)s=i;else{let e=window;if(`ethereum`in e&&typeof e.ethereum==`object`&&`request`in e.ethereum&&typeof e.ethereum.request==`function`)s=e.ethereum;else throw Error(`@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.`)}else{if(typeof i!=`object`||!o?.url)throw Error(`@supabase/auth-js: Both wallet and url must be specified in non-browser environments.`);s=i}let c=new URL(o?.url??window.location.href),l=await s.request({method:`eth_requestAccounts`}).then(e=>e).catch(()=>{throw Error(`@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid`)});if(!l||l.length===0)throw Error(`@supabase/auth-js: No accounts available. Please ensure the wallet is connected.`);let u=Zs(l[0]),d=o?.signInWithEthereum?.chainId;d||=Qs(await s.request({method:`eth_chainId`})),t=ec({domain:c.host,address:u,statement:a,uri:c.href,version:`1`,chainId:d,nonce:o?.signInWithEthereum?.nonce,issuedAt:o?.signInWithEthereum?.issuedAt??new Date,expirationTime:o?.signInWithEthereum?.expirationTime,notBefore:o?.signInWithEthereum?.notBefore,requestId:o?.signInWithEthereum?.requestId,resources:o?.signInWithEthereum?.resources}),n=await s.request({method:`personal_sign`,params:[$s(t),u]})}try{let{data:r,error:i}=await H(this.fetch,`POST`,`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:`ethereum`,message:t,signature:n},e.options?.captchaToken?{gotrue_meta_security:{captcha_token:e.options?.captchaToken}}:null),xform:ws});if(i)throw i;if(!r||!r.session||!r.user){let e=new To;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers(`SIGNED_IN`,r.session)),this._returnResult({data:Object.assign({},r),error:i})}catch(e){if(V(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithSolana(e){let t,n;if(`message`in e)t=e.message,n=e.signature;else{let{chain:r,wallet:i,statement:a,options:o}=e,s;if(us())if(typeof i==`object`)s=i;else{let e=window;if(`solana`in e&&typeof e.solana==`object`&&(`signIn`in e.solana&&typeof e.solana.signIn==`function`||`signMessage`in e.solana&&typeof e.solana.signMessage==`function`))s=e.solana;else throw Error(`@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.`)}else{if(typeof i!=`object`||!o?.url)throw Error(`@supabase/auth-js: Both wallet and url must be specified in non-browser environments.`);s=i}let c=new URL(o?.url??window.location.href);if(`signIn`in s&&s.signIn){let e=await s.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},o?.signInWithSolana),{version:`1`,domain:c.host,uri:c.href}),a?{statement:a}:null)),r;if(Array.isArray(e)&&e[0]&&typeof e[0]==`object`)r=e[0];else if(e&&typeof e==`object`&&`signedMessage`in e&&`signature`in e)r=e;else throw Error(`@supabase/auth-js: Wallet method signIn() returned unrecognized value`);if(`signedMessage`in r&&`signature`in r&&(typeof r.signedMessage==`string`||r.signedMessage instanceof Uint8Array)&&r.signature instanceof Uint8Array)t=typeof r.signedMessage==`string`?r.signedMessage:new TextDecoder().decode(r.signedMessage),n=r.signature;else throw Error(`@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields`)}else{if(!(`signMessage`in s)||typeof s.signMessage!=`function`||!(`publicKey`in s)||typeof s!=`object`||!s.publicKey||!(`toBase58`in s.publicKey)||typeof s.publicKey.toBase58!=`function`)throw Error(`@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API`);t=[`${c.host} wants you to sign in with your Solana account:`,s.publicKey.toBase58(),...a?[``,a,``]:[``],`Version: 1`,`URI: ${c.href}`,`Issued At: ${o?.signInWithSolana?.issuedAt??new Date().toISOString()}`,...o?.signInWithSolana?.notBefore?[`Not Before: ${o.signInWithSolana.notBefore}`]:[],...o?.signInWithSolana?.expirationTime?[`Expiration Time: ${o.signInWithSolana.expirationTime}`]:[],...o?.signInWithSolana?.chainId?[`Chain ID: ${o.signInWithSolana.chainId}`]:[],...o?.signInWithSolana?.nonce?[`Nonce: ${o.signInWithSolana.nonce}`]:[],...o?.signInWithSolana?.requestId?[`Request ID: ${o.signInWithSolana.requestId}`]:[],...o?.signInWithSolana?.resources?.length?[`Resources`,...o.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join(`
`);let e=await s.signMessage(new TextEncoder().encode(t),`utf8`);if(!e||!(e instanceof Uint8Array))throw Error(`@supabase/auth-js: Wallet signMessage() API returned an recognized value`);n=e}}try{let{data:r,error:i}=await H(this.fetch,`POST`,`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:`solana`,message:t,signature:Vo(n)},e.options?.captchaToken?{gotrue_meta_security:{captcha_token:e.options?.captchaToken}}:null),xform:ws});if(i)throw i;if(!r||!r.session||!r.user){let e=new To;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers(`SIGNED_IN`,r.session)),this._returnResult({data:Object.assign({},r),error:i})}catch(e){if(V(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _exchangeCodeForSession(e){let[t,n]=(await gs(this.storage,`${this.storageKey}-code-verifier`)??``).split(`/`);try{let{data:r,error:i}=await H(this.fetch,`POST`,`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:ws});if(await _s(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!r||!r.session||!r.user){let e=new To;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers(`SIGNED_IN`,r.session)),this._returnResult({data:Object.assign(Object.assign({},r),{redirectType:n??null}),error:i})}catch(e){if(await _s(this.storage,`${this.storageKey}-code-verifier`),V(e))return this._returnResult({data:{user:null,session:null,redirectType:null},error:e});throw e}}async signInWithIdToken(e){try{let{options:t,provider:n,token:r,access_token:i,nonce:a}=e,{data:o,error:s}=await H(this.fetch,`POST`,`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:ws});if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!o||!o.session||!o.user){let e=new To;return this._returnResult({data:{user:null,session:null},error:e})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers(`SIGNED_IN`,o.session)),this._returnResult({data:o,error:s})}catch(e){if(V(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOtp(e){try{if(`email`in e){let{email:t,options:n}=e,r=null,i=null;this.flowType===`pkce`&&([r,i]=await ns(this.storage,this.storageKey));let{error:a}=await H(this.fetch,`POST`,`${this.url}/otp`,{headers:this.headers,body:{email:t,data:n?.data??{},create_user:n?.shouldCreateUser??!0,gotrue_meta_security:{captcha_token:n?.captchaToken},code_challenge:r,code_challenge_method:i},redirectTo:n?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}if(`phone`in e){let{phone:t,options:n}=e,{data:r,error:i}=await H(this.fetch,`POST`,`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:n?.data??{},create_user:n?.shouldCreateUser??!0,gotrue_meta_security:{captcha_token:n?.captchaToken},channel:n?.channel??`sms`}});return this._returnResult({data:{user:null,session:null,messageId:r?.message_id},error:i})}throw new Eo(`You must provide either an email or phone number.`)}catch(e){if(await _s(this.storage,`${this.storageKey}-code-verifier`),V(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async verifyOtp(e){try{let t,n;`options`in e&&(t=e.options?.redirectTo,n=e.options?.captchaToken);let{data:r,error:i}=await H(this.fetch,`POST`,`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:t,xform:ws});if(i)throw i;if(!r)throw Error(`An error occurred on token verification.`);let a=r.session,o=r.user;return a?.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type==`recovery`?`PASSWORD_RECOVERY`:`SIGNED_IN`,a)),this._returnResult({data:{user:o,session:a},error:null})}catch(e){if(V(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithSSO(e){try{let t=null,n=null;this.flowType===`pkce`&&([t,n]=await ns(this.storage,this.storageKey));let r=await H(this.fetch,`POST`,`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},`providerId`in e?{provider_id:e.providerId}:null),`domain`in e?{domain:e.domain}:null),{redirect_to:e.options?.redirectTo??void 0}),e?.options?.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:t,code_challenge_method:n}),headers:this.headers,xform:Ds});return r.data?.url&&us()&&!e.options?.skipBrowserRedirect&&window.location.assign(r.data.url),this._returnResult(r)}catch(e){if(await _s(this.storage,`${this.storageKey}-code-verifier`),V(e))return this._returnResult({data:null,error:e});throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new wo;let{error:r}=await H(this.fetch,`GET`,`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(V(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{let t=`${this.url}/resend`;if(`email`in e){let{email:n,type:r,options:i}=e,{error:a}=await H(this.fetch,`POST`,t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if(`phone`in e){let{phone:n,type:r,options:i}=e,{data:a,error:o}=await H(this.fetch,`POST`,t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:o})}throw new Eo(`You must provide either an email or phone number and a type`)}catch(e){if(V(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug(`#_acquireLock`,`begin`,e);try{if(this.lockAcquired){let e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug(`#_acquireLock`,`lock acquired for storage key`,this.storageKey);try{this.lockAcquired=!0;let e=t();for(this.pendingInLock.push((async()=>{try{await e}catch{}})()),await e;this.pendingInLock.length;){let e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug(`#_acquireLock`,`lock released for storage key`,this.storageKey),this.lockAcquired=!1}})}finally{this._debug(`#_acquireLock`,`end`)}}async _useSession(e){this._debug(`#_useSession`,`begin`);try{return await e(await this.__loadSession())}finally{this._debug(`#_useSession`,`end`)}}async __loadSession(){this._debug(`#__loadSession()`,`begin`),this.lockAcquired||this._debug(`#__loadSession()`,`used outside of an acquired lock!`,Error().stack);try{let e=null,t=await gs(this.storage,this.storageKey);if(this._debug(`#getSession()`,`session from storage`,t),t!==null&&(this._isValidSession(t)?e=t:(this._debug(`#getSession()`,`session from storage is not valid`),await this._removeSession())),!e)return{data:{session:null},error:null};let n=e.expires_at?e.expires_at*1e3-Date.now()<so:!1;if(this._debug(`#__loadSession()`,`session has${n?``:` not`} expired`,`expires_at`,e.expires_at),!n){if(this.userStorage){let t=await gs(this.userStorage,this.storageKey+`-user`);t?.user?e.user=t.user:e.user=ss()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){let t={value:this.suppressGetSessionWarning};e.user=cs(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}let{data:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:r},error:null})}finally{this._debug(`#__loadSession()`,`end`)}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;let t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await H(this.fetch,`GET`,`${this.url}/user`,{headers:this.headers,jwt:e,xform:Es}):await this._useSession(async e=>{let{data:t,error:n}=e;if(n)throw n;return!t.session?.access_token&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new wo}:await H(this.fetch,`GET`,`${this.url}/user`,{headers:this.headers,jwt:t.session?.access_token??void 0,xform:Es})})}catch(e){if(V(e))return go(e)&&(await this._removeSession(),await _s(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:e});throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{let{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new wo;let a=r.session,o=null,s=null;this.flowType===`pkce`&&e.email!=null&&([o,s]=await ns(this.storage,this.storageKey));let{data:c,error:l}=await H(this.fetch,`PUT`,`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:s}),jwt:a.access_token,xform:Es});if(l)throw l;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers(`USER_UPDATED`,a),this._returnResult({data:{user:a.user},error:null})})}catch(e){if(await _s(this.storage,`${this.storageKey}-code-verifier`),V(e))return this._returnResult({data:{user:null},error:e});throw e}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new wo;let t=Date.now()/1e3,n=t,r=!0,i=null,{payload:a}=Yo(e.access_token);if(a.exp&&(n=a.exp,r=n<=t),r){let{data:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!t)return{data:{user:null,session:null},error:null};i=t}else{let{data:r,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:`bearer`,expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers(`SIGNED_IN`,i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(e){if(V(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{if(!e){let{data:n,error:r}=t;if(r)throw r;e=n.session??void 0}if(!e?.refresh_token)throw new wo;let{data:n,error:r}=await this._callRefreshToken(e.refresh_token);return r?this._returnResult({data:{user:null,session:null},error:r}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(e){if(V(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _getSessionFromURL(e,t){try{if(!us())throw new Do(`No browser detected.`);if(e.error||e.error_description||e.error_code)throw new Do(e.error_description||`Error in URL with unspecified error_description`,{error:e.error||`unspecified_error`,code:e.error_code||`unspecified_code`});switch(t){case`implicit`:if(this.flowType===`pkce`)throw new Oo(`Not a valid PKCE flow url.`);break;case`pkce`:if(this.flowType===`implicit`)throw new Do(`Not a valid implicit grant flow url.`);break;default:}if(t===`pkce`){if(this._debug(`#_initialize()`,`begin`,`is PKCE flow`,!0),!e.code)throw new Oo(`No code detected.`);let{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;let r=new URL(window.location.href);return r.searchParams.delete(`code`),window.history.replaceState(window.history.state,``,r.toString()),{data:{session:t.session,redirectType:null},error:null}}let{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:a,expires_in:o,expires_at:s,token_type:c}=e;if(!i||!o||!a||!c)throw new Do(`No session defined in URL`);let l=Math.round(Date.now()/1e3),u=parseInt(o),d=l+u;s&&(d=parseInt(s));let f=d-l;f*1e3<=3e4&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${u}s`);let p=d-u;l-p>=120?console.warn(`@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale`,p,d,l):l-p<0&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew`,p,d,l);let{data:m,error:h}=await this._getUser(i);if(h)throw h;let g={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:u,expires_at:d,refresh_token:a,token_type:c,user:m.user};return window.location.hash=``,this._debug(`#_getSessionFromURL()`,`clearing window.location.hash`),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(e){if(V(e))return this._returnResult({data:{session:null,redirectType:null},error:e});throw e}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){let t=await gs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:`global`}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:`global`}){return await this._useSession(async t=>{let{data:n,error:r}=t;if(r)return this._returnResult({error:r});let i=n.session?.access_token;if(i){let{error:t}=await this.admin.signOut(i,e);if(t&&!(ho(t)&&(t.status===404||t.status===401||t.status===403)))return this._returnResult({error:t})}return e!==`others`&&(await this._removeSession(),await _s(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){let t=qo(),n={id:t,callback:e,unsubscribe:()=>{this._debug(`#unsubscribe()`,`state change callback with id removed`,t),this.stateChangeEmitters.delete(t)}};return this._debug(`#onAuthStateChange()`,`registered callback with id`,t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{try{let{data:{session:n},error:r}=t;if(r)throw r;await this.stateChangeEmitters.get(e)?.callback(`INITIAL_SESSION`,n),this._debug(`INITIAL_SESSION`,`callback id`,e,`session`,n)}catch(t){await this.stateChangeEmitters.get(e)?.callback(`INITIAL_SESSION`,null),this._debug(`INITIAL_SESSION`,`callback id`,e,`error`,t),console.error(t)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;this.flowType===`pkce`&&([n,r]=await ns(this.storage,this.storageKey,!0));try{return await H(this.fetch,`POST`,`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(await _s(this.storage,`${this.storageKey}-code-verifier`),V(e))return this._returnResult({data:null,error:e});throw e}}async getUserIdentities(){try{let{data:e,error:t}=await this.getUser();if(t)throw t;return this._returnResult({data:{identities:e.user.identities??[]},error:null})}catch(e){if(V(e))return this._returnResult({data:null,error:e});throw e}}async linkIdentity(e){return`token`in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){try{let{data:t,error:n}=await this._useSession(async t=>{let{data:n,error:r}=t;if(r)throw r;let i=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:e.options?.redirectTo,scopes:e.options?.scopes,queryParams:e.options?.queryParams,skipBrowserRedirect:!0});return await H(this.fetch,`GET`,i,{headers:this.headers,jwt:n.session?.access_token??void 0})});if(n)throw n;return us()&&!e.options?.skipBrowserRedirect&&window.location.assign(t?.url),this._returnResult({data:{provider:e.provider,url:t?.url},error:null})}catch(t){if(V(t))return this._returnResult({data:{provider:e.provider,url:null},error:t});throw t}}async linkIdentityIdToken(e){return await this._useSession(async t=>{try{let{error:n,data:{session:r}}=t;if(n)throw n;let{options:i,provider:a,token:o,access_token:s,nonce:c}=e,{data:l,error:u}=await H(this.fetch,`POST`,`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:r?.access_token??void 0,body:{provider:a,id_token:o,access_token:s,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:ws});return u?this._returnResult({data:{user:null,session:null},error:u}):!l||!l.session||!l.user?this._returnResult({data:{user:null,session:null},error:new To}):(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers(`USER_UPDATED`,l.session)),this._returnResult({data:l,error:u}))}catch(e){if(await _s(this.storage,`${this.storageKey}-code-verifier`),V(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{let{data:n,error:r}=t;if(r)throw r;return await H(this.fetch,`DELETE`,`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:n.session?.access_token??void 0})})}catch(e){if(V(e))return this._returnResult({data:null,error:e});throw e}}async _refreshAccessToken(e){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,`begin`);try{let n=Date.now();return await Zo(async n=>(n>0&&await Xo(200*2**(n-1)),this._debug(t,`refreshing attempt`,n),await H(this.fetch,`POST`,`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ws})),(e,t)=>{let r=200*2**e;return t&&vo(t)&&Date.now()+r-n<3e4})}catch(e){if(this._debug(t,`error`,e),V(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}finally{this._debug(t,`end`)}}_isValidSession(e){return typeof e==`object`&&!!e&&`access_token`in e&&`refresh_token`in e&&`expires_at`in e}async _handleProviderSignIn(e,t){let n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug(`#_handleProviderSignIn()`,`provider`,e,`options`,t,`url`,n),us()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){let e=`#_recoverAndRefresh()`;this._debug(e,`begin`);try{let t=await gs(this.storage,this.storageKey);if(t&&this.userStorage){let e=await gs(this.userStorage,this.storageKey+`-user`);!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!e&&(e={user:t.user},await hs(this.userStorage,this.storageKey+`-user`,e)),t.user=e?.user??ss()}else if(t&&!t.user&&!t.user){let e=await gs(this.storage,this.storageKey+`-user`);e&&e?.user?(t.user=e.user,await _s(this.storage,this.storageKey+`-user`),await hs(this.storage,this.storageKey,t)):t.user=ss()}if(this._debug(e,`session from storage`,t),!this._isValidSession(t)){this._debug(e,`session is not valid`),t!==null&&await this._removeSession();return}let n=(t.expires_at??1/0)*1e3-Date.now()<so;if(this._debug(e,`session has${n?``:` not`} expired with margin of ${so}s`),n){if(this.autoRefreshToken&&t.refresh_token){let{error:n}=await this._callRefreshToken(t.refresh_token);n&&(console.error(n),vo(n)||(this._debug(e,`refresh failed with a non-retryable error, removing the session`,n),await this._removeSession()))}}else if(t.user&&t.user.__isUserNotAvailableProxy===!0)try{let{data:n,error:r}=await this._getUser(t.access_token);!r&&n?.user?(t.user=n.user,await this._saveSession(t),await this._notifyAllSubscribers(`SIGNED_IN`,t)):this._debug(e,`could not get user data, skipping SIGNED_IN notification`)}catch(t){console.error(`Error getting user data:`,t),this._debug(e,`error getting user data, skipping SIGNED_IN notification`,t)}else await this._notifyAllSubscribers(`SIGNED_IN`,t)}catch(t){this._debug(e,`error`,t),console.error(t);return}finally{this._debug(e,`end`)}}async _callRefreshToken(e){var t,n;if(!e)throw new wo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,`begin`);try{this.refreshingDeferred=new vs;let{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new wo;await this._saveSession(t.session),await this._notifyAllSubscribers(`TOKEN_REFRESHED`,t.session);let r={data:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(e){if(this._debug(r,`error`,e),V(e)){let n={data:null,error:e};return vo(e)||await this._removeSession(),(t=this.refreshingDeferred)==null||t.resolve(n),n}throw(n=this.refreshingDeferred)==null||n.reject(e),e}finally{this.refreshingDeferred=null,this._debug(r,`end`)}}async _notifyAllSubscribers(e,t,n=!0){let r=`#_notifyAllSubscribers(${e})`;this._debug(r,`begin`,t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});let r=[],i=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(e){r.push(e)}});if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,`end`)}}async _saveSession(e){this._debug(`#_saveSession()`,e),this.suppressGetSessionWarning=!0,await _s(this.storage,`${this.storageKey}-code-verifier`);let t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await hs(this.userStorage,this.storageKey+`-user`,{user:t.user});let e=Object.assign({},t);delete e.user;let r=ls(e);await hs(this.storage,this.storageKey,r)}else{let e=ls(t);await hs(this.storage,this.storageKey,e)}}async _removeSession(){this._debug(`#_removeSession()`),this.suppressGetSessionWarning=!1,await _s(this.storage,this.storageKey),await _s(this.storage,this.storageKey+`-code-verifier`),await _s(this.storage,this.storageKey+`-user`),this.userStorage&&await _s(this.userStorage,this.storageKey+`-user`),await this._notifyAllSubscribers(`SIGNED_OUT`,null)}_removeVisibilityChangedCallback(){this._debug(`#_removeVisibilityChangedCallback()`);let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&us()&&window!=null&&window.removeEventListener&&window.removeEventListener(`visibilitychange`,e)}catch(e){console.error(`removing visibilitychange callback failed`,e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug(`#_startAutoRefresh()`);let e=setInterval(()=>this._autoRefreshTokenTick(),oo);this.autoRefreshTicker=e,e&&typeof e==`object`&&typeof e.unref==`function`?e.unref():typeof Deno<`u`&&typeof Deno.unrefTimer==`function`&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug(`#_stopAutoRefresh()`);let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug(`#_autoRefreshTokenTick()`,`begin`);try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug(`#_autoRefreshTokenTick()`,`no session`);return}let r=Math.floor((n.expires_at*1e3-e)/oo);this._debug(`#_autoRefreshTokenTick()`,`access token expires in ${r} ticks, a tick lasts ${oo}ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error(`Auto refresh tick failed with error. This is likely a transient error.`,e)}}finally{this._debug(`#_autoRefreshTokenTick()`,`end`)}})}catch(e){if(e.isAcquireTimeout||e instanceof Ws)this._debug(`auto refresh token tick lock not available`);else throw e}}async _handleVisibilityChange(){if(this._debug(`#_handleVisibilityChange()`),!us()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener(`visibilitychange`,this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error(`_handleVisibilityChange`,e)}}async _onVisibilityChanged(e){let t=`#_onVisibilityChanged(${e})`;this._debug(t,`visibilityState`,document.visibilityState),document.visibilityState===`visible`?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!==`visible`){this._debug(t,`acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting`);return}await this._recoverAndRefresh()}))):document.visibilityState===`hidden`&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){let r=[`provider=${encodeURIComponent(t)}`];if(n?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType===`pkce`){let[e,t]=await ns(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(n?.queryParams){let e=new URLSearchParams(n.queryParams);r.push(e.toString())}return n?.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join(`&`)}`}async _unenroll(e){try{return await this._useSession(async t=>{let{data:n,error:r}=t;return r?this._returnResult({data:null,error:r}):await H(this.fetch,`DELETE`,`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:n?.session?.access_token})})}catch(e){if(V(e))return this._returnResult({data:null,error:e});throw e}}async _enroll(e){try{return await this._useSession(async t=>{let{data:n,error:r}=t;if(r)return this._returnResult({data:null,error:r});let i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType===`phone`?{phone:e.phone}:e.factorType===`totp`?{issuer:e.issuer}:{}),{data:a,error:o}=await H(this.fetch,`POST`,`${this.url}/factors`,{body:i,headers:this.headers,jwt:n?.session?.access_token});return o?this._returnResult({data:null,error:o}):(e.factorType===`totp`&&a.type===`totp`&&a?.totp?.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),this._returnResult({data:a,error:null}))})}catch(e){if(V(e))return this._returnResult({data:null,error:e});throw e}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{let{data:n,error:r}=t;if(r)return this._returnResult({data:null,error:r});let i=Object.assign({challenge_id:e.challengeId},`webauthn`in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type===`create`?cc(e.webauthn.credential_response):lc(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:o}=await H(this.fetch,`POST`,`${this.url}/factors/${e.factorId}/verify`,{body:i,headers:this.headers,jwt:n?.session?.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers(`MFA_CHALLENGE_VERIFIED`,a),this._returnResult({data:a,error:o}))})}catch(e){if(V(e))return this._returnResult({data:null,error:e});throw e}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{let{data:n,error:r}=t;if(r)return this._returnResult({data:null,error:r});let i=await H(this.fetch,`POST`,`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:n?.session?.access_token});if(i.error)return i;let{data:a}=i;if(a.type!==`webauthn`)return{data:a,error:null};switch(a.webauthn.type){case`create`:return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:oc(a.webauthn.credential_options.publicKey)})})}),error:null};case`request`:return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:sc(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(e){if(V(e))return this._returnResult({data:null,error:e});throw e}})}async _challengeAndVerify(e){let{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){let{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};let n={all:[],phone:[],totp:[],webauthn:[]};for(let t of e?.factors??[])n.all.push(t),t.status===`verified`&&n[t.factor_type].push(t);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){let{data:{session:e},error:t}=await this.getSession();if(t)return this._returnResult({data:null,error:t});if(!e)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:n}=Yo(e.access_token),r=null;n.aal&&(r=n.aal);let i=r;(e.user.factors?.filter(e=>e.status===`verified`)??[]).length>0&&(i=`aal2`);let a=n.amr||[];return{data:{currentLevel:r,nextLevel:i,currentAuthenticationMethods:a},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{let{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await H(this.fetch,`GET`,`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new wo})})}catch(e){if(V(e))return this._returnResult({data:null,error:e});throw e}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!r)return this._returnResult({data:null,error:new wo});let a=await H(this.fetch,`POST`,`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:`approve`},xform:e=>({data:e,error:null})});return a.data&&a.data.redirect_url&&us()&&!t?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(e){if(V(e))return this._returnResult({data:null,error:e});throw e}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!r)return this._returnResult({data:null,error:new wo});let a=await H(this.fetch,`POST`,`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:`deny`},xform:e=>({data:e,error:null})});return a.data&&a.data.redirect_url&&us()&&!t?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(e){if(V(e))return this._returnResult({data:null,error:e});throw e}}async _listOAuthGrants(){try{return await this._useSession(async e=>{let{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await H(this.fetch,`GET`,`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new wo})})}catch(e){if(V(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{let{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?(await H(this.fetch,`DELETE`,`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new wo})})}catch(e){if(V(e))return this._returnResult({data:null,error:e});throw e}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;let r=Date.now();if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>r)return n;let{data:i,error:a}=await H(this.fetch,`GET`,`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(t=>t.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){let{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});n=e.session.access_token}let{header:r,payload:i,signature:a,raw:{header:o,payload:s}}=Yo(n);t?.allowExpired||is(i.exp);let c=!r.alg||r.alg.startsWith(`HS`)||!r.kid||!(`crypto`in globalThis&&`subtle`in globalThis.crypto)?null:await this.fetchJwk(r.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!c){let{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:i,header:r,signature:a},error:null}}let l=as(r.alg),u=await crypto.subtle.importKey(`jwk`,c,l,!0,[`verify`]);if(!await crypto.subtle.verify(l,u,a,Bo(`${o}.${s}`)))throw new jo(`Invalid JWT signature`);return{data:{claims:i,header:r,signature:a},error:null}}catch(e){if(V(e))return this._returnResult({data:null,error:e});throw e}}},Ec.nextInstanceID={},Dc=Ec})),kc,Ac,jc=o((()=>{Rs(),kc=Ls,Ac=kc})),Mc,Nc,Pc=o((()=>{Oc(),Mc=Dc,Nc=Mc})),Fc=c({AuthAdminApi:()=>Ac,AuthApiError:()=>xo,AuthClient:()=>Nc,AuthError:()=>bo,AuthImplicitGrantRedirectError:()=>Do,AuthInvalidCredentialsError:()=>Eo,AuthInvalidJwtError:()=>jo,AuthInvalidTokenResponseError:()=>To,AuthPKCEGrantCodeExchangeError:()=>Oo,AuthRetryableFetchError:()=>ko,AuthSessionMissingError:()=>wo,AuthUnknownError:()=>So,AuthWeakPasswordError:()=>Ao,CustomAuthError:()=>Co,GoTrueAdminApi:()=>Ls,GoTrueClient:()=>Dc,NavigatorLockAcquireTimeoutError:()=>Gs,SIGN_OUT_SCOPES:()=>Fs,isAuthApiError:()=>ho,isAuthError:()=>V,isAuthImplicitGrantRedirectError:()=>_o,isAuthRetryableFetchError:()=>vo,isAuthSessionMissingError:()=>go,isAuthWeakPasswordError:()=>yo,lockInternals:()=>Us,navigatorLock:()=>Vs,processLock:()=>Hs}),Ic=o((()=>{Rs(),Oc(),jc(),Pc(),Is(),Mo(),Js()})),Lc=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.SupabaseAuthClient=void 0;var t=(Ic(),d(Fc));e.SupabaseAuthClient=class extends t.AuthClient{constructor(e){super(e)}}})),Rc=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0});var t=(yr(),d(vr)),n=Er(),r=(wi(),d(Ci)),i=($a(),d(Qa)),a=to(),o=no(),s=ro(),c=Lc();e.default=class{constructor(e,t,r){this.supabaseUrl=e,this.supabaseKey=t;let c=(0,s.validateSupabaseUrl)(e);if(!t)throw Error(`supabaseKey is required.`);this.realtimeUrl=new URL(`realtime/v1`,c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace(`http`,`ws`),this.authUrl=new URL(`auth/v1`,c),this.storageUrl=new URL(`storage/v1`,c),this.functionsUrl=new URL(`functions/v1`,c);let l=`sb-${c.hostname.split(`.`)[0]}-auth-token`,u={db:a.DEFAULT_DB_OPTIONS,realtime:a.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},a.DEFAULT_AUTH_OPTIONS),{storageKey:l}),global:a.DEFAULT_GLOBAL_OPTIONS},d=(0,s.applySettingDefaults)(r??{},u);this.storageKey=d.auth.storageKey??``,this.headers=d.global.headers??{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(d.auth??{},this.headers,d.global.fetch),this.fetch=(0,o.fetchWithAuth)(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>console.warn(`Failed to set initial Realtime auth token:`,e)),this.rest=new n.PostgrestClient(new URL(`rest/v1`,c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new i.StorageClient(this.storageUrl.href,this.headers,this.fetch,r?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new t.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){if(this.accessToken)return await this.accessToken();let{data:e}=await this.auth.getSession();return e.session?.access_token??this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:a,flowType:o,lock:s,debug:l,throwOnError:u},d,f){let p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new c.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,flowType:o,lock:s,debug:l,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>e.toLowerCase()===`authorization`)})}_initRealtimeClient(e){return new r.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,`CLIENT`,t?.access_token)})}_handleTokenChanged(e,t,n){(e===`TOKEN_REFRESHED`||e===`SIGNED_IN`)&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e===`SIGNED_OUT`&&(this.realtime.setAuth(),t==`STORAGE`&&this.auth.signOut(),this.changedAccessToken=void 0)}}})),zc=s((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)},r=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,`__esModule`,{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;var i=r(Rc());n((Ic(),d(Fc)),e);var a=Er();Object.defineProperty(e,`PostgrestError`,{enumerable:!0,get:function(){return a.PostgrestError}});var o=(yr(),d(vr));Object.defineProperty(e,`FunctionsHttpError`,{enumerable:!0,get:function(){return o.FunctionsHttpError}}),Object.defineProperty(e,`FunctionsFetchError`,{enumerable:!0,get:function(){return o.FunctionsFetchError}}),Object.defineProperty(e,`FunctionsRelayError`,{enumerable:!0,get:function(){return o.FunctionsRelayError}}),Object.defineProperty(e,`FunctionsError`,{enumerable:!0,get:function(){return o.FunctionsError}}),Object.defineProperty(e,`FunctionRegion`,{enumerable:!0,get:function(){return o.FunctionRegion}}),n((wi(),d(Ci)),e);var s=Rc();Object.defineProperty(e,`SupabaseClient`,{enumerable:!0,get:function(){return r(s).default}}),e.createClient=(e,t,n)=>new i.default(e,t,n);function c(){if(typeof window<`u`||typeof process>`u`)return!1;let e=process.version;if(e==null)return!1;let t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}c()&&console.warn(`  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217`)})),Bc=u(y(),1),Vc=u(zc(),1),{PostgrestError:Hc,FunctionsHttpError:Uc,FunctionsFetchError:Wc,FunctionsRelayError:Gc,FunctionsError:Kc,FunctionRegion:qc,SupabaseClient:Jc,createClient:Yc,GoTrueAdminApi:Xc,GoTrueClient:Zc,AuthAdminApi:Qc,AuthClient:$c,navigatorLock:el,NavigatorLockAcquireTimeoutError:tl,lockInternals:nl,processLock:rl,SIGN_OUT_SCOPES:il,AuthError:al,AuthApiError:ol,AuthUnknownError:sl,CustomAuthError:cl,AuthSessionMissingError:ll,AuthInvalidTokenResponseError:ul,AuthInvalidCredentialsError:dl,AuthImplicitGrantRedirectError:fl,AuthPKCEGrantCodeExchangeError:pl,AuthRetryableFetchError:ml,AuthWeakPasswordError:hl,AuthInvalidJwtError:gl,isAuthError:_l,isAuthApiError:vl,isAuthSessionMissingError:yl,isAuthImplicitGrantRedirectError:bl,isAuthRetryableFetchError:xl,isAuthWeakPasswordError:Sl,RealtimePresence:Cl,RealtimeChannel:wl,RealtimeClient:Tl,REALTIME_LISTEN_TYPES:El,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:Dl,REALTIME_PRESENCE_LISTEN_EVENTS:Ol,REALTIME_SUBSCRIBE_STATES:kl,REALTIME_CHANNEL_STATES:Al}=Vc.default||Vc;Vc.default;const W=Yc(void 0,void 0);var jl=s((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),G=s(((e,t)=>{t.exports=jl()}))();function Ml({children:e}){let[t,n]=(0,w.useState)(!0),[r,i]=(0,w.useState)(null);return(0,w.useEffect)(()=>{(async()=>{let{data:e}=await W.auth.getSession();i(e.session),n(!1)})()},[]),t?null:r?e:(0,G.jsx)(gt,{to:`/login`,replace:!0})}function Nl({children:e,requiredRole:t}){let[n,r]=(0,w.useState)(!0),[i,a]=(0,w.useState)(null);return(0,w.useEffect)(()=>{(async()=>{let{data:e}=await W.auth.getUser();if(!e?.user){r(!1);return}let{data:t}=await W.from(`profiles`).select(`role`).eq(`id`,e.user.id).single();a(t?.role||null),r(!1)})()},[]),n?null:i===t?e:(0,G.jsx)(gt,{to:`/login`,replace:!0})}function Pl(){let e=qe(),[t,n]=(0,w.useState)(``),[r,i]=(0,w.useState)(``),[a,o]=(0,w.useState)(!1),[s,c]=(0,w.useState)(!1);return(0,G.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-gray-100 px-6`,children:(0,G.jsxs)(`form`,{onSubmit:async n=>{n.preventDefault(),c(!0);let{data:i,error:a}=await W.auth.signInWithPassword({email:t,password:r});if(a)return c(!1),alert(a.message);let o=i.user,{data:s,error:l}=await W.from(`profiles`).select(`role, job_type`).eq(`id`,o.id).single();if(c(!1),l||!s)return alert(`Profile not found. Contact admin.`);if(!s.role)return e(`/select-role`);if(s.role===`manager`)return e(`/manager/dashboard`);if(s.role===`employee`)return e(`/employee/dashboard`);alert(`Unexpected role assigned. Contact admin.`)},className:`bg-white w-full max-w-md p-8 rounded-lg shadow-lg`,children:[(0,G.jsx)(`h2`,{className:`text-2xl font-bold text-center mb-6`,children:`Welcome to IT CORP inc work portal`}),(0,G.jsxs)(`div`,{className:`mb-4`,children:[(0,G.jsx)(`label`,{className:`block mb-1 font-medium`,children:`Email`}),(0,G.jsx)(`input`,{type:`email`,required:!0,value:t,onChange:e=>n(e.target.value),placeholder:`Enter your email`,className:`w-full border rounded-lg p-3 focus:ring-2 focus:ring-blue-500`})]}),(0,G.jsxs)(`div`,{className:`mb-4`,children:[(0,G.jsx)(`label`,{className:`block mb-1 font-medium`,children:`Password`}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsx)(`input`,{type:a?`text`:`password`,required:!0,value:r,onChange:e=>i(e.target.value),placeholder:`Enter your password`,className:`w-full border rounded-lg p-3 pr-12 focus:ring-2 focus:ring-blue-500`}),(0,G.jsx)(`span`,{className:`absolute right-4 top-3.5 cursor-pointer text-gray-500`,onClick:()=>o(!a),children:a?``:``})]})]}),(0,G.jsx)(`button`,{disabled:s,className:`w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700`,children:s?`Logging in...`:`Login`}),(0,G.jsxs)(`div`,{className:`mt-4 text-center`,children:[(0,G.jsx)(`p`,{className:`text-blue-600 cursor-pointer`,onClick:()=>e(`/forgot-password`),children:`Forgot Password?`}),(0,G.jsxs)(`p`,{className:`mt-2`,children:[`Dont have an account?`,` `,(0,G.jsx)(`span`,{className:`text-blue-600 cursor-pointer`,onClick:()=>e(`/signup`),children:`Sign Up`})]})]})]})})}function Fl({label:e,name:t,type:n=`text`,value:r,onChange:i,placeholder:a}){return(0,G.jsxs)(`div`,{className:`mb-4`,children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium mb-1`,children:e}),(0,G.jsx)(`input`,{name:t,type:n,value:r,onChange:i,placeholder:a,className:`w-full border rounded-md p-2 focus:ring-2 focus:ring-blue-500`})]})}const Il=e=>/^\+92[0-9]{10}$/.test(e),Ll=e=>/^[0-9]{5}-[0-9]{7}-[0-9]$/.test(e);function Rl(){let e=qe(),[t,n]=(0,w.useState)({full_name:``,phone:`+92`,address_house:``,address_street:``,address_area:``,city:``,state:``,country:`Pakistan`,cnic:``,email:``,password:``,role:``,job_type:``}),r=[`3D Jewelry`,`VR Development`,`3D Models`,`Illustration`],i=e=>{let t=e.replace(/\D/g,``).slice(0,13);return t.length<=5?t:t.length<=12?`${t.slice(0,5)}-${t.slice(5)}`:`${t.slice(0,5)}-${t.slice(5,12)}-${t.slice(12)}`},a=e=>{let{name:r,value:a}=e.target;if(r===`cnic`)return n({...t,cnic:i(a)});n({...t,[r]:a})},o=async()=>{let{data:e}=await W.from(`profiles`).select(`emp_id, mgr_id`).order(`created_at`,{ascending:!1}).limit(1),n=0;if(e?.length>0){let t=(e[0].emp_id||e[0].mgr_id)?.match(/\d+/);t&&(n=parseInt(t[0]))}let r=n+1;if(t.role===`manager`)return`M${r}`;if(t.job_type===`VR Development`)return`VR EMP ${r}`;if(t.job_type===`3D Jewelry`)return`JWL EMP ${r}`;if(t.job_type===`3D Models`)return`MDL EMP ${r}`;if(t.job_type===`Illustration`)return`ILL EMP ${r}`};return(0,G.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-gray-100 px-4`,children:(0,G.jsxs)(`form`,{onSubmit:async n=>{if(n.preventDefault(),!t.role)return alert(`Please select a role (Employee or Manager).`);if(t.role===`employee`&&!t.job_type)return alert(`Please select a job type.`);if(!Il(t.phone))return alert(`Invalid Phone Format (+92XXXXXXXXXX)`);if(!Ll(t.cnic))return alert(`Invalid CNIC Format (00000-0000000-0)`);let r=await o(),{data:i,error:a}=await W.auth.signUp({email:t.email,password:t.password});if(a)return alert(a.message);let{error:s}=await W.from(`profiles`).insert({id:i.user.id,full_name:t.full_name,phone:t.phone,cnic:t.cnic,address:{house:t.address_house||``,street:t.address_street||``,area:t.address_area||``,city:t.city||``,state:t.state||``,country:`Pakistan`},role:t.role||null,job_type:t.role===`employee`?t.job_type:null,emp_id:t.role===`employee`?r:null,mgr_id:t.role===`manager`?r:null});if(s)return console.log(s),alert(`Profile save failed. Check Supabase policies.`);await W.auth.signOut(),alert(`Signup Successful! Please login now.`),e(`/login`)},className:`bg-white p-8 rounded-xl shadow-xl w-full max-w-2xl`,children:[(0,G.jsx)(`h2`,{className:`text-3xl font-bold mb-6 text-center`,children:`Create Account`}),(0,G.jsx)(`h3`,{className:`text-lg font-semibold mb-2 text-gray-700`,children:`Select Role`}),(0,G.jsxs)(`select`,{name:`role`,value:t.role,onChange:a,className:`w-full border p-2 rounded mb-6`,children:[(0,G.jsx)(`option`,{value:``,children:`Choose Role`}),(0,G.jsx)(`option`,{value:`employee`,children:`Employee`}),(0,G.jsx)(`option`,{value:`manager`,children:`Manager`})]}),t.role===`employee`&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`h3`,{className:`text-lg font-semibold mb-2 text-gray-700`,children:`Job Type`}),(0,G.jsxs)(`select`,{name:`job_type`,value:t.job_type,onChange:a,className:`w-full border p-2 rounded mb-6`,children:[(0,G.jsx)(`option`,{value:``,children:`Select Job Type`}),r.map(e=>(0,G.jsx)(`option`,{children:e},e))]})]}),(0,G.jsx)(`h3`,{className:`text-lg font-semibold mb-2 text-gray-700`,children:`Personal Information`}),(0,G.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4 mb-6`,children:[(0,G.jsx)(Fl,{label:`Full Name`,name:`full_name`,value:t.full_name,onChange:a}),(0,G.jsx)(Fl,{label:`Phone Number`,name:`phone`,value:t.phone,onChange:a,placeholder:`+92XXXXXXXXXX`}),(0,G.jsx)(Fl,{label:`CNIC`,name:`cnic`,value:t.cnic,onChange:a,placeholder:`00000-0000000-0`})]}),(0,G.jsx)(`h3`,{className:`text-lg font-semibold mb-2 text-gray-700`,children:`Address Details`}),(0,G.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4 mb-6`,children:[(0,G.jsx)(Fl,{label:`House No`,name:`address_house`,value:t.address_house,onChange:a}),(0,G.jsx)(Fl,{label:`Street`,name:`address_street`,value:t.address_street,onChange:a}),(0,G.jsx)(Fl,{label:`Area`,name:`address_area`,value:t.address_area,onChange:a}),(0,G.jsx)(Fl,{label:`City`,name:`city`,value:t.city,onChange:a}),(0,G.jsx)(Fl,{label:`State`,name:`state`,value:t.state,onChange:a})]}),(0,G.jsx)(`h3`,{className:`text-lg font-semibold mb-2 text-gray-700`,children:`Account Information`}),(0,G.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4 mb-6`,children:[(0,G.jsx)(Fl,{label:`Email`,name:`email`,type:`email`,value:t.email,onChange:a}),(0,G.jsx)(Fl,{label:`Password`,name:`password`,type:`password`,value:t.password,onChange:a})]}),(0,G.jsx)(`button`,{className:`w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition`,children:`Sign Up`}),(0,G.jsxs)(`p`,{className:`text-center mt-4 text-gray-600`,children:[`Already have an account?`,(0,G.jsx)(`span`,{className:`text-blue-600 cursor-pointer font-medium ml-1`,onClick:()=>e(`/login`),children:`Login`})]})]})})}function K(){let e=qe(),[t,n]=(0,w.useState)(null),[r,i]=(0,w.useState)(``),[a,o]=(0,w.useState)(``),s=[`3D Jewelry`,`VR Development`,`3D Models`,`Illustration`];(0,w.useEffect)(()=>{(async()=>{let{data:t}=await W.auth.getUser();if(!t?.user)return e(`/login`);n(t.user)})()},[]);let c=async()=>{let{data:e}=await W.from(`profiles`).select(`emp_id, mgr_id`).order(`created_at`,{ascending:!1}).limit(1),t=0;if(e?.length>0){let n=(e[0].emp_id||e[0].mgr_id)?.match(/\d+/);n&&(t=parseInt(n[0]))}let n=t+1;if(r===`manager`)return`M${n}`;if(a===`VR Development`)return`VR EMP ${n}`;if(a===`3D Jewelry`)return`JWL EMP ${n}`;if(a===`3D Models`)return`MDL EMP ${n}`;if(a===`Illustration`)return`ILL EMP ${n}`};return(0,G.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-gray-100 px-4`,children:(0,G.jsxs)(`div`,{className:`bg-white p-8 rounded-xl shadow-xl w-full max-w-lg`,children:[(0,G.jsx)(`h2`,{className:`text-3xl font-bold mb-6 text-center`,children:`Select Your Role`}),(0,G.jsx)(`p`,{className:`text-gray-600 text-center mb-6`,children:`Choose your role below. This will determine your dashboard and permissions.`}),(0,G.jsxs)(`div`,{className:`mb-6`,children:[(0,G.jsx)(`label`,{className:`block font-semibold mb-2`,children:`Select Role`}),(0,G.jsxs)(`select`,{value:r,onChange:e=>i(e.target.value),className:`w-full border p-2 rounded`,children:[(0,G.jsx)(`option`,{value:``,children:`Choose one`}),(0,G.jsx)(`option`,{value:`employee`,children:`Employee`}),(0,G.jsx)(`option`,{value:`manager`,children:`Manager`})]})]}),r===`employee`&&(0,G.jsxs)(`div`,{className:`mb-6`,children:[(0,G.jsx)(`label`,{className:`block font-semibold mb-2`,children:`Select Job Type`}),(0,G.jsxs)(`select`,{value:a,onChange:e=>o(e.target.value),className:`w-full border p-2 rounded`,children:[(0,G.jsx)(`option`,{value:``,children:`Choose job type`}),s.map(e=>(0,G.jsx)(`option`,{children:e},e))]})]}),(0,G.jsx)(`button`,{onClick:async()=>{if(!r)return alert(`Please select a role.`);if(r===`employee`&&!a)return alert(`Please select a job type.`);let n=await c(),i={role:r,job_type:r===`employee`?a:null,emp_id:r===`employee`?n:null,mgr_id:r===`manager`?n:null};await W.from(`profiles`).update(i).eq(`id`,t.id),await W.auth.signOut(),alert(`Role saved successfully. Please login again.`),e(`/login`)},className:`w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700`,children:`Save & Continue`}),(0,G.jsxs)(`p`,{className:`text-center mt-4 text-gray-600`,children:[`Not you?`,` `,(0,G.jsx)(`span`,{className:`text-blue-600 cursor-pointer`,onClick:()=>{W.auth.signOut(),e(`/login`)},children:`Logout`})]})]})})}function zl(){let e=qe(),[t,n]=(0,w.useState)(``),[r,i]=(0,w.useState)(!1),[a,o]=(0,w.useState)(``),[s,c]=(0,w.useState)(``);return(0,G.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-6`,children:(0,G.jsxs)(`form`,{onSubmit:async n=>{if(n.preventDefault(),i(!0),o(``),c(``),!t.includes(`@`)||!t.includes(`.`)){o(`Please enter a valid email address.`),i(!1);return}let{error:r}=await W.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/reset-password`});if(i(!1),r){o(r.message);return}c(`A password reset link has been sent to your email.`),setTimeout(()=>e(`/login`),1500)},className:`bg-white w-full max-w-md p-8 rounded-2xl shadow-xl border border-white/60 backdrop-blur-xl`,children:[(0,G.jsx)(`h2`,{className:`text-3xl font-extrabold text-center text-slate-900 mb-6`,children:`Reset Password`}),(0,G.jsx)(`p`,{className:`text-center text-slate-600 mb-6`,children:`Enter your email and we will send you a reset link.`}),(0,G.jsxs)(`div`,{className:`mb-4`,children:[(0,G.jsx)(`label`,{className:`block mb-1 font-semibold text-slate-700`,children:`Email Address`}),(0,G.jsx)(`input`,{type:`email`,required:!0,value:t,onChange:e=>n(e.target.value),placeholder:`example@email.com`,className:`w-full border rounded-lg p-3 focus:ring-2 focus:ring-blue-500 shadow-sm`})]}),a&&(0,G.jsx)(`p`,{className:`text-red-600 text-sm mb-3 font-medium text-center`,children:a}),s&&(0,G.jsx)(`p`,{className:`text-green-600 text-sm mb-3 font-medium text-center`,children:s}),(0,G.jsx)(`button`,{disabled:r,className:`w-full py-3 rounded-lg font-semibold text-white shadow-md transition-all 
            ${r?`bg-blue-400`:`bg-blue-600 hover:bg-blue-700`} 
          `,children:r?`Sending...`:`Send Reset Link`}),(0,G.jsx)(`p`,{className:`text-center text-blue-600 font-medium cursor-pointer mt-5 hover:underline`,onClick:()=>e(`/login`),children:` Back to Login`})]})})}function q(){let e=qe(),[t,n]=(0,w.useState)(``),[r,i]=(0,w.useState)(``),[a,o]=(0,w.useState)(!1);return(0,G.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-gray-100 px-6`,children:(0,G.jsxs)(`form`,{onSubmit:async n=>{if(n.preventDefault(),t.length<6)return alert(`Password must be at least 6 characters long.`);if(t!==r)return alert(`Passwords do not match.`);o(!0);let{error:i}=await W.auth.updateUser({password:t});if(o(!1),i)return alert(i.message);alert(`Your password has been updated successfully.`),e(`/login`)},className:`bg-white w-full max-w-md p-8 rounded-lg shadow-lg`,children:[(0,G.jsx)(`h2`,{className:`text-2xl font-bold text-center mb-6`,children:`Set a New Password`}),(0,G.jsxs)(`div`,{className:`mb-4`,children:[(0,G.jsx)(`label`,{className:`block mb-1 font-medium`,children:`New Password`}),(0,G.jsx)(`input`,{type:`password`,required:!0,value:t,onChange:e=>n(e.target.value),placeholder:`Enter new password`,className:`w-full border rounded-lg p-3 focus:ring-2 focus:ring-blue-500`})]}),(0,G.jsxs)(`div`,{className:`mb-4`,children:[(0,G.jsx)(`label`,{className:`block mb-1 font-medium`,children:`Confirm Password`}),(0,G.jsx)(`input`,{type:`password`,required:!0,value:r,onChange:e=>i(e.target.value),placeholder:`Confirm new password`,className:`w-full border rounded-lg p-3 focus:ring-2 focus:ring-blue-500`})]}),(0,G.jsx)(`button`,{disabled:a,className:`w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700`,children:a?`Updating...`:`Update Password`}),(0,G.jsx)(`p`,{className:`text-center text-blue-600 cursor-pointer mt-4`,onClick:()=>e(`/login`),children:`Back to Login`})]})})}function J(){let[e,t]=(0,w.useState)(!0),[n,r]=(0,w.useState)([]),[i,a]=(0,w.useState)(``),[o,s]=(0,w.useState)(``),[c,l]=(0,w.useState)(``),[u,d]=(0,w.useState)(``),[f,p]=(0,w.useState)(`newest`),[m,h]=(0,w.useState)(``),[g,_]=(0,w.useState)([]),[v,y]=(0,w.useState)([]),[b,x]=(0,w.useState)(null),[S,C]=(0,w.useState)(!1);(0,w.useEffect)(()=>{T(),E()},[]),(0,w.useEffect)(()=>{E()},[i,o,c,u,f,m]);async function T(){let{data:e}=await W.from(`profiles`).select(`id, full_name, emp_id`).eq(`role`,`employee`).order(`full_name`,{ascending:!0});_(e||[]);let{data:t}=await W.from(`tasks`).select(`id, project_id, client_name`).order(`created_at`,{ascending:!1}).limit(500);y(t||[])}async function E(){t(!0);let e=W.from(`task_submissions`).select(`
        id,
        task_id,
        employee_id,
        submitted_link,
        notes,
        timestamp,
        version,
        status,
        tags,
        manager_notes,
        profiles:profiles!task_submissions_employee_id_fkey(id, full_name, emp_id),
        tasks:tasks!task_submissions_task_id_fkey(id, project_id, client_name, deadline)
      `);u.trim()&&(e=e.ilike(`notes`,`%${u}%`)),o&&(e=e.eq(`employee_id`,o)),c&&(e=e.eq(`task_id`,c)),i&&(e=e.eq(`status`,i)),m&&(e=e.cs(`tags`,`{${m}}`)),f===`newest`&&(e=e.order(`timestamp`,{ascending:!1})),f===`oldest`&&(e=e.order(`timestamp`,{ascending:!0})),f===`status`&&(e=e.order(`status`,{ascending:!0}));let{data:n,error:a}=await e;if(a){console.error(`Load submissions error:`,a),r([]),t(!1);return}r((n||[]).map(e=>{let t=e.timestamp?new Date(e.timestamp):null,n=e.tasks?.deadline?new Date(e.tasks.deadline):null,r=t&&n?t>n:!1;return{...e,submitted_at:t,task:e.tasks,employee:e.profiles,isLate:r}})),t(!1)}async function D(e){let{error:t}=await W.from(`task_submissions`).update({status:`approved`,manager_notes:``}).eq(`id`,e);if(t)return alert(t.message);E()}async function O(e,t=``){let{error:n}=await W.from(`task_submissions`).update({status:`revision_requested`,manager_notes:t}).eq(`id`,e);if(n)return alert(n.message);E()}async function ee(e){let{error:t}=await W.from(`task_submissions`).update({status:`resubmitted`}).eq(`id`,e);t&&alert(t.message),E()}async function te(e){if(!confirm(`Delete submission permanently?`))return;let{error:t}=await W.from(`task_submissions`).delete().eq(`id`,e);t&&alert(t.message),E()}async function ne(e){if(!e.submitted_link)return alert(`No link provided`);window.open(e.submitted_link,`_blank`)}async function k(e,t){C(!0);let{error:n}=await W.from(`task_submissions`).update({manager_notes:t}).eq(`id`,e);if(C(!1),n)return alert(`Error saving note: `+n.message);E()}let re=e=>e?new Date(e).toLocaleString():`-`,ie=e=>(e=(e||``).toLowerCase(),e===`approved`?(0,G.jsx)(`span`,{className:`px-2 py-1 bg-emerald-100 text-emerald-700 rounded text-xs`,children:`Approved`}):e===`revision_requested`?(0,G.jsx)(`span`,{className:`px-2 py-1 bg-amber-100 text-amber-700 rounded text-xs`,children:`Revision`}):e===`resubmitted`?(0,G.jsx)(`span`,{className:`px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs`,children:`Resubmitted`}):(0,G.jsx)(`span`,{className:`px-2 py-1 bg-slate-200 text-slate-700 rounded text-xs`,children:`Pending`}));(0,w.useMemo)(()=>{let e=new Set;return n.forEach(t=>(t.tags||[]).forEach(t=>e.add(t))),[...e]},[n]);let ae=(0,w.useMemo)(()=>{let e={};return n.forEach(t=>{e[t.task_id]||(e[t.task_id]=[]),e[t.task_id].push(t)}),Object.values(e).forEach(e=>{e.sort((e,t)=>(e.version||0)-(t.version||0))}),e},[n]);return(0,G.jsxs)(`div`,{className:`p-4 bg-white/90 border rounded-xl shadow`,children:[(0,G.jsx)(`h2`,{className:`text-xl font-semibold mb-3`,children:`Submissions`}),(0,G.jsxs)(`div`,{className:`flex flex-wrap gap-2 mb-4`,children:[(0,G.jsx)(`input`,{placeholder:`Search notes...`,className:`border p-2 rounded text-sm w-48`,value:u,onChange:e=>d(e.target.value)}),(0,G.jsxs)(`select`,{className:`border p-2 rounded text-sm`,value:i,onChange:e=>a(e.target.value),children:[(0,G.jsx)(`option`,{value:``,children:`All Status`}),(0,G.jsx)(`option`,{value:`pending`,children:`Pending`}),(0,G.jsx)(`option`,{value:`approved`,children:`Approved`}),(0,G.jsx)(`option`,{value:`revision_requested`,children:`Revision`}),(0,G.jsx)(`option`,{value:`resubmitted`,children:`Resubmitted`})]})]}),e?(0,G.jsx)(`div`,{children:`Loading...`}):Object.keys(ae).map(e=>{let t=ae[e],n=t[0],r=`${n.task.project_id}  ${n.task.client_name}`;return(0,G.jsxs)(`div`,{className:`border rounded-lg p-4 bg-white mb-4`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-semibold`,children:r}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[`Deadline: `,n.task.deadline]})]}),(0,G.jsx)(`button`,{onClick:()=>x({group:t,taskLabel:r}),className:`px-2 py-1 border rounded text-sm`,children:`Open Timeline`})]}),(0,G.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-3`,children:t.map(e=>(0,G.jsxs)(`div`,{className:`p-3 border rounded bg-white`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-medium`,children:e.employee?.full_name}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:e.employee?.emp_id})]}),(0,G.jsxs)(`div`,{className:`text-right`,children:[(0,G.jsx)(`div`,{className:`text-xs`,children:re(e.submitted_at)}),ie(e.status)]})]}),(0,G.jsx)(`div`,{className:`text-sm mt-2`,children:e.notes||`No notes`}),(0,G.jsxs)(`div`,{className:`mt-3 flex flex-wrap gap-2`,children:[(0,G.jsx)(`button`,{onClick:()=>x({submission:e,taskLabel:r}),className:`px-2 py-1 bg-slate-100 rounded text-sm`,children:`Details`}),(0,G.jsx)(`button`,{onClick:()=>ne(e),className:`px-2 py-1 border rounded text-sm`,children:`Open Link`}),(0,G.jsx)(`button`,{onClick:()=>D(e.id),className:`px-2 py-1 bg-emerald-600 text-white rounded text-sm`,children:`Approve`}),(0,G.jsx)(`button`,{onClick:()=>O(e.id),className:`px-2 py-1 bg-amber-500 text-white rounded text-sm`,children:`Revision`})]}),(0,G.jsxs)(`div`,{className:`mt-2 text-xs text-right text-slate-400`,children:[`v`,e.version,`  `,e.isLate?`Late`:`On Time`]})]},e.id))})]},e)}),b&&(0,G.jsx)(Bl,{selected:b,onClose:()=>x(null),approve:D,requestRevision:O,markResubmitted:ee,deleteSubmission:te,saveManagerNote:k})]})}function Bl({selected:e,onClose:t,approve:n,requestRevision:r,markResubmitted:i,deleteSubmission:a,saveManagerNote:o}){let s=e.group||[e.submission],c=e.taskLabel,[l,u]=(0,w.useState)(s[0]?.manager_notes||``),[d,f]=(0,w.useState)(!1);async function p(){f(!0),await o(s[0].id,l),f(!1)}return(0,G.jsx)(`div`,{className:`fixed inset-0 z-50 bg-black/40 flex justify-center items-center p-4`,children:(0,G.jsxs)(`div`,{className:`bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[85vh] overflow-auto`,children:[(0,G.jsxs)(`div`,{className:`p-4 border-b flex justify-between items-center`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-semibold text-lg`,children:c}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Submission Timeline`})]}),(0,G.jsx)(`button`,{onClick:t,className:`px-3 py-1 bg-slate-100 rounded`,children:`Close`})]}),(0,G.jsxs)(`div`,{className:`p-4 space-y-4`,children:[s.map(e=>(0,G.jsxs)(`div`,{className:`p-3 border rounded`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-medium`,children:e.employee?.full_name}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[e.employee?.emp_id,`  v`,e.version]})]}),(0,G.jsxs)(`div`,{className:`text-right text-xs`,children:[e.submitted_at?.toLocaleString(),(0,G.jsx)(`div`,{className:e.isLate?`text-rose-600`:`text-emerald-600`,children:e.isLate?`Late`:`On Time`})]})]}),(0,G.jsx)(`div`,{className:`mt-2`,children:e.notes||`No notes`}),e.submitted_link&&(0,G.jsx)(`a`,{href:e.submitted_link,target:`_blank`,className:`text-blue-600 underline text-sm mt-2 block`,children:e.submitted_link}),(0,G.jsxs)(`div`,{className:`flex gap-2 mt-3`,children:[(0,G.jsx)(`button`,{onClick:()=>n(e.id),className:`px-3 py-1 bg-emerald-600 text-white rounded text-sm`,children:`Approve`}),(0,G.jsx)(`button`,{onClick:()=>r(e.id),className:`px-3 py-1 bg-amber-500 text-white rounded text-sm`,children:`Request Revision`}),(0,G.jsx)(`button`,{onClick:()=>i(e.id),className:`px-3 py-1 bg-blue-200 rounded text-sm`,children:`Mark Resubmitted`}),(0,G.jsx)(`button`,{onClick:()=>a(e.id),className:`px-3 py-1 bg-rose-500 text-white rounded text-sm`,children:`Delete`})]})]},e.id)),(0,G.jsxs)(`div`,{className:`p-3 border rounded`,children:[(0,G.jsx)(`div`,{className:`text-sm text-slate-500`,children:`Manager Private Note`}),(0,G.jsx)(`textarea`,{className:`w-full mt-2 border p-2 rounded`,rows:3,value:l,onChange:e=>u(e.target.value)}),(0,G.jsx)(`div`,{className:`flex justify-end mt-2`,children:(0,G.jsx)(`button`,{onClick:p,disabled:d,className:`px-3 py-1 bg-blue-600 text-white rounded text-sm`,children:d?`Saving...`:`Save Note`})})]})]})]})})}async function Vl({user_id:e,type:t,message:n,link:r=null,metadata:i={}}){if(!e)throw Error(`user_id required for notification`);let{data:a,error:o}=await W.from(`notifications`).insert([{user_id:e,type:t,message:n,link:r,metadata:i}]);return o?(console.error(`createNotification error`,o),{error:o}):{data:a}}async function Hl(e,{unreadOnly:t=!1,limit:n=50}={}){if(!e)return{data:[],error:null};let r=W.from(`notifications`).select(`*`).eq(`user_id`,e).order(`created_at`,{ascending:!1}).limit(n);t&&(r=r.is(`is_read`,!1));let{data:i,error:a}=await r;return{data:i,error:a}}async function Ul(e){let{data:t,error:n}=await W.from(`notifications`).update({is_read:!0}).eq(`id`,e);return{data:t,error:n}}async function Wl(e){let{data:t,error:n}=await W.from(`notifications`).update({is_read:!0}).eq(`user_id`,e);return{data:t,error:n}}var Gl=({profile:e})=>{let[t,n]=(0,w.useState)([]),[r,i]=(0,w.useState)([]),[a,o]=(0,w.useState)(!0),[s,c]=(0,w.useState)(`monthly`),[l,u]=(0,w.useState)(``),[d,f]=(0,w.useState)(``),[p,m]=(0,w.useState)(`all`),[h,g]=(0,w.useState)(`all`),[_,v]=(0,w.useState)(!1);(0,w.useEffect)(()=>{let e=new Date,t=new Date(e);t.setDate(1);let n=new Date(e.getFullYear(),e.getMonth()+1,5);u(t.toISOString().split(`T`)[0]),f(n.toISOString().split(`T`)[0]),y(),b(t.toISOString().split(`T`)[0],n.toISOString().split(`T`)[0])},[]);let y=async()=>{try{let{data:e,error:t}=await W.from(`profiles`).select(`id, full_name, emp_id, job_type`).not(`emp_id`,`is`,null).neq(`emp_id`,``).order(`full_name`);if(t){console.error(`Error loading employees:`,t);return}i(e||[])}catch(e){console.error(`Error loading employees:`,e)}},b=async(e,t,r=null)=>{o(!0);try{let i=W.from(`sales_updates`).select(`
          *,
          profiles:sales_updates_employee_id_fkey (
            id,
            full_name,
            emp_id,
            job_type
          )
        `).gte(`sale_date`,e).lte(`sale_date`,t).order(`created_at`,{ascending:!1});r&&r!==`all`&&(i=i.eq(`employee_id`,r));let{data:a,error:o}=await i;if(o){console.error(`Error loading sales:`,o);return}n((a||[]).map(e=>{let t=e.order_no;if(!t)return{...e,order_no:`ORD-000`};if(!t.match(/^ORD-(\d+)$/i))if(t.match(/^CLI-(\d+)$/i)){let n=t.match(/^CLI-(\d+)$/i),r=n?n[1]:`001`;return{...e,order_no:`ORD-${r.padStart(3,`0`)}`}}else if(t.match(/^QRD-(\d+)$/i)){let n=t.match(/^QRD-(\d+)$/i),r=n?n[1]:`001`;return{...e,order_no:`ORD-${r.padStart(3,`0`)}`}}else{let t=e.id&&parseInt(e.id.toString().slice(-3),10)||1;return{...e,order_no:`ORD-${String(t).padStart(3,`0`)}`}}return e}))}catch(e){console.error(`Error loading sales data:`,e)}finally{o(!1)}},x=e=>{c(e);let t=new Date,n=new Date,r=new Date;switch(e){case`daily`:n.setDate(t.getDate()-1);break;case`weekly`:n.setDate(t.getDate()-7);break;case`monthly`:n.setMonth(t.getMonth()-1);break;case`quarterly`:n.setMonth(t.getMonth()-3);break;case`yearly`:n.setFullYear(t.getFullYear()-1);break;case`custom`:v(!0);return;default:n.setDate(1),r=new Date(t.getFullYear(),t.getMonth()+1,5)}e!==`monthly-report`&&(r=t),u(n.toISOString().split(`T`)[0]),f(r.toISOString().split(`T`)[0]),v(!1),b(n.toISOString().split(`T`)[0],r.toISOString().split(`T`)[0],h)},S=()=>{l&&d&&b(l,d,h)},C=e=>{g(e),b(l,d,e===`all`?null:e)},T=async(t,n)=>{try{let{error:r}=await W.from(`sales_updates`).update({...n,updated_at:new Date().toISOString(),updated_by:e?.id}).eq(`id`,t);if(r)throw r;return await b(l,d,h===`all`?null:h),{success:!0}}catch(e){return console.error(`Error updating sale:`,e),{success:!1,error:e.message}}},E=(0,w.useMemo)(()=>{let e=t.filter(e=>p===`all`?!0:p===`Cancelled`?e.is_cancelled:(e.status===`Paid`?`Order Complete`:e.status===`Partially Paid`?`Partial Payment`:e.status)===p),n=e.length,r=e.reduce((e,t)=>e+(parseFloat(t.amount_usd)||0),0),i=e.reduce((e,t)=>e+(parseFloat(t.remaining_usd)||0),0);return{totalSales:n,totalAmount:r,totalPending:i,totalCollected:r-i,completedOrders:e.filter(e=>e.status===`Order Complete`||e.status===`Paid`).length,cancelledOrders:e.filter(e=>e.is_cancelled).length,activeEmployees:[...new Set(e.map(e=>e.employee_id))].length,avgOrderValue:n>0?r/n:0}},[t,p]),D=(0,w.useMemo)(()=>p===`all`?t:t.filter(e=>p===`Cancelled`?e.is_cancelled===!0:(e.status===`Paid`?`Order Complete`:e.status===`Partially Paid`?`Partial Payment`:e.status)===p),[t,p]);return a?(0,G.jsxs)(`div`,{className:`p-8 text-center`,children:[(0,G.jsx)(`div`,{className:`inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500`}),(0,G.jsx)(`div`,{className:`mt-2 text-slate-600`,children:`Loading sales data...`})]}):(0,G.jsxs)(`div`,{className:`space-y-6`,children:[(0,G.jsx)(`div`,{className:`flex justify-between items-center`,children:(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h2`,{className:`text-2xl font-bold tracking-tight`,children:`Sales Analytics & Management`}),(0,G.jsxs)(`p`,{className:`text-slate-500 text-sm mt-1`,children:[`Manager: `,e?.full_name,`  Period: `,new Date(l).toLocaleDateString(),` to `,new Date(d).toLocaleDateString()]})]})}),(0,G.jsx)(`div`,{className:`p-4 rounded-xl bg-white/70 border border-white/60 backdrop-blur-xl`,children:(0,G.jsxs)(`div`,{className:`flex flex-wrap gap-3 items-center`,children:[(0,G.jsx)(`div`,{className:`font-medium`,children:`Time Period:`}),[`daily`,`weekly`,`monthly`,`quarterly`,`yearly`,`custom`,`monthly-report`].map(e=>(0,G.jsx)(`button`,{onClick:()=>x(e),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${s===e?`bg-blue-600 text-white`:`bg-slate-100 hover:bg-slate-200 text-slate-700`}`,children:e===`monthly-report`?`Monthly Report (1st-5th)`:e.charAt(0).toUpperCase()+e.slice(1)},e)),_&&(0,G.jsxs)(`div`,{className:`flex gap-2 items-center ml-4`,children:[(0,G.jsx)(`input`,{type:`date`,value:l,onChange:e=>u(e.target.value),className:`p-2 border rounded text-sm`}),(0,G.jsx)(`span`,{children:`to`}),(0,G.jsx)(`input`,{type:`date`,value:d,onChange:e=>f(e.target.value),className:`p-2 border rounded text-sm`}),(0,G.jsx)(`button`,{onClick:S,className:`px-3 py-1.5 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700`,children:`Apply`})]}),(0,G.jsxs)(`div`,{className:`ml-auto flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`text-sm text-slate-600`,children:`Employee:`}),(0,G.jsxs)(`select`,{value:h,onChange:e=>C(e.target.value),className:`p-2 border rounded-lg text-sm`,children:[(0,G.jsx)(`option`,{value:`all`,children:`All Employees`}),r.map(e=>(0,G.jsxs)(`option`,{value:e.id,children:[e.full_name,` (`,e.emp_id,`)`]},e.id))]}),(0,G.jsx)(`span`,{className:`text-sm text-slate-600 ml-4`,children:`Status:`}),(0,G.jsxs)(`select`,{value:p,onChange:e=>m(e.target.value),className:`p-2 border rounded-lg text-sm`,children:[(0,G.jsx)(`option`,{value:`all`,children:`All Sales`}),(0,G.jsx)(`option`,{value:`Pending`,children:`Pending`}),(0,G.jsx)(`option`,{value:`Partial Payment`,children:`Partial Payment`}),(0,G.jsx)(`option`,{value:`Order Complete`,children:`Order Complete`}),(0,G.jsx)(`option`,{value:`Cancelled`,children:`Cancelled`})]})]})]})}),(0,G.jsxs)(`div`,{className:`grid grid-cols-2 md:grid-cols-4 gap-4`,children:[(0,G.jsxs)(`div`,{className:`p-4 rounded-xl bg-white/70 border border-white/60 backdrop-blur-xl shadow`,children:[(0,G.jsx)(`div`,{className:`text-sm text-slate-600`,children:`Total Sales`}),(0,G.jsx)(`div`,{className:`text-2xl font-bold mt-1`,children:E.totalSales}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`Orders`})]}),(0,G.jsxs)(`div`,{className:`p-4 rounded-xl bg-white/70 border border-white/60 backdrop-blur-xl shadow`,children:[(0,G.jsx)(`div`,{className:`text-sm text-slate-600`,children:`Total Amount`}),(0,G.jsxs)(`div`,{className:`text-2xl font-bold mt-1`,children:[`$`,E.totalAmount.toFixed(2)]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`USD`})]}),(0,G.jsxs)(`div`,{className:`p-4 rounded-xl bg-white/70 border border-white/60 backdrop-blur-xl shadow`,children:[(0,G.jsx)(`div`,{className:`text-sm text-slate-600`,children:`Collected`}),(0,G.jsxs)(`div`,{className:`text-2xl font-bold text-green-600 mt-1`,children:[`$`,E.totalCollected.toFixed(2)]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`Paid amount`})]}),(0,G.jsxs)(`div`,{className:`p-4 rounded-xl bg-white/70 border border-white/60 backdrop-blur-xl shadow`,children:[(0,G.jsx)(`div`,{className:`text-sm text-slate-600`,children:`Pending`}),(0,G.jsxs)(`div`,{className:`text-2xl font-bold text-amber-600 mt-1`,children:[`$`,E.totalPending.toFixed(2)]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`To collect`})]})]}),(0,G.jsxs)(`div`,{className:`grid grid-cols-2 md:grid-cols-4 gap-4`,children:[(0,G.jsxs)(`div`,{className:`p-4 rounded-xl bg-white/70 border border-white/60 backdrop-blur-xl shadow`,children:[(0,G.jsx)(`div`,{className:`text-sm text-slate-600`,children:`Active Employees`}),(0,G.jsx)(`div`,{className:`text-2xl font-bold mt-1`,children:E.activeEmployees}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`With sales`})]}),(0,G.jsxs)(`div`,{className:`p-4 rounded-xl bg-white/70 border border-white/60 backdrop-blur-xl shadow`,children:[(0,G.jsx)(`div`,{className:`text-sm text-slate-600`,children:`Completed Orders`}),(0,G.jsx)(`div`,{className:`text-2xl font-bold text-green-600 mt-1`,children:E.completedOrders}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`Fully paid`})]}),(0,G.jsxs)(`div`,{className:`p-4 rounded-xl bg-white/70 border border-white/60 backdrop-blur-xl shadow`,children:[(0,G.jsx)(`div`,{className:`text-sm text-slate-600`,children:`Cancelled`}),(0,G.jsx)(`div`,{className:`text-2xl font-bold text-red-600 mt-1`,children:E.cancelledOrders}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`Orders cancelled`})]}),(0,G.jsxs)(`div`,{className:`p-4 rounded-xl bg-white/70 border border-white/60 backdrop-blur-xl shadow`,children:[(0,G.jsx)(`div`,{className:`text-sm text-slate-600`,children:`Avg Order Value`}),(0,G.jsxs)(`div`,{className:`text-2xl font-bold text-blue-600 mt-1`,children:[`$`,E.avgOrderValue.toFixed(2)]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`Per order`})]})]}),(0,G.jsxs)(`div`,{className:`mt-6`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-center mb-4`,children:[(0,G.jsx)(`h3`,{className:`text-lg font-semibold`,children:`Sales Records`}),(0,G.jsxs)(`div`,{className:`text-sm text-slate-600`,children:[`Showing `,D.length,` sales records`]})]}),(0,G.jsx)(`div`,{className:`overflow-x-auto rounded-lg border border-slate-200 bg-white`,children:(0,G.jsxs)(`table`,{className:`w-full`,children:[(0,G.jsx)(`thead`,{children:(0,G.jsxs)(`tr`,{className:`bg-slate-50`,children:[(0,G.jsx)(`th`,{className:`p-3 text-left text-sm font-semibold`,children:`Employee`}),(0,G.jsx)(`th`,{className:`p-3 text-left text-sm font-semibold`,children:`Order #`}),(0,G.jsx)(`th`,{className:`p-3 text-left text-sm font-semibold`,children:`Date`}),(0,G.jsx)(`th`,{className:`p-3 text-left text-sm font-semibold`,children:`Client`}),(0,G.jsx)(`th`,{className:`p-3 text-left text-sm font-semibold`,children:`Amount`}),(0,G.jsx)(`th`,{className:`p-3 text-left text-sm font-semibold`,children:`Remaining`}),(0,G.jsx)(`th`,{className:`p-3 text-left text-sm font-semibold`,children:`Status`}),(0,G.jsx)(`th`,{className:`p-3 text-left text-sm font-semibold`,children:`Actions`})]})}),(0,G.jsx)(`tbody`,{children:D.length===0?(0,G.jsx)(`tr`,{children:(0,G.jsx)(`td`,{colSpan:8,className:`p-8 text-center text-slate-500`,children:`No sales records found for selected filters`})}):D.map(e=>{let t=parseFloat(e.amount)||0,n=parseFloat(e.remaining)||0,r=t-n,i=e.is_cancelled,a=e.status===`Order Complete`||e.status===`Paid`;return(0,G.jsxs)(`tr`,{className:`border-b hover:bg-slate-50 ${i?`bg-red-50`:a?`bg-green-50`:``}`,children:[(0,G.jsx)(`td`,{className:`p-3`,children:(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-medium`,children:e.profiles?.full_name||`Unknown`}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:e.profiles?.emp_id||`N/A`})]})}),(0,G.jsx)(`td`,{className:`p-3`,children:(0,G.jsxs)(`div`,{className:`text-xs font-mono px-2 py-1 rounded border bg-blue-50 text-blue-700 border-blue-100`,children:[e.order_no||`ORD-000`,i&&(0,G.jsx)(`span`,{className:`ml-1 text-xs text-red-600`,children:`(Cancelled)`})]})}),(0,G.jsx)(`td`,{className:`p-3 text-sm`,children:new Date(e.sale_date).toLocaleDateString()}),(0,G.jsxs)(`td`,{className:`p-3`,children:[(0,G.jsx)(`div`,{className:`font-medium`,children:e.client_name}),e.client_contact&&(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:e.client_contact})]}),(0,G.jsx)(`td`,{className:`p-3`,children:(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`font-semibold`,children:[e.currency,` `,t.toFixed(2)]}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[`$`,(parseFloat(e.amount_usd)||0).toFixed(2),` USD`]})]})}),(0,G.jsxs)(`td`,{className:`p-3`,children:[(0,G.jsxs)(`div`,{className:`font-semibold ${i?`text-red-600`:n>0?`text-amber-600`:`text-green-600`}`,children:[e.currency,` `,n.toFixed(2)]}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[`Paid: `,e.currency,` `,r.toFixed(2)]})]}),(0,G.jsx)(`td`,{className:`p-3`,children:(0,G.jsx)(`div`,{className:`flex flex-col gap-2`,children:i?(0,G.jsx)(`div`,{className:`text-xs px-2 py-1 rounded border bg-red-100 text-red-800 border-red-200`,children:`Cancelled`}):(0,G.jsxs)(`select`,{value:e.status===`Paid`?`Order Complete`:e.status===`Partially Paid`?`Partial Payment`:e.status,onChange:t=>{if(t.target.value===`Cancelled`)T(e.id,{status:`Cancelled`,is_cancelled:!0,cancelled_at:new Date().toISOString()});else{let n={status:t.target.value};t.target.value===`Order Complete`&&(n.remaining=0,n.remaining_usd=0),T(e.id,n)}},className:`text-xs px-2 py-1 rounded border ${e.status===`Order Complete`||e.status===`Paid`?`bg-green-100 text-green-800 border-green-200`:e.status===`Partial Payment`||e.status===`Partially Paid`?`bg-blue-100 text-blue-800 border-blue-200`:`bg-amber-100 text-amber-800 border-amber-200`}`,disabled:e.status===`Order Complete`||e.status===`Paid`,children:[(0,G.jsx)(`option`,{value:`Pending`,children:`Pending`}),(0,G.jsx)(`option`,{value:`Partial Payment`,children:`Partial Payment`}),(0,G.jsx)(`option`,{value:`Order Complete`,children:`Order Complete`}),(0,G.jsx)(`option`,{value:`Cancelled`,children:`Cancel Sale`})]})})}),(0,G.jsx)(`td`,{className:`p-3`,children:(0,G.jsx)(`div`,{className:`flex flex-col gap-1`,children:i?(0,G.jsx)(`button`,{onClick:()=>T(e.id,{status:`Pending`,is_cancelled:!1,cancelled_at:null}),className:`text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 w-full`,children:`Restore`}):(0,G.jsxs)(G.Fragment,{children:[n>0&&(0,G.jsx)(`button`,{onClick:()=>{let t=prompt(`Enter payment amount for ${e.order_no}. Max: ${e.currency} ${n}`);if(t&&!isNaN(parseFloat(t))){let r=parseFloat(t);if(r>0&&r<=n){let t=n-r,i=e.status;t===0?i=`Order Complete`:t<n&&(i=`Partial Payment`),T(e.id,{remaining:t,status:i})}else alert(`Invalid payment amount`)}},className:`text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 w-full`,children:`Add Payment`}),(0,G.jsx)(`button`,{onClick:()=>{let n=prompt(`Enter new total amount for ${e.order_no}. Current: ${e.currency} ${t}`);if(n&&!isNaN(parseFloat(n))){let r=parseFloat(n);if(r>0){let n=parseFloat(e.remaining)||0,i;i=r>t?n*(r/t):Math.min(n,r),T(e.id,{amount:r,remaining:i,amount_usd:e.currency===`USD`?r:r*.0036,remaining_usd:e.currency===`USD`?i:i*.0036})}else alert(`Amount must be greater than 0`)}},className:`text-xs bg-amber-500 text-white px-2 py-1 rounded hover:bg-amber-600 w-full`,children:`Edit Amount`})]})})})]},e.id)})})]})})]}),(0,G.jsxs)(`div`,{className:`mt-4 text-xs text-slate-500 space-y-1`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-amber-500`}),(0,G.jsx)(`span`,{children:`Pending: Payment not started`})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-blue-500`}),(0,G.jsx)(`span`,{children:`Partial Payment: Some payment received`})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-green-500`}),(0,G.jsx)(`span`,{children:`Order Complete: Full payment received`})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-red-500`}),(0,G.jsx)(`span`,{children:`Cancelled: Sale has been cancelled`})]}),(0,G.jsxs)(`div`,{className:`mt-2 pt-2 border-t border-slate-200`,children:[(0,G.jsx)(`span`,{className:`font-medium`,children:`Manager Controls:`}),` You can mark orders as complete, partial payment, pending, or cancelled. You can also add payments and edit amounts.`]})]})]})},Y={colors:{background:`#E0E5EC`,light:`#FFFFFF`,shadow:`#A3B1C6`,primary:`#6D83F2`,secondary:`#FF6B9D`,success:`#4AD991`,warning:`#FFB74D`,error:`#FF5252`,textPrimary:`#2D3748`,textSecondary:`#4A5568`},shadows:{softOut:`8px 8px 16px #A3B1C6, -8px -8px 16px #FFFFFF`,softIn:`inset 4px 4px 8px #A3B1C6, inset -4px -4px 8px #FFFFFF`,pressed:`inset 8px 8px 16px #A3B1C6, inset -8px -8px 16px #FFFFFF`,raised:`12px 12px 24px #A3B1C6, -12px -12px 24px #FFFFFF`,subtle:`4px 4px 8px rgba(163, 177, 198, 0.6), -4px -4px 8px rgba(255, 255, 255, 0.8)`},borderRadius:{sm:`12px`,md:`20px`,lg:`28px`,xl:`36px`},transitions:{fast:`all 0.2s cubic-bezier(0.4, 0, 0.2, 1)`,medium:`all 0.3s cubic-bezier(0.4, 0, 0.2, 1)`,slow:`all 0.5s cubic-bezier(0.4, 0, 0.2, 1)`}},X={background:Y.colors.background,borderRadius:Y.borderRadius.md,boxShadow:Y.shadows.softOut,transition:Y.transitions.medium},Z={background:Y.colors.background,borderRadius:Y.borderRadius.md,boxShadow:Y.shadows.softIn,transition:Y.transitions.medium},Kl={background:Y.colors.background,borderRadius:Y.borderRadius.md,boxShadow:Y.shadows.pressed,transition:Y.transitions.fast},ql={background:Y.colors.background,borderRadius:Y.borderRadius.md,boxShadow:Y.shadows.raised,transition:Y.transitions.medium};Y.shadows.raised;var Jl={transform:`translateY(1px)`,boxShadow:Y.shadows.pressed},Yl=e=>{if(!e)return`-`;try{return new Date(e).toLocaleString(`en-PK`,{timeZone:`Asia/Karachi`,hour12:!0,year:`numeric`,month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`})}catch{return e}},Xl=()=>{let e=new Date;return new Date(e.toLocaleString(`en-US`,{timeZone:`Asia/Karachi`}))},Zl=(e=new Date)=>{let t=new Date(e.toLocaleString(`en-US`,{timeZone:`Asia/Karachi`})),n=new Date(t),r=n.getDay(),i=n.getDate()-r+(r===0?-6:1),a=new Date(n.setDate(i));a.setHours(0,0,0,0);let o=new Date(a);return o.setDate(a.getDate()+6),o.setHours(23,59,59,999),{start:a.toISOString(),end:o.toISOString()}},Ql=(e=new Date)=>{let t=new Date(e.toLocaleString(`en-US`,{timeZone:`Asia/Karachi`})),n=new Date(t),r=new Date(n.getFullYear(),n.getMonth(),1);r.setHours(0,0,0,0);let i=new Date(n.getFullYear(),n.getMonth()+1,0);return i.setHours(23,59,59,999),{start:r.toISOString(),end:i.toISOString()}},$l=e=>e?e.split(` `).map(e=>e[0]).slice(0,2).join(``).toUpperCase():`U`;function eu(e,t){if(!e)return`Absent`;if(e.status&&String(e.status).toLowerCase()===`leave`)return`Leave`;let n=e.check_in;if(!n)return`Absent`;let r=t?.start_time||`09:00`,i=Number(t?.grace_minutes??0),a=e=>{if(!e)return null;if(e instanceof Date)return`${String(e.getHours()).padStart(2,`0`)}:${String(e.getMinutes()).padStart(2,`0`)}`;if(typeof e!=`string`)return null;if(/^\d{1,2}:\d{2}$/.test(e.trim())){let[t,n]=e.trim().split(`:`).map(e=>Number(e));return`${String(t).padStart(2,`0`)}:${String(n).padStart(2,`0`)}`}try{let t=new Date(e);if(!isNaN(t.getTime()))return`${String(t.getHours()).padStart(2,`0`)}:${String(t.getMinutes()).padStart(2,`0`)}`}catch{}return null},o=a(r)||`09:00`,s=a(e.original_check_in||n);if(!s)return`Absent`;let[c,l]=o.split(`:`).map(Number),u=c*60+l+i,[d,f]=s.split(`:`).map(Number);return d*60+f>u?`Late`:`Present`}function tu({title:e,value:t,icon:n,trend:r,color:i=`primary`}){let[a,o]=(0,w.useState)(!1),s={primary:{gradient:`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`,glow:`rgba(109, 131, 242, 0.3)`},secondary:{gradient:`linear-gradient(145deg, #FF6B9D 0%, #E04B7D 100%)`,glow:`rgba(255, 107, 157, 0.3)`},success:{gradient:`linear-gradient(145deg, #4AD991 0%, #2AB971 100%)`,glow:`rgba(74, 217, 145, 0.3)`},warning:{gradient:`linear-gradient(145deg, #FFB74D 0%, #DF9730 100%)`,glow:`rgba(255, 183, 77, 0.3)`},error:{gradient:`linear-gradient(145deg, #FF5252 0%, #DF3232 100%)`,glow:`rgba(255, 82, 82, 0.3)`}}[i];return(0,G.jsxs)(`div`,{className:`relative p-6 rounded-3xl cursor-pointer select-none`,style:{...X,transform:a?Jl.transform:`none`,boxShadow:a?Kl.boxShadow:X.boxShadow},onMouseDown:()=>o(!0),onMouseUp:()=>o(!1),onMouseLeave:()=>o(!1),onTouchStart:()=>o(!0),onTouchEnd:()=>o(!1),children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-3xl opacity-5`,style:{background:s.gradient}}),(0,G.jsxs)(`div`,{className:`relative z-10`,children:[(0,G.jsxs)(`div`,{className:`flex items-start justify-between`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`p`,{className:`text-sm font-medium text-gray-600 mb-2`,children:e}),(0,G.jsx)(`h3`,{className:`text-3xl font-bold text-gray-900`,children:t??0})]}),n&&(0,G.jsx)(`div`,{className:`p-3 rounded-2xl`,style:{background:s.gradient,boxShadow:`0 4px 12px ${s.glow}`},children:(0,G.jsx)(`span`,{className:`text-xl text-white`,children:n})})]}),r&&(0,G.jsxs)(`div`,{className:`mt-4 inline-flex items-center text-sm ${r.value>0?`text-green-600`:`text-red-600`}`,children:[(0,G.jsx)(`span`,{className:`mr-1 ${r.value>0?`text-green-500`:`text-red-500`}`,children:r.value>0?``:``}),(0,G.jsxs)(`span`,{className:`font-medium`,children:[Math.abs(r.value),`%`]}),(0,G.jsx)(`span`,{className:`ml-2 text-gray-500`,children:`from last month`})]})]})]})}function nu({value:e=0,size:t=`md`,showLabel:n=!0}){let r=Math.max(0,Math.min(100,e));return(0,G.jsxs)(`div`,{className:`space-y-2`,children:[(0,G.jsx)(`div`,{className:`w-full rounded-full overflow-hidden ${t===`sm`?`h-3`:t===`lg`?`h-5`:`h-4`}`,style:Z,children:(0,G.jsx)(`div`,{style:{width:`${r}%`},className:`h-full rounded-full transition-all duration-700 ease-out`,style:{background:`linear-gradient(90deg, #6D83F2 0%, #8A9DFF 100%)`,boxShadow:`inset 2px 2px 4px rgba(255, 255, 255, 0.6), inset -2px -2px 4px rgba(163, 177, 198, 0.6)`}})}),n&&(0,G.jsxs)(`div`,{className:`flex justify-between text-xs`,children:[(0,G.jsx)(`span`,{className:`text-gray-600`,children:`Progress`}),(0,G.jsxs)(`span`,{className:`font-semibold text-gray-900`,children:[r,`%`]})]})]})}function Q({children:e,onClick:t,type:n=`button`,variant:r=`primary`,size:i=`md`,fullWidth:a=!1,disabled:o=!1,className:s=``,icon:c,...l}){let[u,d]=(0,w.useState)(!1),f={sm:`px-4 py-2 text-sm`,md:`px-6 py-3 text-base`,lg:`px-8 py-4 text-lg`},p={primary:`text-white`,secondary:`text-gray-800`,ghost:`text-gray-700`},m={primary:`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`,secondary:`linear-gradient(145deg, #FF6B9D 0%, #E04B7D 100%)`,ghost:Y.colors.background};return(0,G.jsxs)(`button`,{type:n,onClick:t,disabled:o,className:`rounded-2xl font-medium transition-all duration-200 flex items-center justify-center relative overflow-hidden ${f[i]} ${p[r]} ${a?`w-full`:``} ${s}`,style:{background:m[r],boxShadow:u?`inset 4px 4px 8px ${r===`ghost`?`#A3B1C6`:`rgba(0,0,0,0.2)`}, inset -4px -4px 8px ${r===`ghost`?`#FFFFFF`:`rgba(255,255,255,0.2)`}`:`8px 8px 16px ${{primary:`rgba(109, 131, 242, 0.4)`,secondary:`rgba(255, 107, 157, 0.4)`,ghost:`rgba(163, 177, 198, 0.6)`}[r]}, -8px -8px 16px rgba(255, 255, 255, ${r===`ghost`?`0.8`:`0.6`})`,transform:u?`translateY(2px)`:`none`},onMouseDown:()=>!o&&d(!0),onMouseUp:()=>!o&&d(!1),onMouseLeave:()=>!o&&d(!1),onTouchStart:()=>!o&&d(!0),onTouchEnd:()=>!o&&d(!1),...l,children:[r===`ghost`&&(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl opacity-50`,style:{background:`linear-gradient(145deg, rgba(255,255,255,0.6), rgba(255,255,255,0))`}}),(0,G.jsxs)(`div`,{className:`relative z-10 flex items-center gap-2`,children:[c&&(0,G.jsx)(`span`,{children:c}),e]})]})}function ru({type:e=`text`,placeholder:t,value:n,onChange:r,icon:i,className:a=``,...o}){return(0,G.jsxs)(`div`,{className:`relative`,children:[i&&(0,G.jsx)(`div`,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500`,children:i}),(0,G.jsx)(`input`,{type:e,value:n,onChange:r,placeholder:t,className:`w-full ${i?`pl-12`:`pl-4`} pr-4 py-3 rounded-2xl text-gray-800 focus:outline-none transition-all duration-200 ${a}`,style:{background:Y.colors.background,boxShadow:`inset 4px 4px 8px #A3B1C6, inset -4px -4px 8px #FFFFFF`,border:`none`},...o})]})}function iu({children:e,className:t=``,hoverable:n=!1,...r}){let[i,a]=(0,w.useState)(!1),[o,s]=(0,w.useState)(!1);return(0,G.jsx)(`div`,{className:`rounded-3xl p-6 transition-all duration-300 ${t}`,style:{background:Y.colors.background,borderRadius:Y.borderRadius.lg,boxShadow:o?Kl.boxShadow:i?ql.boxShadow:X.boxShadow,transform:o?`translateY(2px)`:i?`translateY(-4px)`:`none`},onMouseEnter:()=>n&&a(!0),onMouseLeave:()=>{a(!1),s(!1)},onMouseDown:()=>n&&s(!0),onMouseUp:()=>n&&s(!1),...r,children:e})}function au({activeView:e,onViewChange:t}){return(0,G.jsx)(`div`,{className:`flex p-2 rounded-3xl mb-8 overflow-x-auto`,style:X,children:[{id:`dashboard`,label:`Dashboard`,icon:``,color:`primary`},{id:`all-tasks`,label:`Tasks`,icon:``,color:`secondary`},{id:`monthly-view`,label:`Performance`,icon:``,color:`success`},{id:`sales-analytics`,label:`Sales`,icon:``,color:`warning`},{id:`attendance`,label:`Attendance`,icon:``,color:`primary`},{id:`employees`,label:`Team`,icon:``,color:`secondary`},{id:`settings`,label:`Settings`,icon:``,color:`gray`}].map(n=>(0,G.jsx)(`button`,{onClick:()=>t(n.id),className:`flex-1 min-w-[120px] flex items-center justify-center px-4 py-4 rounded-2xl transition-all duration-300 flex-shrink-0 mx-1 ${e===n.id?`text-white`:`text-gray-700 hover:text-gray-900`}`,style:{background:e===n.id?`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`:Y.colors.background,boxShadow:e===n.id?`inset 4px 4px 8px rgba(0,0,0,0.1), inset -4px -4px 8px rgba(255,255,255,0.2)`:`none`},children:(0,G.jsxs)(`div`,{className:`flex flex-col items-center`,children:[(0,G.jsx)(`span`,{className:`text-2xl mb-2 transition-transform duration-300 group-hover:scale-110`,children:n.icon}),(0,G.jsx)(`span`,{className:`font-medium whitespace-nowrap text-sm ${e===n.id?`font-semibold`:`font-medium`}`,children:n.label})]})},n.id))})}function ou({taskForm:e,setTaskForm:t,employees:n,close:r,createTask:i,generating:a,jobTypes:o,validation:s,profile:c}){let l=Xl().toISOString().slice(0,10),u=(0,w.useMemo)(()=>{if(!e.job_type)return n;let t=e.job_type.toLowerCase().trim();return n.filter(e=>{if(!e.job_type)return!1;let n=String(e.job_type).toLowerCase().trim();if(n===t)return!0;let r=t.replace(/[^a-z0-9\s]/g,``),i=n.replace(/[^a-z0-9\s]/g,``);return!!(r===i||r.includes(`3d`)&&i.includes(`3d`)&&(r.includes(`jewelry`)&&i.includes(`jewelry`)||r.includes(`jewellery`)&&i.includes(`jewellery`)))})},[n,e.job_type]);return(0,G.jsx)(`div`,{className:`fixed inset-0 bg-black/20 backdrop-blur-sm flex justify-center items-center p-4 z-50`,children:(0,G.jsxs)(iu,{className:`max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col`,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between p-8 border-b border-gray-200/30`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h3`,{className:`text-2xl font-bold text-gray-900`,children:`Create New Task`}),(0,G.jsx)(`p`,{className:`text-sm text-gray-600 mt-2`,children:`Fill in the details to create a new task`}),(0,G.jsxs)(`p`,{className:`text-xs text-gray-500 mt-1`,children:[`Assigned by: `,(0,G.jsx)(`span`,{className:`font-medium`,children:c?.full_name||`Manager`})]})]}),(0,G.jsx)(Q,{onClick:r,variant:`ghost`,size:`sm`,icon:``})]}),(0,G.jsxs)(`div`,{className:`p-8 overflow-y-auto flex-1`,children:[(0,G.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-6`,children:[(0,G.jsxs)(`div`,{className:`md:col-span-2`,children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:`Project ID`}),(0,G.jsx)(ru,{readOnly:!0,value:e.project_id,className:`text-gray-900 font-medium text-lg`})]}),(0,G.jsxs)(`div`,{className:`md:col-span-2`,children:[(0,G.jsxs)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:[`Client Name `,(0,G.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,G.jsx)(ru,{value:e.client_name,onChange:n=>t({...e,client_name:n.target.value}),placeholder:`Enter client name`,required:!0})]}),(0,G.jsxs)(`div`,{className:`md:col-span-2`,children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:`Description`}),(0,G.jsx)(`textarea`,{className:`w-full p-4 rounded-2xl text-gray-800 focus:outline-none transition-all duration-200 resize-none`,rows:3,value:e.description,onChange:n=>t({...e,description:n.target.value}),placeholder:`Describe the task requirements...`,style:Z})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:[`Job Type `,(0,G.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{className:`w-full p-4 rounded-2xl text-gray-800 focus:outline-none transition-all duration-200 appearance-none pr-10`,value:e.job_type,onChange:n=>{t({...e,job_type:n.target.value,assigned_to:``})},required:!0,style:Z,children:[(0,G.jsx)(`option`,{value:``,children:`Select Job Type`}),o.map(e=>(0,G.jsx)(`option`,{value:e,children:e},e))]}),(0,G.jsx)(`div`,{className:`absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500`,children:``})]})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:`Assign To`}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{className:`w-full p-4 rounded-2xl text-gray-800 focus:outline-none transition-all duration-200 appearance-none pr-10`,value:e.assigned_to,onChange:n=>t({...e,assigned_to:n.target.value}),disabled:!e.job_type,style:Z,children:[(0,G.jsx)(`option`,{value:``,children:e.job_type?u.length>0?`Select Employee`:`No employees for "${e.job_type}"`:`Select job type first`}),u.map(e=>(0,G.jsxs)(`option`,{value:e.id,children:[e.emp_id,` - `,e.full_name,` (`,e.job_type||`No job type`,`)`]},e.id))]}),(0,G.jsx)(`div`,{className:`absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500`,children:``})]}),e.job_type&&(0,G.jsx)(`div`,{className:`mt-3`,children:(0,G.jsxs)(`div`,{className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm ${u.length===0?`text-red-700`:`text-green-700`}`,style:X,children:[(0,G.jsx)(`span`,{className:`mr-2 ${u.length===0?`text-red-500`:`text-green-500`}`,children:u.length===0?``:``}),u.length===0?`No employees found for "${e.job_type}"`:`${u.length} employee${u.length===1?``:`s`} available`]})})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:[`Start Date `,(0,G.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,G.jsx)(ru,{type:`date`,min:l,value:e.start_date,onChange:n=>t({...e,start_date:n.target.value}),required:!0})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:[`Deadline `,(0,G.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,G.jsx)(ru,{type:`date`,min:e.start_date||l,value:e.deadline,onChange:n=>t({...e,deadline:n.target.value}),required:!0})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:`Priority`}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsx)(`select`,{className:`w-full p-4 rounded-2xl text-gray-800 focus:outline-none transition-all duration-200 appearance-none pr-10`,value:e.priority,onChange:n=>t({...e,priority:n.target.value}),style:Z,children:[`Low`,`Medium`,`High`,`Urgent`].map(e=>(0,G.jsx)(`option`,{value:e,children:e},e))}),(0,G.jsx)(`div`,{className:`absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500`,children:``})]})]}),(0,G.jsxs)(`div`,{className:`md:col-span-2`,children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:`Drive Folder Link`}),(0,G.jsx)(ru,{value:e.drive_link,onChange:n=>t({...e,drive_link:n.target.value}),placeholder:`https://drive.google.com/...`})]}),(0,G.jsxs)(`div`,{className:`md:col-span-2`,children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:`Reference Link`}),(0,G.jsx)(ru,{value:e.reference_link,onChange:n=>t({...e,reference_link:n.target.value}),placeholder:`https://example.com/...`})]}),(0,G.jsxs)(`div`,{className:`md:col-span-2`,children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:`Notes`}),(0,G.jsx)(`textarea`,{rows:2,className:`w-full p-4 rounded-2xl text-gray-800 focus:outline-none transition-all duration-200 resize-none`,value:e.notes,onChange:n=>t({...e,notes:n.target.value}),placeholder:`Additional notes or instructions...`,style:Z})]})]}),s&&(0,G.jsx)(`div`,{className:`mt-6 p-4 rounded-2xl`,style:X,children:(0,G.jsxs)(`div`,{className:`flex items-center text-red-700`,children:[(0,G.jsx)(`span`,{className:`mr-3 text-xl`,children:``}),(0,G.jsx)(`span`,{className:`text-sm font-medium`,children:s})]})})]}),(0,G.jsx)(`div`,{className:`p-8 border-t border-gray-200/30`,children:(0,G.jsxs)(`div`,{className:`flex justify-end gap-4`,children:[(0,G.jsx)(Q,{onClick:r,variant:`ghost`,children:`Cancel`}),(0,G.jsx)(Q,{onClick:i,disabled:a,icon:a?``:``,children:a?`Creating...`:`Create Task`})]})})]})})}function su({task:e,close:t,approve:n,requestRevision:r,updateStatus:i,profile:a,activeView:o,employees:s}){let[c,l]=(0,w.useState)(e.progress||0),[u,d]=(0,w.useState)(!1),f=e=>{if(!e)return`-`;try{return new Date(e).toLocaleString(`en-PK`,{timeZone:`Asia/Karachi`,month:`short`,day:`numeric`,year:`numeric`,hour:`2-digit`,minute:`2-digit`})}catch{return e}},p=e=>e?e.length>45?e.substring(0,40)+`...`:e:``,m=async()=>{if(!u){d(!0);try{let{error:t}=await W.from(`tasks`).update({progress:c}).eq(`id`,e.id);t?(console.error(`Error saving progress:`,t),alert(`Failed to save progress`)):e.progress=c}catch(e){console.error(`Error:`,e)}finally{d(!1)}}},h=e=>{switch(e?.toLowerCase()){case`completed`:return`linear-gradient(145deg, #4AD991 0%, #2AB971 100%)`;case`in progress`:return`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`;case`delivered`:return`linear-gradient(145deg, #9D6DFF 0%, #7D4BE0 100%)`;case`revision required`:return`linear-gradient(145deg, #FFB74D 0%, #DF9730 100%)`;case`pending`:return`linear-gradient(145deg, #A0AEC0 0%, #718096 100%)`;default:return`linear-gradient(145deg, #A0AEC0 0%, #718096 100%)`}},g=s?.find(t=>t.id===e.assigned_by)?.full_name||`Unknown Manager`;return(0,G.jsx)(`div`,{className:`fixed inset-0 bg-black/20 backdrop-blur-sm flex justify-center items-center z-50 p-4`,children:(0,G.jsxs)(iu,{className:`w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-start p-8 border-b border-gray-200/30`,children:[(0,G.jsxs)(`div`,{className:`flex-1`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-3 mb-3`,children:[(0,G.jsx)(`h3`,{className:`text-2xl font-bold text-gray-900`,children:e.project_id}),(0,G.jsx)(`span`,{className:`px-3 py-1.5 rounded-full text-sm font-medium text-white`,style:{background:h(e.status)},children:e.status})]}),(0,G.jsx)(`div`,{className:`text-xl text-gray-800 font-semibold mb-2`,children:e.client_name}),(0,G.jsx)(`div`,{className:`text-sm text-gray-600 mb-4`,children:e.job_type}),(0,G.jsxs)(`div`,{className:`grid grid-cols-2 md:grid-cols-5 gap-4 text-sm text-gray-600`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-medium text-gray-500 mb-1`,children:`Assigned By`}),(0,G.jsx)(`div`,{className:`font-medium`,children:g})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-medium text-gray-500 mb-1`,children:`Assigned Date`}),(0,G.jsx)(`div`,{children:f(e.created_at)})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-medium text-gray-500 mb-1`,children:`Start Date`}),(0,G.jsx)(`div`,{children:new Date(e.start_date).toLocaleDateString(`en-PK`,{timeZone:`Asia/Karachi`})})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-medium text-gray-500 mb-1`,children:`Deadline`}),(0,G.jsx)(`div`,{children:new Date(e.deadline).toLocaleDateString(`en-PK`,{timeZone:`Asia/Karachi`})})]}),e.delivered_at&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-medium text-gray-500 mb-1`,children:`Delivered`}),(0,G.jsx)(`div`,{className:`text-green-600 font-medium`,children:f(e.delivered_at)})]})]})]}),(0,G.jsxs)(`div`,{className:`flex gap-3`,children:[(0,G.jsx)(Q,{onClick:()=>i(e.id,`Revision Required`),variant:`warning`,size:`sm`,icon:``,children:`Revision`}),(0,G.jsx)(Q,{onClick:()=>i(e.id,`Completed`),variant:`success`,size:`sm`,icon:``,children:`Approve`}),(0,G.jsx)(Q,{onClick:()=>i(e.id,`Delivered`),variant:`secondary`,size:`sm`,icon:``,children:`Deliver`}),(0,G.jsx)(Q,{onClick:t,variant:`ghost`,size:`sm`,icon:``})]})]}),(0,G.jsx)(`div`,{className:`p-8 overflow-y-auto flex-1`,children:(0,G.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-2 gap-8`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`mb-8`,children:[(0,G.jsxs)(`h4`,{className:`text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2`,children:[(0,G.jsx)(`span`,{children:``}),`Description`]}),(0,G.jsx)(`div`,{className:`p-4 rounded-2xl`,style:Z,children:(0,G.jsx)(`p`,{className:`text-gray-700`,children:e.description||`No description provided`})})]}),(0,G.jsxs)(`div`,{className:`mb-8`,children:[(0,G.jsxs)(`h4`,{className:`text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2`,children:[(0,G.jsx)(`span`,{children:``}),`Notes`]}),(0,G.jsx)(`div`,{className:`p-4 rounded-2xl`,style:Z,children:(0,G.jsx)(`p`,{className:`text-gray-700`,children:e.notes||`No notes`})})]}),(e.drive_link||e.reference_link)&&(0,G.jsxs)(`div`,{className:`space-y-6`,children:[e.drive_link&&(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`h4`,{className:`text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2`,children:[(0,G.jsx)(`span`,{children:``}),`Drive Folder`]}),(0,G.jsx)(`a`,{href:e.drive_link,target:`_blank`,rel:`noreferrer`,className:`text-blue-600 hover:text-blue-800 hover:underline text-sm inline-flex items-center gap-3 p-3 rounded-2xl`,style:X,children:p(e.drive_link)})]}),e.reference_link&&(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`h4`,{className:`text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2`,children:[(0,G.jsx)(`span`,{children:``}),`Reference Link`]}),(0,G.jsx)(`a`,{href:e.reference_link,target:`_blank`,rel:`noreferrer`,className:`text-blue-600 hover:text-blue-800 hover:underline text-sm inline-flex items-center gap-3 p-3 rounded-2xl`,style:X,children:p(e.reference_link)})]})]})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`mb-8`,children:[(0,G.jsxs)(`h4`,{className:`text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2`,children:[(0,G.jsx)(`span`,{children:``}),`Progress`]}),(0,G.jsxs)(iu,{children:[(0,G.jsx)(nu,{value:c,size:`lg`,showLabel:!1}),(0,G.jsxs)(`div`,{className:`flex items-center gap-4 mt-6`,children:[(0,G.jsx)(`input`,{type:`range`,min:`0`,max:`100`,value:c,onChange:e=>l(Number(e.target.value)),className:`flex-1 h-3 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:rounded-full`,style:{background:Y.colors.background,boxShadow:`inset 4px 4px 8px #A3B1C6, inset -4px -4px 8px #FFFFFF`}}),(0,G.jsxs)(`span`,{className:`text-2xl font-bold text-gray-900 min-w-[60px]`,children:[c,`%`]}),(0,G.jsx)(Q,{onClick:m,disabled:u,size:`sm`,icon:u?``:``,children:u?`Saving...`:`Save`})]})]})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`h4`,{className:`text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2`,children:[(0,G.jsx)(`span`,{children:``}),`Submissions`]}),(0,G.jsx)(`div`,{className:`space-y-4 max-h-[300px] overflow-y-auto pr-2`,children:e.submissions?.length?e.submissions.map(e=>(0,G.jsxs)(iu,{hoverable:!0,children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-start mb-4`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,G.jsx)(`div`,{className:`w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold`,style:{background:`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`,boxShadow:`4px 4px 8px rgba(109, 131, 242, 0.3), -4px -4px 8px rgba(255, 255, 255, 0.6)`},children:$l(e.profiles?.full_name)}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-medium text-gray-900`,children:e.profiles?.full_name}),(0,G.jsx)(`div`,{className:`text-sm text-gray-500`,children:e.profiles?.emp_id})]})]}),(0,G.jsx)(`div`,{className:`text-xs text-gray-500`,children:f(e.timestamp)})]}),(0,G.jsx)(`div`,{className:`mb-4`,children:(0,G.jsxs)(`div`,{className:`text-sm text-gray-700`,children:[(0,G.jsx)(`span`,{className:`font-semibold`,children:`Notes:`}),` `,e.notes]})}),e.submitted_link&&(0,G.jsxs)(`a`,{href:e.submitted_link,target:`_blank`,rel:`noreferrer`,className:`text-blue-600 hover:text-blue-800 hover:underline text-sm inline-flex items-center mb-4 gap-2`,children:[``,p(e.submitted_link)]}),(0,G.jsxs)(`div`,{className:`flex gap-3`,children:[(0,G.jsx)(Q,{onClick:()=>n(e.id),variant:`success`,size:`sm`,icon:``,children:`Approve`}),(0,G.jsx)(Q,{onClick:()=>r(e.id),variant:`warning`,size:`sm`,icon:``,children:`Revision`})]})]},e.id)):(0,G.jsxs)(`div`,{className:`text-center py-8 text-gray-500 border-2 border-dashed border-gray-300/50 rounded-2xl`,children:[(0,G.jsx)(`div`,{className:`text-xl mb-2`,children:``}),`No submissions yet.`]})})]})]})]})})]})})}function cu({employee:e,onClick:t,isSelected:n,attendanceStats:r}){let[i,a]=(0,w.useState)(!1);return(0,G.jsxs)(`div`,{onClick:()=>t(e),className:`relative cursor-pointer p-5 rounded-3xl transition-all duration-300`,style:{...X,transform:i?Jl.transform:n?`translateY(-2px)`:`none`,boxShadow:i?Kl.boxShadow:n?ql.boxShadow:X.boxShadow},onMouseDown:()=>a(!0),onMouseUp:()=>a(!1),onMouseLeave:()=>a(!1),children:[(0,G.jsxs)(`div`,{className:`flex items-start space-x-4`,children:[(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsx)(`div`,{className:`w-14 h-14 rounded-full flex items-center justify-center text-white font-bold text-xl`,style:{background:`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`,boxShadow:`4px 4px 8px rgba(109, 131, 242, 0.3), -4px -4px 8px rgba(255, 255, 255, 0.6)`},children:$l(e.full_name)}),(0,G.jsx)(`div`,{className:`absolute bottom-0 right-0 w-4 h-4 rounded-full border-2 border-white ${r?.todayStatus===`Present`?`bg-green-500`:r?.todayStatus===`Late`?`bg-yellow-500`:`bg-gray-400`}`})]}),(0,G.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,G.jsx)(`h4`,{className:`font-semibold text-gray-900 text-lg truncate`,children:e.full_name}),(0,G.jsx)(`p`,{className:`text-sm text-gray-600 truncate`,children:e.emp_id}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mt-2`,children:[(0,G.jsx)(`span`,{className:`px-3 py-1.5 text-gray-700 rounded-lg text-xs truncate`,style:Z,children:e.job_type||`No role`}),r&&(0,G.jsxs)(`span`,{className:`text-xs text-gray-500`,children:[r.presentDays,`/`,r.totalDays,` days`]})]})]})]}),r&&(0,G.jsxs)(`div`,{className:`mt-6 grid grid-cols-3 gap-3 text-center`,children:[(0,G.jsxs)(`div`,{className:`p-3 rounded-xl`,style:X,children:[(0,G.jsx)(`div`,{className:`text-xl font-bold text-green-600`,children:r.presentDays}),(0,G.jsx)(`div`,{className:`text-xs text-green-700 font-medium`,children:`Present`})]}),(0,G.jsxs)(`div`,{className:`p-3 rounded-xl`,style:X,children:[(0,G.jsx)(`div`,{className:`text-xl font-bold text-yellow-600`,children:r.lateDays}),(0,G.jsx)(`div`,{className:`text-xs text-yellow-700 font-medium`,children:`Late`})]}),(0,G.jsxs)(`div`,{className:`p-3 rounded-xl`,style:X,children:[(0,G.jsx)(`div`,{className:`text-xl font-bold text-red-600`,children:r.absentDays}),(0,G.jsx)(`div`,{className:`text-xs text-red-700 font-medium`,children:`Absent`})]})]}),!r&&(0,G.jsx)(`div`,{className:`mt-4 text-sm text-gray-500 text-center p-3 rounded-lg`,style:Z,children:`Click to load attendance data`})]})}function lu(){let[e,t]=(0,w.useState)(null),[n,r]=(0,w.useState)(!0),[i,a]=(0,w.useState)([]),[o,s]=(0,w.useState)([]),[c,l]=(0,w.useState)([]),[u,d]=(0,w.useState)([]),[f,p]=(0,w.useState)({totalProjects:0,pending:0,inProgress:0,revision:0,completed:0,employeesCount:0}),[m,h]=(0,w.useState)(`dashboard`),[g,_]=(0,w.useState)(!1),[v,y]=(0,w.useState)(!1),[b,x]=(0,w.useState)(null),[S,C]=(0,w.useState)(!1),[T,E]=(0,w.useState)(null),[D,O]=(0,w.useState)(!1),[ee,te]=(0,w.useState)(null),[ne,k]=(0,w.useState)(``),[re,ie]=(0,w.useState)(``),[ae,A]=(0,w.useState)(``),[j,oe]=(0,w.useState)(``),[se,ce]=(0,w.useState)(``),[M,le]=(0,w.useState)(`all`),[N,ue]=(0,w.useState)(``),[de,fe]=(0,w.useState)(``),[pe,me]=(0,w.useState)([]),[he,ge]=(0,w.useState)(new Date().getMonth()),[_e,ve]=(0,w.useState)(new Date().getFullYear()),[ye,be]=(0,w.useState)(``),[P,xe]=(0,w.useState)({project_id:``,client_name:``,description:``,job_type:``,assigned_to:``,start_date:``,deadline:``,priority:`Medium`,notes:``,drive_link:``,reference_link:``}),[Se,Ce]=(0,w.useState)(!1),[we,Te]=(0,w.useState)(``),[Ee,De]=(0,w.useState)(``),[Oe,ke]=(0,w.useState)(()=>{let e=new Date;return e.setDate(e.getDate()-44),e.toISOString().slice(0,10)}),[Ae,je]=(0,w.useState)(()=>new Date().toISOString().slice(0,10)),[Me,Ne]=(0,w.useState)(``),[Pe,Fe]=(0,w.useState)(`45d`),[Ie,Le]=(0,w.useState)(``),[F,Re]=(0,w.useState)({working_days:[`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`],start_time:`09:00`,end_time:`17:00`,break_start:``,break_end:``,grace_minutes:0}),[I,ze]=(0,w.useState)({employee_id:``,working_days:[`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`],start_time:`09:00`,end_time:`17:00`,break_start:``,break_end:``,grace_minutes:0}),[Be,Ve]=(0,w.useState)(!1),[He,Ue]=(0,w.useState)(null),[We,Ge]=(0,w.useState)({visible:0,total:0}),Ke=(0,w.useMemo)(()=>[`3D Jewelry`,`VR Development`,`3D Models`,`Illustration`],[]),qe=(0,w.useMemo)(()=>[`Pending`,`In Progress`,`Delivered`,`Revision Required`,`Completed`,`On Hold`],[]),Je=(0,w.useMemo)(()=>[`Low`,`Medium`,`High`,`Urgent`],[]),Ye=(e=>e.filter(e=>{let t=ne.toLowerCase().trim();if(t&&![e.project_id,e.client_name,e.description,e.job_type,e.status,e.priority,e.notes,e.drive_link,e.reference_link,o.find(t=>t.id===e.assigned_to)?.full_name||``,o.find(t=>t.id===e.assigned_to)?.emp_id||``,o.find(t=>t.id===e.assigned_by)?.full_name||``].join(` `).toLowerCase().includes(t)||Be&&e.status===`Completed`||He===`pending`&&e.status!==`Pending`||He===`in-progress`&&e.status!==`In Progress`||He===`assigned`&&!e.assigned_to||re&&e.job_type!==re||ae&&e.status!==ae||j&&e.priority!==j||se&&e.assigned_to!==se)return!1;if(M!==`all`){let t=new Date(e.created_at);switch(M){case`week`:let e=Zl(),n=t.toISOString();if(n<e.start||n>e.end)return!1;break;case`month`:let r=Ql(),i=t.toISOString();if(i<r.start||i>r.end)return!1;break;case`custom`:if(N&&de){let e=t.toISOString().split(`T`)[0];if(e<N||e>de)return!1}break;default:break}}return!0}))(i),Xe=(0,w.useMemo)(()=>{let e={};return i.filter(e=>{if(M===`all`)return!0;let t=new Date(e.created_at);switch(M){case`week`:let e=Zl(),n=t.toISOString();return n>=e.start&&n<=e.end;case`month`:let r=Ql(),i=t.toISOString();return i>=r.start&&i<=r.end;case`custom`:if(N&&de){let e=t.toISOString().split(`T`)[0];return e>=N&&e<=de}return!0;default:return!0}}).forEach(t=>{let n=t.job_type||`Uncategorized`;switch(e[n]||(e[n]={total:0,completed:0,inProgress:0,pending:0}),e[n].total++,t.status?.toLowerCase()){case`completed`:e[n].completed++;break;case`in progress`:e[n].inProgress++;break;case`pending`:e[n].pending++;break}}),e},[i,M,N,de]),Ze=[{label:`Monthly View`,icon:``,view:`monthly-view`,color:`primary`},{label:`Task Management`,icon:``,view:`all-tasks`,color:`secondary`},{label:`Sales Analytics`,icon:``,view:`sales-analytics`,color:`warning`},{label:`Attendance`,icon:``,view:`attendance`,color:`success`}];(0,w.useEffect)(()=>{Qe()},[]),(0,w.useEffect)(()=>{m===`monthly-view`&&nt()},[he,_e,ye,m]),(0,w.useEffect)(()=>{m===`all-tasks`&&Ge({visible:Ye.length,total:i.length})},[Ye,i,m]);async function Qe(){r(!0);let{data:e}=await W.auth.getUser(),n=e?.user;if(!n){window.location.href=`/login`;return}let{data:i,error:a}=await W.from(`profiles`).select(`
        id,
        full_name,
        phone,
        cnic,
        address,
        role,
        job_type,
        emp_id,
        created_at,
        mgr_id,
        shift_start,
        shift_end,
        grace_minutes,
        avatar,
        manager_name
      `).eq(`id`,n.id).single();if(a){console.error(`Error loading profile:`,a),alert(`Error loading your profile`),window.location.href=`/login`;return}if(!i){alert(`Profile missing`),window.location.href=`/select-role`;return}if(i.role!==`manager`){alert(`Access denied`),window.location.href=`/login`;return}t(i);try{await Promise.all([et(),$e(),tt(),rt(),it(Oe,Ae),at()])}catch(e){console.error(`Initialization error:`,e)}finally{r(!1)}}async function $e(){try{let{data:e,error:t}=await W.from(`profiles`).select(`
          id,
          full_name,
          emp_id,
          job_type,
          created_at,
          phone,
          cnic,
          address,
          role,
          mgr_id,
          shift_start,
          shift_end,
          grace_minutes
        `).not(`emp_id`,`is`,null).neq(`emp_id`,``).order(`full_name`,{ascending:!0});if(t){console.error(`Error loading employees:`,t),alert(`Error loading employees: ${t.message}`),s([]);return}!e||e.length===0?s([]):(s(e||[]),p(t=>({...t,employeesCount:e.length})))}catch(e){console.error(`Unexpected error loading employees:`,e),s([])}}async function et(){try{let{data:e,error:t}=await W.from(`tasks`).select(`
          *,
          assigned_by_manager:profiles!tasks_assigned_by_fkey(full_name)
        `).is(`archived`,!1).order(`created_at`,{ascending:!1});if(t&&t.message.includes(`archived`)){let{data:e}=await W.from(`tasks`).select(`*`).order(`created_at`,{ascending:!1});a(e||[])}else t?(console.error(`Error loading tasks:`,t),a([])):a(e||[])}catch(e){console.error(`Unexpected error loading tasks:`,e),a([])}}async function tt(){try{let{data:e,error:t}=await W.from(`tasks`).select(`status`).is(`archived`,!1);if(t){console.error(`Error loading stats:`,t);return}let n=e||[];p(e=>({...e,totalProjects:n.length,pending:n.filter(e=>e.status===`Pending`).length,inProgress:n.filter(e=>e.status===`In Progress`).length,revision:n.filter(e=>e.status===`Revision Required`).length,completed:n.filter(e=>e.status===`Completed`).length}))}catch(e){console.error(`Error in loadStats:`,e)}}async function nt(){try{let e=new Date(_e,he,1);e.setHours(0,0,0,0);let t=new Date(_e,he+1,0);t.setHours(23,59,59,999);let n=W.from(`tasks`).select(`
          *,
          profiles!tasks_assigned_to_fkey(
            id,
            full_name, 
            emp_id, 
            job_type,
            role
          ),
          assigned_by_manager:profiles!tasks_assigned_by_fkey(full_name)
        `).gte(`created_at`,e.toISOString()).lte(`created_at`,t.toISOString()).order(`created_at`,{ascending:!1});ye&&(n=n.eq(`assigned_to`,ye));let{data:r,error:i}=await n;if(i){console.error(`Error loading monthly data:`,i);return}let a={};r?.forEach(e=>{let t=e.assigned_to;if(t)switch(a[t]||(a[t]={employee:e.profiles||{},tasks:[],stats:{total:0,completed:0,inProgress:0,pending:0,revision:0}}),a[t].tasks.push(e),a[t].stats.total++,e.status?.toLowerCase()){case`completed`:a[t].stats.completed++;break;case`in progress`:a[t].stats.inProgress++;break;case`pending`:a[t].stats.pending++;break;case`revision required`:a[t].stats.revision++;break}}),me(Object.values(a))}catch(e){console.error(`Error in loadMonthlyViewData:`,e)}}async function rt(){try{let e=new Date().toISOString().slice(0,10),{data:t}=await W.from(`attendance`).select(`*, profiles!attendance_employee_id_fkey(id, full_name, emp_id)`).eq(`date`,e);l(t?.map(e=>({...e,original_check_in:e.check_in,check_in:e.check_in?Yl(e.check_in):e.check_in,check_out:e.check_out?Yl(e.check_out):e.check_out}))||[])}catch(e){console.error(`Error loading today's attendance:`,e)}}async function it(e,t,n=``){try{if(!e||!t)return;let r=W.from(`attendance`).select(`*, profiles!attendance_employee_id_fkey(id, full_name, emp_id)`).gte(`date`,e).lte(`date`,t).order(`date`,{ascending:!1});n&&(r=r.eq(`employee_id`,n));let{data:i}=await r;d((i||[]).map(e=>({...e,original_check_in:e.check_in,check_in:e.check_in?Yl(e.check_in):e.check_in,check_out:e.check_out?Yl(e.check_out):e.check_out})))}catch(e){console.error(`Error loading attendance range:`,e)}}async function at(){try{let{data:e,error:t}=await W.from(`shifts`).select(`*`).is(`employee_id`,null).limit(1).order(`updated_at`,{ascending:!1});if(t||!e||e.length===0){let{data:t}=await W.from(`shift_settings`).select(`*`).eq(`type`,`global`).limit(1).order(`updated_at`,{ascending:!1});e=t}let n=e?.[0];n&&Re({working_days:n.working_days||[`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`],start_time:n.start_time?.slice(0,5)||`09:00`,end_time:n.end_time?.slice(0,5)||`17:00`,break_start:n.break_start?.slice(0,5)||``,break_end:n.break_end?.slice(0,5)||``,grace_minutes:n.grace_minutes??0})}catch(e){console.error(`Error loading shift settings:`,e)}}async function ot(e){if(e)try{let{data:t,error:n}=await W.from(`shifts`).select(`*`).eq(`employee_id`,e).limit(1).order(`updated_at`,{ascending:!1});if(n||!t||t.length===0){let{data:n}=await W.from(`shift_settings`).select(`*`).eq(`type`,`employee`).eq(`employee_id`,e).limit(1).order(`updated_at`,{ascending:!1});t=n}let r=t?.[0];ze(r?{employee_id:e,working_days:r.working_days||F.working_days,start_time:r.start_time?.slice(0,5)||F.start_time,end_time:r.end_time?.slice(0,5)||F.end_time,break_start:r.break_start?.slice(0,5)||F.break_start,break_end:r.break_end?.slice(0,5)||F.break_end,grace_minutes:r.grace_minutes??F.grace_minutes}:{employee_id:e,working_days:F.working_days,start_time:F.start_time,end_time:F.end_time,break_start:F.break_start,break_end:F.break_end,grace_minutes:F.grace_minutes})}catch(e){console.error(`Error loading employee shift:`,e)}}async function st(){try{let t={manager_id:e?.id||null,employee_id:null,working_days:F.working_days,start_time:F.start_time,end_time:F.end_time,break_start:F.break_start,break_end:F.break_end,grace_minutes:F.grace_minutes,updated_at:new Date().toISOString()},{error:n}=await W.from(`shifts`).upsert(t,{onConflict:`manager_id,employee_id`});if(n){console.error(`Failed to save to shifts table, trying shift_settings:`,n);let e={type:`global`,working_days:F.working_days,start_time:F.start_time,end_time:F.end_time,break_start:F.break_start,break_end:F.break_end,grace_minutes:F.grace_minutes,updated_at:new Date().toISOString()};await W.from(`shift_settings`).upsert(e,{onConflict:`type`})}alert(`Global shift settings saved successfully!`)}catch(e){console.error(`Error saving global shift:`,e),alert(`Failed to save global shift settings.`)}}async function ct(){if(!I.employee_id){alert(`Please select an employee first.`);return}try{let t={manager_id:e?.id||null,employee_id:I.employee_id,working_days:I.working_days,start_time:I.start_time,end_time:I.end_time,break_start:I.break_start,break_end:I.break_end,grace_minutes:I.grace_minutes,updated_at:new Date().toISOString()},{error:n}=await W.from(`shifts`).upsert(t,{onConflict:`manager_id,employee_id`});if(n){console.error(`Failed to save to shifts table, trying shift_settings:`,n);let e={type:`employee`,employee_id:I.employee_id,working_days:I.working_days,start_time:I.start_time,end_time:I.end_time,break_start:I.break_start,break_end:I.break_end,grace_minutes:I.grace_minutes,updated_at:new Date().toISOString()};await W.from(`shift_settings`).upsert(e,{onConflict:`employee_id`})}alert(`Employee shift settings saved successfully!`)}catch(e){console.error(`Error saving employee shift:`,e),alert(`Failed to save employee shift settings.`)}}let lt=async()=>{let{data:e}=await W.from(`tasks`).select(`project_id`).order(`id`,{ascending:!1}).limit(1),t=0;if(e?.length&&e[0].project_id){let n=e[0].project_id.match(/\d+/);n&&(t=parseInt(n[0]))}return`PRJ-${String(t+1).padStart(3,`0`)}`},ut=()=>Xl().toISOString().slice(0,10);function dt(e,t){return e<t}async function ft(){if(Te(``),!P.project_id||!P.client_name){Te(`Project ID and Client Name are required.`);return}if(!P.start_date||!P.deadline){Te(`Start Date and Deadline are required.`);return}if(dt(P.start_date,ut())){Te(`Start Date cannot be in the past.`);return}if(dt(P.deadline,P.start_date)){Te(`Deadline cannot be before Start Date.`);return}if(P.assigned_to){let e=o.find(e=>e.id===P.assigned_to);if(!e){Te(`Selected employee not found. Please select a valid employee.`);return}if(!e.emp_id){Te(`Selected employee does not have a valid employee ID.`);return}}Ce(!0);try{let t={project_id:P.project_id,client_name:P.client_name,description:P.description,job_type:P.job_type,assigned_to:P.assigned_to||null,assigned_by:e?.id,start_date:P.start_date,deadline:P.deadline,priority:P.priority,notes:P.notes,drive_link:P.drive_link,reference_link:P.reference_link,progress:0,status:`Pending`,archived:!1},{data:n,error:r}=await W.from(`tasks`).insert(t).select().single();if(r){Te(`Create failed: `+r.message);return}if(n?.assigned_to)try{await Vl({user_id:n.assigned_to,type:`task_assigned`,message:`New task assigned by ${e?.full_name}: ${n.project_id}  ${n.client_name}`,link:`/tasks/${n.project_id}`,metadata:{project_id:n.project_id,assigned_by:e?.full_name,assigned_by_id:e?.id}})}catch(e){console.error(`Notification failed:`,e)}_(!1),xe({project_id:``,client_name:``,description:``,job_type:``,assigned_to:``,start_date:``,deadline:``,priority:`Medium`,notes:``,drive_link:``,reference_link:``}),await Promise.all([et(),tt()]),alert(`Task created successfully!`)}catch(e){console.error(`Error creating task:`,e),Te(`An unexpected error occurred.`)}finally{Ce(!1)}}async function pt(e){try{y(!0);let{data:t}=await W.from(`task_submissions`).select(`*, profiles!task_submissions_employee_id_fkey(id, full_name, emp_id)`).eq(`task_id`,e.id).order(`created_at`,{ascending:!1}),n=(t||[]).map(e=>({...e,timestamp:e.created_at?Yl(e.created_at):e.timestamp||`-`}));x({...e,submissions:n||[]})}catch(e){console.error(`Error opening task:`,e)}}async function mt(t,n){let r={status:n};n===`Delivered`?r.delivered_at=new Date().toISOString():r.delivered_at=null;let{error:i}=await W.from(`tasks`).update(r).eq(`id`,t);if(i){alert(`Update failed: `+i.message);return}try{if(n===`Delivered`){let{data:n}=await W.from(`tasks`).select(`*`).eq(`id`,t).single();n?.assigned_to&&await Vl({user_id:n.assigned_to,type:`task_delivered`,message:`${n.project_id} status changed to Delivered by ${e?.full_name}.`,link:`/tasks/${n.id}`,metadata:{task_id:n.id,updated_by:e?.full_name}})}}catch(e){console.error(`Failed to notify on delivered:`,e)}await Promise.all([et(),tt()]),y(!1)}function ht(t){let n=o.find(e=>e.id===t.assigned_by)?.full_name||`Unknown`;E({id:t.id,project_id:t.project_id,client_name:t.client_name||``,description:t.description||``,job_type:t.job_type||``,assigned_to:t.assigned_to||``,assigned_by:t.assigned_by||e?.id,assigned_by_name:n,start_date:t.start_date||``,deadline:t.deadline||``,priority:t.priority||`Medium`,notes:t.notes||``,drive_link:t.drive_link||``,reference_link:t.reference_link||``,progress:t.progress||0,status:t.status||`Pending`}),De(``),C(!0)}async function gt(e){let{error:t}=await W.from(`tasks`).update({archived:!0}).eq(`id`,e);if(t){alert(`Archive failed: `+t.message);return}await et(),alert(`Task archived.`)}async function _t(e){let{error:t}=await W.from(`tasks`).delete().eq(`id`,e);if(t){alert(`Delete failed: `+t.message);return}O(!1),te(null),await Promise.all([et(),tt()]),alert(`Task permanently deleted.`)}async function vt(t){let{data:n,error:r}=await W.from(`task_submissions`).select(`*`).eq(`id`,t).single();if(r){alert(`Could not fetch submission: `+r.message);return}let{error:i}=await W.from(`task_submissions`).update({notes:`Approved by manager ${e?.full_name}`,status:`approved`,approved_by:e?.id}).eq(`id`,t);if(i){alert(`Approve failed: `+i.message);return}try{n?.employee_id&&await Vl({user_id:n.employee_id,type:`submission_approved`,message:`Your submission for task #${n.task_id} was approved by ${e?.full_name}.`,link:`/tasks/${n.task_id}`,metadata:{submission_id:t,task_id:n.task_id,approved_by:e?.full_name}})}catch(e){console.error(`Notify approve failed:`,e)}b&&pt(b)}async function yt(t){let{data:n,error:r}=await W.from(`task_submissions`).select(`*`).eq(`id`,t).single();if(r){alert(`Could not fetch submission: `+r.message);return}let{error:i}=await W.from(`task_submissions`).update({notes:`Revision requested by manager ${e?.full_name}`,status:`revision_requested`,requested_by:e?.id}).eq(`id`,t);if(i){alert(`Request revision failed: `+i.message);return}try{n?.employee_id&&await Vl({user_id:n.employee_id,type:`revision_requested`,message:`Revision required for task #${n.task_id} by ${e?.full_name}.`,link:`/tasks/${n.task_id}`,metadata:{submission_id:t,task_id:n.task_id,requested_by:e?.full_name}})}catch(e){console.error(`Notify revision failed:`,e)}b&&pt(b)}function bt(e=u){let t=[[`Date`,`Employee`,`emp_id`,`Check-in`,`Check-out`,`Status`],...e.map(e=>[e.date,e.profiles?.full_name||``,e.profiles?.emp_id||``,e.check_in||``,e.check_out||``,eu({...e,check_in:e.original_check_in||e.check_in},I.employee_id===e.employee_id?I:F)])].map(e=>e.map(e=>`"${String(e).replace(/"/g,`""`)}"`).join(`,`)).join(`
`),n=new Blob([t],{type:`text/csv`}),r=document.createElement(`a`);r.href=URL.createObjectURL(n),r.download=`attendance-${new Date().toISOString().slice(0,10)}.csv`,r.click(),URL.revokeObjectURL(r.href)}let xt=e=>{if(He===e)Ue(null);else switch(Ue(e),e){case`pending`:A(`Pending`);break;case`in-progress`:A(`In Progress`);break;case`assigned`:ce(``);break;default:break}},St=()=>{k(``),ie(``),A(``),oe(``),ce(``),le(`all`),ue(``),fe(``),Ve(!1),Ue(null)};function Ct(e){let t=Xl();return t.setDate(t.getDate()-e),t.toISOString().slice(0,10)}function wt(e=new Date){let t=new Date(e);return t.setDate(1),t.toISOString().slice(0,10)}function Tt(e=new Date){let t=new Date(e);return t.setMonth(t.getMonth()+1),t.setDate(0),t.toISOString().slice(0,10)}async function Et(e,t=``){Fe(e),Le(t||``);let n=Oe,r=Ae,i=Xl();switch(e){case`7d`:n=Ct(6),r=i.toISOString().slice(0,10);break;case`30d`:n=Ct(29),r=i.toISOString().slice(0,10);break;case`45d`:n=Ct(44),r=i.toISOString().slice(0,10);break;case`thisMonth`:n=wt(i),r=Tt(i);break;case`lastMonth`:let e=new Date(i);e.setMonth(e.getMonth()-1),n=wt(e),r=Tt(e);break}ke(n),je(r),Ne(t||``),await it(n,r,t||``)}async function Dt(e){if(!e)return;Le(e.id),Ne(e.id),Fe(`45d`);let t=Ct(44),n=Xl().toISOString().slice(0,10);ke(t),je(n),await it(t,n,e.id),h(`attendance`)}let Ot=e=>{switch(e?.toLowerCase()){case`completed`:return`bg-green-100 text-green-800`;case`in progress`:return`bg-blue-100 text-blue-800`;case`delivered`:return`bg-purple-100 text-purple-800`;case`revision required`:return`bg-yellow-100 text-yellow-800`;case`pending`:return`bg-gray-100 text-gray-800`;default:return`bg-gray-100 text-gray-800`}},kt=e=>{switch(e?.toLowerCase()){case`completed`:return``;case`in progress`:return``;case`delivered`:return``;case`revision required`:return``;case`pending`:return``;default:return``}};return n?(0,G.jsx)(`div`,{className:`min-h-screen flex items-center justify-center`,style:{background:Y.colors.background},children:(0,G.jsxs)(iu,{className:`text-center p-8`,children:[(0,G.jsx)(`div`,{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6`,style:X,children:(0,G.jsx)(`div`,{className:`w-16 h-16 rounded-full animate-spin border-4 border-blue-400 border-t-transparent`})}),(0,G.jsx)(`div`,{className:`text-xl font-semibold text-gray-800`,children:`Loading Dashboard`}),(0,G.jsx)(`div`,{className:`text-sm text-gray-500 mt-2`,children:`Please wait while we prepare your workspace`})]})}):(0,G.jsxs)(`div`,{className:`min-h-screen text-gray-900`,style:{background:Y.colors.background},children:[(0,G.jsx)(`div`,{className:`sticky top-0 z-40 w-full p-4`,style:{background:Y.colors.background,boxShadow:Y.shadows.softOut},children:(0,G.jsxs)(`div`,{className:`flex items-center justify-between max-w-7xl mx-auto`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,G.jsx)(`div`,{className:`w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-xl`,style:{background:`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`,boxShadow:`4px 4px 8px rgba(109, 131, 242, 0.3), -4px -4px 8px rgba(255, 255, 255, 0.6)`},children:$l(e?.full_name)}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h1`,{className:`text-2xl font-bold text-gray-900`,children:`Manager Dashboard`}),(0,G.jsxs)(`p`,{className:`text-gray-600`,children:[`Welcome back, `,e?.full_name,`!`]})]})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,G.jsxs)(`div`,{className:`text-right`,children:[(0,G.jsx)(`div`,{className:`font-medium text-gray-900`,children:new Date().toLocaleDateString(`en-PK`,{weekday:`short`,month:`short`,day:`numeric`,timeZone:`Asia/Karachi`})}),(0,G.jsx)(`div`,{className:`text-sm text-gray-600`,children:Xl().toLocaleTimeString(`en-PK`,{hour:`2-digit`,minute:`2-digit`,timeZone:`Asia/Karachi`})})]}),(0,G.jsx)(Q,{onClick:async()=>{await W.auth.signOut(),window.location.href=`/login`},variant:`ghost`,size:`sm`,icon:``,children:`Logout`})]})]})}),(0,G.jsxs)(`main`,{className:`p-6 lg:p-8 max-w-7xl mx-auto`,children:[(0,G.jsx)(au,{activeView:m,onViewChange:h}),m===`dashboard`&&(0,G.jsxs)(`div`,{className:`space-y-8`,children:[(0,G.jsxs)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6`,children:[(0,G.jsx)(tu,{title:`Total Projects`,value:f.totalProjects,icon:``,color:`primary`}),(0,G.jsx)(tu,{title:`Pending`,value:f.pending,icon:``,color:`warning`}),(0,G.jsx)(tu,{title:`In Progress`,value:f.inProgress,icon:``,color:`secondary`}),(0,G.jsx)(tu,{title:`Revision`,value:f.revision,icon:``,color:`error`}),(0,G.jsx)(tu,{title:`Completed`,value:f.completed,icon:``,color:`success`}),(0,G.jsx)(tu,{title:`Employees`,value:f.employeesCount,icon:``,color:`primary`})]}),(0,G.jsx)(`div`,{className:`grid grid-cols-2 md:grid-cols-4 gap-6`,children:Ze.map(e=>(0,G.jsx)(`button`,{onClick:()=>h(e.view),className:`group relative p-6 rounded-3xl transition-all duration-300`,style:X,children:(0,G.jsxs)(`div`,{className:`flex flex-col items-center text-center gap-4`,children:[(0,G.jsx)(`div`,{className:`p-4 rounded-2xl text-white`,style:{background:e.color===`primary`?`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`:e.color===`secondary`?`linear-gradient(145deg, #FF6B9D 0%, #E04B7D 100%)`:e.color===`warning`?`linear-gradient(145deg, #FFB74D 0%, #DF9730 100%)`:`linear-gradient(145deg, #4AD991 0%, #2AB971 100%)`},children:(0,G.jsx)(`span`,{className:`text-3xl`,children:e.icon})}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-semibold text-gray-900 text-lg`,children:e.label}),(0,G.jsx)(`div`,{className:`text-sm text-gray-600 mt-1`,children:`Click to view`})]})]})},e.view))}),(0,G.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-3 gap-8`,children:[(0,G.jsx)(`div`,{className:`lg:col-span-2`,children:(0,G.jsxs)(iu,{children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-6`,children:[(0,G.jsxs)(`h3`,{className:`text-xl font-semibold text-gray-900 flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`p-2 rounded-xl`,style:{background:`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`,color:`white`},children:``}),`Today's Attendance`]}),(0,G.jsxs)(`span`,{className:`text-sm text-gray-600 px-3 py-1.5 rounded-full`,style:Z,children:[c.length,`/`,o.length,` checked in`]})]}),(0,G.jsx)(`div`,{className:`space-y-4`,children:c.length===0?(0,G.jsxs)(`div`,{className:`text-center py-12 text-gray-500`,style:Z,children:[(0,G.jsx)(`div`,{className:`text-4xl mb-4`,children:``}),(0,G.jsx)(`div`,{className:`text-lg font-medium mb-2`,children:`No check-ins yet today.`}),(0,G.jsx)(`div`,{className:`text-sm`,children:`Employees will appear here once they check in.`})]}):c.map(e=>{let t=eu(e,I.employee_id===e.employee_id?I:F);return(0,G.jsxs)(`div`,{className:`flex items-center justify-between p-5 rounded-2xl`,style:X,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,G.jsx)(`div`,{className:`w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold`,style:{background:`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`},children:$l(e.profiles?.full_name)}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-medium text-gray-900 text-lg`,children:e.profiles?.full_name}),(0,G.jsx)(`div`,{className:`text-sm text-gray-600`,children:e.profiles?.emp_id})]})]}),(0,G.jsxs)(`div`,{className:`text-right`,children:[(0,G.jsx)(`div`,{className:`font-medium text-gray-900 text-lg`,children:e.check_in||`-`}),(0,G.jsx)(`div`,{className:`text-sm font-medium px-3 py-1.5 rounded-full ${t===`Present`?`text-green-700`:t===`Late`?`text-yellow-700`:t===`Absent`?`text-red-700`:`text-blue-700`}`,style:Z,children:t})]})]},e.id)})})]})}),(0,G.jsxs)(`div`,{className:`space-y-8`,children:[(0,G.jsxs)(iu,{children:[(0,G.jsxs)(`h3`,{className:`text-xl font-semibold text-gray-900 mb-6 flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`p-2 rounded-xl`,style:{background:`linear-gradient(145deg, #9D6DFF 0%, #7D4BE0 100%)`,color:`white`},children:``}),`Recent Tasks`]}),(0,G.jsx)(`div`,{className:`space-y-4`,children:i.slice(0,5).map(e=>(0,G.jsxs)(`div`,{className:`p-4 rounded-2xl cursor-pointer transition-all duration-200 hover:scale-[1.02]`,style:X,onClick:()=>pt(e),children:[(0,G.jsx)(`div`,{className:`font-medium text-gray-900 text-lg truncate mb-1`,children:e.project_id}),(0,G.jsx)(`div`,{className:`text-sm text-gray-700 truncate`,children:e.client_name}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between mt-3`,children:[(0,G.jsx)(`div`,{className:`text-xs text-gray-600`,children:e.job_type}),(0,G.jsxs)(`div`,{className:`text-xs px-3 py-1.5 rounded-full ${Ot(e.status)}`,children:[kt(e.status),` `,e.status]})]})]},e.id))})]}),(0,G.jsxs)(`div`,{className:`p-8 rounded-3xl`,style:X,children:[(0,G.jsxs)(`h3`,{className:`text-xl font-semibold text-gray-900 mb-6 flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`p-2 rounded-xl`,style:{background:`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`,color:`white`},children:``}),`Quick Stats`]}),(0,G.jsxs)(`div`,{className:`space-y-5`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-center pb-4 border-b border-gray-200/50`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`p-2 rounded-xl`,style:X,children:``}),(0,G.jsx)(`span`,{className:`text-gray-700`,children:`Active Tasks`})]}),(0,G.jsx)(`span`,{className:`font-bold text-gray-900 text-xl`,children:f.inProgress})]}),(0,G.jsxs)(`div`,{className:`flex justify-between items-center pb-4 border-b border-gray-200/50`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`p-2 rounded-xl`,style:X,children:``}),(0,G.jsx)(`span`,{className:`text-gray-700`,children:`Due This Week`})]}),(0,G.jsx)(`span`,{className:`font-bold text-gray-900 text-xl`,children:i.filter(e=>{let t=new Date(e.deadline),n=new Date,r=new Date(n);return r.setDate(n.getDate()+7),t>=n&&t<=r}).length})]}),(0,G.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`p-2 rounded-xl`,style:X,children:``}),(0,G.jsx)(`span`,{className:`text-gray-700`,children:`Attendance Today`})]}),(0,G.jsxs)(`span`,{className:`font-bold text-gray-900 text-xl`,children:[c.length,`/`,o.length]})]})]})]})]})]})]}),m===`monthly-view`&&(0,G.jsxs)(`div`,{className:`space-y-8`,children:[(0,G.jsxs)(`div`,{className:`flex flex-col lg:flex-row lg:items-center justify-between gap-6`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h2`,{className:`text-3xl font-bold tracking-tight text-gray-900`,children:`Monthly Employee Performance`}),(0,G.jsx)(`p`,{className:`text-gray-600 text-lg mt-2`,children:`Track employee tasks and performance by month`})]}),(0,G.jsxs)(`div`,{className:`flex flex-wrap gap-4`,children:[(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsx)(`select`,{value:he,onChange:e=>ge(parseInt(e.target.value)),className:`pl-10 pr-4 py-3 rounded-2xl text-gray-800 focus:outline-none appearance-none`,style:Z,children:Array.from({length:12},(e,t)=>(0,G.jsx)(`option`,{value:t,children:new Date(0,t).toLocaleString(`default`,{month:`long`})},t))}),(0,G.jsx)(`div`,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500`,children:``})]}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsx)(`select`,{value:_e,onChange:e=>ve(parseInt(e.target.value)),className:`pl-10 pr-4 py-3 rounded-2xl text-gray-800 focus:outline-none appearance-none`,style:Z,children:Array.from({length:5},(e,t)=>{let n=new Date().getFullYear()-2+t;return(0,G.jsx)(`option`,{value:n,children:n},n)})}),(0,G.jsx)(`div`,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500`,children:``})]}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{value:ye,onChange:e=>be(e.target.value),className:`pl-10 pr-4 py-3 rounded-2xl text-gray-800 focus:outline-none appearance-none`,style:Z,children:[(0,G.jsx)(`option`,{value:``,children:`All Employees`}),o.map(e=>(0,G.jsxs)(`option`,{value:e.id,children:[e.full_name,` (`,e.job_type,`)`]},e.id))]}),(0,G.jsx)(`div`,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500`,children:``})]})]})]}),(0,G.jsxs)(`div`,{className:`grid grid-cols-2 md:grid-cols-4 gap-6`,children:[(0,G.jsxs)(iu,{className:`text-center p-8`,children:[(0,G.jsx)(`div`,{className:`text-sm text-gray-600 mb-2`,children:`Total Tasks`}),(0,G.jsx)(`div`,{className:`text-4xl font-bold text-gray-900`,children:pe.reduce((e,t)=>e+t.stats.total,0)})]}),(0,G.jsxs)(iu,{className:`text-center p-8`,children:[(0,G.jsx)(`div`,{className:`text-sm text-gray-600 mb-2`,children:`Completed`}),(0,G.jsx)(`div`,{className:`text-4xl font-bold text-green-600`,children:pe.reduce((e,t)=>e+t.stats.completed,0)})]}),(0,G.jsxs)(iu,{className:`text-center p-8`,children:[(0,G.jsx)(`div`,{className:`text-sm text-gray-600 mb-2`,children:`In Progress`}),(0,G.jsx)(`div`,{className:`text-4xl font-bold text-blue-600`,children:pe.reduce((e,t)=>e+t.stats.inProgress,0)})]}),(0,G.jsxs)(iu,{className:`text-center p-8`,children:[(0,G.jsx)(`div`,{className:`text-sm text-gray-600 mb-2`,children:`Revision`}),(0,G.jsx)(`div`,{className:`text-4xl font-bold text-yellow-600`,children:pe.reduce((e,t)=>e+t.stats.revision,0)})]})]}),(0,G.jsx)(`div`,{className:`space-y-6`,children:pe.length===0?(0,G.jsxs)(`div`,{className:`text-center py-16`,style:Z,children:[(0,G.jsx)(`div`,{className:`text-5xl mb-4`,children:``}),(0,G.jsx)(`div`,{className:`text-xl text-gray-500 mb-2`,children:`No tasks found for selected period.`}),(0,G.jsx)(`div`,{className:`text-gray-400`,children:`Try selecting a different month or employee.`})]}):pe.map(e=>(0,G.jsxs)(iu,{className:`overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`p-8 border-b border-gray-200/30`,children:(0,G.jsxs)(`div`,{className:`flex flex-col lg:flex-row lg:items-center justify-between gap-6`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-6`,children:[(0,G.jsx)(`div`,{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-2xl`,style:{background:`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`},children:$l(e.employee?.full_name)}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h3`,{className:`text-2xl font-bold text-gray-900`,children:e.employee?.full_name}),(0,G.jsxs)(`div`,{className:`text-base text-gray-600 mt-1`,children:[e.employee?.emp_id,`  `,e.employee?.job_type]})]})]}),(0,G.jsxs)(`div`,{className:`flex gap-8`,children:[(0,G.jsxs)(`div`,{className:`text-center`,children:[(0,G.jsx)(`div`,{className:`text-3xl font-bold text-gray-900`,children:e.stats.total}),(0,G.jsx)(`div`,{className:`text-sm text-gray-500`,children:`Total`})]}),(0,G.jsxs)(`div`,{className:`text-center`,children:[(0,G.jsx)(`div`,{className:`text-3xl font-bold text-green-600`,children:e.stats.completed}),(0,G.jsx)(`div`,{className:`text-sm text-green-600 font-medium`,children:`Completed`})]}),(0,G.jsxs)(`div`,{className:`text-center`,children:[(0,G.jsx)(`div`,{className:`text-3xl font-bold text-blue-600`,children:e.stats.inProgress}),(0,G.jsx)(`div`,{className:`text-sm text-blue-600 font-medium`,children:`In Progress`})]})]})]})}),(0,G.jsxs)(`div`,{className:`p-8`,children:[(0,G.jsx)(`h4`,{className:`text-lg font-semibold text-gray-900 mb-6`,children:`Assigned Tasks`}),(0,G.jsx)(`div`,{className:`space-y-4`,children:e.tasks.map(e=>(0,G.jsx)(`div`,{className:`p-6 rounded-2xl`,style:X,children:(0,G.jsxs)(`div`,{className:`flex flex-col lg:flex-row lg:justify-between lg:items-start gap-4`,children:[(0,G.jsxs)(`div`,{className:`flex-1`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-3 mb-2`,children:[(0,G.jsx)(`div`,{className:`font-bold text-gray-900 text-lg`,children:e.project_id}),(0,G.jsx)(`div`,{className:`text-base text-gray-700`,children:e.client_name})]}),(0,G.jsx)(`div`,{className:`text-sm text-gray-600 mb-3 line-clamp-2`,children:e.description}),(0,G.jsxs)(`div`,{className:`flex gap-3`,children:[(0,G.jsxs)(`span`,{className:`px-3 py-1.5 rounded-lg text-sm ${Ot(e.status)}`,children:[kt(e.status),` `,e.status]}),(0,G.jsx)(`span`,{className:`px-3 py-1.5 rounded-lg text-sm ${e.priority===`High`||e.priority===`Urgent`?`bg-red-100 text-red-800`:e.priority===`Medium`?`bg-yellow-100 text-yellow-800`:`bg-green-100 text-green-800`}`,children:e.priority})]})]}),(0,G.jsxs)(`div`,{className:`text-sm text-gray-600 lg:text-right`,children:[(0,G.jsxs)(`div`,{className:`font-medium mb-1`,children:[`Start: `,new Date(e.start_date).toLocaleDateString(`en-PK`,{timeZone:`Asia/Karachi`})]}),(0,G.jsxs)(`div`,{className:`font-medium mb-1`,children:[`Deadline: `,new Date(e.deadline).toLocaleDateString(`en-PK`,{timeZone:`Asia/Karachi`})]}),e.delivered_at&&(0,G.jsxs)(`div`,{className:`text-green-600 font-medium`,children:[`Delivered: `,new Date(e.delivered_at).toLocaleDateString(`en-PK`,{timeZone:`Asia/Karachi`})]})]})]})},e.id))})]})]},e.employee?.id))})]}),m===`all-tasks`&&(0,G.jsxs)(`div`,{className:`space-y-8`,children:[(0,G.jsxs)(`div`,{className:`flex flex-col lg:flex-row lg:items-center justify-between gap-6`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h2`,{className:`text-3xl font-bold tracking-tight text-gray-900`,children:`Task Management`}),(0,G.jsxs)(`p`,{className:`text-gray-600 text-lg mt-2`,children:[We.visible,` visible tasks of `,We.total,` total`]})]}),(0,G.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-stretch sm:items-center gap-4`,children:[(0,G.jsx)(`div`,{className:`relative flex-1`,children:(0,G.jsx)(ru,{placeholder:`Search tasks by project, client, or employee...`,value:ne,onChange:e=>k(e.target.value),icon:``})}),(0,G.jsx)(Q,{onClick:async()=>{let e=await lt();xe(t=>({...t,project_id:e})),_(!0)},icon:`+`,children:`Create Task`})]})]}),(0,G.jsxs)(iu,{children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-6`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,G.jsxs)(`div`,{className:`text-sm font-medium text-gray-700`,children:[(0,G.jsx)(`span`,{className:`text-lg font-bold text-gray-900`,children:We.visible}),` of `,(0,G.jsx)(`span`,{className:`text-lg font-bold text-gray-900`,children:We.total}),` tasks visible`]}),We.visible<We.total&&(0,G.jsxs)(`div`,{className:`text-sm text-blue-600 px-3 py-1.5 rounded-full`,style:Z,children:[We.total-We.visible,` tasks hidden`]})]}),(0,G.jsx)(Q,{onClick:St,variant:`ghost`,size:`sm`,icon:``,children:`Clear All Filters`})]}),(0,G.jsxs)(`div`,{className:`mb-8`,children:[(0,G.jsxs)(`h3`,{className:`text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2`,children:[(0,G.jsx)(`span`,{children:``}),`Quick Filters`]}),(0,G.jsxs)(`div`,{className:`flex flex-wrap gap-3`,children:[(0,G.jsxs)(`button`,{onClick:()=>xt(`pending`),className:`px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 flex items-center gap-2 ${He===`pending`?`text-white`:`text-gray-700`}`,style:{background:He===`pending`?`linear-gradient(145deg, #FFB74D 0%, #DF9730 100%)`:Y.colors.background,boxShadow:He===`pending`?`inset 4px 4px 8px rgba(0,0,0,0.1), inset -4px -4px 8px rgba(255,255,255,0.2)`:Y.shadows.softOut},children:[(0,G.jsx)(`span`,{children:``}),`Pending (`,i.filter(e=>e.status===`Pending`).length,`)`]}),(0,G.jsxs)(`button`,{onClick:()=>xt(`in-progress`),className:`px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 flex items-center gap-2 ${He===`in-progress`?`text-white`:`text-gray-700`}`,style:{background:He===`in-progress`?`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`:Y.colors.background,boxShadow:He===`in-progress`?`inset 4px 4px 8px rgba(0,0,0,0.1), inset -4px -4px 8px rgba(255,255,255,0.2)`:Y.shadows.softOut},children:[(0,G.jsx)(`span`,{children:``}),`In Progress (`,i.filter(e=>e.status===`In Progress`).length,`)`]}),(0,G.jsxs)(`button`,{onClick:()=>xt(`assigned`),className:`px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 flex items-center gap-2 ${He===`assigned`?`text-white`:`text-gray-700`}`,style:{background:He===`assigned`?`linear-gradient(145deg, #9D6DFF 0%, #7D4BE0 100%)`:Y.colors.background,boxShadow:He===`assigned`?`inset 4px 4px 8px rgba(0,0,0,0.1), inset -4px -4px 8px rgba(255,255,255,0.2)`:Y.shadows.softOut},children:[(0,G.jsx)(`span`,{children:``}),`Assigned Tasks (`,i.filter(e=>e.assigned_to).length,`)`]}),(0,G.jsxs)(`button`,{onClick:St,className:`px-4 py-3 rounded-xl text-sm font-medium text-gray-700 transition-all duration-300 flex items-center gap-2`,style:X,children:[(0,G.jsx)(`span`,{children:``}),`All Tasks`]})]})]}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-8 p-4 rounded-2xl`,style:X,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`text-lg`,children:``}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-medium text-gray-900`,children:`Hide Completed Tasks`}),(0,G.jsx)(`div`,{className:`text-sm text-gray-600`,children:`Toggle to show or hide completed tasks`})]})]}),(0,G.jsx)(`button`,{onClick:()=>Ve(!Be),className:`relative w-14 h-7 rounded-full transition-all duration-300 ${Be?`bg-green-500`:`bg-gray-300`}`,children:(0,G.jsx)(`div`,{className:`absolute top-1 left-1 w-5 h-5 rounded-full bg-white transition-all duration-300 ${Be?`transform translate-x-7`:``}`})})]}),(0,G.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:`Job Type`}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{className:`w-full pl-10 pr-4 py-3 rounded-2xl text-gray-800 focus:outline-none appearance-none`,value:re,onChange:e=>ie(e.target.value),style:Z,children:[(0,G.jsx)(`option`,{value:``,children:`All Job Types`}),Ke.map(e=>(0,G.jsx)(`option`,{children:e},e))]}),(0,G.jsx)(`div`,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400`,children:``})]})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:`Status`}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{className:`w-full pl-10 pr-4 py-3 rounded-2xl text-gray-800 focus:outline-none appearance-none`,value:ae,onChange:e=>A(e.target.value),style:Z,children:[(0,G.jsx)(`option`,{value:``,children:`All Status`}),qe.map(e=>(0,G.jsx)(`option`,{children:e},e))]}),(0,G.jsx)(`div`,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400`,children:``})]})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:`Priority`}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{className:`w-full pl-10 pr-4 py-3 rounded-2xl text-gray-800 focus:outline-none appearance-none`,value:j,onChange:e=>oe(e.target.value),style:Z,children:[(0,G.jsx)(`option`,{value:``,children:`All Priority`}),Je.map(e=>(0,G.jsx)(`option`,{children:e},e))]}),(0,G.jsx)(`div`,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400`,children:``})]})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:`Assigned To`}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{className:`w-full pl-10 pr-4 py-3 rounded-2xl text-gray-800 focus:outline-none appearance-none`,value:se,onChange:e=>ce(e.target.value),style:Z,children:[(0,G.jsx)(`option`,{value:``,children:`All Employees`}),o.map(e=>(0,G.jsxs)(`option`,{value:e.id,children:[e.full_name,` (`,e.emp_id,`)`]},e.id))]}),(0,G.jsx)(`div`,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400`,children:``})]})]})]}),(0,G.jsx)(`div`,{className:`mt-6 pt-6 border-t border-gray-200/50`,children:(0,G.jsxs)(`div`,{className:`flex flex-wrap gap-4 items-center`,children:[(0,G.jsx)(`div`,{className:`font-medium text-gray-700 text-lg`,children:`Date Range:`}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{className:`pl-10 pr-4 py-3 rounded-2xl text-gray-800 focus:outline-none appearance-none`,value:M,onChange:e=>le(e.target.value),style:Z,children:[(0,G.jsx)(`option`,{value:`all`,children:`All Time`}),(0,G.jsx)(`option`,{value:`week`,children:`This Week`}),(0,G.jsx)(`option`,{value:`month`,children:`This Month`}),(0,G.jsx)(`option`,{value:`custom`,children:`Custom Range`})]}),(0,G.jsx)(`div`,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400`,children:``})]}),M===`custom`&&(0,G.jsxs)(`div`,{className:`flex flex-wrap gap-3 items-center`,children:[(0,G.jsx)(`div`,{className:`relative`,children:(0,G.jsx)(ru,{type:`date`,value:N,onChange:e=>ue(e.target.value)})}),(0,G.jsx)(`span`,{className:`text-gray-500`,children:`to`}),(0,G.jsx)(`div`,{className:`relative`,children:(0,G.jsx)(ru,{type:`date`,value:de,onChange:e=>fe(e.target.value)})})]})]})})]}),(0,G.jsxs)(iu,{children:[(0,G.jsxs)(`h3`,{className:`text-xl font-semibold text-gray-900 mb-6 flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`p-2 rounded-xl`,style:{background:`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`,color:`white`},children:``}),`Project Distribution by Job Type`]}),(0,G.jsx)(`div`,{className:`grid grid-cols-2 md:grid-cols-4 gap-6`,children:Object.entries(Xe).map(([e,t])=>(0,G.jsxs)(`div`,{className:`p-6 rounded-2xl`,style:X,children:[(0,G.jsx)(`div`,{className:`font-bold text-lg text-gray-900 mb-4`,children:e}),(0,G.jsxs)(`div`,{className:`space-y-3 text-sm text-gray-600`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-center pb-3 border-b border-gray-200/50`,children:[(0,G.jsx)(`span`,{children:`Total:`}),(0,G.jsx)(`span`,{className:`font-bold text-gray-900`,children:t.total})]}),(0,G.jsxs)(`div`,{className:`flex justify-between items-center pb-3 border-b border-gray-200/50`,children:[(0,G.jsx)(`span`,{children:`Completed:`}),(0,G.jsx)(`span`,{className:`font-bold text-green-600`,children:t.completed})]}),(0,G.jsxs)(`div`,{className:`flex justify-between items-center pb-3 border-b border-gray-200/50`,children:[(0,G.jsx)(`span`,{children:`In Progress:`}),(0,G.jsx)(`span`,{className:`font-bold text-blue-600`,children:t.inProgress})]}),(0,G.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,G.jsx)(`span`,{children:`Pending:`}),(0,G.jsx)(`span`,{className:`font-bold text-gray-600`,children:t.pending})]})]})]},e))})]}),(0,G.jsxs)(`div`,{className:`space-y-6`,children:[(0,G.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-3 gap-6`,children:[(0,G.jsxs)(`div`,{className:`p-6 rounded-3xl`,style:{background:Y.colors.background,boxShadow:Y.shadows.softOut},children:[(0,G.jsxs)(`h3`,{className:`text-xl font-bold text-red-800 mb-3 flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`text-2xl`,children:``}),`High Priority`]}),(0,G.jsxs)(`p`,{className:`text-red-700 text-sm`,children:[Ye.filter(e=>e.priority===`High`||e.priority===`Urgent`).length,` urgent tasks`]})]}),(0,G.jsxs)(`div`,{className:`p-6 rounded-3xl`,style:X,children:[(0,G.jsxs)(`h3`,{className:`text-xl font-bold text-yellow-800 mb-3 flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`text-2xl`,children:``}),`Medium Priority`]}),(0,G.jsxs)(`p`,{className:`text-yellow-700 text-sm`,children:[Ye.filter(e=>e.priority===`Medium`).length,` medium priority tasks`]})]}),(0,G.jsxs)(`div`,{className:`p-6 rounded-3xl`,style:X,children:[(0,G.jsxs)(`h3`,{className:`text-xl font-bold text-green-800 mb-3 flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`text-2xl`,children:``}),`Low Priority`]}),(0,G.jsxs)(`p`,{className:`text-green-700 text-sm`,children:[Ye.filter(e=>e.priority===`Low`).length,` low priority tasks`]})]})]}),(0,G.jsx)(`div`,{className:`space-y-6`,children:Ye.length===0?(0,G.jsxs)(`div`,{className:`text-center py-16`,style:Z,children:[(0,G.jsx)(`div`,{className:`text-5xl mb-4`,children:``}),(0,G.jsx)(`div`,{className:`text-xl text-gray-500 mb-2`,children:`No tasks found matching your filters.`}),(0,G.jsx)(`div`,{className:`text-gray-400`,children:`Try adjusting your search criteria or create a new task.`})]}):Ye.map(e=>{let t=o.find(t=>t.id===e.assigned_to),n=e.progress||0,r={High:{accent:`linear-gradient(145deg, #FF5252 0%, #DF3232 100%)`,text:`text-red-700`,icon:``},Urgent:{accent:`linear-gradient(145deg, #FF5252 0%, #DF3232 100%)`,text:`text-red-700`,icon:``},Medium:{accent:`linear-gradient(145deg, #FFB74D 0%, #DF9730 100%)`,text:`text-yellow-700`,icon:``},Low:{accent:`linear-gradient(145deg, #4AD991 0%, #2AB971 100%)`,text:`text-green-700`,icon:``}},i=r[e.priority]||r.Medium;return(0,G.jsxs)(iu,{hoverable:!0,children:[(0,G.jsxs)(`div`,{className:`relative h-2 mb-6 rounded-full`,style:Z,children:[(0,G.jsx)(`div`,{className:`h-full rounded-full transition-all duration-500`,style:{background:i.accent,width:`${n}%`}}),(0,G.jsxs)(`div`,{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-xs font-bold text-gray-700`,children:[n,`%`]})]}),(0,G.jsxs)(`div`,{className:`space-y-4`,children:[(0,G.jsxs)(`div`,{className:`flex flex-col lg:flex-row lg:items-start justify-between gap-6`,children:[(0,G.jsxs)(`div`,{className:`flex-1`,children:[(0,G.jsxs)(`div`,{className:`flex items-start justify-between mb-4`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-3 mb-2`,children:[(0,G.jsx)(`h3`,{className:`text-2xl font-bold text-gray-900`,children:e.project_id}),(0,G.jsxs)(`span`,{className:`px-3 py-1 rounded-full text-sm font-medium ${i.text}`,style:Z,children:[i.icon,` `,e.priority]})]}),(0,G.jsx)(`h4`,{className:`text-xl font-semibold text-gray-800 mb-2`,children:e.client_name}),(0,G.jsxs)(`div`,{className:`flex items-center gap-4 text-gray-600`,children:[(0,G.jsxs)(`span`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`text-lg`,children:``}),e.job_type]}),(0,G.jsxs)(`span`,{className:`flex items-center gap-2 ${Ot(e.status)} px-3 py-1 rounded-lg`,children:[(0,G.jsx)(`span`,{className:`text-lg`,children:kt(e.status)}),e.status]})]})]}),(0,G.jsxs)(`div`,{className:`flex gap-2`,children:[(0,G.jsx)(Q,{onClick:()=>pt(e),variant:`ghost`,size:`sm`,icon:``}),(0,G.jsx)(Q,{onClick:()=>ht(e),variant:`ghost`,size:`sm`,icon:``}),(0,G.jsx)(Q,{onClick:()=>{te(e.id),O(!0)},variant:`ghost`,size:`sm`,icon:``})]})]}),(0,G.jsx)(`p`,{className:`text-gray-700 mb-6 line-clamp-2`,children:e.description||`No description provided`}),(0,G.jsxs)(`div`,{className:`flex flex-wrap gap-3 mb-6`,children:[(0,G.jsxs)(`span`,{className:`px-3 py-1.5 text-blue-700 rounded-lg text-sm flex items-center gap-2`,style:Z,children:[(0,G.jsx)(`span`,{children:``}),t?t.full_name:`Unassigned`]}),(0,G.jsxs)(`span`,{className:`px-3 py-1.5 text-purple-700 rounded-lg text-sm flex items-center gap-2`,style:Z,children:[(0,G.jsx)(`span`,{children:``}),`Start: `,new Date(e.start_date).toLocaleDateString(`en-PK`,{timeZone:`Asia/Karachi`})]}),(0,G.jsxs)(`span`,{className:`px-3 py-1.5 text-yellow-700 rounded-lg text-sm flex items-center gap-2`,style:Z,children:[(0,G.jsx)(`span`,{children:``}),`Due: `,new Date(e.deadline).toLocaleDateString(`en-PK`,{timeZone:`Asia/Karachi`})]})]})]}),(0,G.jsxs)(`div`,{className:`flex flex-col gap-3 min-w-[200px]`,children:[(0,G.jsx)(Q,{onClick:()=>pt(e),variant:`ghost`,icon:``,children:`View Details`}),(0,G.jsx)(Q,{onClick:()=>ht(e),variant:`ghost`,icon:``,children:`Edit Task`}),e.status!==`Completed`&&(0,G.jsx)(Q,{onClick:()=>mt(e.id,`Completed`),variant:`success`,icon:``,children:`Mark Complete`})]})]}),(0,G.jsx)(`div`,{className:`pt-6 border-t border-gray-200/50`,children:(0,G.jsxs)(`div`,{className:`flex flex-wrap gap-4`,children:[e.drive_link&&(0,G.jsxs)(`a`,{href:e.drive_link,target:`_blank`,rel:`noreferrer`,className:`text-blue-600 hover:text-blue-800 hover:underline text-sm flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`text-lg`,children:``}),`Drive Link`]}),e.reference_link&&(0,G.jsxs)(`a`,{href:e.reference_link,target:`_blank`,rel:`noreferrer`,className:`text-blue-600 hover:text-blue-800 hover:underline text-sm flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`text-lg`,children:``}),`Reference Link`]})]})})]})]},e.id)})})]})]}),m===`attendance`&&(0,G.jsx)(`div`,{className:`space-y-8`,children:(0,G.jsxs)(iu,{children:[(0,G.jsxs)(`div`,{className:`flex flex-col lg:flex-row lg:items-center justify-between gap-6 mb-8`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h2`,{className:`text-3xl font-bold tracking-tight text-gray-900`,children:`Attendance Overview`}),(0,G.jsx)(`p`,{className:`text-gray-600 text-lg mt-2`,children:`Track and manage employee attendance`})]}),(0,G.jsx)(`div`,{className:`flex gap-4`,children:(0,G.jsx)(Q,{onClick:()=>bt(u),variant:`ghost`,icon:``,children:`Export CSV`})})]}),(0,G.jsxs)(`div`,{className:`flex flex-wrap gap-4 items-center mb-8`,children:[(0,G.jsxs)(`div`,{className:`relative flex-1`,children:[(0,G.jsxs)(`select`,{value:Me,onChange:e=>Ne(e.target.value),className:`pl-12 pr-4 py-3 rounded-2xl text-gray-800 focus:outline-none appearance-none w-full`,style:Z,children:[(0,G.jsx)(`option`,{value:``,children:`All Employees`}),o.map(e=>(0,G.jsxs)(`option`,{value:e.id,children:[e.full_name,` (`,e.emp_id,`)`]},e.id))]}),(0,G.jsx)(`div`,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400`,children:``})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,G.jsx)(`div`,{className:`relative`,children:(0,G.jsx)(ru,{type:`date`,value:Oe,onChange:e=>{ke(e.target.value),Fe(`custom`)}})}),(0,G.jsx)(`span`,{className:`text-gray-500`,children:`to`}),(0,G.jsx)(`div`,{className:`relative`,children:(0,G.jsx)(ru,{type:`date`,value:Ae,onChange:e=>{je(e.target.value),Fe(`custom`)}})})]}),(0,G.jsx)(Q,{onClick:()=>it(Oe,Ae,Me),icon:``,children:`Load Attendance`})]}),(0,G.jsx)(`div`,{className:`flex flex-wrap gap-3 mb-8`,children:[[`45d`,`Last 45 days`],[`30d`,`Last 30 days`],[`7d`,`Last 7 days`],[`thisMonth`,`This Month`],[`lastMonth`,`Last Month`]].map(([e,t])=>(0,G.jsxs)(`button`,{onClick:()=>Et(e,Me),className:`px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-300 flex items-center gap-2 ${Pe===e?`text-white`:`text-gray-700`}`,style:{background:Pe===e?`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`:Y.colors.background,boxShadow:Pe===e?`inset 4px 4px 8px rgba(0,0,0,0.1), inset -4px -4px 8px rgba(255,255,255,0.2)`:Y.shadows.softOut},children:[Pe===e&&(0,G.jsx)(`span`,{children:``}),t]},e))}),(0,G.jsxs)(`div`,{className:`mb-8`,children:[(0,G.jsxs)(`h3`,{className:`text-xl font-semibold text-gray-900 mb-6 flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`p-2 rounded-xl`,style:{background:`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`,color:`white`},children:``}),`Team Members`]}),(0,G.jsx)(`div`,{className:`grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6`,children:o.map(e=>(0,G.jsx)(cu,{employee:e,onClick:()=>Dt(e),isSelected:Ie===e.id},e.id))})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`h3`,{className:`text-xl font-semibold text-gray-900 mb-6 flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`p-2 rounded-xl`,style:{background:`linear-gradient(145deg, #9D6DFF 0%, #7D4BE0 100%)`,color:`white`},children:``}),`Attendance Records`]}),u.length===0?(0,G.jsxs)(`div`,{className:`text-center py-16`,style:Z,children:[(0,G.jsx)(`div`,{className:`text-5xl mb-4`,children:``}),(0,G.jsx)(`div`,{className:`text-xl text-gray-500 mb-2`,children:`No attendance records in this range.`}),(0,G.jsx)(`div`,{className:`text-gray-400`,children:`Try selecting a different date range or employee.`})]}):(0,G.jsx)(`div`,{className:`overflow-x-auto rounded-2xl`,style:X,children:(0,G.jsxs)(`table`,{className:`w-full`,children:[(0,G.jsx)(`thead`,{children:(0,G.jsxs)(`tr`,{className:`border-b border-gray-200/50`,children:[(0,G.jsx)(`th`,{className:`p-4 text-left text-sm font-semibold text-gray-700`,children:`Date`}),(0,G.jsx)(`th`,{className:`p-4 text-left text-sm font-semibold text-gray-700`,children:`Employee`}),(0,G.jsx)(`th`,{className:`p-4 text-left text-sm font-semibold text-gray-700`,children:`Emp ID`}),(0,G.jsx)(`th`,{className:`p-4 text-left text-sm font-semibold text-gray-700`,children:`Check-in`}),(0,G.jsx)(`th`,{className:`p-4 text-left text-sm font-semibold text-gray-700`,children:`Check-out`}),(0,G.jsx)(`th`,{className:`p-4 text-left text-sm font-semibold text-gray-700`,children:`Status`})]})}),(0,G.jsx)(`tbody`,{className:`divide-y divide-gray-200/50`,children:u.map(e=>{let t=o.find(t=>t.id===e.employee_id),n=eu(e,I.employee_id===e.employee_id?I:F);return(0,G.jsxs)(`tr`,{className:`hover:bg-gray-50/50 transition-colors`,children:[(0,G.jsx)(`td`,{className:`p-4 text-gray-900 font-medium`,children:e.date}),(0,G.jsx)(`td`,{className:`p-4`,children:(0,G.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,G.jsx)(`div`,{className:`w-10 h-10 rounded-full flex items-center justify-center text-white text-sm font-semibold`,style:{background:`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`},children:$l(e.profiles?.full_name)}),(0,G.jsx)(`button`,{className:`text-left text-sm text-blue-600 hover:text-blue-800 hover:underline font-medium`,onClick:()=>t&&Dt(t),children:e.profiles?.full_name})]})}),(0,G.jsx)(`td`,{className:`p-4 text-gray-700`,children:e.profiles?.emp_id}),(0,G.jsx)(`td`,{className:`p-4 text-gray-700 font-medium`,children:e.check_in||`-`}),(0,G.jsx)(`td`,{className:`p-4 text-gray-700 font-medium`,children:e.check_out||`-`}),(0,G.jsx)(`td`,{className:`p-4`,children:(0,G.jsx)(`span`,{className:`px-3 py-1.5 rounded-lg text-sm font-medium ${n===`Present`?`text-green-700`:n===`Late`?`text-yellow-700`:n===`Absent`?`text-red-700`:`text-blue-700`}`,style:Z,children:n})})]},e.id)})})]})})]})]})}),m===`employees`&&(0,G.jsxs)(iu,{children:[(0,G.jsx)(`h2`,{className:`text-3xl font-bold tracking-tight text-gray-900 mb-8`,children:`Team Members`}),(0,G.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`,children:o.map(e=>(0,G.jsxs)(`div`,{className:`p-6 rounded-3xl transition-all duration-300 hover:scale-[1.02]`,style:X,children:[(0,G.jsx)(`div`,{className:`flex items-start justify-between mb-6`,children:(0,G.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,G.jsx)(`div`,{className:`w-14 h-14 rounded-full flex items-center justify-center text-white font-bold text-xl`,style:{background:`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`},children:$l(e.full_name)}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-bold text-gray-900 text-lg`,children:e.full_name}),(0,G.jsx)(`div`,{className:`text-sm text-gray-600`,children:e.emp_id}),(0,G.jsx)(`div`,{className:`text-xs text-gray-500 mt-1`,children:e.job_type})]})]})}),(0,G.jsxs)(`div`,{className:`grid grid-cols-3 gap-3`,children:[(0,G.jsx)(Q,{onClick:async()=>{Ne(e.id),h(`attendance`);let t=new Date(new Date().setDate(new Date().getDate()-44)).toISOString().slice(0,10),n=new Date().toISOString().slice(0,10);ke(t),je(n),await it(t,n,e.id)},variant:`ghost`,size:`sm`,icon:``,children:`Attendance`}),(0,G.jsx)(Q,{onClick:()=>{be(e.id),h(`monthly-view`)},variant:`ghost`,size:`sm`,icon:``,children:`Performance`}),(0,G.jsx)(Q,{onClick:()=>{ze(t=>({...t,employee_id:e.id})),ot(e.id),h(`settings`)},variant:`ghost`,size:`sm`,icon:``,children:`Shift`})]})]},e.id))})]}),m===`settings`&&(0,G.jsxs)(iu,{children:[(0,G.jsx)(`h2`,{className:`text-3xl font-bold tracking-tight text-gray-900 mb-8`,children:`Settings  Shift & Working Hours`}),(0,G.jsxs)(`div`,{className:`p-8 rounded-3xl mb-8`,style:X,children:[(0,G.jsxs)(`h3`,{className:`text-xl font-semibold text-gray-900 mb-6 flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`p-2 rounded-xl`,style:{background:`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`,color:`white`},children:``}),`Global Shift Settings`]}),(0,G.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-3`,children:`Working Days`}),(0,G.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:[`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`].map(e=>(0,G.jsx)(`button`,{onClick:()=>{let t=F.working_days.includes(e)?F.working_days.filter(t=>t!==e):[...F.working_days,e];Re(e=>({...e,working_days:t}))},className:`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${F.working_days.includes(e)?`text-white`:`text-gray-700`}`,style:{background:F.working_days.includes(e)?`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`:Y.colors.background,boxShadow:F.working_days.includes(e)?`inset 4px 4px 8px rgba(0,0,0,0.1), inset -4px -4px 8px rgba(255,255,255,0.2)`:Y.shadows.softOut},children:e},e))})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-3`,children:`Start Time`}),(0,G.jsx)(ru,{type:`time`,value:F.start_time,onChange:e=>Re(t=>({...t,start_time:e.target.value}))})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-3`,children:`End Time`}),(0,G.jsx)(ru,{type:`time`,value:F.end_time,onChange:e=>Re(t=>({...t,end_time:e.target.value}))})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-3`,children:`Break Start`}),(0,G.jsx)(ru,{type:`time`,value:F.break_start,onChange:e=>Re(t=>({...t,break_start:e.target.value}))})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-3`,children:`Break End`}),(0,G.jsx)(ru,{type:`time`,value:F.break_end,onChange:e=>Re(t=>({...t,break_end:e.target.value}))})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-3`,children:`Grace Minutes`}),(0,G.jsx)(ru,{type:`number`,min:`0`,max:`60`,value:F.grace_minutes,onChange:e=>Re(t=>({...t,grace_minutes:Number(e.target.value)}))})]})]}),(0,G.jsx)(`div`,{className:`mt-8`,children:(0,G.jsx)(Q,{onClick:st,icon:``,children:`Save Global Shift Settings`})})]}),(0,G.jsxs)(`div`,{className:`p-8 rounded-3xl`,style:X,children:[(0,G.jsxs)(`h3`,{className:`text-xl font-semibold text-gray-900 mb-6 flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`p-2 rounded-xl`,style:{background:`linear-gradient(145deg, #9D6DFF 0%, #7D4BE0 100%)`,color:`white`},children:``}),`Employee Shift Settings`]}),(0,G.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-3`,children:`Employee`}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{value:I.employee_id,onChange:async e=>{let t=e.target.value;ze(e=>({...e,employee_id:t})),t?await ot(t):ze({employee_id:``,working_days:[`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`],start_time:`09:00`,end_time:`17:00`,break_start:``,break_end:``,grace_minutes:0})},className:`w-full pl-10 pr-4 py-3 rounded-2xl text-gray-800 focus:outline-none appearance-none`,style:Z,children:[(0,G.jsx)(`option`,{value:``,children:`Select employee`}),o&&o.length>0?o.map(e=>(0,G.jsxs)(`option`,{value:e.id,children:[e.emp_id,` - `,e.full_name]},e.id)):(0,G.jsx)(`option`,{value:``,disabled:!0,children:`No employees found`})]}),(0,G.jsx)(`div`,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400`,children:``})]})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-3`,children:`Working Days`}),(0,G.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:[`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`].map(e=>(0,G.jsx)(`button`,{onClick:()=>{let t=I.working_days.includes(e)?I.working_days.filter(t=>t!==e):[...I.working_days,e];ze(e=>({...e,working_days:t}))},className:`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${I.working_days.includes(e)?`text-white`:`text-gray-700`}`,style:{background:I.working_days.includes(e)?`linear-gradient(145deg, #6D83F2 0%, #4D63D2 100%)`:Y.colors.background,boxShadow:I.working_days.includes(e)?`inset 4px 4px 8px rgba(0,0,0,0.1), inset -4px -4px 8px rgba(255,255,255,0.2)`:Y.shadows.softOut},children:e},e))})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-3`,children:`Start Time`}),(0,G.jsx)(ru,{type:`time`,value:I.start_time,onChange:e=>ze(t=>({...t,start_time:e.target.value}))})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-3`,children:`End Time`}),(0,G.jsx)(ru,{type:`time`,value:I.end_time,onChange:e=>ze(t=>({...t,end_time:e.target.value}))})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-3`,children:`Break Start`}),(0,G.jsx)(ru,{type:`time`,value:I.break_start,onChange:e=>ze(t=>({...t,break_start:e.target.value}))})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-3`,children:`Break End`}),(0,G.jsx)(ru,{type:`time`,value:I.break_end,onChange:e=>ze(t=>({...t,break_end:e.target.value}))})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-3`,children:`Grace Minutes`}),(0,G.jsx)(ru,{type:`number`,min:`0`,max:`60`,value:I.grace_minutes,onChange:e=>ze(t=>({...t,grace_minutes:Number(e.target.value)}))})]})]}),(0,G.jsxs)(`div`,{className:`mt-8 flex gap-4`,children:[(0,G.jsx)(Q,{onClick:ct,disabled:!I.employee_id,icon:``,children:`Save Employee Shift`}),(0,G.jsx)(Q,{onClick:()=>{I.employee_id?ot(I.employee_id):alert(`Please select an employee first`)},variant:`ghost`,icon:``,children:`Reload Shift Data`})]})]})]}),m===`submissions`&&(0,G.jsxs)(iu,{children:[(0,G.jsx)(`h2`,{className:`text-3xl font-bold tracking-tight text-gray-900 mb-8`,children:`Submissions`}),(0,G.jsx)(`div`,{className:`text-gray-600 mb-8 text-lg`,children:`Recent submissions (latest first)`}),(0,G.jsx)(J,{})]}),m===`sales-analytics`&&(0,G.jsxs)(`div`,{className:`space-y-8`,children:[(0,G.jsxs)(`div`,{className:`flex flex-col lg:flex-row lg:items-center justify-between gap-6`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h2`,{className:`text-3xl font-bold tracking-tight text-gray-900`,children:`Sales Analytics`}),(0,G.jsx)(`p`,{className:`text-gray-600 text-lg mt-2`,children:`Track sales performance, revenue, and commissions`})]}),(0,G.jsx)(Q,{onClick:()=>h(`dashboard`),variant:`ghost`,icon:``,children:`Back to Dashboard`})]}),(0,G.jsx)(Gl,{})]})]}),g&&(0,G.jsx)(ou,{taskForm:P,setTaskForm:xe,employees:o,close:()=>{_(!1),Te(``)},createTask:ft,generating:Se,jobTypes:Ke,validation:we,profile:e}),v&&b&&(0,G.jsx)(su,{task:b,close:()=>{y(!1),x(null)},approve:e=>vt(e),requestRevision:e=>yt(e),updateStatus:(e,t)=>mt(e,t),profile:e,activeView:m,employees:o}),D&&ee&&(0,G.jsx)(`div`,{className:`fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50 p-4`,children:(0,G.jsxs)(iu,{className:`max-w-md w-full p-8`,children:[(0,G.jsx)(`h3`,{className:`text-xl font-semibold text-gray-900 mb-4`,children:`Delete Task`}),(0,G.jsx)(`p`,{className:`text-sm text-gray-600 mb-6`,children:`Delete permanently or archive? Archiving hides the task but keeps it in the database.`}),(0,G.jsxs)(`div`,{className:`flex gap-4 justify-end`,children:[(0,G.jsx)(Q,{onClick:()=>{O(!1),te(null)},variant:`ghost`,children:`Cancel`}),(0,G.jsx)(Q,{onClick:async()=>{await gt(ee),O(!1),te(null)},variant:`warning`,icon:``,children:`Archive`}),(0,G.jsx)(Q,{onClick:async()=>{await _t(ee)},variant:`error`,icon:``,children:`Delete`})]})]})})]})}function uu({profile:e,isExpanded:t,onMouseEnter:n,onMouseLeave:r,onNavigate:i,onLogout:a,canLogout:o=!0,user:s,userRole:c,activeView:l=`dashboard`}){let[u,d]=(0,w.useState)(!1),[f,p]=(0,w.useState)(``);(0,w.useEffect)(()=>{if(e?.avatar)p(e.avatar);else{let t=e?.full_name||`User`;p(`https://ui-avatars.com/api/?name=${encodeURIComponent(t)}&background=3B82F6&color=ffffff&bold=true&size=128`)}d(!1)},[e?.avatar,e?.full_name]);let m=e?.role===`manager`,h=e?.role===`admin`,g=e?.role===`supervisor`,_=e?.role||c||`manager`,v=[{key:`dashboard`,label:`Dashboard`,icon:du,description:`Overview & analytics`,roles:[`manager`,`admin`,`supervisor`],color:`blue`},{key:`tasks`,label:`My Tasks`,icon:fu,description:`Assigned tasks`,roles:[`manager`,`admin`,`supervisor`],color:`green`},{key:`attendance`,label:`Attendance`,icon:pu,description:`Time tracking`,roles:[`manager`,`admin`,`supervisor`],color:`orange`}],y=[{key:`calendar`,label:`Calendar`,icon:mu,description:`Schedule & events`,roles:[`manager`,`admin`,`supervisor`],color:`purple`},{key:`files`,label:`Company Drive`,icon:hu,description:`Shared files`,roles:[`manager`,`admin`,`supervisor`],color:`indigo`}],b=[{key:`team`,label:`Team Management`,icon:gu,description:`Employees & roles`,roles:[`manager`,`admin`],color:`teal`},{key:`projects`,label:`Projects`,icon:_u,description:`All projects`,roles:[`manager`,`admin`,`supervisor`],color:`cyan`},{key:`analytics`,label:`Analytics`,icon:vu,description:`Performance insights`,roles:[`manager`,`admin`],color:`yellow`},{key:`reports`,label:`Reports`,icon:yu,description:`Generate reports`,roles:[`manager`,`admin`],color:`red`},{key:`employees`,label:`Employees`,icon:bu,description:`Team members`,roles:[`manager`,`admin`],color:`violet`},{key:`submissions`,label:`Submissions`,icon:xu,description:`Task submissions`,roles:[`manager`,`admin`],color:`pink`},{key:`sales-analytics`,label:`Sales Analytics`,icon:Su,description:`Sales & revenue`,roles:[`manager`,`admin`],color:`green`}],x=[{key:`settings`,label:`Settings`,icon:Cu,description:`Account & preferences`,roles:[`manager`,`admin`,`supervisor`],color:`gray`}],S=e=>e.filter(e=>e.roles.includes(_)),C=(()=>{let e=[{title:`Workspace`,items:S(v),icon:wu,color:`bg-blue-500`},{title:`Tools`,items:S(y),icon:Tu,color:`bg-purple-500`}];return(m||h||g)&&e.push({title:`Management`,items:S(b),icon:Eu,color:`bg-teal-500`}),e.push({title:`System`,items:S(x),icon:Du,color:`bg-gray-500`}),e})(),T=e=>e?e.split(` `).map(e=>e[0]).slice(0,2).join(``).toUpperCase():`U`,E=()=>e?.full_name||s?.full_name||`User`,D=()=>{let t=e||s;return m&&t?.mgr_id?`MGR-${t.mgr_id}`:!m&&t?.emp_id||t?.emp_id?t.emp_id:t?.mgr_id?`MGR-${t.mgr_id}`:t?.email?t.email.split(`@`)[0]:`ID: Not Set`},O=()=>{let t=e||s,n=t?.job_type,r=t?.role||c;if(n)return n;switch(r?.toLowerCase()){case`manager`:return`Manager`;case`admin`:return`Administrator`;case`supervisor`:return`Supervisor`;case`employee`:return`Employee`;default:return r?.charAt(0).toUpperCase()+r?.slice(1)||`User`}},ee=e=>{i(e)},te=(e,t)=>{let n={blue:{active:`bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-md`,inactive:`text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20`},green:{active:`bg-gradient-to-r from-green-500 to-green-600 text-white shadow-md`,inactive:`text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/20`},orange:{active:`bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-md`,inactive:`text-orange-600 hover:bg-orange-50 dark:text-orange-400 dark:hover:bg-orange-900/20`},purple:{active:`bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-md`,inactive:`text-purple-600 hover:bg-purple-50 dark:text-purple-400 dark:hover:bg-purple-900/20`},indigo:{active:`bg-gradient-to-r from-indigo-500 to-indigo-600 text-white shadow-md`,inactive:`text-indigo-600 hover:bg-indigo-50 dark:text-indigo-400 dark:hover:bg-indigo-900/20`},pink:{active:`bg-gradient-to-r from-pink-500 to-pink-600 text-white shadow-md`,inactive:`text-pink-600 hover:bg-pink-50 dark:text-pink-400 dark:hover:bg-pink-900/20`},teal:{active:`bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-md`,inactive:`text-teal-600 hover:bg-teal-50 dark:text-teal-400 dark:hover:bg-teal-900/20`},cyan:{active:`bg-gradient-to-r from-cyan-500 to-cyan-600 text-white shadow-md`,inactive:`text-cyan-600 hover:bg-cyan-50 dark:text-cyan-400 dark:hover:bg-cyan-900/20`},yellow:{active:`bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-md`,inactive:`text-yellow-600 hover:bg-yellow-50 dark:text-yellow-400 dark:hover:bg-yellow-900/20`},red:{active:`bg-gradient-to-r from-red-500 to-red-600 text-white shadow-md`,inactive:`text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20`},gray:{active:`bg-gradient-to-r from-gray-600 to-gray-700 text-white shadow-md`,inactive:`text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800`},violet:{active:`bg-gradient-to-r from-violet-500 to-violet-600 text-white shadow-md`,inactive:`text-violet-600 hover:bg-violet-50 dark:text-violet-400 dark:hover:bg-violet-900/20`}};return n[e]||n.blue};return(0,G.jsxs)(`aside`,{onMouseEnter:n,onMouseLeave:r,className:`
        flex flex-col h-screen transition-all duration-300 ease-in-out
        ${t?`w-72`:`w-20`}
        bg-white/90 backdrop-blur-sm border-r border-gray-200/50
        dark:bg-gray-900/90 dark:border-gray-700/50
        shadow-sm
        relative z-10
      `,children:[(0,G.jsx)(`div`,{className:`p-4 border-b border-gray-200/50 dark:border-gray-700/50`,children:(0,G.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`div`,{className:`
              relative overflow-hidden rounded-2xl border-2 border-white dark:border-gray-800
              ${t?`w-14 h-14`:`w-12 h-12`} 
              shadow-md
            `,children:[(0,G.jsx)(`img`,{src:u?f:e?.avatar||f,className:`w-full h-full object-cover`,alt:E(),onError:()=>d(!0),loading:`lazy`}),u&&(0,G.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center`,children:(0,G.jsx)(`span`,{className:`font-bold text-white text-lg`,children:T(E())})})]}),(0,G.jsx)(`div`,{className:`absolute -bottom-1 -right-1 w-3 h-3 bg-emerald-500 border-2 border-white dark:border-gray-900 rounded-full`})]}),t&&(0,G.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,G.jsx)(`h3`,{className:`font-semibold text-gray-900 dark:text-white text-sm`,children:E()}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mt-1`,children:[(0,G.jsx)(`span`,{className:`text-xs font-medium text-blue-600 dark:text-blue-400`,children:D()}),(0,G.jsxs)(`span`,{className:`text-xs text-gray-500 dark:text-gray-400`,children:[` `,O()]})]})]})]})}),(0,G.jsx)(`nav`,{className:`flex-1 px-2 py-4 overflow-y-auto space-y-4`,children:C.map(e=>(0,G.jsxs)(`div`,{className:`space-y-1`,children:[t&&e.items.length>0&&(0,G.jsx)(`div`,{className:`px-3 py-2`,children:(0,G.jsx)(`p`,{className:`text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`,children:e.title})}),(0,G.jsx)(`div`,{className:`space-y-1`,children:e.items.map(e=>{let n=l===e.key,r=te(e.color,n);return(0,G.jsx)(`div`,{className:`px-2`,children:(0,G.jsxs)(`button`,{onClick:()=>ee(e.key),className:`
                        w-full flex items-center gap-3 rounded-xl px-3 py-3 
                        transition-all duration-200
                        ${t?`justify-start`:`justify-center`}
                        ${n?r.active+` transform scale-[1.02]`:`bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800/50 `+r.inactive}
                        group relative
                      `,title:t?void 0:e.label,children:[(0,G.jsx)(`div`,{className:`
                        relative flex-shrink-0 transition-colors duration-200
                        ${n?`text-white`:`text-gray-500 dark:text-gray-400 group-hover:text-current`}
                        ${t?`w-5 h-5`:`w-6 h-6`}
                      `,children:(0,G.jsx)(e.icon,{})}),t&&(0,G.jsxs)(`div`,{className:`flex-1 text-left overflow-hidden`,children:[(0,G.jsx)(`span`,{className:`text-sm font-medium truncate`,children:e.label}),e.description&&(0,G.jsx)(`span`,{className:`text-xs text-gray-500 dark:text-gray-400 truncate block`,children:e.description})]}),!t&&(0,G.jsx)(`div`,{className:`absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-20 shadow-lg`,children:e.label}),n&&!t&&(0,G.jsx)(`div`,{className:`absolute -right-1 top-1/2 transform -translate-y-1/2 w-1 h-6 bg-current rounded-l`})]})},e.key)})})]},e.title))}),(0,G.jsxs)(`div`,{className:`p-4 border-t border-gray-200/50 dark:border-gray-700/50 mt-auto`,children:[(m||h||g)&&(0,G.jsxs)(`button`,{onClick:()=>ee(`create-task`),className:`
              w-full flex items-center gap-3 rounded-xl px-3 py-3 mb-3
              transition-all duration-200
              ${t?`justify-start`:`justify-center`}
              bg-gradient-to-r from-blue-600 to-blue-700 text-white
              hover:from-blue-700 hover:to-blue-800
              shadow-md hover:shadow-lg
              group
            `,title:t?void 0:`Create Task`,children:[(0,G.jsx)(`div`,{className:`
              flex-shrink-0
              ${t?`w-5 h-5`:`w-6 h-6`}
            `,children:(0,G.jsx)(ku,{})}),t&&(0,G.jsx)(`span`,{className:`flex-1 text-left text-sm font-medium`,children:`Create Task`})]}),(0,G.jsxs)(`button`,{onClick:()=>ee(`settings`),className:`
            w-full flex items-center gap-3 rounded-xl px-3 py-2.5 mb-3
            transition-all duration-200
            ${t?`justify-start`:`justify-center`}
            ${l===`settings`?`bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300`:`text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800/50`}
            group
          `,title:t?void 0:`Settings`,children:[(0,G.jsx)(`div`,{className:`
            flex-shrink-0
            ${l===`settings`?`text-gray-700 dark:text-gray-300`:`text-gray-500 dark:text-gray-400 group-hover:text-gray-700 dark:group-hover:text-gray-300`}
            ${t?`w-5 h-5`:`w-6 h-6`}
          `,children:(0,G.jsx)(Cu,{})}),t&&(0,G.jsx)(`span`,{className:`flex-1 text-left text-sm font-medium`,children:`Settings`})]}),(0,G.jsxs)(`button`,{onClick:()=>{o&&a&&window.confirm(`Are you sure you want to logout?`)&&a()},disabled:!o,className:`
            w-full flex items-center gap-3 rounded-xl px-3 py-2.5
            transition-all duration-200
            ${t?`justify-start`:`justify-center`}
            ${o?`text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20`:`opacity-50 cursor-not-allowed`}
            group
          `,title:t?void 0:`Logout`,children:[(0,G.jsx)(`div`,{className:`
            flex-shrink-0
            ${o?`text-red-500 group-hover:text-red-600`:`text-red-400`}
            ${t?`w-5 h-5`:`w-6 h-6`}
          `,children:(0,G.jsx)(Ou,{})}),t&&(0,G.jsxs)(`div`,{className:`flex-1 text-left`,children:[(0,G.jsx)(`span`,{className:`text-sm font-medium`,children:`Logout`}),(0,G.jsx)(`span`,{className:`text-xs text-gray-500 dark:text-gray-400 block`,children:e?.full_name||`User`})]})]}),t&&(0,G.jsx)(`div`,{className:`mt-4 pt-4 border-t border-gray-200/50 dark:border-gray-700/50`,children:(0,G.jsxs)(`div`,{className:`text-center`,children:[(0,G.jsx)(`div`,{className:`text-xs text-gray-500 dark:text-gray-400`,children:`v2.1.0  Professional Edition`}),(0,G.jsxs)(`div`,{className:`text-[10px] text-gray-400 dark:text-gray-500 mt-1`,children:[` `,new Date().getFullYear(),` Your Company`]})]})})]})]})}function du(){return(0,G.jsxs)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`rect`,{x:`3`,y:`3`,width:`7`,height:`9`,rx:`1`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`rect`,{x:`14`,y:`3`,width:`7`,height:`5`,rx:`1`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`rect`,{x:`14`,y:`12`,width:`7`,height:`9`,rx:`1`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`rect`,{x:`3`,y:`16`,width:`7`,height:`5`,rx:`1`,strokeLinecap:`round`,strokeLinejoin:`round`})]})}function fu(){return(0,G.jsxs)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`path`,{d:`M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`path`,{d:`M9 11l2 2 4-4`,strokeLinecap:`round`,strokeLinejoin:`round`})]})}function pu(){return(0,G.jsxs)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`circle`,{cx:`12`,cy:`12`,r:`10`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`polyline`,{points:`12 6 12 12 16 14`,strokeLinecap:`round`,strokeLinejoin:`round`})]})}function mu(){return(0,G.jsxs)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`rect`,{x:`3`,y:`4`,width:`18`,height:`18`,rx:`2`,ry:`2`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`path`,{d:`M16 2v4M8 2v4M3 10h18`,strokeLinecap:`round`,strokeLinejoin:`round`})]})}function hu(){return(0,G.jsxs)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`path`,{d:`M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`path`,{d:`M12 10v6M15 13l-3-3-3 3`,strokeLinecap:`round`,strokeLinejoin:`round`})]})}function gu(){return(0,G.jsxs)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`path`,{d:`M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`circle`,{cx:`9`,cy:`7`,r:`4`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`path`,{d:`M23 21v-2a4 4 0 00-3-3.87`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`path`,{d:`M16 3.13a4 4 0 010 7.75`,strokeLinecap:`round`,strokeLinejoin:`round`})]})}function _u(){return(0,G.jsx)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,G.jsx)(`path`,{d:`M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2zM22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z`,strokeLinecap:`round`,strokeLinejoin:`round`})})}function vu(){return(0,G.jsxs)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`path`,{d:`M3 3v18h18`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`path`,{d:`M18.7 8l-5.1 5.2-2.8-2.7L7 14.3`,strokeLinecap:`round`,strokeLinejoin:`round`})]})}function yu(){return(0,G.jsxs)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`path`,{d:`M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`path`,{d:`M14 2v6h6M16 13H8M16 17H8M10 9H8`,strokeLinecap:`round`,strokeLinejoin:`round`})]})}function bu(){return(0,G.jsx)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,G.jsx)(`path`,{d:`M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m-3 6.197v-1a6 6 0 016-6h0a6 6 0 016 6v1`,strokeLinecap:`round`,strokeLinejoin:`round`})})}function xu(){return(0,G.jsxs)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`path`,{d:`M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`path`,{d:`M14 2v6h6M16 13H8M16 17H8M10 9H8`,strokeLinecap:`round`,strokeLinejoin:`round`})]})}function Su(){return(0,G.jsx)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,G.jsx)(`path`,{d:`M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z`,strokeLinecap:`round`,strokeLinejoin:`round`})})}function Cu(){return(0,G.jsxs)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`circle`,{cx:`12`,cy:`12`,r:`3`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`path`,{d:`M19.4 15a1.65 1.65 0 00.33 1.82l.04.04a2 2 0 01-2.83 2.83l-.04-.04a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.04.04a2 2 0 01-2.83-2.83l.04-.04a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.04-.04a2 2 0 012.83-2.83l.04.04a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.04-.04a2 2 0 012.83 2.83l-.04.04a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z`,strokeLinecap:`round`,strokeLinejoin:`round`})]})}function wu(){return(0,G.jsxs)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`rect`,{x:`2`,y:`2`,width:`20`,height:`20`,rx:`2`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`path`,{d:`M2 8h20M8 21V8`,strokeLinecap:`round`,strokeLinejoin:`round`})]})}function Tu(){return(0,G.jsx)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,G.jsx)(`path`,{d:`M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z`,strokeLinecap:`round`,strokeLinejoin:`round`})})}function Eu(){return(0,G.jsx)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,G.jsx)(`path`,{d:`M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z`,strokeLinecap:`round`,strokeLinejoin:`round`})})}function Du(){return(0,G.jsxs)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`rect`,{x:`2`,y:`3`,width:`20`,height:`14`,rx:`2`,ry:`2`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`path`,{d:`M8 21h8M12 17v4`,strokeLinecap:`round`,strokeLinejoin:`round`})]})}function Ou(){return(0,G.jsxs)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`path`,{d:`M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`path`,{d:`M16 17l5-5-5-5`,strokeLinecap:`round`,strokeLinejoin:`round`}),(0,G.jsx)(`path`,{d:`M21 12H9`,strokeLinecap:`round`,strokeLinejoin:`round`})]})}function ku(){return(0,G.jsx)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,G.jsx)(`path`,{d:`M12 5v14M5 12h14`,strokeLinecap:`round`,strokeLinejoin:`round`})})}function Au({title:e=``,subtitle:t=``,showNotifications:n=!0}){let[r,i]=(0,w.useState)(null),[a,o]=(0,w.useState)(!1),[s,c]=(0,w.useState)([]),[l,u]=(0,w.useState)(0);(0,w.useEffect)(()=>{(async()=>{let{data:e}=await W.auth.getUser(),t=e?.user;if(!t)return;i(t);let{data:n}=await Hl(t.id,{limit:20});c(n||[]),u((n||[]).filter(e=>!e.is_read).length);let r=W.channel(`notif-topbar-${t.id}`).on(`postgres_changes`,{event:`*`,schema:`public`,table:`notifications`,filter:`user_id=eq.${t.id}`},e=>{e.eventType===`INSERT`&&(c(t=>[e.new,...t]),u(e=>e+1)),e.eventType===`UPDATE`&&(c(t=>t.map(t=>t.id===e.new.id?e.new:t)),u(e=>e-1))}).subscribe();return()=>{W.removeChannel(r)}})()},[]);async function d(){r&&(await Wl(r.id),c(e=>e.map(e=>({...e,is_read:!0}))),u(0))}return(0,G.jsxs)(`div`,{className:`flex items-center justify-between p-4 border-b bg-white/50`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`text-lg font-bold`,children:e}),t&&(0,G.jsx)(`div`,{className:`text-sm text-slate-500`,children:t})]}),(0,G.jsx)(`div`,{className:`flex items-center gap-4`,children:n&&(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`button`,{onClick:()=>o(e=>!e),className:`relative p-2 rounded hover:bg-slate-100`,children:[(0,G.jsxs)(`svg`,{className:`w-5 h-5`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.5`,children:[(0,G.jsx)(`path`,{d:`M15 17h5l-1.4-1.4A2 2 0 0118 14.2V11a6 6 0 10-12 0v3.2a2 2 0 01-.6 1.4L4 17h5`}),(0,G.jsx)(`path`,{d:`M9.5 20a2.5 2.5 0 005 0`})]}),l>0&&(0,G.jsx)(`span`,{className:`absolute -top-1 -right-1 bg-rose-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full`,children:l})]}),a&&(0,G.jsxs)(`div`,{className:`absolute right-0 mt-2 w-80 bg-white rounded shadow-lg border z-50`,children:[(0,G.jsxs)(`div`,{className:`p-3 border-b flex items-center justify-between`,children:[(0,G.jsx)(`div`,{className:`font-semibold`,children:`Notifications`}),(0,G.jsx)(`button`,{onClick:d,className:`text-xs text-slate-500`,children:`Mark all read`})]}),(0,G.jsx)(`div`,{className:`max-h-64 overflow-auto p-2 space-y-2`,children:s.length===0?(0,G.jsx)(`div`,{className:`text-sm text-slate-500 p-3`,children:`No notifications`}):s.map(e=>(0,G.jsxs)(`a`,{href:e.link||`#`,className:`block p-2 rounded ${e.is_read?`bg-white`:`bg-slate-50`} hover:bg-slate-100`,onClick:()=>o(!1),children:[(0,G.jsx)(`div`,{className:`text-sm font-medium`,children:e.message}),(0,G.jsx)(`div`,{className:`text-xs text-slate-400`,children:new Date(e.created_at).toLocaleString()})]},e.id))})]})]})})]})}function ju(){let[e,t]=(0,w.useState)(null),[n,r]=(0,w.useState)(!0),[i,a]=(0,w.useState)([]),[o,s]=(0,w.useState)([]),[c,l]=(0,w.useState)([]),[u,d]=(0,w.useState)([]),[f,p]=(0,w.useState)([]),[m,h]=(0,w.useState)(!1),g=e=>{if(!e)return`-`;try{return new Date(e).toLocaleString(`en-PK`,{timeZone:`Asia/Karachi`,month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`})}catch{return e}},_=(e,t)=>{if(!e)return`Absent`;if(e.status&&String(e.status).toLowerCase()===`leave`)return`Leave`;let n=e.check_in;if(!n)return`Absent`;let r=t?.start_time||`09:00`,i=Number(t?.grace_minutes??0),a=e=>{if(!e||typeof e!=`string`)return null;if(/^\d{1,2}:\d{2}$/.test(e.trim())){let[t,n]=e.trim().split(`:`).map(e=>Number(e));return`${String(t).padStart(2,`0`)}:${String(n).padStart(2,`0`)}`}try{let t=new Date(e);if(!isNaN(t.getTime()))return`${String(t.getHours()).padStart(2,`0`)}:${String(t.getMinutes()).padStart(2,`0`)}`}catch{}return null},o=a(r)||`09:00`,s=a(n);if(!s)return`Absent`;let[c,l]=o.split(`:`).map(Number),u=c*60+l+i,[d,f]=s.split(`:`).map(Number);return d*60+f>u?`Late`:`Present`};(0,w.useEffect)(()=>{v()},[]);async function v(){let{data:e}=await W.auth.getUser(),n=e?.user;if(!n)return window.location.href=`/login`;let{data:i}=await W.from(`profiles`).select(`*`).eq(`id`,n.id).single();if(!i||i.role!==`manager`)return window.location.href=`/login`;t(i),await Promise.all([y(),b(),x(),S(),C()]),r(!1)}async function y(){let{data:e}=await W.from(`profiles`).select(`id, full_name, emp_id, job_type`).eq(`role`,`employee`);a(e||[])}async function b(){let{data:e}=await W.from(`tasks`).select(`*`).order(`created_at`,{ascending:!1});s(e||[])}async function x(){try{let{data:e}=await W.from(`task_events`).select(`*`).order(`created_at`,{ascending:!1}).limit(200);if(e)l(e||[]);else{let{data:e}=await W.from(`task_submissions`).select(`*`).order(`created_at`,{ascending:!1}).limit(200);l(e||[])}}catch{console.log(`Using task_submissions as events fallback`);let{data:e}=await W.from(`task_submissions`).select(`*`).order(`created_at`,{ascending:!1}).limit(200);l(e||[])}}async function S(){let{data:e}=await W.from(`attendance`).select(`*, profiles(full_name, emp_id)`).order(`date`,{ascending:!1}).limit(400);d(e||[])}async function C(){try{let{data:e}=await W.from(`task_metrics`).select(`*`).order(`updated_at`,{ascending:!1});p(e?e||[]:o.map(e=>({id:e.id,project_id:e.project_id,status:e.status,completion_rate:e.progress||0,updated_at:e.updated_at||e.created_at})))}catch{p(o.map(e=>({id:e.id,project_id:e.project_id,status:e.status,completion_rate:e.progress||0,updated_at:e.updated_at||e.created_at})))}}let T=(0,w.useMemo)(()=>{let e=new Date;return o.filter(t=>{let n=(new Date(t.deadline)-e)/(1e3*60*60);return t.status===`In Progress`&&(n<48||t.revisions>2||t.progress<30)})},[o]),E=(0,w.useMemo)(()=>{let e={};return i.forEach(t=>e[t.id]={...t,tasks:0}),o.forEach(t=>{t.assigned_to&&e[t.assigned_to]&&(e[t.assigned_to].tasks+=1)}),Object.values(e).sort((e,t)=>t.tasks-e.tasks)},[o,i]),D=(0,w.useMemo)(()=>{let e={};return u.forEach(t=>{let n=t.employee_id;e[n]||(e[n]={present:0,late:0,absent:0,leave:0,total:0}),e[n].total++;let r=_(t,{start_time:`09:00`,grace_minutes:0});r===`Present`?e[n].present++:r===`Late`?e[n].late++:r===`Leave`?e[n].leave++:e[n].absent++}),e},[u]),O=(0,w.useMemo)(()=>{let e={};return i.forEach(t=>{e[t.id]={...t,submissions:0,revisions:0,completed:0,score:0}}),o.forEach(t=>{t.assigned_to&&e[t.assigned_to]&&(t.status===`Completed`&&e[t.assigned_to].completed++,t.revisions&&t.revisions>0&&(e[t.assigned_to].revisions+=t.revisions))}),c.forEach(t=>{let n=t.event_type||t.status,r=t.actor_id||t.employee_id;(n===`submission_uploaded`||n===`submitted`)&&r&&e[r]&&e[r].submissions++}),Object.values(e).forEach(e=>{e.score=e.completed*10+e.submissions*2-e.revisions*3}),Object.values(e).sort((e,t)=>t.score-e.score)},[i,o,c]);return n?(0,G.jsx)(`div`,{className:`p-6 text-slate-600`,children:`Loading Analytics`}):(0,G.jsxs)(`div`,{className:`min-h-screen flex bg-gradient-to-br from-white to-slate-100 text-slate-800`,children:[(0,G.jsx)(uu,{profile:e,isExpanded:m,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),onNavigate:e=>{e===`dashboard`?window.location.href=`/manager/dashboard`:e===`analytics`&&(window.location.href=`/manager/analytics`)},onLogout:async()=>{await W.auth.signOut(),window.location.href=`/login`}}),(0,G.jsxs)(`div`,{className:`flex-1 ml-[80px]`,children:[(0,G.jsx)(Au,{title:`Analytics Dashboard`,subtitle:`Insights & Metrics`}),(0,G.jsxs)(`main`,{className:`p-6 space-y-10`,children:[(0,G.jsxs)(Mu,{title:`Task Bottlenecks`,count:T.length,children:[T.length===0&&(0,G.jsx)(Nu,{text:`No active bottlenecks.`}),T.map(e=>(0,G.jsxs)(`div`,{className:`p-4 bg-white rounded-xl border shadow-sm`,children:[(0,G.jsxs)(`div`,{className:`font-semibold`,children:[e.project_id,`  `,e.client_name]}),(0,G.jsxs)(`div`,{className:`text-sm text-slate-600`,children:[e.job_type,`  `,e.status]}),(0,G.jsxs)(`div`,{className:`mt-1 text-xs text-slate-500`,children:[`Deadline: `,g(e.deadline)]})]},e.id))]}),(0,G.jsx)(Mu,{title:`Employee Workload`,count:E.length,children:(0,G.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4`,children:E.map(e=>(0,G.jsxs)(`div`,{className:`p-4 bg-white rounded-xl border shadow-sm`,children:[(0,G.jsx)(`div`,{className:`font-semibold`,children:e.full_name}),(0,G.jsx)(`div`,{className:`text-sm text-slate-600`,children:e.emp_id}),(0,G.jsxs)(`div`,{className:`mt-2 text-sm`,children:[`Active Tasks: `,(0,G.jsx)(`span`,{className:`font-bold`,children:e.tasks})]})]},e.id))})}),(0,G.jsx)(Mu,{title:`Attendance Analytics`,count:Object.keys(D).length,children:(0,G.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4`,children:Object.entries(D).map(([e,t])=>{let n=i.find(t=>t.id===e);return n?(0,G.jsxs)(`div`,{className:`p-4 bg-white rounded-xl border shadow-sm`,children:[(0,G.jsx)(`div`,{className:`font-semibold`,children:n.full_name}),(0,G.jsx)(`div`,{className:`text-sm text-slate-600`,children:n.emp_id}),(0,G.jsxs)(`div`,{className:`mt-2 text-xs text-slate-500`,children:[`Present: `,t.present,(0,G.jsx)(`br`,{}),`Late: `,t.late,(0,G.jsx)(`br`,{}),`Absent: `,t.absent,(0,G.jsx)(`br`,{}),`Leave: `,t.leave,(0,G.jsx)(`br`,{}),`Total: `,t.total]})]},e):null})})}),(0,G.jsx)(Mu,{title:`Employee Performance Ranking`,count:O.length,children:(0,G.jsx)(`div`,{className:`space-y-3`,children:O.map((e,t)=>(0,G.jsxs)(`div`,{className:`p-4 rounded-xl bg-white border shadow-sm flex justify-between`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`font-semibold`,children:[`#`,t+1,`  `,e.full_name]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:e.emp_id})]}),(0,G.jsxs)(`div`,{className:`text-right text-sm`,children:[(0,G.jsxs)(`div`,{children:[`Completed: `,e.completed]}),(0,G.jsxs)(`div`,{children:[`Submissions: `,e.submissions]}),(0,G.jsxs)(`div`,{children:[`Revisions: `,e.revisions]}),(0,G.jsxs)(`div`,{className:`font-bold mt-1`,children:[`Score: `,e.score]})]})]},e.id))})})]})]})]})}function Mu({title:e,count:t,children:n}){return(0,G.jsxs)(`section`,{className:`bg-white/90 backdrop-blur-xl border border-slate-200 rounded-xl p-6 shadow`,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,G.jsx)(`h2`,{className:`text-xl font-bold`,children:e}),(0,G.jsxs)(`span`,{className:`text-sm text-slate-600`,children:[t,` items`]})]}),n]})}function Nu({text:e=`No data.`}){return(0,G.jsx)(`div`,{className:`p-4 text-sm text-slate-500 text-center`,children:e})}function Pu({profile:e,isExpanded:t,onMouseEnter:n,onMouseLeave:r,onNavigate:i,onLogout:a,canLogout:o=!0,user:s,userRole:c,sidebarNotifications:l=[],onSidebarNotificationClick:u,showNotificationHistory:d,setShowNotificationHistory:f,markAllNotificationsAsRead:p}){let[m,h]=(0,w.useState)(!1),[g,_]=(0,w.useState)(null),v=[{key:`dashboard`,label:`Dashboard`,icon:zu},{key:`tasks`,label:`My Tasks`,icon:Bu},{key:`attendance`,label:`Attendance`,icon:Vu},{key:`calendar`,label:`Calendar`,icon:Hu},{key:`sales`,label:`Sales`,icon:Uu},{key:`files`,label:`Company Drive`,icon:Ku},{key:`settings`,label:`Settings`,icon:Wu}],y=l.filter(e=>!e.read).length,b=()=>{f?f(!d):h(!m)},x=d===void 0?m:d,S=e=>{_(e),e.read===!1&&u&&u(e)},C=()=>{p&&p()},T=()=>{_(null)},E=e=>new Date(e).toLocaleDateString(`en-US`,{weekday:`long`,year:`numeric`,month:`long`,day:`numeric`,hour:`2-digit`,minute:`2-digit`}),D=e=>{switch(e){case`task_assigned`:case`task_completed`:case`task_approved`:case`task_revision`:return(0,G.jsx)(Yu,{});case`attendance`:return(0,G.jsx)(Vu,{});case`announcement`:return(0,G.jsx)(Xu,{});case`file_uploaded`:return(0,G.jsx)(Ku,{});case`sale_recorded`:return(0,G.jsx)(Uu,{});default:return(0,G.jsx)(qu,{})}};return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`aside`,{onMouseEnter:n,onMouseLeave:r,className:`
          flex flex-col min-h-screen transition-all duration-300 
          ${t?`w-64`:`w-16`}
          bg-white/50 backdrop-blur-xl border-r border-white/40 shadow-lg
          dark:bg-black/30 dark:border-white/10
          relative z-10
        `,children:[(0,G.jsx)(`div`,{className:`p-4`,children:(0,G.jsx)(`div`,{className:`
              rounded-xl transition-all duration-300
              ${t?`p-4`:`p-2`} 
              bg-white/60 dark:bg-white/5 backdrop-blur-xl
              border border-white/40 dark:border-white/10 shadow-md
            `,children:(0,G.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,G.jsx)(`img`,{src:e?.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(e?.full_name||`User`)}&background=0D9488&color=ffffff`,className:`
                  rounded-full object-cover border 
                  ${t?`w-16 h-16`:`w-10 h-10`}
                  border-white/60 dark:border-white/10
                `,alt:e?.full_name||`User`}),t&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`p`,{className:`font-semibold text-slate-800 dark:text-white truncate max-w-[160px]`,children:e?.full_name||`User`}),(0,G.jsx)(`p`,{className:`text-sm text-blue-600 dark:text-cyan-300`,children:e?.emp_id||e?.email||`ID`}),(0,G.jsx)(`p`,{className:`text-xs text-slate-600 dark:text-slate-400`,children:e?.job_type||c||`Employee`})]})]})})}),(0,G.jsx)(`nav`,{className:`flex-1 px-2 mt-2`,children:(0,G.jsx)(`ul`,{className:`space-y-1`,children:v.map(e=>(0,G.jsx)(`li`,{children:(0,G.jsxs)(`button`,{onClick:()=>i(e.key),className:`
                    w-full flex items-center gap-3 rounded-lg p-3 transition-all
                    hover:bg-white/50 dark:hover:bg-white/10
                    ${t?`justify-start`:`justify-center`}
                    text-slate-700 dark:text-slate-200
                    active:scale-95
                    relative group
                  `,children:[(0,G.jsx)(`span`,{className:`text-blue-600 dark:text-cyan-300`,children:(0,G.jsx)(e.icon,{})}),t&&(0,G.jsx)(`span`,{children:e.label}),!t&&(0,G.jsx)(`div`,{className:`absolute left-full ml-2 px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50`,children:e.label})]})},e.key))})}),t&&(0,G.jsxs)(`div`,{className:`px-3 py-2`,children:[(0,G.jsxs)(`button`,{onClick:b,className:`
                w-full flex items-center gap-3 rounded-lg p-3 transition-all
                hover:bg-white/50 dark:hover:bg-white/10
                ${t?`justify-start`:`justify-center`}
                text-slate-700 dark:text-slate-200
                active:scale-95 mb-2
              `,children:[(0,G.jsxs)(`span`,{className:`text-blue-600 dark:text-cyan-300 relative`,children:[(0,G.jsx)(qu,{}),y>0&&(0,G.jsx)(`span`,{className:`absolute -top-2 -right-2 w-4 h-4 bg-red-500 rounded-full text-xs text-white flex items-center justify-center`,children:y>9?`9+`:y})]}),t&&(0,G.jsxs)(`div`,{className:`flex justify-between items-center flex-1`,children:[(0,G.jsx)(`span`,{children:`Notifications`}),y>0&&(0,G.jsx)(`span`,{className:`text-xs bg-red-500 text-white px-2 py-0.5 rounded-full`,children:y})]})]}),x&&t&&(0,G.jsxs)(`div`,{className:`mt-2 rounded-lg bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl border border-white/40 dark:border-white/10 shadow-xl`,children:[(0,G.jsx)(`div`,{className:`p-3 border-b border-white/30 dark:border-white/10`,children:(0,G.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,G.jsx)(`h4`,{className:`text-sm font-semibold text-slate-800 dark:text-white`,children:`Recent Notifications`}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[y>0&&p&&(0,G.jsx)(`button`,{onClick:C,className:`text-xs text-blue-600 dark:text-cyan-300 hover:text-blue-800 dark:hover:text-cyan-100 transition-colors`,children:`Mark all read`}),(0,G.jsx)(`button`,{onClick:b,className:`text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 text-sm`,children:``})]})]})}),(0,G.jsx)(`div`,{className:`max-h-72 overflow-y-auto p-2`,children:l.length===0?(0,G.jsx)(`div`,{className:`text-center py-4 text-sm text-slate-500 dark:text-slate-400`,children:`No recent notifications`}):(0,G.jsx)(`div`,{className:`space-y-2`,children:l.map(e=>(0,G.jsx)(`div`,{onClick:()=>S(e),className:`
                            p-3 rounded-lg cursor-pointer transition-all group
                            ${e.read?`bg-gray-50/50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-600/50 border-l-4 border-transparent`:`bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-cyan-500 hover:bg-blue-100 dark:hover:bg-blue-900/30`}
                            hover:shadow-sm
                          `,children:(0,G.jsxs)(`div`,{className:`flex gap-3 items-start`,children:[(0,G.jsx)(`div`,{className:`mt-1 ${e.read?`text-slate-400 dark:text-slate-500`:`text-blue-500 dark:text-cyan-400`}`,children:D(e.type)}),(0,G.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-start gap-2 mb-1`,children:[(0,G.jsx)(`div`,{className:`text-sm font-medium text-slate-800 dark:text-white truncate`,children:e.title}),!e.read&&(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-blue-500 dark:bg-cyan-400 flex-shrink-0 mt-1`})]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-600 dark:text-slate-300 line-clamp-2`,children:e.message}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 dark:text-slate-400 mt-1`,children:Fu(e.created_at)})]})]})},e.id))})}),l.length>0&&(0,G.jsx)(`div`,{className:`p-2 border-t border-white/30 dark:border-white/10 text-center`,children:(0,G.jsxs)(`div`,{className:`text-xs text-slate-500 dark:text-slate-400`,children:[l.length,` notifications  Click to view details`]})})]})]}),!t&&(0,G.jsx)(`div`,{className:`px-2 py-3 flex justify-center`,children:(0,G.jsxs)(`button`,{onClick:b,className:`relative p-2 rounded-lg hover:bg-white/30 transition-colors group`,title:`Notifications`,children:[(0,G.jsx)(qu,{}),y>0&&(0,G.jsx)(`span`,{className:`absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-xs text-white flex items-center justify-center`,children:y>9?`9+`:y}),(0,G.jsxs)(`div`,{className:`absolute left-full ml-2 px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50`,children:[`Notifications`,y>0&&` (${y} unread)`]})]})}),(0,G.jsx)(`div`,{className:`px-3 py-4 border-t border-white/40 dark:border-white/10 mt-auto`,children:(0,G.jsxs)(`button`,{onClick:()=>o&&a(),disabled:!o,className:`
              w-full flex items-center gap-3 p-3 rounded-lg font-semibold
              ${o?``:`opacity-40 cursor-not-allowed`}
              text-red-600 dark:text-red-400
              hover:bg-red-50 dark:hover:bg-red-900/30
              transition-all active:scale-95
              ${t?`justify-start`:`justify-center`}
              relative group
            `,title:o?`Logout`:`Please check out first`,children:[(0,G.jsx)(Gu,{}),t&&(0,G.jsx)(`span`,{children:`Logout`}),!t&&!o&&(0,G.jsx)(`div`,{className:`absolute left-full ml-2 px-2 py-1 bg-red-600 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50`,children:`Please check out first`})]})})]}),g&&(0,G.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm`,children:(0,G.jsxs)(`div`,{className:`bg-white/95 dark:bg-gray-800/95 rounded-xl shadow-2xl max-w-md w-full max-h-[80vh] overflow-hidden backdrop-blur-xl`,children:[(0,G.jsx)(`div`,{className:`p-6 border-b border-slate-200 dark:border-slate-700`,children:(0,G.jsxs)(`div`,{className:`flex justify-between items-start`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,G.jsx)(`div`,{className:`p-2 rounded-lg ${Ru(g.type)}`,children:D(g.type)}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h3`,{className:`text-lg font-bold text-slate-800 dark:text-white`,children:g.title}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 dark:text-slate-400 mt-1`,children:E(g.created_at)})]})]}),(0,G.jsx)(`button`,{onClick:T,className:`text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700`,children:(0,G.jsx)(Ju,{})})]})}),(0,G.jsxs)(`div`,{className:`p-6 overflow-y-auto max-h-[50vh]`,children:[(0,G.jsxs)(`div`,{className:`mb-4`,children:[(0,G.jsx)(`div`,{className:`text-sm font-medium text-slate-600 dark:text-slate-300 mb-2`,children:`Message`}),(0,G.jsx)(`div`,{className:`p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg`,children:(0,G.jsx)(`p`,{className:`text-slate-800 dark:text-slate-200 whitespace-pre-wrap`,children:g.message})})]}),(0,G.jsxs)(`div`,{className:`space-y-3 text-sm`,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between py-2 border-t border-slate-200 dark:border-slate-700`,children:[(0,G.jsx)(`span`,{className:`text-slate-600 dark:text-slate-400`,children:`Type`}),(0,G.jsx)(`span`,{className:`px-2 py-1 rounded-full text-xs ${Lu(g.type)}`,children:Iu(g.type)})]}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between py-2 border-t border-slate-200 dark:border-slate-700`,children:[(0,G.jsx)(`span`,{className:`text-slate-600 dark:text-slate-400`,children:`Status`}),(0,G.jsx)(`span`,{className:`px-2 py-1 rounded-full text-xs ${g.read?`bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300`:`bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300`}`,children:g.read?`Read`:`Unread`})]}),g.task_id&&(0,G.jsxs)(`div`,{className:`flex items-center justify-between py-2 border-t border-slate-200 dark:border-slate-700`,children:[(0,G.jsx)(`span`,{className:`text-slate-600 dark:text-slate-400`,children:`Task ID`}),(0,G.jsx)(`span`,{className:`font-mono text-sm`,children:g.task_id})]}),g.sale_id&&(0,G.jsxs)(`div`,{className:`flex items-center justify-between py-2 border-t border-slate-200 dark:border-slate-700`,children:[(0,G.jsx)(`span`,{className:`text-slate-600 dark:text-slate-400`,children:`Sale ID`}),(0,G.jsx)(`span`,{className:`font-mono text-sm`,children:g.sale_id})]}),g.file_id&&(0,G.jsxs)(`div`,{className:`flex items-center justify-between py-2 border-t border-slate-200 dark:border-slate-700`,children:[(0,G.jsx)(`span`,{className:`text-slate-600 dark:text-slate-400`,children:`File ID`}),(0,G.jsx)(`span`,{className:`font-mono text-sm`,children:g.file_id})]})]})]}),(0,G.jsxs)(`div`,{className:`p-6 border-t border-slate-200 dark:border-slate-700 flex gap-3`,children:[(0,G.jsx)(`button`,{onClick:T,className:`flex-1 py-2 px-4 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors`,children:`Close`}),g.task_id&&(0,G.jsx)(`button`,{onClick:()=>{T(),i&&i(`tasks`)},className:`flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors`,children:`View Task`}),g.file_id&&(0,G.jsx)(`button`,{onClick:()=>{T(),i&&i(`files`)},className:`flex-1 py-2 px-4 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors`,children:`View File`}),g.sale_id&&(0,G.jsx)(`button`,{onClick:()=>{T(),i&&i(`sales`)},className:`flex-1 py-2 px-4 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors`,children:`View Sale`})]})]})})]})}var Fu=e=>{if(!e)return``;let t=new Date(e),n=new Date-t,r=Math.floor(n/6e4),i=Math.floor(n/36e5),a=Math.floor(n/864e5);return r<60?`${r}m ago`:i<24?`${i}h ago`:a<7?`${a}d ago`:t.toLocaleDateString([],{month:`short`,day:`numeric`})},Iu=e=>({task_assigned:`Task Assigned`,task_completed:`Task Completed`,task_approved:`Task Approved`,task_revision:`Revision Required`,attendance:`Attendance`,announcement:`Announcement`,file_uploaded:`File Uploaded`,sale_recorded:`Sale Recorded`,system:`System`})[e]||e.replace(`_`,` `),Lu=e=>({task_assigned:`bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300`,task_completed:`bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300`,task_approved:`bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300`,task_revision:`bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300`,attendance:`bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-300`,announcement:`bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300`,file_uploaded:`bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300`,sale_recorded:`bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300`,system:`bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300`})[e]||`bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300`,Ru=e=>({task_assigned:`bg-blue-100 text-blue-600`,task_completed:`bg-green-100 text-green-600`,task_approved:`bg-purple-100 text-purple-600`,task_revision:`bg-yellow-100 text-yellow-600`,attendance:`bg-cyan-100 text-cyan-600`,announcement:`bg-orange-100 text-orange-600`,file_uploaded:`bg-indigo-100 text-indigo-600`,sale_recorded:`bg-green-100 text-green-600`,system:`bg-gray-100 text-gray-600`})[e]||`bg-gray-100 text-gray-600`;function zu(){return(0,G.jsxs)(`svg`,{width:`18`,height:`18`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.7`,children:[(0,G.jsx)(`path`,{d:`M3 11.5L12 4l9 7.5`}),(0,G.jsx)(`path`,{d:`M5 21h14v-7.5`}),(0,G.jsx)(`path`,{d:`M9 21V12h6v9`})]})}function Bu(){return(0,G.jsx)(`svg`,{width:`18`,height:`18`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.7`,children:(0,G.jsx)(`path`,{d:`M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01`})})}function Vu(){return(0,G.jsxs)(`svg`,{width:`18`,height:`18`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.7`,children:[(0,G.jsx)(`circle`,{cx:`12`,cy:`12`,r:`9`}),(0,G.jsx)(`path`,{d:`M12 7v5l3 2`})]})}function Hu(){return(0,G.jsxs)(`svg`,{width:`18`,height:`18`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.7`,children:[(0,G.jsx)(`rect`,{x:`3`,y:`5`,width:`18`,height:`16`,rx:`2`}),(0,G.jsx)(`path`,{d:`M16 3v4M8 3v4M3 11h18`})]})}function Uu(){return(0,G.jsxs)(`svg`,{width:`18`,height:`18`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.7`,children:[(0,G.jsx)(`path`,{d:`M12 8c0-2.21-1.79-4-4-4S4 5.79 4 8s1.79 4 4 4 4-1.79 4-4z`}),(0,G.jsx)(`path`,{d:`M4 8v1a4 4 0 008 0v-1`}),(0,G.jsx)(`path`,{d:`M8 11v3`}),(0,G.jsx)(`path`,{d:`M15 8a7 7 0 01-7 7`}),(0,G.jsx)(`path`,{d:`M19 8a11 11 0 01-11 11`})]})}function Wu(){return(0,G.jsxs)(`svg`,{width:`18`,height:`18`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.7`,children:[(0,G.jsx)(`circle`,{cx:`12`,cy:`12`,r:`3`}),(0,G.jsx)(`path`,{d:`M19.4 15a1.65 1.65 0 00.33 1.82l.04.04a2 2 0 01-2.8 2.8l-.04-.04a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.5V21a2 2 0 01-4 0v-.09a1.65 1.65 0 00-1-1.5 1.65 1.65 0 00-1.82.33l-.04.04a2 2 0 01-2.83-2.84l.04-.04A1.65 1.65 0 004.6 15a1.65 1.65 0 00-1.5-1H3a2 2 0 010-4h.1a1.65 1.65 0 001.5-1 1.65 1.65 0 00-.34-1.82L4 6`})]})}function Gu(){return(0,G.jsxs)(`svg`,{width:`18`,height:`18`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.7`,children:[(0,G.jsx)(`path`,{d:`M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4`}),(0,G.jsx)(`path`,{d:`M16 17l5-5-5-5`}),(0,G.jsx)(`path`,{d:`M21 12H9`})]})}function Ku(){return(0,G.jsxs)(`svg`,{width:`18`,height:`18`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.7`,children:[(0,G.jsx)(`path`,{d:`M3 17l5-5 5 5 5-5`}),(0,G.jsx)(`path`,{d:`M21 12h-4l-3 9-3-9H3`}),(0,G.jsx)(`path`,{d:`M12 3l5 5h-5V3z`})]})}function qu(){return(0,G.jsxs)(`svg`,{width:`18`,height:`18`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.7`,children:[(0,G.jsx)(`path`,{d:`M18 8A6 6 0 106 8c0 7-3 9-3 9h18s-3-2-3-9`}),(0,G.jsx)(`path`,{d:`M13.73 21a2 2 0 01-3.46 0`})]})}function Ju(){return(0,G.jsxs)(`svg`,{width:`20`,height:`20`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`path`,{d:`M18 6L6 18`}),(0,G.jsx)(`path`,{d:`M6 6l12 12`})]})}function Yu(){return(0,G.jsxs)(`svg`,{width:`20`,height:`20`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.7`,children:[(0,G.jsx)(`path`,{d:`M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z`}),(0,G.jsx)(`path`,{d:`M14 2v6h6`}),(0,G.jsx)(`path`,{d:`M16 13H8`}),(0,G.jsx)(`path`,{d:`M16 17H8`}),(0,G.jsx)(`path`,{d:`M10 9H8`})]})}function Xu(){return(0,G.jsxs)(`svg`,{width:`20`,height:`20`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.7`,children:[(0,G.jsx)(`path`,{d:`M19 4a2 2 0 00-2-2H3a2 2 0 00-2 2v12a2 2 0 002 2h14a2 2 0 002-2V4z`}),(0,G.jsx)(`path`,{d:`M21 12v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4`}),(0,G.jsx)(`path`,{d:`M12 1v22`})]})}function Zu({task:e,onClick:t}){let n={Approved:`bg-emerald-600 text-white`,Completed:`bg-emerald-700 text-white`,Delivered:`bg-purple-600 text-white`,"Revision Required":`bg-amber-400 text-black`,"In Progress":`bg-blue-500 text-white`,Pending:`bg-rose-500 text-white`,Assigned:`bg-slate-600 text-white`}[e.status]||`bg-slate-500 text-white`;return(0,G.jsxs)(`div`,{onClick:t,className:`\r
        p-4 rounded-xl transition transform hover:scale-[1.01] cursor-pointer\r
\r
        bg-blue-100/40 backdrop-blur-xl border border-white/40 shadow-md\r
\r
        dark:bg-white/5 dark:border-white/10\r
      `,children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-start`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`p`,{className:`text-slate-600 dark:text-slate-300 text-sm font-medium`,children:e.client_name}),(0,G.jsx)(`h3`,{className:`text-lg font-bold text-slate-800 dark:text-white`,children:e.project_id})]}),(0,G.jsx)(`div`,{className:`px-2 py-1 rounded-full text-xs font-medium ${n}`,children:e.status})]}),(0,G.jsx)(`p`,{className:`mt-3 text-sm text-slate-700 dark:text-slate-300 line-clamp-2`,children:e.description||`No description provided.`}),(0,G.jsxs)(`div`,{className:`mt-3 space-y-1 text-xs text-slate-700 dark:text-slate-300`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between`,children:[(0,G.jsx)(`span`,{className:`font-semibold`,children:`Job Type:`}),(0,G.jsx)(`span`,{children:e.job_type||`N/A`})]}),(0,G.jsxs)(`div`,{className:`flex justify-between`,children:[(0,G.jsx)(`span`,{className:`font-semibold`,children:`Assigned To:`}),(0,G.jsx)(`span`,{children:e.assigned_to_empid||`Unassigned`})]})]}),(0,G.jsxs)(`div`,{className:`mt-4`,children:[(0,G.jsx)(`div`,{className:`w-full h-2 bg-white/40 dark:bg-white/10 rounded-full`,children:(0,G.jsx)(`div`,{className:`h-2 rounded-full`,style:{width:`${e.progress||0}%`,background:`linear-gradient(90deg, rgba(59,130,246,1), rgba(14,165,233,1))`}})}),(0,G.jsxs)(`div`,{className:`flex justify-between text-xs mt-2 text-slate-600 dark:text-slate-300`,children:[(0,G.jsxs)(`span`,{children:[e.progress||0,`%`]}),(0,G.jsxs)(`span`,{children:[`Due: `,e.deadline]})]})]})]})}var Qu=u(_(),1),$u={present:`bg-[#1B5E20]`,absent:`bg-[#B71C1C]`,late:`bg-[#E65100]`,leave:`bg-[#FBC02D]`,checkinOnly:`ring-2 ring-[#0288D1] bg-transparent`,task_deadline:`bg-[#0D47A1]`,task_assigned:`ring-2 ring-[#424242] bg-white`,task_completed:`bg-[#4E342E]`,task_revision:`bg-[#8E24AA]`,submitted:`bg-[#00C853]`,late_submission:`bg-[#C51162]`,event:`bg-[#311B92]`};function ed(e){return String(e).padStart(2,`0`)}function td(e,t,n){return`${e}-${ed(t)}-${ed(n)}`}function nd({attendance:e={},tasks:t={},submissions:n={},events:r={},initialYear:i,initialMonth:a,showHeatmapToggle:o=!0,onDayClick:s}){let c=new Date,[l,u]=(0,w.useState)(i??c.getFullYear()),[d,f]=(0,w.useState)(a?a-1:c.getMonth()),[p,m]=(0,w.useState)(null),[h,g]=(0,w.useState)(!1),[_,v]=(0,w.useState)(null),[y,b]=(0,w.useState)(null),x=(0,w.useRef)(null),S=(0,w.useRef)(null);(0,w.useEffect)(()=>{let e=document.getElementById(`calendar-tooltip-root`);e||(e=document.createElement(`div`),e.id=`calendar-tooltip-root`,document.body.appendChild(e)),S.current=e},[]),(0,w.useEffect)(()=>{function e(e){e.key===`ArrowLeft`?ee():e.key===`ArrowRight`?te():e.key===`Enter`?y&&ne(y):e.key}return window.addEventListener(`keydown`,e),()=>window.removeEventListener(`keydown`,e)},[y,d,l]);let C=new Date(l,d,1).getDay(),T=new Date(l,d+1,0).getDate(),E=new Date(l,d,1).toLocaleString(`default`,{month:`long`}),D=(0,w.useMemo)(()=>{let i={},a=(e,t=1)=>i[e]=(i[e]||0)+t;return Object.keys(e).forEach(e=>a(e,1)),Object.keys(t).forEach(e=>a(e,(t[e]||[]).length)),Object.keys(n).forEach(e=>a(e,(n[e]||[]).length)),Object.keys(r).forEach(e=>a(e,(r[e]||[]).length)),i},[e,t,n,r]),O=Math.max(1,...Object.values(D));function ee(){d===0?(f(11),u(e=>e-1)):f(e=>e-1),b(null)}function te(){d===11?(f(0),u(e=>e+1)):f(e=>e+1),b(null)}function ne(e){let t=e;typeof e==`number`&&(t=td(l,d+1,e)),m(t),s?.(t)}function k(i){let a=td(l,d+1,i),o=[],s=e[a];return s&&o.push({type:`attendance`,status:(s.status||`present`).toLowerCase(),meta:s}),(t[a]||[]).forEach(e=>o.push({type:`task`,status:(e.status||`assigned`).toLowerCase(),meta:e})),(n[a]||[]).forEach(e=>o.push({type:`submission`,status:e.status===`late`?`late`:`submitted`,meta:e})),(r[a]||[]).forEach(e=>o.push({type:`event`,status:`event`,meta:e})),o}function re(e){let t=k(e),n={attendance:0,task:1,submission:2,event:3};t.sort((e,t)=>n[e.type]-n[t.type]);let r=[],i=new Set;for(let e of t){let t=`${e.type}-${e.status}`;if(i.has(t)||(r.push(e),i.add(t)),r.length>=5)break}return r.map((e,t)=>{let n=`w-2.5 h-2.5 rounded-full`;return e.type===`attendance`?e.status===`present`?n+=` ${$u.present}`:e.status===`absent`?n+=` ${$u.absent}`:e.status===`late`?n+=` ${$u.late}`:e.status===`leave`?n+=` ${$u.leave}`:e.status===`checkin-only`&&(n+=` ${$u.checkinOnly} bg-transparent`):e.type===`task`?e.status===`deadline`?n+=` ${$u.task_deadline}`:e.status===`assigned`?n+=` ${$u.task_assigned} bg-white`:e.status===`completed`?n+=` ${$u.task_completed}`:e.status===`revision`&&(n+=` ${$u.task_revision}`):e.type===`submission`?e.status===`submitted`?n+=` ${$u.submitted}`:e.status===`late`&&(n+=` ${$u.late_submission}`):e.type===`event`&&(n+=` ${$u.event}`),(0,G.jsx)(`div`,{className:n,title:`${e.type}  ${e.status}`,style:{margin:`0 2px`}},t)})}function ie({info:e}){if(!S.current||!e)return null;let t=(0,G.jsxs)(`div`,{className:`absolute z-40 w-72 p-3 rounded-md bg-white shadow-lg border border-slate-200 text-xs`,style:{left:e.x+12,top:e.y+12,maxWidth:320},children:[(0,G.jsx)(`div`,{className:`font-semibold mb-1 text-sm`,children:e.dateKey}),(0,G.jsxs)(`div`,{className:`max-h-40 overflow-y-auto`,children:[e.items.length===0&&(0,G.jsx)(`div`,{className:`text-slate-500`,children:`No activity`}),e.items.map((e,t)=>{if(e.type===`attendance`){let n=e.status;return(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-1`,children:[(0,G.jsx)(`div`,{className:`w-2.5 h-2.5 rounded-full`}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`text-[13px] font-medium capitalize`,children:n}),e.meta.checkIn&&(0,G.jsxs)(`div`,{className:`text-[12px] text-slate-500`,children:[e.meta.checkIn,`  `,e.meta.checkOut??``]})]})]},t)}else if(e.type===`task`)return(0,G.jsxs)(`div`,{className:`mb-1`,children:[(0,G.jsx)(`div`,{className:`text-[13px] font-medium`,children:e.meta.title}),(0,G.jsxs)(`div`,{className:`text-[12px] text-slate-500 capitalize`,children:[`Task: `,e.status,e.meta.priority?`  ${e.meta.priority}`:``]})]},t);else if(e.type===`submission`)return(0,G.jsxs)(`div`,{className:`mb-1`,children:[(0,G.jsx)(`div`,{className:`text-[13px] font-medium`,children:e.meta.title}),(0,G.jsxs)(`div`,{className:`text-[12px] text-slate-500`,children:[`Submission: `,e.status,` `,e.meta.note?` ${e.meta.note}`:``]})]},t);else if(e.type===`event`)return(0,G.jsxs)(`div`,{className:`mb-1`,children:[(0,G.jsx)(`div`,{className:`text-[13px] font-medium`,children:e.meta.title}),(0,G.jsxs)(`div`,{className:`text-[12px] text-slate-500`,children:[e.meta.time,` `,e.meta.location?` ${e.meta.location}`:``]})]},t);else return null})]})]});return Qu.createPortal(t,S.current)}return(0,G.jsxs)(`div`,{ref:x,className:`\r
        relative p-4 rounded-xl bg-white/60 backdrop-blur-xl border border-white/40 shadow-md\r
        dark:bg-white/5 dark:border-white/10\r
      `,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`p`,{className:`text-sm text-slate-600 dark:text-slate-300`,children:E}),(0,G.jsx)(`p`,{className:`text-lg font-semibold text-slate-800 dark:text-white`,children:l})]}),(0,G.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[o&&(0,G.jsx)(`button`,{className:`text-xs px-2 py-1 rounded-md border ${h?`bg-blue-50`:``}`,onClick:()=>g(e=>!e),children:h?`Heatmap On`:`Heatmap Off`}),(0,G.jsxs)(`div`,{className:`flex items-center space-x-1`,children:[(0,G.jsx)(`button`,{onClick:ee,className:`p-1 rounded hover:bg-slate-100 dark:hover:bg-white/5`,title:`Previous month ()`,children:``}),(0,G.jsx)(`button`,{onClick:te,className:`p-1 rounded hover:bg-slate-100 dark:hover:bg-white/5`,title:`Next month ()`,children:``})]})]})]}),(0,G.jsx)(`div`,{className:`grid grid-cols-7 text-center mt-3 text-xs`,children:[`S`,`M`,`T`,`W`,`T`,`F`,`S`].map(e=>(0,G.jsx)(`div`,{className:`text-slate-500 dark:text-slate-400`,children:e},e))}),(0,G.jsxs)(`div`,{className:`grid grid-cols-7 text-center mt-2 gap-y-2`,children:[Array.from({length:C}).map((e,t)=>(0,G.jsx)(`div`,{className:`h-12`},`pad-${t}`)),Array.from({length:T},(e,t)=>{let n=t+1,r=td(l,d+1,n),i=k(n),a=D[r]||0;return(0,G.jsxs)(`div`,{tabIndex:0,onFocus:()=>b(n),onBlur:()=>b(null),className:`h-12 flex flex-col items-center justify-start p-1 cursor-pointer select-none`,onClick:()=>ne(n),onMouseEnter:e=>{v({dateKey:r,items:i.slice(0,8),x:e.clientX,y:e.clientY})},onMouseMove:e=>{_&&_.dateKey===r&&v(t=>({...t,x:e.clientX,y:e.clientY}))},onMouseLeave:()=>v(null),children:[(0,G.jsx)(`div`,{className:`w-8 h-8 flex items-center justify-center rounded-full ${r===td(c.getFullYear(),c.getMonth()+1,c.getDate())?`ring-2 ring-indigo-300`:``} ${y===n?`ring-2 ring-sky-300`:``}`,style:h&&a>0?{background:`rgba(59,130,246,${.08+a/O*.52})`}:{},children:(0,G.jsx)(`span`,{className:`text-sm font-medium text-slate-800 dark:text-white`,children:n})}),(0,G.jsx)(`div`,{className:`mt-1 flex items-center justify-center`,children:re(n)}),i.length>5&&(0,G.jsx)(`div`,{className:`text-[10px] text-slate-400 mt-0.5`,children:i.length})]},r)})]}),S.current&&_&&(0,G.jsx)(ie,{info:_}),p&&(0,G.jsxs)(`div`,{className:`mt-4 p-3 rounded-md border border-slate-200 bg-white text-sm`,children:[(0,G.jsxs)(`div`,{className:`flex items-start justify-between`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`text-sm font-semibold`,children:p}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[`Summary `,` `,[e[p]&&`Attendance`,t[p]&&`${t[p].length} tasks`,n[p]&&`${n[p].length} submissions`,r[p]&&`${r[p].length} events`].filter(Boolean).join(`  `)||`No activity`]})]}),(0,G.jsx)(`div`,{children:(0,G.jsx)(`button`,{className:`text-xs text-sky-600`,onClick:()=>{m(null)},children:`Close`})})]}),(0,G.jsxs)(`div`,{className:`mt-3 space-y-2`,children:[e[p]?(0,G.jsxs)(`div`,{className:`p-2 border rounded`,children:[(0,G.jsx)(`div`,{className:`font-medium`,children:`Attendance`}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-600 capitalize`,children:[`Status: `,e[p].status]}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[`Check-in: `,e[p].checkIn??``,`  Check-out:`,` `,e[p].checkOut??``]})]}):null,t[p]&&t[p].length>0?(0,G.jsxs)(`div`,{className:`p-2 border rounded`,children:[(0,G.jsx)(`div`,{className:`font-medium`,children:`Tasks`}),(0,G.jsx)(`div`,{className:`text-xs mt-1 space-y-1`,children:t[p].map(e=>(0,G.jsxs)(`div`,{className:`flex justify-between`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`text-[13px]`,children:e.title}),(0,G.jsx)(`div`,{className:`text-[12px] text-slate-500 capitalize`,children:e.status})]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-400`,children:e.priority||``})]},e.id))})]}):null,n[p]&&n[p].length>0?(0,G.jsxs)(`div`,{className:`p-2 border rounded`,children:[(0,G.jsx)(`div`,{className:`font-medium`,children:`Submissions`}),(0,G.jsx)(`div`,{className:`text-xs mt-1 space-y-1`,children:n[p].map(e=>(0,G.jsxs)(`div`,{className:`flex justify-between`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`text-[13px]`,children:e.title}),(0,G.jsx)(`div`,{className:`text-[12px] text-slate-500 capitalize`,children:e.status})]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-400`,children:e.note||``})]},e.id))})]}):null,r[p]&&r[p].length>0?(0,G.jsxs)(`div`,{className:`p-2 border rounded`,children:[(0,G.jsx)(`div`,{className:`font-medium`,children:`Events`}),(0,G.jsx)(`div`,{className:`text-xs mt-1 space-y-1`,children:r[p].map(e=>(0,G.jsxs)(`div`,{className:`flex justify-between`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`text-[13px]`,children:e.title}),(0,G.jsx)(`div`,{className:`text-[12px] text-slate-500`,children:e.time})]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-400`,children:e.location||``})]},e.id))})]}):null,!e[p]&&(!t[p]||t[p].length===0)&&(!n[p]||n[p].length===0)&&(!r[p]||r[p].length===0)&&(0,G.jsx)(`div`,{className:`p-2 text-slate-500`,children:`No activity for this day.`})]})]}),(0,G.jsx)(`div`,{className:`mt-4 text-xs`,children:(0,G.jsxs)(`div`,{className:`flex flex-wrap gap-3`,children:[(0,G.jsx)(rd,{label:`Present`,className:$u.present}),(0,G.jsx)(rd,{label:`Absent`,className:$u.absent}),(0,G.jsx)(rd,{label:`Late`,className:$u.late}),(0,G.jsx)(rd,{label:`Leave`,className:$u.leave}),(0,G.jsx)(rd,{label:`Check-in only`,extra:`ring`,className:$u.checkinOnly}),(0,G.jsx)(rd,{label:`Deadline`,className:$u.task_deadline}),(0,G.jsx)(rd,{label:`Assigned`,extra:`ring`,className:$u.task_assigned}),(0,G.jsx)(rd,{label:`Completed`,className:$u.task_completed}),(0,G.jsx)(rd,{label:`Revision`,className:$u.task_revision}),(0,G.jsx)(rd,{label:`Submitted`,className:$u.submitted}),(0,G.jsx)(rd,{label:`Late submission`,className:$u.late_submission}),(0,G.jsx)(rd,{label:`Event`,className:$u.event})]})})]})}function rd({label:e,className:t=``,extra:n=``}){return(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`div`,{className:`w-3 h-3 rounded-full ${t}`,style:n===`ring`?{boxShadow:`0 0 0 2px rgba(255,255,255,0.9)`}:{}}),(0,G.jsx)(`div`,{className:`text-xs text-slate-600 pr-2`,children:e})]})}const id=()=>{try{let e=new Date,t=e.getTimezoneOffset(),n=new Date(e.getTime()+(300+t)*6e4);return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,`0`)}-${String(n.getDate()).padStart(2,`0`)}`}catch(e){return console.error(`Error getting PKT date:`,e),new Date().toISOString().split(`T`)[0]}},ad=e=>{if(!e)return`--:--`;try{let t=new Date(e);return`${String(t.getHours()).padStart(2,`0`)}:${String(t.getMinutes()).padStart(2,`0`)}`}catch(e){return console.error(`Error formatting time:`,e),`--:--`}},od=(e,t)=>{if(!e||!t)return`--`;try{let n=new Date(e),r=(new Date(t)-n)/(1e3*60*60);return`${Math.round(r*10)/10} hours`}catch(e){return console.error(`Error calculating working hours:`,e),`--`}},sd=e=>{if(!e)return{text:`Not Checked In`,color:`text-gray-600`,bgColor:`bg-gray-100`,borderColor:`border-gray-300`};let t=e.status?.toLowerCase(),n=e.late,r=!!e.check_out;return t===`absent`?{text:`Absent`,color:`text-red-600`,bgColor:`bg-red-100`,borderColor:`border-red-300`}:t===`leave`?{text:`On Leave`,color:`text-blue-600`,bgColor:`bg-blue-100`,borderColor:`border-blue-300`}:r?{text:n?`Late (Checked Out)`:`On Time (Checked Out)`,color:n?`text-orange-600`:`text-green-600`,bgColor:n?`bg-orange-100`:`bg-green-100`,borderColor:n?`border-orange-300`:`border-green-300`}:e.check_in?{text:n?`Late (Checked In)`:`On Time (Checked In)`,color:n?`text-orange-600`:`text-blue-600`,bgColor:n?`bg-orange-100`:`bg-blue-100`,borderColor:n?`border-orange-300`:`border-blue-300`}:{text:`Pending`,color:`text-yellow-600`,bgColor:`bg-yellow-100`,borderColor:`border-yellow-300`}};var cd=({records:e=[],userId:t=null,showHeader:n=!0,compact:r=!1,limit:i=null,formatPKT:a=null})=>{let[o,s]=(0,w.useState)(!1),[c,l]=(0,w.useState)(e),[u,d]=(0,w.useState)(`all`);(0,w.useEffect)(()=>{e&&e.length>0?l(e):t&&f()},[e,t]);let f=async()=>{if(t){s(!0);try{let{data:e,error:n}=await W.from(`attendance`).select(`*`).eq(`employee_id`,t).order(`date`,{ascending:!1}).limit(i||50);if(n)throw n;l(e||[])}catch(e){console.error(`Error loading attendance history:`,e)}finally{s(!1)}}},p=c.filter(e=>u===`all`?!0:u===`present`?e.status===`present`:u===`absent`?e.status===`absent`:u===`leave`?e.status===`leave`:u===`late`?e.late===!0:!0),m=a||(e=>{if(!e)return``;try{return new Date(e).toLocaleString(`en-GB`,{timeZone:`Asia/Karachi`,day:`2-digit`,month:`short`,year:`2-digit`,hour:`2-digit`,minute:`2-digit`,hour12:!1}).replace(`,`,``)}catch{return e}}),h=e=>{if(!e)return``;try{return new Date(e).toLocaleDateString(`en-US`,{weekday:`short`,month:`short`,day:`numeric`,year:`numeric`})}catch{return e}},g=e=>{if(!e)return``;try{return new Date(e).toLocaleDateString(`en-US`,{weekday:`short`})}catch{return``}},_=e=>e?e===id():!1,v=(e,t)=>!e||!t?``:od(e,t);return o&&c.length===0?(0,G.jsxs)(`div`,{className:`flex justify-center items-center p-8`,children:[(0,G.jsx)(`div`,{className:`animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500`}),(0,G.jsx)(`span`,{className:`ml-2 text-gray-600`,children:`Loading attendance...`})]}):!o&&c.length===0?(0,G.jsxs)(`div`,{className:`text-center p-6 bg-white/70 border rounded-xl`,children:[(0,G.jsx)(`svg`,{className:`w-12 h-12 mx-auto text-gray-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2`})}),(0,G.jsx)(`p`,{className:`mt-2 text-gray-600`,children:`No attendance records found`})]}):(0,G.jsxs)(`div`,{className:`w-full`,children:[n&&(0,G.jsxs)(`div`,{className:`flex justify-between items-center mb-4`,children:[(0,G.jsx)(`h2`,{className:`text-xl font-bold text-gray-800`,children:`Attendance History`}),(0,G.jsxs)(`div`,{className:`flex gap-2`,children:[(0,G.jsxs)(`select`,{value:u,onChange:e=>d(e.target.value),className:`text-sm border rounded-lg px-3 py-1 focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,children:[(0,G.jsx)(`option`,{value:`all`,children:`All Status`}),(0,G.jsx)(`option`,{value:`present`,children:`Present`}),(0,G.jsx)(`option`,{value:`late`,children:`Late`}),(0,G.jsx)(`option`,{value:`absent`,children:`Absent`}),(0,G.jsx)(`option`,{value:`leave`,children:`Leave`})]}),(0,G.jsxs)(`span`,{className:`text-sm text-gray-600`,children:[p.length,` of `,c.length,` records`]})]})]}),r?(0,G.jsx)(`div`,{className:`space-y-2`,children:p.slice(0,i||5).map((e,t)=>{let n=sd(e);return(0,G.jsx)(`div`,{className:`p-3 rounded-lg border ${n.borderColor} ${n.bgColor} hover:shadow-sm transition-shadow`,children:(0,G.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`font-medium flex items-center gap-2`,children:[(0,G.jsxs)(`span`,{className:`text-sm px-2 py-0.5 rounded ${n.bgColor} ${n.color}`,children:[g(e.date),` `,_(e.date)&&`(Today)`]}),(0,G.jsx)(`span`,{className:`text-gray-700`,children:h(e.date)})]}),(0,G.jsxs)(`div`,{className:`text-xs text-gray-500 mt-1`,children:[e.check_in?`In: ${ad(e.check_in)}`:``,` `,e.check_out?` Out: ${ad(e.check_out)}`:` `]})]}),(0,G.jsx)(`div`,{className:`text-sm font-semibold ${n.color}`,children:n.text})]})},e.id||t)})}):(0,G.jsxs)(`div`,{className:`overflow-x-auto border rounded-xl bg-white/80`,children:[(0,G.jsxs)(`table`,{className:`min-w-full divide-y divide-gray-200`,children:[(0,G.jsx)(`thead`,{className:`bg-gray-50`,children:(0,G.jsxs)(`tr`,{children:[(0,G.jsx)(`th`,{className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider`,children:`Date`}),(0,G.jsx)(`th`,{className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider`,children:`Day`}),(0,G.jsx)(`th`,{className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider`,children:`Check In`}),(0,G.jsx)(`th`,{className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider`,children:`Check Out`}),(0,G.jsx)(`th`,{className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider`,children:`Working Hours`}),(0,G.jsx)(`th`,{className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider`,children:`Status`})]})}),(0,G.jsx)(`tbody`,{className:`divide-y divide-gray-200`,children:p.map((e,t)=>{let n=sd(e);return(0,G.jsxs)(`tr`,{className:`hover:bg-gray-50 ${_(e.date)?`bg-blue-50`:``}`,children:[(0,G.jsx)(`td`,{className:`px-6 py-4 whitespace-nowrap`,children:(0,G.jsxs)(`div`,{className:`text-sm font-medium text-gray-900`,children:[h(e.date),_(e.date)&&(0,G.jsx)(`span`,{className:`ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800`,children:`Today`})]})}),(0,G.jsx)(`td`,{className:`px-6 py-4 whitespace-nowrap`,children:(0,G.jsx)(`div`,{className:`text-sm text-gray-900`,children:g(e.date)})}),(0,G.jsx)(`td`,{className:`px-6 py-4 whitespace-nowrap`,children:(0,G.jsx)(`div`,{className:`text-sm text-gray-900`,children:e.check_in?(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`span`,{className:`font-medium`,children:ad(e.check_in)}),(0,G.jsx)(`div`,{className:`text-xs text-gray-500`,children:m(e.check_in)})]}):``})}),(0,G.jsx)(`td`,{className:`px-6 py-4 whitespace-nowrap`,children:(0,G.jsx)(`div`,{className:`text-sm text-gray-900`,children:e.check_out?(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`span`,{className:`font-medium`,children:ad(e.check_out)}),(0,G.jsx)(`div`,{className:`text-xs text-gray-500`,children:m(e.check_out)})]}):``})}),(0,G.jsx)(`td`,{className:`px-6 py-4 whitespace-nowrap`,children:(0,G.jsx)(`div`,{className:`text-sm text-gray-900`,children:v(e.check_in,e.check_out)})}),(0,G.jsxs)(`td`,{className:`px-6 py-4 whitespace-nowrap`,children:[(0,G.jsxs)(`span`,{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${n.bgColor} ${n.color}`,children:[n.text,e.late&&(0,G.jsx)(`svg`,{className:`ml-1 w-4 h-4`,fill:`currentColor`,viewBox:`0 0 20 20`,children:(0,G.jsx)(`path`,{fillRule:`evenodd`,d:`M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z`,clipRule:`evenodd`})})]}),e.notes&&(0,G.jsx)(`div`,{className:`text-xs text-gray-500 mt-1 max-w-xs truncate`,title:e.notes,children:e.notes})]})]},e.id||t)})})]}),p.length===0&&(0,G.jsxs)(`div`,{className:`text-center py-8`,children:[(0,G.jsx)(`svg`,{className:`w-12 h-12 mx-auto text-gray-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z`})}),(0,G.jsx)(`p`,{className:`mt-2 text-gray-600`,children:`No records match the selected filter`})]})]}),!r&&p.length>0&&(0,G.jsxs)(`div`,{className:`mt-4 flex justify-between items-center text-sm text-gray-600`,children:[(0,G.jsxs)(`div`,{children:[`Showing `,p.length,` records`]}),(0,G.jsxs)(`div`,{className:`flex gap-4`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,G.jsx)(`div`,{className:`w-3 h-3 bg-green-100 border border-green-300 rounded-full`}),(0,G.jsx)(`span`,{children:`On Time`})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,G.jsx)(`div`,{className:`w-3 h-3 bg-orange-100 border border-orange-300 rounded-full`}),(0,G.jsx)(`span`,{children:`Late`})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,G.jsx)(`div`,{className:`w-3 h-3 bg-red-100 border border-red-300 rounded-full`}),(0,G.jsx)(`span`,{children:`Absent`})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,G.jsx)(`div`,{className:`w-3 h-3 bg-blue-100 border border-blue-300 rounded-full`}),(0,G.jsx)(`span`,{children:`Leave`})]})]})]})]})},ld=({user:e,userRole:t,mode:n=`page`})=>{let[r,i]=(0,w.useState)([]),[a,o]=(0,w.useState)([]),[s,c]=(0,w.useState)(null),[l,u]=(0,w.useState)(!1),[d,f]=(0,w.useState)(``),[p,m]=(0,w.useState)(``),[h,g]=(0,w.useState)(!1),[_,v]=(0,w.useState)(null),[y,b]=(0,w.useState)({type:`company`,allowedRoles:[`manager`,`employee`,`customer`],allowedUsers:[],canEdit:!1,canDownload:!0}),[x,S]=(0,w.useState)([]),[C,T]=(0,w.useState)(!1),[E,D]=(0,w.useState)([]),[O,ee]=(0,w.useState)(!0),[te,ne]=(0,w.useState)(!1),[k,re]=(0,w.useState)(null),[ie,ae]=(0,w.useState)(``),[A,j]=(0,w.useState)({totalFiles:0,totalSize:0,yourFiles:0}),[oe,se]=(0,w.useState)(null),[ce,M]=(0,w.useState)(!1),le=(0,w.useRef)(null),N=()=>window.location.origin;(0,w.useEffect)(()=>{(async()=>{await ue(),await de();let{data:e}=await W.auth.getUser();e?.user&&se(e.user.id)})()},[s]);let ue=async()=>{try{ee(!0);let{data:e}=await W.auth.getUser(),n=e?.user;if(!n){console.log(`No user found`);return}console.log(`Loading files and folders...`);let r=W.from(`folders`).select(`
          *,
          creator:profiles!folders_created_by_fkey(full_name, avatar, role, emp_id)
        `).order(`created_at`,{ascending:!1});r=s?r.eq(`parent_folder_id`,s.id):r.is(`parent_folder_id`,null);let{data:a,error:c}=await r;c?(console.error(`Error loading folders:`,c),c.code===`42P01`&&alert(`'folders' table doesn't exist. Please run the SQL script to create it.`)):console.log(`Loaded ${a?.length||0} folders`);let l=W.from(`files`).select(`
          *,
          uploaded_by:profiles!files_uploaded_by_fkey(full_name, avatar, role, emp_id),
          folder:folders(name),
          file_shared_with(user_id, access_level),
          profile:profiles!files_profile_id_fkey(id, full_name, avatar, role, emp_id)
        `).order(`created_at`,{ascending:!1});l=s?l.eq(`folder_id`,s.id):l.is(`folder_id`,null);let{data:u,error:d}=await l;if(d){if(console.error(`Error loading files:`,d),d.message.includes(`schema cache`)){console.log(`Trying simpler query...`);let{data:e,error:r}=await W.from(`files`).select(`*`).order(`created_at`,{ascending:!1});if(!r){console.log(`Loaded files with simple query:`,e?.length||0);let r=e?.filter(e=>fe(e,n.id,t))||[];i(r);let s=r.reduce((e,t)=>e+(t.size||0),0),c=r.filter(e=>e.uploaded_by===n.id).length;j({totalFiles:r.length,totalSize:s,yourFiles:c}),o(a||[]),ee(!1);return}}d.code===`42P01`&&alert(`'files' table doesn't exist. Please run the SQL script to create it.`)}else console.log(`Loaded ${u?.length||0} files`);let f=u?.filter(e=>fe(e,n.id,t))||[];o(a||[]),i(f);let p=f.reduce((e,t)=>e+(t.size||0),0),m=f.filter(e=>e.uploaded_by===n.id).length;j({totalFiles:f.length,totalSize:p,yourFiles:m})}catch(e){console.error(`Error loading files and folders:`,e),alert(`Failed to load files. Please try again.`)}finally{ee(!1)}},de=async()=>{try{let{data:e,error:t}=await W.from(`profiles`).select(`id, full_name, email, role, avatar, emp_id`).order(`full_name`);t?console.error(`Error loading users:`,t):(console.log(`Loaded ${e?.length||0} users`),S(e||[]))}catch(e){console.error(`Error loading users:`,e)}},fe=(e,t,n)=>{if(e.uploaded_by===t||e.uploaded_by?.id===t)return!0;let r=e.access_settings||{};switch(r.type){case`public`:return!0;case`company`:return!0;case`role`:return r.allowed_roles?.includes(n);case`user`:return r.allowed_users?.includes(t);default:return!!e.file_shared_with?.some(e=>e.user_id===t)}},pe=async n=>{let r=n.target.files[0];if(r){u(!0);try{let{data:n}=await W.auth.getUser(),a=n?.user;if(!a){alert(`User not authenticated. Please login again.`);return}console.log(`Attempting to upload file:`,r.name),console.log(`Current user ID:`,a.id);let o=`${Date.now()}_${r.name.replace(/[^a-zA-Z0-9.-]/g,`_`)}`,c=s?`${s.id}/${o}`:o;console.log(`Uploading to path:`,c);let{data:l,error:u}=await W.storage.from(`employee_files`).upload(c,r);if(u){if(console.error(`Storage upload error:`,u),u.message?.includes(`bucket`))alert(`Storage bucket error: ${u.message}\n\nMake sure 'employee_files' bucket exists in Supabase Storage.`);else throw u;return}console.log(`File uploaded to storage:`,l.path);let{data:d}=W.storage.from(`employee_files`).getPublicUrl(l.path);d?.publicUrl;let f={name:r.name,storage_path:l.path,size:r.size,file_type:r.name.split(`.`).pop().toLowerCase(),mime_type:r.type,uploaded_by:a.id,profile_id:a.id,folder_id:s?.id||null,access_settings:{type:`company`,allowed_roles:[`manager`,`employee`,`customer`],allowed_users:[],can_download:!0,can_edit:!1}};console.log(`Inserting file data:`,f);let{data:p,error:m}=await W.from(`files`).insert(f).select().single();if(m){console.error(`Database insert error:`,m),m.code===`42P01`?alert(`'files' table doesn't exist. Please run the SQL script to create it.`):m.code===`42501`?alert(`Permission denied. Check RLS policies in Supabase.`):m.code===`23503`?alert(`Foreign key error. Make sure user has a profile in the profiles table.`):alert(`Failed to save file metadata: ${m.message}\n\nCheck browser console for details.`),await W.storage.from(`employee_files`).remove([l.path]);return}console.log(`File metadata saved:`,p.id);let{data:h,error:g}=await W.from(`files`).select(`
          *,
          uploaded_by:profiles!files_uploaded_by_fkey(full_name, avatar, role, emp_id)
        `).eq(`id`,p.id).single();if(!g&&h)i(e=>[h,...e]);else{let n={...p,uploaded_by:{id:a.id,full_name:e?.full_name||a.email?.split(`@`)[0]||`User`,avatar:e?.avatar||null,role:t,emp_id:e?.emp_id||null}};i(e=>[n,...e])}j(e=>({...e,totalFiles:e.totalFiles+1,totalSize:e.totalSize+r.size,yourFiles:e.yourFiles+1})),await Ee({type:`file_uploaded`,title:`File Uploaded`,message:`${e?.full_name||`User`} uploaded "${r.name}"`,file_id:p.id,read:!1}),alert(`File uploaded successfully!`)}catch(e){console.error(`Error uploading file:`,e),alert(`Failed to upload file: ${e.message}`)}finally{u(!1),le.current&&(le.current.value=``)}}},me=async()=>{if(!d.trim()){alert(`Please enter a folder name`);return}try{console.log(`Attempting to create folder:`,d);let{data:n}=await W.auth.getUser(),r=n?.user;if(!r){alert(`User not authenticated. Please login again.`);return}console.log(`User ID:`,r.id),console.log(`Parent folder ID:`,s?.id||`null (root)`);let i={name:d,created_by:r.id,parent_folder_id:s?.id||null};console.log(`Insert data:`,i);let{data:a,error:c}=await W.from(`folders`).insert(i).select().single();if(c){console.error(`SUPABASE ERROR:`,c),c.code===`42501`?alert(`Permission denied. Check RLS policies in Supabase.`):c.code===`42P01`?alert(`'folders' table doesn't exist. Please run this SQL in Supabase.`):c.code===`23503`?alert(`Foreign key error. Make sure user exists in auth.users table.`):alert(`Error: ${c.message}\nCode: ${c.code}`);return}console.log(`Folder created successfully:`,a);let{data:l,error:u}=await W.from(`folders`).select(`
          *,
          creator:profiles!folders_created_by_fkey(full_name, avatar, role, emp_id)
        `).eq(`id`,a.id).single();if(!u&&l)o(e=>[l,...e]);else{let n={...a,creator:{id:r.id,full_name:e?.full_name||r.email?.split(`@`)[0]||`User`,avatar:e?.avatar||null,role:t,emp_id:e?.emp_id||null}};o(e=>[n,...e])}f(``),alert(`Folder created successfully!`)}catch(e){console.error(`UNEXPECTED ERROR:`,e),alert(`Unexpected error: ${e.message}`)}},he=async e=>{if(window.confirm(`Are you sure you want to delete this file?`))try{let n=r.find(t=>t.id===e);if(!n)return;let{data:a}=await W.auth.getUser(),o=a?.user;if(!o){alert(`User not authenticated.`);return}if(!(t===`owner`||t===`manager`||n.uploaded_by?.id===o.id||n.uploaded_by===o.id)){alert(`You don't have permission to delete this file.`);return}console.log(`Deleting file:`,n.name);let{error:s}=await W.storage.from(`employee_files`).remove([n.storage_path]);if(s)if(console.error(`Storage delete error:`,s),s.message?.includes(`not found`))console.warn(`File not found in storage, continuing with DB delete...`);else throw s;let{error:c}=await W.from(`files`).delete().eq(`id`,e);if(c)throw console.error(`Database delete error:`,c),c;console.log(`File deleted successfully`),i(t=>t.filter(t=>t.id!==e)),j(e=>({...e,totalFiles:e.totalFiles-1,totalSize:e.totalSize-(n.size||0),yourFiles:n.uploaded_by?.id===o.id||n.uploaded_by===o.id?e.yourFiles-1:e.yourFiles})),alert(`File deleted successfully!`)}catch(e){console.error(`Error deleting file:`,e),alert(`Failed to delete file.`)}},ge=async e=>{if(window.confirm(`Are you sure you want to delete this folder and all its contents?`))try{if(console.log(`Deleting folder ID:`,e),t!==`owner`&&t!==`manager`){alert(`Only managers and owners can delete folders.`);return}let{data:n,error:r}=await W.from(`files`).select(`id, storage_path`).eq(`folder_id`,e);if(r)throw console.error(`Error querying folder files:`,r),r;if(console.log(`Found ${n?.length||0} files in folder`),n&&n.length>0){let e=n.map(e=>e.storage_path),{error:t}=await W.storage.from(`employee_files`).remove(e);if(t)throw console.error(`Storage delete error:`,t),t}let{error:i}=await W.from(`files`).delete().eq(`folder_id`,e);if(i)throw console.error(`Error deleting files from database:`,i),i;let{error:a}=await W.from(`folders`).delete().eq(`id`,e);if(a)throw console.error(`Error deleting folder:`,a),a;console.log(`Folder deleted successfully`),o(t=>t.filter(t=>t.id!==e)),s?.id===e&&c(null),alert(`Folder deleted successfully!`),ue()}catch(e){console.error(`Error deleting folder:`,e),alert(`Failed to delete folder.`)}},_e=e=>{v(e);let t=e.access_settings||{type:`company`,allowed_roles:[`manager`,`employee`,`customer`],allowed_users:[],can_download:!0,can_edit:!1};b({type:t.type||`company`,allowedRoles:t.allowed_roles||[`manager`,`employee`,`customer`],allowedUsers:t.allowed_users||[],canEdit:t.can_edit||!1,canDownload:t.can_download!==!1}),D(t.allowed_users||[]),g(!0)},ve=async()=>{try{M(!0);let t={type:y.type,allowed_roles:y.allowedRoles,allowed_users:E,can_download:y.canDownload,can_edit:y.canEdit};console.log(`Updating share settings:`,t);let{error:n}=await W.from(`files`).update({access_settings:t,updated_at:new Date().toISOString()}).eq(`id`,_.id);if(n)throw console.error(`Error updating file:`,n),n;let r=_.share_link;if(y.type===`public`&&!r){let e=be();r=`${N()}/shared/${e}`;let{error:t}=await W.from(`files`).update({share_link:r}).eq(`id`,_.id);t?console.error(`Error saving share link:`,t):console.log(`Generated share link:`,r)}if(y.type===`user`){let{error:t}=await W.from(`file_shared_with`).delete().eq(`file_id`,_.id);if(t&&console.error(`Error removing existing shares:`,t),E.length>0){let t=E.map(t=>({file_id:_.id,user_id:t,access_level:y.canEdit?`edit`:`view`,shared_by:e.id})),{error:n}=await W.from(`file_shared_with`).insert(t);n&&console.error(`Error adding new shares:`,n)}}i(e=>e.map(e=>e.id===_.id?{...e,access_settings:t,share_link:y.type===`public`?r:e.share_link}:e)),g(!1),y.type===`public`?r?alert(`Share settings updated!\n\nPublic link: ${r}\n\nAnyone with this link can access the file.`):alert(`Share settings updated! This file is now public.`):y.type===`user`?alert(`Share settings updated! File shared with ${E.length} user(s).`):alert(`Share settings updated!`)}catch(e){console.error(`Error updating share settings:`,e),alert(`Failed to update share settings. Please try again.`)}finally{M(!1)}},ye=async e=>{try{if(!e.share_link&&e.access_settings?.type===`public`){M(!0);let t=be(),n=`${N()}/shared/${t}`,{error:r}=await W.from(`files`).update({share_link:n}).eq(`id`,e.id);if(r)throw r;i(t=>t.map(t=>t.id===e.id?{...t,share_link:n}:t)),await navigator.clipboard.writeText(n),alert(`Share link copied to clipboard!\n\n${n}`)}else e.share_link?(await navigator.clipboard.writeText(e.share_link),alert(`Share link copied to clipboard!\n\n${e.share_link}`)):alert(`This file is not shared publicly. Change share settings to 'Public' first.`)}catch(e){console.error(`Error copying share link:`,e),alert(`Failed to copy share link.`)}finally{M(!1)}},be=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),P=async e=>{try{re(e);let{data:t,error:n}=await W.storage.from(`employee_files`).createSignedUrl(e.storage_path,3600);if(n)throw n;ae(t.signedUrl),ne(!0),await W.from(`files`).update({view_count:(e.view_count||0)+1}).eq(`id`,e.id)}catch(e){console.error(`Error previewing file:`,e),alert(`Cannot preview this file type.`)}},xe=async e=>{try{if(e.access_settings?.can_download===!1){alert(`Download is not allowed for this file.`);return}let{data:t,error:n}=await W.storage.from(`employee_files`).download(e.storage_path);if(n)throw n;let r=window.URL.createObjectURL(t),i=document.createElement(`a`);i.href=r,i.download=e.name,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r),await W.from(`files`).update({download_count:(e.download_count||0)+1}).eq(`id`,e.id)}catch(e){console.error(`Error downloading file:`,e),alert(`Failed to download file.`)}},Se=e=>{if(e===0)return`0 Bytes`;let t=1024,n=[`Bytes`,`KB`,`MB`,`GB`],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/t**+r).toFixed(2))+` `+n[r]},Ce=e=>{let t={pdf:``,doc:``,docx:``,xls:``,xlsx:``,ppt:``,pptx:``,jpg:``,jpeg:``,png:``,gif:``,zip:``,rar:``,txt:``,mp4:``,mp3:``,default:``};return t[e]||t.default},we=e=>({public:`bg-green-100 text-green-800`,company:`bg-blue-100 text-blue-800`,role:`bg-purple-100 text-purple-800`,user:`bg-yellow-100 text-yellow-800`})[e]||`bg-gray-100 text-gray-800`,Te=e=>{D(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Ee=async e=>{try{let{data:t}=await W.auth.getUser(),n=t?.user;if(!n)return;let{error:r}=await W.from(`notifications`).insert({user_id:n.id,type:e.type,title:e.title,message:e.message,file_id:e.file_id,read:!1,created_at:new Date().toISOString()});r&&console.error(`Error creating notification:`,r)}catch(e){console.error(`Error creating notification:`,e)}},De=e=>oe?typeof e.uploaded_by==`string`?e.uploaded_by===oe:e.uploaded_by?.id?e.uploaded_by.id===oe:!1:!1,Oe=e=>e.creator?`${e.creator.full_name||`Unknown`} ${e.creator.emp_id?`(ID: ${e.creator.emp_id})`:``}`.trim():`Unknown`,ke=e=>e.uploaded_by&&typeof e.uploaded_by==`object`?`${e.uploaded_by.full_name||`Unknown`} ${e.uploaded_by.emp_id?`(ID: ${e.uploaded_by.emp_id})`:``}`.trim():`Unknown`,Ae=r.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())||e.uploaded_by?.full_name&&e.uploaded_by.full_name.toLowerCase().includes(p.toLowerCase())),je=a.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())),Me=Math.min(A.totalSize/(10*1024*1024*1024)*100,100);return(0,G.jsxs)(`div`,{className:`file-manager-page`,children:[(0,G.jsxs)(`div`,{className:`mb-6`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-start mb-4`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h1`,{className:`text-2xl font-bold text-slate-800 dark:text-white`,children:s?s.name:`Company Drive`}),(0,G.jsx)(`p`,{className:`text-slate-600 dark:text-slate-400`,children:s?`Browse files in "${s.name}"`:`Upload, share and manage company files`})]}),(0,G.jsx)(`div`,{className:`text-right`,children:(0,G.jsxs)(`div`,{className:`text-sm text-slate-600`,children:[(0,G.jsxs)(`div`,{children:[`Total Files: `,(0,G.jsx)(`span`,{className:`font-semibold`,children:A.totalFiles})]}),(0,G.jsxs)(`div`,{children:[`Your Files: `,(0,G.jsx)(`span`,{className:`font-semibold`,children:A.yourFiles})]}),(0,G.jsxs)(`div`,{children:[`Storage Used: `,(0,G.jsx)(`span`,{className:`font-semibold`,children:Se(A.totalSize)})]})]})})]}),(0,G.jsxs)(`div`,{className:`mb-4`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between text-xs text-slate-600 mb-1`,children:[(0,G.jsx)(`span`,{children:`Storage`}),(0,G.jsxs)(`span`,{children:[Se(A.totalSize),` / 10 GB`]})]}),(0,G.jsx)(`div`,{className:`w-full bg-slate-200 rounded-full h-2`,children:(0,G.jsx)(`div`,{className:`h-2 rounded-full ${Me>90?`bg-red-500`:Me>70?`bg-yellow-500`:`bg-green-500`}`,style:{width:`${Me}%`}})})]})]}),(0,G.jsxs)(`div`,{className:`file-manager-actions mb-6`,children:[(0,G.jsx)(`div`,{className:`search-container`,children:(0,G.jsx)(`input`,{type:`text`,placeholder:`Search files and folders...`,value:p,onChange:e=>m(e.target.value),className:`search-input`})}),(0,G.jsxs)(`div`,{className:`action-buttons`,children:[(0,G.jsx)(`input`,{type:`file`,ref:le,onChange:pe,className:`hidden`,id:`file-upload`}),(0,G.jsx)(`label`,{htmlFor:`file-upload`,className:`upload-button cursor-pointer`,children:l?` Uploading...`:` Upload File`}),(0,G.jsxs)(`div`,{className:`create-folder`,children:[(0,G.jsx)(`input`,{type:`text`,placeholder:`New folder name`,value:d,onChange:e=>f(e.target.value),className:`folder-input`}),(0,G.jsx)(`button`,{onClick:me,className:`create-folder-button`,disabled:!d.trim(),children:`Create`})]})]})]}),(0,G.jsxs)(`div`,{className:`breadcrumbs mb-4`,children:[(0,G.jsx)(`button`,{onClick:()=>c(null),className:`text-blue-600 hover:text-blue-800`,children:`Home`}),s&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`span`,{className:`mx-2`,children:`/`}),(0,G.jsx)(`span`,{className:`text-slate-600`,children:s.name})]})]}),O?(0,G.jsxs)(`div`,{className:`text-center py-8`,children:[(0,G.jsx)(`div`,{className:`inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600`}),(0,G.jsx)(`p`,{className:`mt-2 text-slate-600`,children:`Loading files...`})]}):(0,G.jsxs)(G.Fragment,{children:[je.length>0&&(0,G.jsxs)(`div`,{className:`folders-section mb-8`,children:[(0,G.jsx)(`h3`,{className:`section-title mb-4`,children:`Folders`}),(0,G.jsx)(`div`,{className:`folders-grid`,children:je.map(e=>(0,G.jsxs)(`div`,{className:`folder-card group`,children:[(0,G.jsxs)(`button`,{onClick:()=>c(e),className:`flex items-center gap-3 flex-1 text-left`,children:[(0,G.jsx)(`div`,{className:`folder-icon`,children:``}),(0,G.jsxs)(`div`,{className:`folder-info`,children:[(0,G.jsx)(`span`,{className:`folder-name`,children:e.name}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[(0,G.jsxs)(`div`,{children:[r.filter(t=>t.folder_id===e.id).length,` files`]}),(0,G.jsxs)(`div`,{className:`mt-1`,children:[`Created by: `,Oe(e)]})]})]})]}),(t===`owner`||t===`manager`)&&(0,G.jsx)(`div`,{className:`opacity-0 group-hover:opacity-100 transition-opacity`,children:(0,G.jsx)(`button`,{onClick:()=>ge(e.id),className:`delete-button`,title:`Delete folder`,children:``})})]},e.id))})]}),(0,G.jsxs)(`div`,{className:`files-section`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-center mb-4`,children:[(0,G.jsxs)(`h3`,{className:`section-title`,children:[`Files (`,Ae.length,`)`]}),Ae.length===0&&!O&&(0,G.jsx)(`p`,{className:`text-slate-500`,children:`No files found`})]}),Ae.length>0?(0,G.jsx)(`div`,{className:`files-table`,children:(0,G.jsxs)(`table`,{children:[(0,G.jsx)(`thead`,{children:(0,G.jsxs)(`tr`,{children:[(0,G.jsx)(`th`,{children:`Name`}),(0,G.jsx)(`th`,{children:`Size`}),(0,G.jsx)(`th`,{children:`Uploaded By`}),(0,G.jsx)(`th`,{children:`Date`}),(0,G.jsx)(`th`,{children:`Access`}),(0,G.jsx)(`th`,{children:`Actions`})]})}),(0,G.jsx)(`tbody`,{children:Ae.map(e=>{let n=De(e);return(0,G.jsxs)(`tr`,{className:`hover:bg-slate-50 dark:hover:bg-slate-800/50`,children:[(0,G.jsx)(`td`,{children:(0,G.jsxs)(`div`,{className:`file-name-cell`,children:[(0,G.jsx)(`span`,{className:`file-icon text-xl`,children:Ce(e.file_type)}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`button`,{onClick:()=>P(e),className:`text-left hover:text-blue-600 hover:underline`,children:e.name}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:e.file_type?.toUpperCase()||`FILE`})]})]})}),(0,G.jsx)(`td`,{children:Se(e.size)}),(0,G.jsx)(`td`,{children:(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[e.uploaded_by?.avatar?(0,G.jsx)(`img`,{src:e.uploaded_by.avatar,alt:e.uploaded_by.full_name,className:`w-6 h-6 rounded-full`}):(0,G.jsx)(`div`,{className:`w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-xs`,children:e.uploaded_by?.full_name?.charAt(0)||`U`}),(0,G.jsxs)(`div`,{className:`text-left`,children:[(0,G.jsx)(`div`,{className:`font-medium`,children:ke(e)}),e.uploaded_by?.role&&(0,G.jsx)(`div`,{className:`text-xs text-slate-500 capitalize`,children:e.uploaded_by.role})]}),n&&(0,G.jsx)(`span`,{className:`text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full`,children:`You`})]})}),(0,G.jsx)(`td`,{children:new Date(e.created_at).toLocaleDateString()}),(0,G.jsx)(`td`,{children:(0,G.jsx)(`span`,{className:`px-2 py-1 rounded-full text-xs font-medium ${we(e.access_settings?.type)}`,children:e.access_settings?.type===`company`?`All Company`:e.access_settings?.type===`role`?`Selected Roles`:e.access_settings?.type===`user`?`Specific Users`:e.access_settings?.type===`public`?`Public`:`Private`})}),(0,G.jsx)(`td`,{children:(0,G.jsxs)(`div`,{className:`file-actions`,children:[(0,G.jsx)(`button`,{onClick:()=>P(e),className:`action-button`,title:`Preview`,children:``}),(0,G.jsx)(`button`,{onClick:()=>xe(e),className:`action-button`,title:`Download`,disabled:e.access_settings?.can_download===!1,children:``}),(0,G.jsx)(`button`,{onClick:()=>ye(e),className:`action-button`,title:`Copy share link`,disabled:ce,children:ce?``:``}),(0,G.jsx)(`button`,{onClick:()=>_e(e),className:`action-button`,title:`Share settings`,children:``}),(n||t===`owner`||t===`manager`)&&(0,G.jsx)(`button`,{onClick:()=>he(e.id),className:`action-button delete hover:text-red-600`,title:`Delete`,children:``})]})})]},e.id)})})]})}):!O&&(0,G.jsxs)(`div`,{className:`text-center py-12 border-2 border-dashed border-slate-300 rounded-xl`,children:[(0,G.jsx)(`div`,{className:`text-5xl mb-4`,children:``}),(0,G.jsx)(`h3`,{className:`text-xl font-semibold mb-2`,children:`No files yet`}),(0,G.jsx)(`p`,{className:`text-slate-600 mb-4`,children:`Upload your first file or create a folder`}),(0,G.jsx)(`label`,{htmlFor:`file-upload`,className:`upload-button inline-block cursor-pointer`,children:` Upload First File`})]})]})]}),h&&_&&(0,G.jsx)(`div`,{className:`modal-overlay`,children:(0,G.jsxs)(`div`,{className:`modal-content`,children:[(0,G.jsxs)(`div`,{className:`modal-header`,children:[(0,G.jsxs)(`h3`,{className:`text-lg font-semibold`,children:[`Share Settings for "`,_.name,`"`]}),(0,G.jsx)(`button`,{onClick:()=>g(!1),className:`text-xl hover:text-red-600 transition-colors`,children:``})]}),(0,G.jsx)(`div`,{className:`modal-body`,children:(0,G.jsxs)(`div`,{className:`space-y-6`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block mb-2 font-medium`,children:`Who can access this file?`}),(0,G.jsx)(`div`,{className:`grid grid-cols-2 gap-2`,children:[{value:`company`,label:`All Company`,desc:`Everyone in company`},{value:`role`,label:`Selected Roles`,desc:`Choose specific roles`},{value:`user`,label:`Specific Users`,desc:`Choose specific people`},{value:`public`,label:`Public`,desc:`Anyone with link`}].map(e=>(0,G.jsxs)(`button`,{onClick:()=>{b({...y,type:e.value}),e.value!==`user`&&D([])},className:`p-3 border rounded-lg text-left transition-colors ${y.type===e.value?`border-blue-500 bg-blue-50 dark:bg-blue-900/20`:`border-slate-300 hover:border-slate-400`}`,children:[(0,G.jsx)(`div`,{className:`font-medium`,children:e.label}),(0,G.jsx)(`div`,{className:`text-xs text-slate-600`,children:e.desc})]},e.value))})]}),y.type===`role`&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block mb-2 font-medium`,children:`Select Roles`}),(0,G.jsx)(`div`,{className:`space-y-2`,children:[`owner`,`manager`,`employee`,`customer`].map(e=>(0,G.jsxs)(`label`,{className:`flex items-center space-x-2`,children:[(0,G.jsx)(`input`,{type:`checkbox`,checked:y.allowedRoles.includes(e),onChange:t=>{let n=t.target.checked?[...y.allowedRoles,e]:y.allowedRoles.filter(t=>t!==e);b({...y,allowedRoles:n})},className:`rounded`}),(0,G.jsx)(`span`,{className:`capitalize`,children:e})]},e))})]}),y.type===`user`&&(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,G.jsx)(`label`,{className:`font-medium`,children:`Select Users`}),(0,G.jsx)(`button`,{onClick:()=>T(!C),className:`text-sm text-blue-600 hover:text-blue-800`,children:C?`Hide`:`Select Users`})]}),C&&(0,G.jsx)(`div`,{className:`max-h-60 overflow-y-auto border rounded-lg p-2`,children:x.map(e=>(0,G.jsxs)(`label`,{className:`flex items-center space-x-2 p-2 hover:bg-slate-100 rounded`,children:[(0,G.jsx)(`input`,{type:`checkbox`,checked:E.includes(e.id),onChange:()=>Te(e.id),className:`rounded`}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[e.avatar?(0,G.jsx)(`img`,{src:e.avatar,alt:e.full_name,className:`w-6 h-6 rounded-full`}):(0,G.jsx)(`div`,{className:`w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-xs`,children:e.full_name?.charAt(0)||`U`}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-medium`,children:e.full_name}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[e.emp_id?`ID: ${e.emp_id}  `:``,e.role?`${e.role}  `:``,e.email]})]})]})]},e.id))}),E.length>0&&(0,G.jsxs)(`div`,{className:`mt-2`,children:[(0,G.jsxs)(`div`,{className:`text-sm text-slate-600 mb-1`,children:[`Selected users: `,E.length]}),(0,G.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:E.map(e=>{let t=x.find(t=>t.id===e);return t?(0,G.jsxs)(`div`,{className:`flex items-center gap-1 bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm`,children:[(0,G.jsxs)(`span`,{children:[t.full_name,` `,t.emp_id?`(ID: ${t.emp_id})`:``]}),(0,G.jsx)(`button`,{onClick:()=>Te(t.id),className:`text-xs hover:text-red-600`,children:``})]},t.id):null})})]})]}),(0,G.jsxs)(`div`,{className:`space-y-3`,children:[(0,G.jsx)(`label`,{className:`font-medium block`,children:`Permissions`}),(0,G.jsxs)(`label`,{className:`flex items-center space-x-2`,children:[(0,G.jsx)(`input`,{type:`checkbox`,checked:y.canDownload,onChange:e=>b({...y,canDownload:e.target.checked}),className:`rounded`}),(0,G.jsx)(`span`,{children:`Allow download`})]}),(0,G.jsxs)(`label`,{className:`flex items-center space-x-2`,children:[(0,G.jsx)(`input`,{type:`checkbox`,checked:y.canEdit,onChange:e=>b({...y,canEdit:e.target.checked}),className:`rounded`}),(0,G.jsx)(`span`,{children:`Allow editing (only for specific users)`})]})]}),y.type===`public`&&_.share_link&&(0,G.jsxs)(`div`,{className:`p-3 bg-green-50 border border-green-200 rounded-lg`,children:[(0,G.jsx)(`label`,{className:`block mb-1 font-medium text-green-800`,children:`Public Share Link:`}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`input`,{type:`text`,value:_.share_link,readOnly:!0,className:`flex-1 p-2 text-sm border rounded bg-white`}),(0,G.jsx)(`button`,{onClick:()=>navigator.clipboard.writeText(_.share_link),className:`px-3 py-2 text-sm bg-green-600 text-white rounded hover:bg-green-700`,children:`Copy`})]}),(0,G.jsx)(`p`,{className:`mt-1 text-xs text-green-600`,children:`Anyone with this link can access the file`})]})]})}),(0,G.jsxs)(`div`,{className:`modal-footer`,children:[(0,G.jsx)(`button`,{onClick:()=>g(!1),className:`btn-secondary`,disabled:ce,children:`Cancel`}),(0,G.jsx)(`button`,{onClick:ve,className:`btn-primary`,disabled:ce,children:ce?`Saving...`:`Save Settings`})]})]})}),te&&k&&(0,G.jsx)(`div`,{className:`modal-overlay`,children:(0,G.jsxs)(`div`,{className:`modal-content max-w-4xl`,children:[(0,G.jsxs)(`div`,{className:`modal-header`,children:[(0,G.jsx)(`h3`,{className:`text-lg font-semibold`,children:k.name}),(0,G.jsx)(`button`,{onClick:()=>ne(!1),className:`text-xl hover:text-red-600 transition-colors`,children:``})]}),(0,G.jsx)(`div`,{className:`modal-body max-h-[70vh] overflow-auto`,children:k.mime_type?.startsWith(`image/`)?(0,G.jsx)(`div`,{className:`flex justify-center`,children:(0,G.jsx)(`img`,{src:ie,alt:k.name,className:`max-w-full max-h-[60vh] object-contain`})}):k.mime_type===`application/pdf`?(0,G.jsx)(`iframe`,{src:ie,className:`w-full h-[60vh] border-0`,title:k.name}):(0,G.jsxs)(`div`,{className:`text-center py-12`,children:[(0,G.jsx)(`div`,{className:`text-5xl mb-4`,children:Ce(k.file_type)}),(0,G.jsx)(`h4`,{className:`text-lg font-medium mb-2`,children:`Preview not available`}),(0,G.jsx)(`p`,{className:`text-slate-600 mb-4`,children:`This file type cannot be previewed in the browser.`}),(0,G.jsx)(`button`,{onClick:()=>xe(k),className:`btn-primary`,children:`Download File`})]})}),(0,G.jsxs)(`div`,{className:`modal-footer`,children:[(0,G.jsxs)(`div`,{className:`text-sm text-slate-600`,children:[(0,G.jsxs)(`span`,{className:`mr-4`,children:[`Size: `,Se(k.size)]}),(0,G.jsxs)(`span`,{className:`mr-4`,children:[`Views: `,k.view_count||0]}),(0,G.jsxs)(`span`,{children:[`Downloads: `,k.download_count||0]})]}),(0,G.jsxs)(`div`,{className:`flex gap-2`,children:[(0,G.jsx)(`button`,{onClick:()=>ye(k),className:`btn-secondary`,disabled:ce,children:ce?`Generating...`:`Copy Share Link`}),(0,G.jsx)(`button`,{onClick:()=>xe(k),className:`btn-primary`,children:`Download`})]})]})]})})]})},ud=(e,t)=>{let n;return function(...r){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...r)},t)}};function dd({onClose:e,onSuccess:t,employeeId:n,employeeName:r,empId:i,saveSale:a,currencyOptions:o=[],convertToUSD:s=()=>0,generateOrderNumber:c,saleToEdit:l=null}){let[u,d]=(0,w.useState)({client_name:``,client_contact:``,sale_date:new Date().toISOString().split(`T`)[0],amount:``,remaining:``,currency:`USD`,payment_method:`cash`,sale_type:`new`,status:`Pending`,notes:``,next_followup:``,attachments:[]}),[f,p]=(0,w.useState)(null),[m,h]=(0,w.useState)(!1),[g,_]=(0,w.useState)(``),[v,y]=(0,w.useState)(0),[b,x]=(0,w.useState)(0),[S,C]=(0,w.useState)(`ORD-000`),[T,E]=(0,w.useState)([]),[D,O]=(0,w.useState)(!0),[ee,te]=(0,w.useState)([]),[ne,k]=(0,w.useState)(!1),[re,ie]=(0,w.useState)(!1),[ae,A]=(0,w.useState)(!1),[j,oe]=(0,w.useState)(!0),[se,ce]=(0,w.useState)(!1),[M,le]=(0,w.useState)([]),[N,ue]=(0,w.useState)(``),[de,fe]=(0,w.useState)([]),pe=(0,w.useRef)(null),me=(0,w.useRef)(null),he=(0,w.useRef)(null),ge=(0,w.useRef)(null),_e=o.length>0?o:[{value:`USD`,label:`USD - US Dollar`},{value:`CAD`,label:`CAD - Canadian Dollar`},{value:`EUR`,label:`EUR - Euro`},{value:`GBP`,label:`GBP - British Pound`},{value:`INR`,label:`INR - Indian Rupee`},{value:`PKR`,label:`PKR - Pakistani Rupee`},{value:`AUD`,label:`AUD - Australian Dollar`}];(0,w.useEffect)(()=>{ve()},[]),(0,w.useEffect)(()=>{l?(d({client_name:l.client_name||``,client_contact:l.client_contact||``,sale_date:l.sale_date?new Date(l.sale_date).toISOString().split(`T`)[0]:new Date().toISOString().split(`T`)[0],amount:l.amount?parseFloat(l.amount).toString():``,remaining:l.remaining?parseFloat(l.remaining).toString():``,currency:l.currency||`USD`,payment_method:l.payment_method||`cash`,sale_type:l.sale_type||`new`,status:l.status===`Paid`?`Order Complete`:l.status===`Partially Paid`?`Partial Payment`:l.status||`Pending`,notes:l.notes||``,next_followup:l.next_followup?new Date(l.next_followup).toISOString().split(`T`)[0]:``,attachments:l.attachments||[]}),p(l.amount?parseFloat(l.amount):null),l.attachments&&l.attachments.length>0&&le(l.attachments.map((e,t)=>({id:`existing-${t}`,name:e.split(`/`).pop()||`Attachment ${t+1}`,url:e,type:`existing`}))),C(l.order_no||`ORD-000`),oe(!1)):(async()=>{try{if(oe(!0),c&&typeof c==`function`){let e=await c();if(console.log(`Generated order number:`,e),e&&e.match(/^ORD-(\d+)$/i))C(e);else if(e){let t=e.match(/(\d+)/);if(t){let e=t[1];C(`ORD-${String(e).padStart(3,`0`)}`)}else C(`ORD-000`)}else C(`ORD-000`)}else console.warn(`No generateOrderNumber function provided, using fallback`),C(`ORD-000`)}catch(e){console.error(`Error generating order number:`,e),C(`ORD-000`)}finally{oe(!1)}})()},[l,c]),(0,w.useEffect)(()=>{let e=e=>{he.current&&!he.current.contains(e.target)&&me.current&&!me.current.contains(e.target)&&ie(!1)};return document.addEventListener(`mousedown`,e),()=>{document.removeEventListener(`mousedown`,e)}},[]),(0,w.useEffect)(()=>{u.amount?y(s(parseFloat(u.amount)||0,u.currency)):y(0)},[u.amount,u.currency,s]),(0,w.useEffect)(()=>{u.remaining||u.remaining===`0`||u.remaining===``?x(s(parseFloat(u.remaining)||0,u.currency)):x(0)},[u.remaining,u.currency,s]);let ve=async()=>{try{if(O(!0),!n){console.error(`No employee ID provided for loading clients`),E([]);return}let{data:e,error:t}=await W.from(`sales_updates`).select(`client_name, client_contact`).eq(`employee_id`,n).not(`client_name`,`is`,null).not(`client_name`,`eq`,``).order(`created_at`,{ascending:!1}).limit(50);if(t){console.error(`Error loading quick clients:`,t),E([]);return}if(e&&e.length>0){let t=new Map;e.forEach(e=>{e.client_name&&!t.has(e.client_name)&&t.set(e.client_name,{name:e.client_name,contact:e.client_contact||``})}),E(Array.from(t.values()).slice(0,3))}else E([])}catch(e){console.error(`Error in loadQuickClients:`,e),E([])}finally{O(!1)}},ye=async e=>{if(!e||e.length<2){te([]),ie(!1);return}if(!n){console.error(`No employee ID for client search`);return}try{k(!0);let{data:t,error:r}=await W.from(`sales_updates`).select(`client_name, client_contact`).eq(`employee_id`,n).ilike(`client_name`,`%${e}%`).not(`client_name`,`is`,null).not(`client_name`,`eq`,``).order(`created_at`,{ascending:!1}).limit(5);if(r){console.error(`Error searching clients:`,r),te([]);return}if(t&&t.length>0){let e=[],n=new Set;t.forEach(t=>{t.client_name&&!n.has(t.client_name)&&(n.add(t.client_name),e.push({name:t.client_name,contact:t.client_contact||``}))}),te(e),ie(!0)}else te([]),ie(!1)}catch(e){console.error(`Error in searchClients:`,e),te([])}finally{k(!1)}},be=(0,w.useCallback)(ud(e=>{ye(e)},300),[n]),P=e=>{let t=e.target.value;d(e=>({...e,client_name:t,client_contact:ae?e.client_contact:``})),A(!1),pe.current&&clearTimeout(pe.current),t.length>=2?pe.current=setTimeout(()=>{be(t)},300):(te([]),ie(!1))},xe=e=>{d(t=>({...t,client_name:e.name,client_contact:e.contact||``})),A(!0),ie(!1),te([]),setTimeout(()=>{let e=document.querySelector(`input[name="amount"]`);e&&e.focus()},100)},Se=e=>{let t=e.target.value,n=parseFloat(t)||0;d(e=>{let r={...e,amount:t},i=parseFloat(e.remaining)||0;(!e.remaining||e.remaining===``||n<i)&&(r.remaining=t);let a=parseFloat(r.remaining)||0;return a===0&&n>0?r.status=`Order Complete`:a>0&&a<n?r.status=`Partial Payment`:a===n&&n>0&&(r.status=`Pending`),r})},Ce=e=>{let t=e.target.value,n=parseFloat(t)||0;d(e=>{let r=parseFloat(e.amount)||0;if(n>r)return alert(`Remaining amount cannot exceed total amount`),{...e,remaining:r.toString()};let i={...e,remaining:t};return n===0&&r>0?i.status=`Order Complete`:n>0&&n<r?i.status=`Partial Payment`:n===r&&r>0&&(i.status=`Pending`),i})},we=e=>{let{name:t,value:n}=e.target;t===`amount`||t===`remaining`||d(e=>({...e,[t]:n}))},Te=e=>{let t=e.target.value,n=parseFloat(u.amount)||0,r=parseFloat(u.remaining)||0;d(e=>{let i=r;if(t===`Order Complete`)i=0;else if(t===`Pending`)i=n;else if(t===`Delivery`&&r>=n)return alert(`Delivery status requires payment to be received. Please update remaining amount.`),e;return{...e,status:t,remaining:i.toString()}})},Ee=async e=>{let t=Array.from(e.target.files);if(t.length!==0){ce(!0);try{let e=[];for(let r of t){if(r.size>10*1024*1024){alert(`File ${r.name} is too large. Maximum size is 10MB.`);continue}let t=r.name.split(`.`).pop(),i=`sales-attachments/${n}/${`${Date.now()}-${Math.random().toString(36).substr(2,9)}.${t}`}`,{error:a}=await W.storage.from(`sales-attachments`).upload(i,r);if(a){console.error(`Error uploading file:`,a),alert(`Failed to upload ${r.name}`);continue}let{data:o}=W.storage.from(`sales-attachments`).getPublicUrl(i);o.publicUrl&&(e.push(o.publicUrl),le(e=>[...e,{id:Date.now().toString(),name:r.name,url:o.publicUrl,type:`new`}]))}d(t=>({...t,attachments:[...t.attachments,...e]}))}catch(e){console.error(`Error in file upload:`,e),alert(`Error uploading files`)}finally{ce(!1),ge.current&&(ge.current.value=``)}}},De=e=>{le(t=>t.filter((t,n)=>n!==e)),d(t=>({...t,attachments:t.attachments.filter((t,n)=>n!==e)}))},Oe=()=>{N.trim()&&(fe(e=>[...e,{id:Date.now().toString(),text:N.trim(),completed:!1}]),ue(``))},ke=e=>{fe(t=>t.filter(t=>t.id!==e))},Ae=e=>{fe(t=>t.map(t=>t.id===e?{...t,completed:!t.completed}:t))},je=()=>!l||f===null?!1:(parseFloat(u.amount)||0)!==(parseFloat(f)||0),Me=()=>{if(!je())return null;let e=parseFloat(u.amount)||0,t=parseFloat(f)||0,n=e-t,r=t>0?(n/t*100).toFixed(1):100,i=n>0,a=n<0;return(0,G.jsxs)(`div`,{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ml-2 ${i?`bg-green-100 text-green-800 border border-green-200`:a?`bg-red-100 text-red-800 border border-red-200`:`bg-blue-100 text-blue-800 border border-blue-200`}`,children:[i?``:a?``:``,(0,G.jsxs)(`span`,{className:`ml-1`,children:[i?`+`:``,u.currency,` `,Math.abs(n).toFixed(2),(0,G.jsxs)(`span`,{className:`ml-1`,children:[`(`,i?`+`:``,r,`%)`]})]})]})},Ne=()=>(parseFloat(u.amount)||0)-(parseFloat(u.remaining)||0),Pe=async r=>{r.preventDefault(),_(``),h(!0);try{if(!u.client_name.trim())throw Error(`Client name is required`);let r=parseFloat(u.amount)||0,o=parseFloat(u.remaining)||0;if(r<=0)throw Error(`Valid amount greater than 0 is required`);if(o<0)throw Error(`Remaining amount cannot be negative`);if(o>r)throw Error(`Remaining amount cannot be greater than total amount`);let s=u.status;if((!s||s===``)&&(s=o===0?`Order Complete`:o<r?`Partial Payment`:`Pending`),s===`Delivery`&&o>=r)throw Error(`Delivery status requires payment to be received (remaining amount must be less than total amount)`);if(s===`Order Complete`&&o>0)throw Error(`Order Complete status requires remaining amount to be 0`);let c=S;if(!l&&(!c||!c.match(/^ORD-(\d+)$/i)))throw Error(`Invalid order number. Please wait for order number generation.`);if(!l){let{data:e}=await W.from(`sales_updates`).select(`id`).eq(`order_no`,c).single();if(e)throw Error(`Order number already exists. Please refresh and try again.`)}console.log(`Submitting with order number:`,c);let d={client_name:u.client_name.trim(),client_contact:u.client_contact.trim(),sale_date:u.sale_date,amount:r,remaining:o,currency:u.currency,payment_method:u.payment_method,sale_type:u.sale_type,status:s,notes:u.notes.trim(),next_followup:u.next_followup||null,attachments:u.attachments,amount_usd:v,remaining_usd:b,employee_id:n,emp_id:i};if(l||(d.order_no=c),de.length>0){let e=de.map(e=>`${e.completed?``:``} ${e.text}`).join(`
`);d.notes=d.notes?`${d.notes}\n\nRequirements:\n${e}`:`Requirements:\n${e}`}console.log(`Sale data to save:`,d);let f=await a(d,l?.id);if(f.success)console.log(`Sale saved successfully with order number:`,c),e(),setTimeout(()=>{t&&typeof t==`function`&&t()},100);else throw Error(f.error||`Failed to save sale`)}catch(e){_(e.message),h(!1)}},Fe=parseFloat(u.amount)||0,Ie=parseFloat(u.remaining)||0,Le=Ne(),F=(e=>{switch(e){case`Order Complete`:return{bg:`bg-green-500`,text:`text-green-600`};case`Partial Payment`:return{bg:`bg-blue-500`,text:`text-blue-600`};case`Delivery`:return{bg:`bg-purple-500`,text:`text-purple-600`};case`Pending`:default:return{bg:`bg-amber-500`,text:`text-amber-600`}}})(u.status);return(0,G.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4`,children:(0,G.jsxs)(`div`,{className:`bg-white/95 rounded-xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-xl`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-start mb-6`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h3`,{className:`text-2xl font-bold`,children:l?`Edit Sale`:`Record New Sale`}),(0,G.jsxs)(`div`,{className:`flex items-center gap-3 mt-1`,children:[(0,G.jsxs)(`p`,{className:`text-sm text-slate-600`,children:[r,` (`,i,`)`]}),S&&(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`text-sm font-medium text-slate-700`,children:`Order:`}),(0,G.jsx)(`span`,{className:`text-sm font-mono px-2 py-1 rounded border ${j?`bg-amber-100 text-amber-700 border-amber-200`:S===`ORD-000`?`bg-red-100 text-red-700 border-red-200`:`bg-blue-100 text-blue-700 border-blue-200`}`,children:S}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:j?`(Generating...)`:S===`ORD-000`?`(Error generating)`:`(Ready)`})]})]})]}),(0,G.jsx)(`button`,{onClick:e,className:`text-2xl hover:text-rose-600 transition-colors`,disabled:m,children:``})]}),!l&&(0,G.jsx)(`div`,{className:`mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg`,children:(0,G.jsxs)(`div`,{className:`flex items-center`,children:[(0,G.jsx)(`div`,{className:`mr-3 text-blue-600`,children:(0,G.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M13 16h-1v-4h1m0 0h-1m1 0v4m-5-4h.01M11 12h2`})})}),(0,G.jsxs)(`div`,{className:`text-sm text-blue-700`,children:[(0,G.jsx)(`span`,{className:`font-semibold`,children:`Order Number System:`}),` Sequential ORD-XXX format.`,j?` Generating unique order number...`:S===`ORD-000`?` Error generating order number. Please refresh.`:` Using ${S}.`]})]})}),l&&je()&&(0,G.jsx)(`div`,{className:`mb-4 p-3 border rounded-lg bg-gradient-to-r from-yellow-50 to-amber-50 border-yellow-200`,children:(0,G.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,G.jsxs)(`div`,{className:`flex items-center`,children:[(0,G.jsx)(`div`,{className:`mr-3 text-yellow-600`,children:(0,G.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z`})})}),(0,G.jsxs)(`div`,{className:`text-sm text-yellow-800`,children:[(0,G.jsx)(`span`,{className:`font-semibold`,children:`Amount Change Detected!`}),(0,G.jsx)(`div`,{className:`text-xs text-yellow-700 mt-1`,children:`You have modified the original order amount. This change will be recorded in the sale history.`})]})]}),Me()]})}),(0,G.jsxs)(`div`,{className:`mb-4 p-3 bg-slate-50 border border-slate-200 rounded-lg`,children:[(0,G.jsx)(`div`,{className:`text-sm font-medium text-slate-700 mb-2`,children:`Status Definitions:`}),(0,G.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-1 text-xs text-slate-600`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-amber-500`}),(0,G.jsxs)(`span`,{children:[(0,G.jsx)(`strong`,{children:`Pending:`}),` payment received but file not delivered yet`]})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-purple-500`}),(0,G.jsxs)(`span`,{children:[(0,G.jsx)(`strong`,{children:`Delivery:`}),` payment received and file delivered`]})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-blue-500`}),(0,G.jsxs)(`span`,{children:[(0,G.jsx)(`strong`,{children:`Partial Payment:`}),` Some payment received`]})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-green-500`}),(0,G.jsxs)(`span`,{children:[(0,G.jsx)(`strong`,{children:`Order Complete:`}),` Full payment received`]})]})]})]}),g&&(0,G.jsx)(`div`,{className:`mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg`,children:g}),(0,G.jsxs)(`form`,{onSubmit:Pe,children:[(0,G.jsxs)(`div`,{className:`mb-4`,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,G.jsxs)(`label`,{className:`block text-sm font-medium text-slate-700`,children:[`Quick Client Selection `,T.length>0&&`(${T.length} recent clients)`]}),(0,G.jsx)(`button`,{type:`button`,onClick:ve,disabled:D,className:`text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1`,children:D?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`svg`,{className:`animate-spin h-3 w-3`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,children:[(0,G.jsx)(`circle`,{className:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,strokeWidth:`4`}),(0,G.jsx)(`path`,{className:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})]}),`Loading...`]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`svg`,{className:`w-3 h-3`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15`})}),`Refresh`]})})]}),D?(0,G.jsx)(`div`,{className:`flex justify-center p-4`,children:(0,G.jsx)(`div`,{className:`text-sm text-slate-500`,children:`Loading your previous clients...`})}):T.length>0?(0,G.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:T.map((e,t)=>(0,G.jsxs)(`button`,{type:`button`,onClick:()=>xe(e),className:`px-3 py-1.5 text-sm rounded-lg transition-colors flex items-center gap-2 ${u.client_name===e.name?`bg-blue-100 text-blue-700 border border-blue-300`:`bg-slate-100 hover:bg-slate-200 text-slate-700`}`,disabled:m,title:e.contact?`Contact: ${e.contact}`:`No contact info`,children:[(0,G.jsx)(`span`,{children:e.name}),e.contact&&(0,G.jsxs)(`span`,{className:`text-xs opacity-70`,children:[`(`,e.contact,`)`]})]},t))}):(0,G.jsxs)(`div`,{className:`text-sm text-slate-500 p-3 bg-slate-50 rounded-lg border border-slate-200`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`svg`,{className:`w-4 h-4 text-slate-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M13 16h-1v-4h1m0 0h-1m1 0v4m-5-4h.01M11 12h2`})}),(0,G.jsx)(`span`,{children:`No previous clients found. Start typing to add a new client.`})]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-400 mt-1`,children:`Once you save a sale, the client will appear here for quick selection.`})]}),T.length>0&&(0,G.jsxs)(`div`,{className:`text-xs text-slate-500 mt-2`,children:[`Showing your `,T.length,` most recent unique clients from your sales history`]})]}),(0,G.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 relative`,children:[(0,G.jsxs)(`div`,{className:`relative`,ref:me,children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Client Name *`}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsx)(`input`,{ref:me,type:`text`,name:`client_name`,value:u.client_name,onChange:P,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10`,placeholder:`Start typing client name...`,required:!0,disabled:m,onFocus:()=>{u.client_name.length>=2&&ee.length>0&&ie(!0)}}),ne&&(0,G.jsx)(`div`,{className:`absolute right-3 top-1/2 transform -translate-y-1/2`,children:(0,G.jsxs)(`svg`,{className:`animate-spin h-4 w-4 text-blue-600`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,children:[(0,G.jsx)(`circle`,{className:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,strokeWidth:`4`}),(0,G.jsx)(`path`,{className:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})]})}),u.client_name.length>0&&!ne&&ae&&(0,G.jsx)(`div`,{className:`absolute right-3 top-1/2 transform -translate-y-1/2 text-green-600`,children:(0,G.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M5 13l4 4L19 7`})})})]}),re&&ee.length>0&&(0,G.jsxs)(`div`,{ref:he,className:`absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-60 overflow-y-auto`,children:[(0,G.jsx)(`div`,{className:`p-2 border-b border-slate-100 bg-slate-50`,children:(0,G.jsx)(`div`,{className:`text-xs font-medium text-slate-600`,children:`Select from existing clients:`})}),ee.map((e,t)=>(0,G.jsxs)(`button`,{type:`button`,onClick:()=>xe(e),className:`w-full text-left px-3 py-2 hover:bg-blue-50 transition-colors border-b border-slate-100 last:border-b-0 flex items-center justify-between`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`font-medium text-slate-800`,children:e.name}),e.contact&&(0,G.jsx)(`div`,{className:`text-sm text-slate-500`,children:e.contact})]}),(0,G.jsx)(`svg`,{className:`w-4 h-4 text-blue-600`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M9 5l7 7-7 7`})})]},t)),(0,G.jsx)(`div`,{className:`p-2 border-t border-slate-100 bg-slate-50`,children:(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Press Enter to continue with new client`})})]}),u.client_name.length===1&&(0,G.jsx)(`div`,{className:`text-xs text-slate-400 mt-1`,children:`Type at least 2 characters to search existing clients`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Client Contact`}),(0,G.jsx)(`input`,{type:`text`,name:`client_contact`,value:u.client_contact,onChange:we,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:`Phone or email`,disabled:m}),ae&&u.client_contact&&(0,G.jsxs)(`div`,{className:`text-xs text-green-600 mt-1 flex items-center gap-1`,children:[(0,G.jsx)(`svg`,{className:`w-3 h-3`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M5 13l4 4L19 7`})}),`Auto-filled from database`]})]})]}),(0,G.jsxs)(`div`,{className:`mb-4`,children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-2`,children:`Sale Requirements`}),(0,G.jsxs)(`div`,{className:`space-y-2`,children:[(0,G.jsxs)(`div`,{className:`flex gap-2`,children:[(0,G.jsx)(`input`,{type:`text`,value:N,onChange:e=>ue(e.target.value),className:`flex-1 p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:`Add a requirement (e.g., 'Need final approval', 'Client to provide specs')`,onKeyPress:e=>e.key===`Enter`&&Oe()}),(0,G.jsx)(`button`,{type:`button`,onClick:Oe,className:`px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600`,children:`Add`})]}),de.length>0&&(0,G.jsxs)(`div`,{className:`border border-slate-200 rounded-lg p-3 bg-slate-50`,children:[(0,G.jsxs)(`div`,{className:`text-xs font-medium text-slate-700 mb-2`,children:[`Requirements (`,de.length,`)`]}),(0,G.jsx)(`div`,{className:`space-y-2`,children:de.map(e=>(0,G.jsxs)(`div`,{className:`flex items-center justify-between p-2 bg-white rounded border border-slate-200`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`button`,{type:`button`,onClick:()=>Ae(e.id),className:`w-5 h-5 rounded border flex items-center justify-center ${e.completed?`bg-green-500 border-green-600 text-white`:`border-slate-300`}`,children:e.completed&&``}),(0,G.jsx)(`span`,{className:e.completed?`line-through text-slate-500`:``,children:e.text})]}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>ke(e.id),className:`text-red-500 hover:text-red-700`,children:``})]},e.id))})]})]})]}),(0,G.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4 mb-4`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Sale Date *`}),(0,G.jsx)(`input`,{type:`date`,name:`sale_date`,value:u.sale_date,onChange:we,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,required:!0,disabled:m})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Payment Method`}),(0,G.jsxs)(`select`,{name:`payment_method`,value:u.payment_method,onChange:we,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,disabled:m,children:[(0,G.jsx)(`option`,{value:`cash`,children:`Cash`}),(0,G.jsx)(`option`,{value:`credit_card`,children:`Credit Card`}),(0,G.jsx)(`option`,{value:`bank_transfer`,children:`Bank Transfer`}),(0,G.jsx)(`option`,{value:`check`,children:`Check`}),(0,G.jsx)(`option`,{value:`digital_wallet`,children:`Digital Wallet`}),(0,G.jsx)(`option`,{value:`other`,children:`Other`})]})]})]}),(0,G.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-4 mb-4`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Currency *`}),(0,G.jsx)(`select`,{name:`currency`,value:u.currency,onChange:we,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,disabled:m,children:_e.map(e=>(0,G.jsx)(`option`,{value:e.value,children:e.label},e.value))})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:[`Total Amount *`,l&&f!==null&&(0,G.jsxs)(`span`,{className:`text-xs text-slate-500 ml-2`,children:[`(Original: `,u.currency,` `,f.toFixed(2),`)`]})]}),(0,G.jsxs)(`div`,{className:`flex items-center`,children:[(0,G.jsx)(`input`,{type:`number`,name:`amount`,value:u.amount,onChange:Se,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:`0.0`,step:`0.01`,min:`0.01`,required:!0,disabled:m}),l&&je()&&(0,G.jsx)(`div`,{className:`ml-2`,children:Me()})]}),v>0&&u.currency!==`USD`&&(0,G.jsxs)(`div`,{className:`text-xs text-slate-500 mt-1`,children:[` $`,v.toFixed(2),` USD`]})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Pending Amount *`}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsx)(`input`,{type:`number`,name:`remaining`,value:u.remaining,onChange:Ce,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10`,placeholder:`0.00`,step:`0.01`,min:`0`,max:u.amount||void 0,required:!0,disabled:m}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>{d(e=>({...e,remaining:`0`,status:`Order Complete`}))},className:`absolute right-2 top-1/2 transform -translate-y-1/2 text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 transition-colors`,disabled:m||!u.amount,title:`Mark as order complete`,children:`Complete`})]}),u.remaining&&u.currency!==`USD`&&(0,G.jsxs)(`div`,{className:`text-xs text-slate-500 mt-1`,children:[` $`,b.toFixed(2),` USD`]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-400 mt-1`,children:u.amount&&u.remaining&&(0,G.jsxs)(`span`,{children:[`Max: `,u.currency,` `,u.amount]})})]})]}),(0,G.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4 mb-4`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Sale Type`}),(0,G.jsxs)(`select`,{name:`sale_type`,value:u.sale_type,onChange:we,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,disabled:m,children:[(0,G.jsx)(`option`,{value:`new`,children:`New Sale`}),(0,G.jsx)(`option`,{value:`renewal`,children:`Renewal`}),(0,G.jsx)(`option`,{value:`upgrade`,children:`Upgrade`}),(0,G.jsx)(`option`,{value:`addon`,children:`Add-on`}),(0,G.jsx)(`option`,{value:`service`,children:`Service`}),(0,G.jsx)(`option`,{value:`product`,children:`Product`})]})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Status`}),(0,G.jsxs)(`div`,{className:`flex gap-2`,children:[(0,G.jsxs)(`select`,{name:`status`,value:u.status,onChange:Te,className:`flex-1 p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,disabled:m,children:[(0,G.jsx)(`option`,{value:`Pending`,children:`Pending`}),(0,G.jsx)(`option`,{value:`Partial Payment`,children:`Partial Payment`}),(0,G.jsx)(`option`,{value:`Delivery`,children:`Delivery`}),(0,G.jsx)(`option`,{value:`Order Complete`,children:`Order Complete`})]}),(0,G.jsx)(`div`,{className:`w-4 h-4 rounded-full mt-3 ${F.bg}`})]}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-400 mt-1`,children:[u.status===`Order Complete`&&`Full payment received (Remaining: 0)`,u.status===`Partial Payment`&&`Some payment received (Remaining < Amount)`,u.status===`Delivery`&&`Payment received and file delivered`,u.status===`Pending`&&`Payment received but file not delivered yet`]})]})]}),(0,G.jsxs)(`div`,{className:`mb-4`,children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-2`,children:`Attachments`}),(0,G.jsxs)(`div`,{className:`space-y-3`,children:[(0,G.jsx)(`input`,{ref:ge,type:`file`,multiple:!0,onChange:Ee,className:`hidden`,accept:`.pdf,.doc,.docx,.jpg,.jpeg,.png,.xls,.xlsx`}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>ge.current?.click(),disabled:se||m,className:`flex items-center gap-2 px-4 py-2 border-2 border-dashed border-slate-300 rounded-lg text-slate-600 hover:border-blue-500 hover:text-blue-600 transition-colors disabled:opacity-50`,children:se?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`svg`,{className:`animate-spin h-4 w-4`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,children:[(0,G.jsx)(`circle`,{className:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,strokeWidth:`4`}),(0,G.jsx)(`path`,{className:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})]}),`Uploading...`]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12`})}),`Upload Files`]})}),M.length>0&&(0,G.jsxs)(`div`,{className:`border border-slate-200 rounded-lg p-3 bg-slate-50`,children:[(0,G.jsxs)(`div`,{className:`text-xs font-medium text-slate-700 mb-2`,children:[`Attached Files (`,M.length,`)`]}),(0,G.jsx)(`div`,{className:`space-y-2`,children:M.map((e,t)=>(0,G.jsxs)(`div`,{className:`flex items-center justify-between p-2 bg-white rounded border border-slate-200`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`div`,{className:`w-8 h-8 rounded flex items-center justify-center ${e.name.match(/\.(pdf)$/i)?`bg-red-100 text-red-600`:e.name.match(/\.(doc|docx)$/i)?`bg-blue-100 text-blue-600`:e.name.match(/\.(jpg|jpeg|png)$/i)?`bg-green-100 text-green-600`:e.name.match(/\.(xls|xlsx)$/i)?`bg-emerald-100 text-emerald-600`:`bg-slate-100 text-slate-600`}`,children:e.name.match(/\.(pdf)$/i)?`PDF`:e.name.match(/\.(doc|docx)$/i)?`DOC`:e.name.match(/\.(jpg|jpeg|png)$/i)?`IMG`:e.name.match(/\.(xls|xlsx)$/i)?`XLS`:`FILE`}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`text-sm font-medium truncate max-w-xs`,children:e.name}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:e.type===`existing`?`Existing file`:`Uploaded`})]})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`a`,{href:e.url,target:`_blank`,rel:`noopener noreferrer`,className:`text-blue-600 hover:text-blue-800`,title:`View file`,children:(0,G.jsxs)(`svg`,{className:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:[(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M15 12a3 3 0 11-6 0 3 3 0 016 0z`}),(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z`})]})}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>De(t),className:`text-red-500 hover:text-red-700`,title:`Remove file`,children:(0,G.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M6 18L18 6M6 6l12 12`})})})]})]},e.id))})]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Supported files: PDF, DOC, DOCX, JPG, PNG, XLS, XLSX (Max 10MB each)`})]})]}),(0,G.jsxs)(`div`,{className:`mb-4 p-3 bg-slate-50 rounded-lg`,children:[(0,G.jsx)(`div`,{className:`text-sm font-medium text-slate-700 mb-2`,children:`Payment Summary`}),(0,G.jsxs)(`div`,{className:`grid grid-cols-3 gap-2 text-sm`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`text-slate-600`,children:`Total Amount`}),(0,G.jsxs)(`div`,{className:`font-bold`,children:[u.currency,` `,Fe.toFixed(2),v>0&&u.currency!==`USD`&&(0,G.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[`$`,v.toFixed(2),` USD`]}),l&&f!==null&&je()&&(0,G.jsxs)(`div`,{className:`text-xs text-yellow-600 mt-1`,children:[(0,G.jsx)(`span`,{className:`font-medium`,children:`Changed`}),(0,G.jsxs)(`span`,{className:`ml-1`,children:[`(`,f.toFixed(2),`  `,Fe.toFixed(2),`)`]})]})]})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`text-slate-600`,children:`Pending Amount`}),(0,G.jsxs)(`div`,{className:`font-bold ${Ie>0?`text-amber-600`:`text-green-600`}`,children:[u.currency,` `,Ie.toFixed(2),b>0&&u.currency!==`USD`&&(0,G.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[`$`,b.toFixed(2),` USD`]})]})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`text-slate-600`,children:`Paid Amount`}),(0,G.jsxs)(`div`,{className:`font-bold text-green-600`,children:[u.currency,` `,Le.toFixed(2),Le>0&&u.currency!==`USD`&&(0,G.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[`$`,s(Le,u.currency).toFixed(2),` USD`]})]})]})]}),(0,G.jsxs)(`div`,{className:`mt-2 pt-2 border-t border-slate-200`,children:[(0,G.jsxs)(`div`,{className:`text-sm font-medium ${F.text} flex items-center gap-2`,children:[(0,G.jsx)(`div`,{className:`w-3 h-3 rounded-full ${F.bg}`}),Ie===0?` Order Complete`:Ie<Fe?` Partial Payment`:u.status===`Delivery`?` Delivery`:` Pending`]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:Ie===0?`Full payment received`:Ie<Fe?`${(Le/Fe*100).toFixed(1)}% collected`:`No payment received yet`})]})]}),(0,G.jsxs)(`div`,{className:`mb-4`,children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Notes`}),(0,G.jsx)(`textarea`,{name:`notes`,value:u.notes,onChange:we,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,rows:3,placeholder:`Additional notes about this sale...`,disabled:m})]}),(0,G.jsxs)(`div`,{className:`mb-6`,children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Next Follow-up Date (Optional)`}),(0,G.jsx)(`input`,{type:`date`,name:`next_followup`,value:u.next_followup,onChange:we,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,disabled:m})]}),(0,G.jsxs)(`div`,{className:`flex justify-end gap-3 border-t pt-4`,children:[(0,G.jsx)(`button`,{type:`button`,onClick:e,className:`px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50 transition-colors disabled:opacity-50`,disabled:m,children:`Cancel`}),(0,G.jsx)(`button`,{type:`submit`,className:`px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-semibold hover:from-green-700 hover:to-emerald-700 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center gap-2`,disabled:m||!l&&(S===`ORD-000`||j),title:m?`Saving...`:!l&&j?`Generating order number...`:!l&&S===`ORD-000`?`Invalid order number`:l?`Update Sale`:`Save Sale`,children:m?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`svg`,{className:`animate-spin h-4 w-4 text-white`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,children:[(0,G.jsx)(`circle`,{className:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,strokeWidth:`4`}),(0,G.jsx)(`path`,{className:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})]}),l?`Updating...`:`Saving...`]}):!l&&j?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`svg`,{className:`animate-spin h-4 w-4 text-white`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,children:[(0,G.jsx)(`circle`,{className:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,strokeWidth:`4`}),(0,G.jsx)(`path`,{className:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})]}),`Generating Order...`]}):(0,G.jsxs)(G.Fragment,{children:[l?`Update`:`Save`,` Sale `,l?``:`(${S})`,l&&je()&&(0,G.jsx)(`span`,{className:`ml-1 text-xs bg-yellow-500 text-white px-1.5 py-0.5 rounded-full`,children:`Amount Changed`})]})})]}),!l&&(0,G.jsx)(`div`,{className:`mt-3 text-xs text-slate-500 text-center`,children:j?`Please wait while generating a unique order number...`:S===`ORD-000`?`Error generating order number. Please refresh the page.`:`Sales can be updated later but cannot be deleted. Please review carefully before saving.`})]})]})})}var fd=({userId:e,onUpdate:t,dateRange:n=null,sales:r=null,hideCompleted:i=!1})=>{let[a,o]=(0,w.useState)(r||[]),[s,c]=(0,w.useState)(!r),[l,u]=(0,w.useState)(null),[d,f]=(0,w.useState)(``),[p,m]=(0,w.useState)(`all`),[h,g]=(0,w.useState)(null),[_,v]=(0,w.useState)(``),[y,b]=(0,w.useState)(!1),[x,S]=(0,w.useState)(null),[C,T]=(0,w.useState)({}),[E,D]=(0,w.useState)({}),[O,ee]=(0,w.useState)({}),[te,ne]=(0,w.useState)({}),[k,re]=(0,w.useState)(0),[ie,ae]=(0,w.useState)(0),A=()=>{let e=new Date,t=e.getMonth(),n=e.getFullYear(),r=new Date(n,t,1),i=t===11?0:t+1,a=t===11?n+1:n,o=new Date(a,i,5);return{startDate:r.toISOString().split(`T`)[0],endDate:o.toISOString().split(`T`)[0]}};(0,w.useEffect)(()=>{r?(o(r),c(!1)):j()},[e,n,r,y]),(0,w.useEffect)(()=>{oe(),se(),ce(),M(),le()},[a]);let j=async()=>{try{let t=n||A(),r=W.from(`sales_updates`).select(`*`).eq(`employee_id`,e).order(`created_at`,{ascending:!1});r=r.gte(`sale_date`,t.startDate).lte(`sale_date`,t.endDate),y||(r=r.eq(`is_hidden_for_employee`,!1));let{data:a,error:s}=await r;if(s){console.error(`Error loading sales:`,s);return}let c=(a||[]).map(e=>{let t=e.order_no;if(!t)return{...e,order_no:`ORD-000`};if(!t.match(/^ORD-(\d+)$/i))if(t.match(/^CLI-(\d+)$/i)){let n=t.match(/^CLI-(\d+)$/i),r=n?n[1]:`001`;return{...e,order_no:`ORD-${r.padStart(3,`0`)}`}}else if(t.match(/^QRD-(\d+)$/i)){let n=t.match(/^QRD-(\d+)$/i),r=n?n[1]:`001`;return{...e,order_no:`ORD-${r.padStart(3,`0`)}`}}else{let t=e.id&&parseInt(e.id.toString().slice(-3),10)||1;return{...e,order_no:`ORD-${String(t).padStart(3,`0`)}`}}return e});o(i?c.filter(e=>e.status!==`Order Complete`&&!e.is_cancelled):c)}catch(e){console.error(`Error loading sales:`,e)}finally{c(!1)}},oe=async()=>{if(a.length!==0)try{let e={};for(let t of a){let{data:n,error:r}=await W.from(`sales_edit_history`).select(`*`).eq(`sale_id`,t.id).order(`changed_at`,{ascending:!1});if(!r&&n&&n.length>0){let r=n.filter(e=>e.changed_field===`amount`||e.changed_field===`remaining`);r.length>0&&(e[t.id]=r)}else t.notes&&t.notes.includes(`Amount changed from`)&&(e[t.id]=[{id:`note-`+t.id,changed_field:`amount`,old_value:t.notes.match(/Amount changed from ([0-9.]+) to ([0-9.]+)/)?.[1]||`0`,new_value:t.notes.match(/Amount changed from ([0-9.]+) to ([0-9.]+)/)?.[2]||t.amount,changed_by:t.notes.includes(`by Manager`)?`Manager`:`Employee`,changed_at:t.updated_at||t.created_at}])}T(e)}catch(e){console.error(`Error loading amount change history:`,e)}},se=async()=>{if(a.length!==0)try{let t={};for(let n of a)n.is_cancelled&&(t[n.id]={cancelled_at:n.cancelled_at,cancelled_by:n.cancelled_by||e,cancelled_reason:n.cancelled_reason||`No reason provided`});ee(t)}catch(e){console.error(`Error loading cancellation history:`,e)}},ce=async()=>{if(a.length!==0)try{let t={};for(let n of a)n.is_delivered&&(t[n.id]={delivered_at:n.delivered_at,delivered_by:n.delivered_by||e,delivery_notes:n.delivery_notes||``});ne(t)}catch(e){console.error(`Error loading delivery history:`,e)}},M=()=>{let e=new Date().toISOString().split(`T`)[0];re(a.reduce((t,n)=>n.is_cancelled?t:new Date(n.sale_date||n.created_at).toISOString().split(`T`)[0]===e?t+(parseFloat(n.amount_usd)||0):t,0))},le=()=>{let e=a.filter(e=>e.is_cancelled).length;ae(e)},N=()=>a.filter(e=>e.is_delivered&&!e.is_cancelled).length,ue=async(n,i)=>{try{let o=a.find(e=>e.id===n),s={status:i};i===`Delivery`&&o.status!==`Delivery`&&(s.is_delivered=!0,s.delivered_at=new Date().toISOString(),s.delivered_by=e,s.delivery_notes=`File delivered to client`),i!==`Delivery`&&o.status===`Delivery`&&(s.is_delivered=!1,s.delivered_at=null,s.delivered_by=null,s.delivery_notes=null),(await t(n,s)).success&&(r||await j())}catch(e){console.error(`Error updating status:`,e)}},de=async n=>{let i=a.find(e=>e.id===n);if(!i)return;let o=prompt(`Add delivery notes (optional):`,`File delivered to client`);if(o!==null)try{(await t(n,{status:`Delivery`,is_delivered:!0,delivered_at:new Date().toISOString(),delivered_by:e,delivery_notes:o||`File delivered to client`,notes:(i.notes||``)+`\n[File delivered on ${new Date().toLocaleDateString()}: ${o||`No notes provided`}]`})).success&&(r||await j(),alert(`Sale marked as delivered successfully`))}catch(e){console.error(`Error marking as delivered:`,e),alert(`Failed to mark as delivered`)}},fe=async e=>{if(!_||isNaN(parseFloat(_))||parseFloat(_)<=0){alert(`Please enter a valid amount greater than 0`);return}let n=a.find(t=>t.id===e);if(!n)return;let i=parseFloat(n.amount)||0,o=parseFloat(n.remaining)||0,s=parseFloat(_),c;c=s>i?o*(s/i):Math.min(o,s);try{if((await t(e,{amount:s,remaining:c,amount_usd:n.currency===`USD`?s:s*.0036,remaining_usd:n.currency===`USD`?c:c*.0036,notes:(n.notes||``)+`\n[Amount changed from ${i.toFixed(2)} ${n.currency} to ${s.toFixed(2)} ${n.currency} on ${new Date().toLocaleDateString()} by Manager]`})).success){g(null),v(``),r||await j(),alert(`Amount updated successfully`);try{await W.from(`sales_edit_history`).insert({sale_id:e,changed_field:`amount`,old_value:i.toString(),new_value:s.toString(),changed_by:`Manager`,changed_at:new Date().toISOString(),currency:n.currency})}catch(e){console.error(`Error recording amount change history:`,e)}}}catch(e){console.error(`Error updating amount:`,e),alert(`Failed to update amount`)}},pe=async e=>{if(!d||isNaN(parseFloat(d))){alert(`Please enter a valid payment amount`);return}let n=a.find(t=>t.id===e);if(!n)return;let i=parseFloat(n.remaining)||0,o=parseFloat(d);if(o>i){alert(`Payment amount cannot exceed remaining amount`);return}let s=i-o,c=n.status;s===0?c=`Order Complete`:s<i&&(c=`Partial Payment`);try{(await t(e,{remaining:s,status:c})).success&&(u(null),f(``),r||await j(),alert(`Payment recorded successfully`))}catch(e){console.error(`Error updating payment:`,e)}},me=async n=>{let i=a.find(e=>e.id===n);if(!i)return;let o=prompt(`Please provide a reason for cancellation (optional):`,``);if(o!==null&&window.confirm(`Are you sure you want to cancel this sale? This will deduct the amount from your total sales.`))try{(await t(n,{status:`Cancelled`,is_cancelled:!0,cancelled_at:new Date().toISOString(),cancelled_by:e,cancelled_reason:o||``,cancelled_amount:i.amount,cancelled_amount_usd:i.amount_usd,notes:(i.notes||``)+`\n[Sale cancelled on ${new Date().toLocaleDateString()} for: ${o||`No reason provided`}]`})).success&&(r||await j(),alert(`Sale cancelled successfully. Amount deducted from total sales.`))}catch(e){console.error(`Error cancelling sale:`,e),alert(`Failed to cancel sale`)}},he=async e=>{let n=a.find(t=>t.id===e);if(n&&window.confirm(`Are you sure you want to restore this sale? This will add the amount back to your total sales.`))try{(await t(e,{status:`Pending`,is_cancelled:!1,cancelled_at:null,cancelled_by:null,cancelled_reason:null,cancelled_amount:null,cancelled_amount_usd:null,notes:(n.notes||``)+`\n[Sale restored on ${new Date().toLocaleDateString()}]`})).success&&(r||await j(),alert(`Sale restored successfully. Amount added back to total sales.`))}catch(e){console.error(`Error restoring sale:`,e),alert(`Failed to restore sale`)}},ge=e=>{let t=C[e.id];if(!t||t.length===0)return null;let n=t[0],r=parseFloat(n.old_value)||0,i=parseFloat(e.amount)||0;if(r===i)return null;let a=i-r,o=r>0?(a/r*100).toFixed(1):100,s=a>0,c=a<0;return(0,G.jsxs)(`div`,{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ml-1 ${s?`bg-green-100 text-green-800 border border-green-200`:c?`bg-red-100 text-red-800 border border-red-200`:`bg-blue-100 text-blue-800 border border-blue-200`}`,children:[s?``:c?``:``,(0,G.jsxs)(`span`,{className:`ml-1`,children:[s?`+`:``,e.currency,` `,Math.abs(a).toFixed(2),(0,G.jsxs)(`span`,{className:`ml-0.5`,children:[`(`,s?`+`:``,o,`%)`]})]})]})},_e=e=>{let t=O[e.id];return!t||!e.is_cancelled?null:(0,G.jsxs)(`div`,{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ml-1 bg-red-100 text-red-800 border border-red-200`,children:[` Cancelled`,(0,G.jsxs)(`span`,{className:`ml-1 text-xs opacity-75`,children:[`(`,t.cancelled_at?new Date(t.cancelled_at).toLocaleDateString():`Unknown date`,`)`]})]})},ve=e=>{let t=te[e.id];return!t||!e.is_delivered?null:(0,G.jsxs)(`div`,{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ml-1 bg-purple-100 text-purple-800 border border-purple-200`,children:[` Delivered`,(0,G.jsxs)(`span`,{className:`ml-1 text-xs opacity-75`,children:[`(`,t.delivered_at?new Date(t.delivered_at).toLocaleDateString():`Unknown date`,`)`]})]})},ye=e=>{if(e.is_cancelled||!(e.notes&&e.notes.includes(`Sale restored on`)))return null;let t=e.notes.match(/Sale restored on (.+?)\]/);return(0,G.jsxs)(`div`,{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ml-1 bg-green-100 text-green-800 border border-green-200`,children:[` Restored`,(0,G.jsxs)(`span`,{className:`ml-1 text-xs opacity-75`,children:[`(`,t?t[1]:`Recently`,`)`]})]})},be=e=>{D(t=>({...t,[e]:!t[e]}))},P=w.useMemo(()=>p===`all`?a:a.filter(e=>{let t=e.status===`Paid`?`Order Complete`:e.status===`Partially Paid`?`Partial Payment`:e.status;return p===`Cancelled`?e.is_cancelled===!0:t===p}),[a,p]),xe=w.useMemo(()=>[...P].sort((e,t)=>{let n=e=>{if(!e)return 0;let t=e.match(/^ORD-(\d+)$/i);return t?parseInt(t[1],10):0};return n(t.order_no)-n(e.order_no)}),[P]),Se=()=>a.reduce((e,t)=>t.is_cancelled?e:e+(parseFloat(t.amount_usd)||0),0),Ce=()=>a.reduce((e,t)=>t.is_cancelled?e:e+(parseFloat(t.remaining_usd)||0),0),we=()=>a.reduce((e,t)=>t.is_cancelled?e:e+((parseFloat(t.amount_usd)||0)-(parseFloat(t.remaining_usd)||0)),0),Te=()=>a.reduce((e,t)=>t.is_cancelled?e+(parseFloat(t.amount_usd)||0):e,0),Ee=()=>we()+Te(),De=n||A();return s?(0,G.jsxs)(`div`,{className:`p-4 text-center`,children:[(0,G.jsx)(`div`,{className:`inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500`}),(0,G.jsx)(`div`,{className:`mt-2 text-slate-600`,children:`Loading sales history...`})]}):(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`mb-6`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-center mb-4`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h2`,{className:`text-xl font-bold`,children:`Sales History`}),(0,G.jsxs)(`div`,{className:`text-sm text-slate-600 mt-1`,children:[`Period: `,new Date(De.startDate).toLocaleDateString(),` to `,new Date(De.endDate).toLocaleDateString(),(0,G.jsx)(`span`,{className:`ml-2 text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded`,children:`Monthly Report (1st - 5th)`})]})]}),(0,G.jsxs)(`div`,{className:`flex gap-2`,children:[(0,G.jsx)(`button`,{onClick:()=>b(!y),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${y?`bg-purple-100 text-purple-700 border border-purple-300`:`bg-slate-100 hover:bg-slate-200 text-slate-700`}`,children:y?`Hide Hidden Sales`:`Show Hidden Sales`}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-500 ml-2 flex items-center`,children:[xe.length,` records`]})]})]}),(0,G.jsxs)(`div`,{className:`flex flex-wrap gap-2 mb-4`,children:[(0,G.jsxs)(`select`,{value:p,onChange:e=>m(e.target.value),className:`p-2 border rounded-lg bg-white`,children:[(0,G.jsx)(`option`,{value:`all`,children:`All Sales`}),(0,G.jsx)(`option`,{value:`Pending`,children:`Pending`}),(0,G.jsx)(`option`,{value:`Partial Payment`,children:`Partial Payment`}),(0,G.jsx)(`option`,{value:`Delivery`,children:`Delivery`}),(0,G.jsx)(`option`,{value:`Order Complete`,children:`Order Complete`}),(0,G.jsx)(`option`,{value:`Cancelled`,children:`Cancelled`})]}),xe.length>0&&(0,G.jsxs)(`div`,{className:`text-sm text-slate-600 ml-auto flex items-center gap-2`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,G.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-green-500`}),(0,G.jsx)(`span`,{children:`Complete`})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,G.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-blue-500`}),(0,G.jsx)(`span`,{children:`Partial`})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,G.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-purple-500`}),(0,G.jsx)(`span`,{children:`Delivery`})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,G.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-amber-500`}),(0,G.jsx)(`span`,{children:`Pending`})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,G.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-red-500`}),(0,G.jsx)(`span`,{children:`Cancelled`})]})]})]})]}),(0,G.jsx)(`div`,{className:`overflow-x-auto rounded-lg border border-slate-200`,children:(0,G.jsxs)(`table`,{className:`w-full`,children:[(0,G.jsx)(`thead`,{children:(0,G.jsxs)(`tr`,{className:`bg-slate-50`,children:[(0,G.jsx)(`th`,{className:`p-3 text-left text-sm font-semibold`,children:`Order #`}),(0,G.jsx)(`th`,{className:`p-3 text-left text-sm font-semibold`,children:`Date`}),(0,G.jsx)(`th`,{className:`p-3 text-left text-sm font-semibold`,children:`Client`}),(0,G.jsx)(`th`,{className:`p-3 text-left text-sm font-semibold`,children:`Amount`}),(0,G.jsx)(`th`,{className:`p-3 text-left text-sm font-semibold`,children:`Remaining`}),(0,G.jsx)(`th`,{className:`p-3 text-left text-sm font-semibold`,children:`Status`})]})}),(0,G.jsx)(`tbody`,{children:xe.length===0?(0,G.jsx)(`tr`,{children:(0,G.jsx)(`td`,{colSpan:6,className:`p-8 text-center text-slate-500`,children:(0,G.jsxs)(`div`,{className:`flex flex-col items-center`,children:[(0,G.jsx)(`svg`,{className:`w-12 h-12 text-slate-300 mb-3`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`1`,d:`M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z`})}),(0,G.jsx)(`div`,{className:`text-lg font-medium text-slate-400`,children:`No sales records found`}),(0,G.jsx)(`div`,{className:`text-sm text-slate-500 mt-1`,children:y?`No hidden sales found`:`Start by adding your first sale`})]})})}):xe.map(e=>{let t=parseFloat(e.amount)||0,n=parseFloat(e.remaining)||0,r=t-n,i=e.is_hidden_for_employee,a=e.is_cancelled,o=e.is_delivered,s=C[e.id]&&C[e.id].length>0,c=E[e.id],p=O[e.id],m=te[e.id],y=e.status===`Paid`?`Order Complete`:e.status===`Partially Paid`?`Partial Payment`:a?`Cancelled`:e.status;return(0,G.jsxs)(w.Fragment,{children:[(0,G.jsxs)(`tr`,{className:`border-b hover:bg-slate-50 transition-colors ${i?`bg-amber-50 hover:bg-amber-100`:a?`bg-red-50 hover:bg-red-100`:o?`bg-purple-50 hover:bg-purple-100`:``}`,children:[(0,G.jsx)(`td`,{className:`p-3`,children:(0,G.jsxs)(`div`,{className:`flex flex-col gap-1`,children:[(0,G.jsxs)(`div`,{className:`text-xs font-mono px-2 py-1 rounded border ${i?`bg-amber-100 text-amber-700 border-amber-200`:a?`bg-red-100 text-red-700 border-red-200`:o?`bg-purple-100 text-purple-700 border-purple-200`:`bg-blue-50 text-blue-700 border-blue-100`}`,children:[e.order_no||`ORD-000`,i&&!a&&!o&&(0,G.jsx)(`span`,{className:`ml-1 text-xs text-amber-600`,children:`(Hidden)`}),a&&(0,G.jsx)(`span`,{className:`ml-1 text-xs text-red-600`,children:`(Cancelled)`}),o&&!a&&(0,G.jsx)(`span`,{className:`ml-1 text-xs text-purple-600`,children:`(Delivered)`})]}),(0,G.jsxs)(`div`,{className:`flex flex-wrap gap-1`,children:[ge(e),_e(e),ve(e),ye(e)]})]})}),(0,G.jsx)(`td`,{className:`p-3 text-sm`,children:new Date(e.sale_date).toLocaleDateString()}),(0,G.jsxs)(`td`,{className:`p-3`,children:[(0,G.jsx)(`div`,{className:`font-medium`,children:e.client_name}),e.client_contact&&(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:e.client_contact})]}),(0,G.jsx)(`td`,{className:`p-3`,children:h===e.id&&!a&&!o?(0,G.jsxs)(`div`,{className:`space-y-2`,children:[(0,G.jsx)(`input`,{type:`number`,value:_,onChange:e=>v(e.target.value),placeholder:`New amount`,className:`w-32 p-1.5 border rounded text-sm`,step:`0.01`,min:`0.01`,autoFocus:!0}),(0,G.jsxs)(`div`,{className:`flex gap-2`,children:[(0,G.jsx)(`button`,{onClick:()=>fe(e.id),className:`text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600`,children:`Update`}),(0,G.jsx)(`button`,{onClick:()=>{g(null),v(``)},className:`text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600`,children:`Cancel`})]})]}):(0,G.jsxs)(`div`,{className:`group relative`,children:[(0,G.jsx)(`div`,{className:`flex items-center`,children:(0,G.jsxs)(`div`,{className:`font-semibold ${a?`line-through text-red-500`:``}`,children:[e.currency,` `,t.toFixed(2)]})}),(0,G.jsxs)(`div`,{className:`text-xs ${a?`text-red-400`:`text-slate-500`}`,children:[`$`,(parseFloat(e.amount_usd)||0).toFixed(2),` USD`,a&&(0,G.jsx)(`span`,{className:`text-red-500 ml-1`,children:`(Cancelled)`})]}),s&&!a&&!o&&(0,G.jsxs)(`button`,{onClick:()=>be(e.id),className:`text-xs text-blue-600 hover:text-blue-800 mt-1 flex items-center gap-1`,children:[c?`Hide History`:`Show Amount History`,(0,G.jsx)(`svg`,{className:`w-3 h-3 transition-transform ${c?`rotate-180`:``}`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M19 9l-7 7-7-7`})})]}),!a&&!o&&(0,G.jsx)(`button`,{onClick:()=>{g(e.id),v(t.toString())},className:`absolute top-0 right-0 text-xs opacity-0 group-hover:opacity-100 transition-opacity text-blue-600 hover:text-blue-800`,title:`Edit amount`,children:` Edit`})]})}),(0,G.jsx)(`td`,{className:`p-3`,children:l===e.id&&!a&&!o?(0,G.jsxs)(`div`,{className:`space-y-2`,children:[(0,G.jsx)(`input`,{type:`number`,value:d,onChange:e=>f(e.target.value),placeholder:`Payment amount`,className:`w-32 p-1.5 border rounded text-sm`,step:`0.01`,min:`0`,max:n,autoFocus:!0}),(0,G.jsx)(`div`,{className:`flex gap-2`,children:(0,G.jsx)(`button`,{onClick:()=>pe(e.id),className:`text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600`,children:`Apply Payment`})})]}):(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`font-semibold ${a?`text-red-600`:n>0?`text-amber-600`:`text-green-600`} ${a?`line-through`:``}`,children:[e.currency,` `,n.toFixed(2)]}),(0,G.jsxs)(`div`,{className:`text-xs ${a?`text-red-400`:`text-slate-500`}`,children:[`$`,(parseFloat(e.remaining_usd)||0).toFixed(2),` USD`]}),n>0&&!a&&!o&&(0,G.jsx)(`button`,{onClick:()=>{u(e.id),f(``)},className:`text-xs text-blue-600 hover:text-blue-800 mt-1`,children:`+ Add Payment`})]})}),(0,G.jsx)(`td`,{className:`p-3`,children:(0,G.jsx)(`div`,{className:`flex flex-col gap-2`,children:a?(0,G.jsxs)(`div`,{className:`space-y-2`,children:[(0,G.jsx)(`div`,{className:`text-xs px-2 py-1 rounded border bg-red-100 text-red-800 border-red-200`,children:`Cancelled`}),p&&(0,G.jsx)(`div`,{className:`text-xs text-red-600`,children:p.cancelled_reason?`Reason: ${p.cancelled_reason}`:`No reason provided`}),(0,G.jsxs)(`div`,{className:`space-y-1`,children:[(0,G.jsx)(`button`,{onClick:()=>he(e.id),className:`text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 w-full`,children:`Restore Sale`}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Will add back to total`})]})]}):o?(0,G.jsxs)(`div`,{className:`space-y-2`,children:[(0,G.jsx)(`div`,{className:`text-xs px-2 py-1 rounded border bg-purple-100 text-purple-800 border-purple-200`,children:`Delivered`}),m&&(0,G.jsx)(`div`,{className:`text-xs text-purple-600`,children:m.delivery_notes?`Notes: ${m.delivery_notes}`:`No delivery notes`}),(0,G.jsx)(`div`,{className:`space-y-1`,children:(0,G.jsxs)(`select`,{value:y,onChange:t=>{t.target.value===`Cancelled`?me(e.id):ue(e.id,t.target.value)},className:`text-xs px-2 py-1 rounded border bg-white border-slate-300 w-full`,children:[(0,G.jsx)(`option`,{value:`Delivery`,children:`Delivery`}),(0,G.jsx)(`option`,{value:`Pending`,children:`Pending`}),(0,G.jsx)(`option`,{value:`Partial Payment`,children:`Partial Payment`}),(0,G.jsx)(`option`,{value:`Order Complete`,children:`Order Complete`}),(0,G.jsx)(`option`,{value:`Cancelled`,children:`Cancel Sale`})]})})]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`select`,{value:y,onChange:t=>{t.target.value===`Delivery`?de(e.id):t.target.value===`Cancelled`?me(e.id):ue(e.id,t.target.value)},className:`text-xs px-2 py-1 rounded border ${y===`Order Complete`?`bg-green-100 text-green-800 border-green-200`:y===`Partial Payment`?`bg-blue-100 text-blue-800 border-blue-200`:`bg-amber-100 text-amber-800 border-amber-200`}`,disabled:y===`Order Complete`,children:[(0,G.jsx)(`option`,{value:`Pending`,children:`Pending`}),(0,G.jsx)(`option`,{value:`Partial Payment`,children:`Partial Payment`}),(0,G.jsx)(`option`,{value:`Delivery`,children:`Mark as Delivered`}),(0,G.jsx)(`option`,{value:`Order Complete`,children:`Order Complete`}),(0,G.jsx)(`option`,{value:`Cancelled`,children:`Cancel Sale`})]}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[`Paid: `,e.currency,` `,r.toFixed(2)]})]})})})]}),c&&s&&!a&&!o&&(0,G.jsx)(`tr`,{className:`bg-slate-50 border-b`,children:(0,G.jsx)(`td`,{colSpan:6,className:`p-3`,children:(0,G.jsxs)(`div`,{className:`bg-white border border-slate-200 rounded-lg p-3`,children:[(0,G.jsxs)(`div`,{className:`text-sm font-semibold text-slate-700 mb-2 flex items-center justify-between`,children:[(0,G.jsxs)(`span`,{children:[`Amount Change History for `,e.order_no]}),(0,G.jsx)(`button`,{onClick:()=>be(e.id),className:`text-xs text-slate-500 hover:text-slate-700`,children:`Close`})]}),(0,G.jsx)(`div`,{className:`space-y-2`,children:C[e.id].map((t,n)=>(0,G.jsxs)(`div`,{className:`flex items-center justify-between p-2 bg-slate-50 rounded border border-slate-100`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`text-sm font-medium`,children:t.changed_field===`amount`?`Total Amount`:`Remaining Amount`}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[`Changed by `,t.changed_by,` on `,new Date(t.changed_at).toLocaleDateString()]})]}),(0,G.jsxs)(`div`,{className:`text-sm`,children:[(0,G.jsxs)(`span`,{className:`line-through text-red-500 mr-2`,children:[e.currency,` `,parseFloat(t.old_value||0).toFixed(2)]}),(0,G.jsx)(`span`,{className:`text-green-600`,children:``}),(0,G.jsxs)(`span`,{className:`font-semibold ml-2`,children:[e.currency,` `,parseFloat(t.new_value||0).toFixed(2)]}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-500 text-right mt-1`,children:[`Change: `,t.new_value>t.old_value?`+`:``,(parseFloat(t.new_value)-parseFloat(t.old_value)).toFixed(2),` `,e.currency]})]})]},n))}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-500 mt-2`,children:[`Total changes: `,C[e.id].length]})]})})})]},e.id)})})]})}),(0,G.jsxs)(`div`,{className:`mt-6 grid grid-cols-1 md:grid-cols-6 gap-4`,children:[(0,G.jsxs)(`div`,{className:`bg-white p-4 rounded-lg border border-slate-200 shadow-sm`,children:[(0,G.jsx)(`div`,{className:`text-slate-600 text-sm`,children:`Total Sales (USD)`}),(0,G.jsxs)(`div`,{className:`text-2xl font-bold mt-1`,children:[`$`,Se().toFixed(2)]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`Active sales only`})]}),(0,G.jsxs)(`div`,{className:`bg-white p-4 rounded-lg border border-slate-200 shadow-sm`,children:[(0,G.jsx)(`div`,{className:`text-slate-600 text-sm`,children:`Amount Closed (USD)`}),(0,G.jsxs)(`div`,{className:`text-2xl font-bold text-green-600 mt-1`,children:[`$`,Ee().toFixed(2)]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`Collected + Cancelled`})]}),(0,G.jsxs)(`div`,{className:`bg-white p-4 rounded-lg border border-slate-200 shadow-sm`,children:[(0,G.jsx)(`div`,{className:`text-slate-600 text-sm`,children:`Pending Amount (USD)`}),(0,G.jsxs)(`div`,{className:`text-2xl font-bold text-amber-600 mt-1`,children:[`$`,Ce().toFixed(2)]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`To be collected`})]}),(0,G.jsxs)(`div`,{className:`bg-white p-4 rounded-lg border border-slate-200 shadow-sm`,children:[(0,G.jsx)(`div`,{className:`text-slate-600 text-sm`,children:`Today's Sales (USD)`}),(0,G.jsxs)(`div`,{className:`text-2xl font-bold text-blue-600 mt-1`,children:[`$`,k.toFixed(2)]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:k===0?`No sales today`:new Date().toLocaleDateString()})]}),(0,G.jsxs)(`div`,{className:`bg-white p-4 rounded-lg border border-slate-200 shadow-sm`,children:[(0,G.jsx)(`div`,{className:`text-slate-600 text-sm`,children:`Cancelled Amount (USD)`}),(0,G.jsxs)(`div`,{className:`text-2xl font-bold text-red-600 mt-1`,children:[`$`,Te().toFixed(2)]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`Deducted from total`})]}),(0,G.jsxs)(`div`,{className:`bg-white p-4 rounded-lg border border-slate-200 shadow-sm`,children:[(0,G.jsx)(`div`,{className:`text-slate-600 text-sm`,children:`Delivered Orders`}),(0,G.jsx)(`div`,{className:`text-2xl font-bold text-purple-600 mt-1`,children:N()}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:N()===1?`1 order delivered`:`${N()} orders delivered`})]})]}),(0,G.jsxs)(`div`,{className:`mt-4 grid grid-cols-1 md:grid-cols-3 gap-4`,children:[(0,G.jsxs)(`div`,{className:`bg-white p-4 rounded-lg border border-slate-200 shadow-sm`,children:[(0,G.jsx)(`div`,{className:`text-slate-600 text-sm`,children:`Collected Amount (USD)`}),(0,G.jsxs)(`div`,{className:`text-2xl font-bold text-green-600 mt-1`,children:[`$`,we().toFixed(2)]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`Already received`})]}),(0,G.jsxs)(`div`,{className:`bg-white p-4 rounded-lg border border-slate-200 shadow-sm`,children:[(0,G.jsx)(`div`,{className:`text-slate-600 text-sm`,children:`Active Orders`}),(0,G.jsx)(`div`,{className:`text-2xl font-bold text-blue-600 mt-1`,children:a.filter(e=>!e.is_cancelled).length}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`Non-cancelled`})]}),(0,G.jsxs)(`div`,{className:`bg-white p-4 rounded-lg border border-slate-200 shadow-sm`,children:[(0,G.jsx)(`div`,{className:`text-slate-600 text-sm`,children:`Completion Rate`}),(0,G.jsx)(`div`,{className:`text-2xl font-bold text-purple-600 mt-1`,children:a.length>0?`${(a.filter(e=>e.status===`Order Complete`&&!e.is_cancelled).length/a.filter(e=>!e.is_cancelled).length*100).toFixed(1)}%`:`0%`}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`Orders completed`})]})]}),(0,G.jsxs)(`div`,{className:`mt-4 text-xs text-slate-500 space-y-1`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-amber-500`}),(0,G.jsxs)(`span`,{children:[(0,G.jsx)(`strong`,{children:`Pending:`}),` payment received but file not delivered yet`]})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-purple-500`}),(0,G.jsxs)(`span`,{children:[(0,G.jsx)(`strong`,{children:`Delivery:`}),` payment received and file delivered`]})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-blue-500`}),(0,G.jsxs)(`span`,{children:[(0,G.jsx)(`strong`,{children:`Partial Payment:`}),` Some payment received`]})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-green-500`}),(0,G.jsxs)(`span`,{children:[(0,G.jsx)(`strong`,{children:`Order Complete:`}),` Full payment received`]})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-red-500`}),(0,G.jsxs)(`span`,{children:[(0,G.jsx)(`strong`,{children:`Cancelled:`}),` Sale cancelled (deducted from total)`]})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-yellow-500`}),(0,G.jsxs)(`span`,{children:[(0,G.jsx)(`strong`,{children:`Modified:`}),` Amount changed by manager (shows change badge)`]})]}),(0,G.jsxs)(`div`,{className:`mt-2 pt-2 border-t border-slate-200`,children:[(0,G.jsx)(`div`,{className:`font-semibold text-slate-700`,children:`Key Metrics:`}),(0,G.jsxs)(`div`,{className:`mt-1`,children:[(0,G.jsx)(`span`,{className:`font-medium`,children:` Total Sales:`}),` Sum of all active (non-cancelled) sales in USD`]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`span`,{className:`font-medium`,children:` Amount Closed:`}),` Collected Amount + Cancelled Amount`]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`span`,{className:`font-medium`,children:` Today's Sales:`}),` Sales made today (based on sale date)`]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`span`,{className:`font-medium`,children:` Delivered Orders:`}),` Count of orders with file delivered`]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`span`,{className:`font-medium`,children:` Cancelled Orders:`}),` Count of cancelled sales (excluded from totals)`]})]})]})]})};function pd({userId:e}){let[t,n]=(0,w.useState)({assigned:0,inProgress:0,delivered:0,approved:0,revision:0,onTime:0,totalSubmissions:0});(0,w.useEffect)(()=>{e&&r()},[e]);async function r(){let{data:t}=await W.from(`tasks`).select(`*`).eq(`assigned_to`,e),{data:r}=await W.from(`task_submissions`).select(`*`).eq(`employee_id`,e),i=t?.length||0,a=t?.filter(e=>e.status===`In Progress`).length||0,o=t?.filter(e=>e.status===`Delivered`).length||0,s=r?.filter(e=>e.status===`approved`).length||0,c=r?.filter(e=>e.status===`revision_requested`).length||0,l=0;(r||[]).forEach(e=>{let n=new Date(e.timestamp),r=t?.find(t=>t.id===e.task_id);r?.deadline&&n<=new Date(r.deadline)&&l++}),n({assigned:i,inProgress:a,delivered:o,approved:s,revision:c,onTime:r?.length?Math.round(l/r.length*100):0,totalSubmissions:r?.length||0})}return(0,G.jsxs)(`div`,{className:`p-4 rounded-xl bg-white/80 border border-white/60 backdrop-blur-xl shadow`,children:[(0,G.jsx)(`h3`,{className:`text-lg font-bold text-slate-900 mb-3`,children:`Performance Overview`}),(0,G.jsxs)(`div`,{className:`space-y-4`,children:[(0,G.jsx)(md,{label:`Assigned Tasks`,value:t.assigned,max:t.assigned}),(0,G.jsx)(md,{label:`In Progress`,value:t.inProgress,max:t.assigned}),(0,G.jsx)(md,{label:`Delivered`,value:t.delivered,max:t.assigned}),(0,G.jsx)(md,{label:`Approved`,value:t.approved,max:t.totalSubmissions}),(0,G.jsx)(md,{label:`Revisions Required`,value:t.revision,max:t.totalSubmissions}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`flex justify-between text-sm font-medium text-slate-700`,children:[(0,G.jsx)(`span`,{children:`On-Time Delivery Rate`}),(0,G.jsxs)(`span`,{children:[t.onTime,`%`]})]}),(0,G.jsx)(`div`,{className:`w-full bg-slate-200 rounded-full h-2 mt-1`,children:(0,G.jsx)(`div`,{className:`h-2 bg-emerald-500 rounded-full`,style:{width:`${t.onTime}%`}})})]})]})]})}function md({label:e,value:t,max:n}){let r=n>0?Math.round(t/n*100):0;return(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`flex justify-between text-sm font-medium text-slate-700`,children:[(0,G.jsx)(`span`,{children:e}),(0,G.jsx)(`span`,{children:t})]}),(0,G.jsx)(`div`,{className:`w-full bg-slate-200 rounded-full h-2 mt-1`,children:(0,G.jsx)(`div`,{className:`h-2 bg-blue-500 rounded-full`,style:{width:`${r}%`}})})]})}function hd({userId:e,limit:t=25}){let[n,r]=(0,w.useState)([]),[i,a]=(0,w.useState)(!0);(0,w.useEffect)(()=>{if(!e)return;o();let t=W.channel(`notif-feed-${e}`).on(`postgres_changes`,{event:`INSERT`,schema:`public`,table:`notifications`,filter:`user_id=eq.${e}`},e=>{r(t=>[e.new,...t])}).subscribe();return()=>{W.removeChannel(t)}},[e]);async function o(){a(!0);let{data:n}=await Hl(e,{limit:t});r(n||[]),a(!1)}async function s(e){await Ul(e),r(t=>t.map(t=>t.id===e?{...t,is_read:!0}:t))}return(0,G.jsxs)(`div`,{className:`p-4 rounded-xl bg-white/90 border shadow`,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,G.jsx)(`h4`,{className:`font-semibold`,children:`Activity Feed`}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:i?`Loading`:`${n.length} items`})]}),(0,G.jsx)(`div`,{className:`space-y-2 max-h-64 overflow-auto`,children:n.length===0?(0,G.jsx)(`div`,{className:`text-sm text-slate-500`,children:`No activity yet.`}):n.map(e=>(0,G.jsx)(`div`,{className:`p-2 rounded border ${e.is_read?`bg-white/80`:`bg-slate-50`}`,children:(0,G.jsxs)(`div`,{className:`flex items-start gap-2`,children:[(0,G.jsxs)(`div`,{className:`flex-1`,children:[(0,G.jsx)(`div`,{className:`text-sm font-medium`,children:e.message}),(0,G.jsx)(`div`,{className:`text-xs text-slate-400`,children:new Date(e.created_at).toLocaleString()})]}),!e.is_read&&(0,G.jsx)(`button`,{onClick:()=>s(e.id),className:`text-xs px-2 py-1 rounded bg-blue-600 text-white`,children:`Mark`})]})},e.id))})]})}function gd(){let e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-01`}function _d(){let e=new Date,t=new Date(e.getFullYear(),e.getMonth()+1,2);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,`0`)}-02`}var vd=async()=>{try{let{data:e,error:t}=await W.from(`sales_updates`).select(`order_no`).order(`created_at`,{ascending:!1});if(t)return console.error(`Error fetching order numbers:`,t),`ORD-${Date.now()}-${Math.floor(Math.random()*1e3)}`;if(!e||e.length===0)return`ORD-001`;let n=0;if(e.forEach(e=>{let t=e.order_no;if(t){let e=t.match(/^ORD-(\d+)$/i);if(e){let t=parseInt(e[1],10);!isNaN(t)&&t>n&&(n=t)}t.match(/^CLI-/i)&&n<1&&(n=0)}}),n===0)return`ORD-001`;let r=n+1;return`ORD-${String(r).padStart(3,`0`)}`}catch(e){return console.error(`Error generating order number:`,e),`ORD-${Date.now()}-${Math.floor(Math.random()*1e3)}`}},$=async()=>{try{let{data:e,error:t}=await W.from(`sales_updates`).select(`id, order_no, created_at`).or(`order_no.not.ilike.ORD-%,order_no.is.null`).order(`created_at`,{ascending:!0});if(t||!e||e.length===0)return;console.log(`Found ${e.length} old order numbers to convert to ORD format`);let n=1;for(let t of e){let e=`ORD-${String(n).padStart(3,`0`)}`;await W.from(`sales_updates`).update({order_no:e}).eq(`id`,t.id),console.log(`Converted ${t.order_no||`null`} to ${e}`),n++,await new Promise(e=>setTimeout(e,50))}console.log(`Converted old order numbers to ORD format`)}catch(e){console.error(`Error converting old order numbers:`,e)}},yd=async e=>{try{if(!e.some(e=>{let t=e.order_no;return!t||!t.match(/^ORD-(\d+)$/i)}))return e;let{data:t,error:n}=await W.from(`sales_updates`).select(`id, order_no, created_at`).order(`created_at`,{ascending:!0});if(n)return console.error(`Error fetching all sales for ordering:`,n),e;let r=[],i=1;for(let n of t){let t=`ORD-${String(i).padStart(3,`0`)}`;await W.from(`sales_updates`).update({order_no:t}).eq(`id`,n.id);let a=e.find(e=>e.id===n.id);a&&r.push({...a,order_no:t}),i++}return r.length>0?r:e}catch(t){return console.error(`Error ensuring order numbers:`,t),e}},bd=(e,t,n=15,r=null)=>{if(!e||!t)return!1;try{let i=new Date(e),a=i.getHours(),o=i.getMinutes(),s=a*60+o,[c,l]=t.split(`:`).map(Number),u=c*60+l,d=null;if(r){let[e,t]=r.split(`:`).map(Number);d=e*60+t}let f=u+n;return s<u||s>=u&&s<=f?!1:!!(d&&s>f&&s<=d||d&&s>d||!d&&s>f)}catch(e){return console.error(`Error calculating late status:`,e),!1}},xd=async(e,t,n)=>{try{if(!n||!e)return;let r=getTodayDateString(),i=new Date,a=i.getHours(),o=i.getMinutes(),s=a*60+o,[c,l]=(e.shift_end||t.end_time).split(`:`).map(Number);if(s>=c*60+l+180){let{data:e,error:t}=await W.from(`attendance`).select(`*`).eq(`employee_id`,n).eq(`date`,r).single();if(t&&t.code===`PGRST116`){let e=new Date().toISOString(),{error:t}=await W.from(`attendance`).insert({employee_id:n,date:r,status:`absent`,absent:!0,created_at:e,updated_at:e});if(t&&t.code!==`23505`)console.error(`Error marking absent:`,t);else return console.log(`Auto-marked as absent`),!0}}return!1}catch(e){return console.error(`checkAndMarkAbsent error:`,e),!1}};function Sd(){let[e,t]=(0,w.useState)(null),[n,r]=(0,w.useState)([]),[i,a]=(0,w.useState)(null),[o,s]=(0,w.useState)([]),[c,l]=(0,w.useState)(null),[u,d]=(0,w.useState)(!0),[f,p]=(0,w.useState)([]),[m,h]=(0,w.useState)([]),[g,_]=(0,w.useState)(!0),[v,y]=(0,w.useState)(`dashboard`),[b,x]=(0,w.useState)({}),[S,C]=(0,w.useState)({}),[T,E]=(0,w.useState)({}),[D,O]=(0,w.useState)({}),[ee,te]=(0,w.useState)([]),[ne,k]=(0,w.useState)([]),[re,ie]=(0,w.useState)({onTime:0,late:0,absent:0,leave:0}),[ae,A]=(0,w.useState)({start_time:`09:00`,end_time:`17:00`,grace_minutes:0}),[j,oe]=(0,w.useState)(!1),[se,ce]=(0,w.useState)([]),[M,le]=(0,w.useState)({totalAmount:0,totalRemaining:0,totalClosed:0,recentSales:0,todaySales:0,monthlyAmount:0,monthlySales:0}),[N,ue]=(0,w.useState)({startDate:gd(),endDate:_d()}),de=(0,w.useRef)(null),fe=(0,w.useRef)(null),pe=(0,w.useRef)(null),me=(0,w.useRef)(null),he=(0,w.useRef)(null);(0,w.useEffect)(()=>{Te(),$()},[]),(0,w.useEffect)(()=>{e&&(Oe(),I(),Ve(),We(),Ge(),Ke(),Xe(),Ee(),_e(),Pe(),ge())},[e]);let ge=()=>{if(!e)return;let t=W.channel(`tasks-changes`).on(`postgres_changes`,{event:`*`,schema:`public`,table:`tasks`,filter:`assigned_to=eq.${e.id}`},e=>{console.log(`Task change detected:`,e),Oe(),e.new&&e.new.status===`Delivered`&&ve({type:`task_completed`,title:`Task Completed`,message:`Task "${e.new.project_id}" has been marked as delivered`,task_id:e.new.id,read:!1})}).subscribe(),n=W.channel(`notifications-changes`).on(`postgres_changes`,{event:`INSERT`,schema:`public`,table:`notifications`,filter:`user_id=eq.${e.id}`},e=>{console.log(`New notification:`,e),_e()}).subscribe(),r=W.channel(`sales-changes`).on(`postgres_changes`,{event:`*`,schema:`public`,table:`sales_updates`,filter:`employee_id=eq.${e.id}`},e=>{console.log(`Sales change detected:`,e),Pe(),ve({type:`sale_recorded`,title:`Sales Update`,message:`Sales record has been ${e.eventType===`INSERT`?`added`:`updated`}`,sale_id:e.new?.id,read:!1})}).subscribe();return()=>{W.removeChannel(t),W.removeChannel(n),W.removeChannel(r)}},_e=async()=>{try{let{data:e}=await W.auth.getUser(),t=e?.user;if(!t)return;let{data:n,error:r}=await W.from(`notifications`).select(`*`).eq(`user_id`,t.id).eq(`read`,!1).order(`created_at`,{ascending:!1}).limit(20);if(r){console.error(`Error loading unread notifications:`,r);return}h(n||[])}catch(e){console.error(`loadUnreadNotifications error:`,e)}},ve=async e=>{try{let{data:t}=await W.auth.getUser(),n=t?.user;if(!n)return;let{error:r}=await W.from(`notifications`).insert({user_id:n.id,type:e.type,title:e.title,message:e.message,task_id:e.task_id,file_id:e.file_id,sale_id:e.sale_id,read:e.read||!1,created_at:new Date().toISOString()});r&&console.error(`Error creating notification:`,r)}catch(e){console.error(`createNotification error:`,e)}},ye=async e=>{try{let{error:t}=await W.from(`notifications`).update({read:!0,read_at:new Date().toISOString()}).eq(`id`,e);if(t){console.error(`Error marking notification as read:`,t);return}h(t=>t.filter(t=>t.id!==e))}catch(e){console.error(`markNotificationAsRead error:`,e)}},be=async()=>{try{let{data:e}=await W.auth.getUser(),t=e?.user;if(!t)return;let{error:n}=await W.from(`notifications`).update({read:!0,read_at:new Date().toISOString()}).eq(`user_id`,t.id).eq(`read`,!1);if(n){console.error(`Error marking all notifications as read:`,n);return}h([])}catch(e){console.error(`markAllNotificationsAsRead error:`,e)}},P=e=>{switch(e){case`task_assigned`:case`task_completed`:case`task_approved`:case`task_revision`:return``;case`attendance`:return``;case`announcement`:return``;case`file_uploaded`:return``;case`sale_recorded`:return``;default:return``}},xe=e=>{if(!e)return``;let t=new Date(e),n=new Date-t,r=Math.floor(n/6e4),i=Math.floor(n/36e5),a=Math.floor(n/864e5);return r<60?`${r}m ago`:i<24?`${i}h ago`:a<7?`${a}d ago`:t.toLocaleDateString([],{month:`short`,day:`numeric`})},Se=e=>{if(!e)return``;try{return new Date(e).toLocaleTimeString([],{hour:`2-digit`,minute:`2-digit`,hour12:!1})}catch(t){return console.error(`Error formatting time:`,t),e}},Ce=e=>{if(!e)return``;try{return new Date(e).toLocaleDateString([],{weekday:`short`,day:`2-digit`,month:`short`,year:`numeric`})}catch(t){return console.error(`Error formatting date:`,t),e}};(0,w.useCallback)(e=>{if(!e)return``;try{return new Date(e).toLocaleString(`en-GB`,{timeZone:`Asia/Karachi`,day:`2-digit`,month:`short`,year:`2-digit`,hour:`2-digit`,minute:`2-digit`,hour12:!1}).replace(`,`,``)}catch{return e}},[]),(0,w.useCallback)(()=>{try{return new Intl.DateTimeFormat(`en-CA`,{timeZone:`Asia/Karachi`,year:`numeric`,month:`2-digit`,day:`2-digit`}).format(new Date)}catch{let e=new Date,t=`${e.getMonth()+1}`.padStart(2,`0`),n=`${e.getDate()}`.padStart(2,`0`);return`${e.getFullYear()}-${t}-${n}`}},[]);let we=()=>{let e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`},Te=async()=>{try{let{data:e}=await W.auth.getUser(),n=e?.user;if(!n){window.location.href=`/login`;return}let{data:r}=await W.from(`profiles`).select(`*`).eq(`id`,n.id).single();if(!r){console.error(`No profile found for user`);return}r.shift_start=r.shift_start||`08:00:00`,r.shift_end=r.shift_end||`16:00:00`,r.grace_minutes=r.grace_minutes??15,t(r)}catch(e){console.error(`loadProfile error:`,e)}finally{d(!1)}},Ee=async()=>{try{let{data:e}=await W.auth.getUser(),n=e?.user;if(!n)return;let r=await W.from(`shifts`).select(`*`).eq(`employee_id`,n.id).limit(1).order(`updated_at`,{ascending:!1});(r.error||!r.data||r.data.length===0)&&(r=await W.from(`shift_settings`).select(`*`).eq(`type`,`employee`).eq(`employee_id`,n.id).limit(1).order(`updated_at`,{ascending:!1}));let i=r?.data?.[0];i?(A({start_time:i.start_time?.slice(0,5)||`09:00`,end_time:i.end_time?.slice(0,5)||`17:00`,grace_minutes:i.grace_minutes||0}),t(e=>({...e,shift_start:i.start_time?.slice(0,5)||e?.shift_start,shift_end:i.end_time?.slice(0,5)||e?.shift_end,grace_minutes:i.grace_minutes??e?.grace_minutes}))):await De()}catch(e){console.error(`loadShiftSettings failed`,e)}},De=async()=>{try{let e=await W.from(`shifts`).select(`*`).filter(`employee_id`,`is`,null).limit(1).order(`updated_at`,{ascending:!1});(e.error||!e.data||e.data.length===0)&&(e=await W.from(`shift_settings`).select(`*`).eq(`type`,`global`).limit(1).order(`updated_at`,{ascending:!1}));let n=e?.data?.[0];n&&(A({start_time:n.start_time?.slice(0,5)||`09:00`,end_time:n.end_time?.slice(0,5)||`17:00`,grace_minutes:n.grace_minutes||0}),t(e=>({...e,shift_start:n.start_time?.slice(0,5)||e?.shift_start,shift_end:n.end_time?.slice(0,5)||e?.shift_end,grace_minutes:n.grace_minutes??e?.grace_minutes})))}catch(e){console.error(`loadGlobalShiftSettings failed`,e)}},Oe=async()=>{try{let{data:t}=await W.auth.getUser(),n=t?.user;if(!n||!e)return;console.log(`Loading tasks for user ID:`,n.id),console.log(`Employee profile:`,e.emp_id,e.full_name);let{data:i,error:a}=await W.from(`tasks`).select(`
          *,
          assigned_profile:profiles!tasks_assigned_to_fkey (emp_id, full_name),
          assigned_by_manager:profiles!tasks_assigned_by_fkey (full_name, emp_id)
        `).eq(`assigned_to`,n.id).order(`deadline`,{ascending:!0});if(a){console.error(`loadTasks error:`,a);return}console.log(`Found ${i?.length||0} tasks assigned to employee`),i&&i.length>0&&(console.log(`Sample task fields:`,Object.keys(i[0])),console.log(`Sample task drive link:`,i[0].drive_folder_link||i[0].google_drive_link||i[0].drive_link||`No drive link found`));let o=[`Pending`,`In Progress`,`Revision Required`,`Delivered`],s=(i||[]).filter(e=>o.includes(e.status)).map(e=>({...e,assigned_to_empid:e.assigned_profile?.emp_id||`Unassigned`,assigned_by_name:e.assigned_by_manager?.full_name||`Unknown Manager`,assigned_by_emp_id:e.assigned_by_manager?.emp_id||`Unknown`,drive_folder_link:e.drive_folder_link||e.google_drive_link||e.drive_link||e.google_drive_folder||null}));r(s),C(wd(s,`deadline`,e=>({id:e.id,title:e.project_id,status:(e.status||`assigned`).toLowerCase()}))),Je(s)}catch(e){console.error(`loadTasks error:`,e)}},ke={USD:1,CAD:.75,EUR:1.1,GBP:1.25,INR:.012,PKR:.0036,AUD:.67},Ae=[{value:`USD`,label:`USD - US Dollar`},{value:`CAD`,label:`CAD - Canadian Dollar`},{value:`EUR`,label:`EUR - Euro`},{value:`GBP`,label:`GBP - British Pound`},{value:`INR`,label:`INR - Indian Rupee`},{value:`PKR`,label:`PKR - Pakistani Rupee`},{value:`AUD`,label:`AUD - Australian Dollar`}],je=(e,t)=>e*(ke[t]||1),Me=e=>{if(!e)return!1;let t=e.match(/^ORD-(\d{3,})$/i);if(!t)return!1;let n=parseInt(t[1],10);return!isNaN(n)&&n>0},Ne=e=>{if(!e)return`ORD-000`;if(Me(e))return e;if(e.match(/^CLI-/i)){let t=e.split(`-`),n=1;return t.length>1&&!isNaN(parseInt(t[t.length-1]))&&(n=parseInt(t[t.length-1])||1),`ORD-${String(n).padStart(3,`0`)}`}if(e.match(/^QRD-/i)){let t=e.split(`-`),n=1;return t.length>1&&!isNaN(parseInt(t[t.length-1]))&&(n=parseInt(t[t.length-1])||1),`ORD-${String(n).padStart(3,`0`)}`}return`ORD-001`},Pe=async()=>{try{let{data:e}=await W.auth.getUser(),t=e?.user;if(!t)return;let{data:n,error:r}=await W.from(`sales_updates`).select(`*`).eq(`employee_id`,t.id).gte(`sale_date`,N.startDate).lte(`sale_date`,N.endDate).order(`created_at`,{ascending:!1}).limit(100);if(r){console.error(`Error loading sales:`,r);return}let i=await yd((n||[]).map(e=>{let t=Ne(e.order_no);return t!==e.order_no&&W.from(`sales_updates`).update({order_no:t}).eq(`id`,e.id).then(({error:e})=>{e&&console.error(`Error updating order number:`,e)}),{...e,order_no:t}}));ce(i),Ie(i)}catch(e){console.error(`Error loading sales history:`,e)}},Fe=(e,t)=>{ue({startDate:e,endDate:t}),setTimeout(()=>{Pe()},100)},Ie=e=>{let t=new Date,n=new Date(t.setHours(0,0,0,0)).toISOString(),r=new Date(t.setHours(23,59,59,999)).toISOString(),i=new Date().getMonth(),a=new Date().getFullYear(),o=0,s=0,c=0,l=0,u=0,d=0,f=0;e?.forEach(e=>{let t=parseFloat(e.amount_usd)||parseFloat(e.amount)||0,c=parseFloat(e.remaining_usd)||parseFloat(e.remaining)||0;o+=t,s+=c;let p=new Date(e.sale_date);p>=new Date(n)&&p<=new Date(r)&&u++,p.getMonth()===i&&p.getFullYear()===a&&(l++,f+=t);let m=new Date;m.setDate(m.getDate()-7),p>=m&&d++}),c=o-s,le({totalAmount:o,totalRemaining:s,totalClosed:c,recentSales:l,todaySales:u,monthlyAmount:f,monthlySales:d})},Le=async()=>{await Pe(),await ve({type:`sale_recorded`,title:`New Sale Recorded`,message:`You have successfully recorded a new sale`,read:!1}),oe(!1)},F=async e=>{try{let{data:t}=await W.auth.getUser(),n=t?.user;if(!n)return{success:!1,error:`User not authenticated`};let{data:r,error:i}=await W.from(`profiles`).select(`emp_id`).eq(`id`,n.id).single();if(i)return console.error(`Error fetching profile for emp_id:`,i),{success:!1,error:`Failed to load employee information`};let a=parseFloat(e.amount)||0,o=parseFloat(e.remaining)||parseFloat(e.amount)||0,s=e.currency||`USD`,c=je(a,s),l=je(o,s),u=await vd(),d={employee_id:n.id,emp_id:r.emp_id,client_name:e.client_name,client_contact:e.client_contact||``,sale_date:e.sale_date||new Date().toISOString().split(`T`)[0],amount:a,remaining:o,currency:s,amount_usd:c,remaining_usd:l,payment_method:e.payment_method||``,sale_type:e.sale_type||`new`,status:e.status||`Pending`,notes:e.notes||``,next_followup:e.next_followup||null,attachments:e.attachments||[],order_no:u},{data:f,error:p}=await W.from(`sales_updates`).insert([d]).select().single();return p?(console.error(`Error inserting sale:`,p),{success:!1,error:p.message}):{success:!0,data:f}}catch(e){return console.error(`saveSale error:`,e),{success:!1,error:e.message}}},Re=async(e,t)=>{try{let{data:n}=await W.auth.getUser(),r=n?.user;if(!r)return{success:!1,error:`User not authenticated`};let{data:i,error:a}=await W.from(`sales_updates`).select(`employee_id, currency, amount, amount_usd, order_no`).eq(`id`,e).single();if(a||!i)return{success:!1,error:`Sale not found or access denied`};if(i.employee_id!==r.id)return{success:!1,error:`You can only update your own sales. Contact your manager for assistance.`};let o={...t};if(o.status===`Paid`&&o.remaining!==void 0&&(o.remaining=0,o.remaining_usd=0),o.remaining!==void 0){let e=parseFloat(o.remaining);if(isNaN(e)||e<0)return{success:!1,error:`Invalid remaining amount`};let t=parseFloat(i.amount)||0,n=i.currency||`USD`;e===0?o.status=`Paid`:e<t?o.status=`Partially Paid`:e===t&&(o.status=`Pending`),o.remaining_usd=je(e,n)}o.updated_at=new Date().toISOString();let{data:s,error:c}=await W.from(`sales_updates`).update(o).eq(`id`,e).select().single();return c?(console.error(`Error updating sale:`,c),{success:!1,error:c}):(await Pe(),await ve({type:`sale_recorded`,title:`Sale Updated`,message:`Sales record has been updated`,sale_id:e,read:!1}),{success:!0,data:s})}catch(e){return console.error(`Error updating sale:`,e),{success:!1,error:e}}},I=async()=>{try{let t=we(),{data:n}=await W.auth.getUser(),r=n?.user;if(!r)return;let{data:i,error:o}=await W.from(`attendance`).select(`*`).eq(`employee_id`,r.id).eq(`date`,t).single();if(o&&o.code&&o.code!==`PGRST116`&&console.error(`checkAttendance supabase error:`,o),!i){a(null),await xd(e,ae,r.id)&&setTimeout(()=>{I()},500);return}let s=null,c=!1;if(i.check_in&&!i.check_out){let e=new Date(i.check_in);s=new Date(e.getTime()+720*60*1e3),c=Date.now()<s.getTime()}else if(i.check_out){let e=new Date(i.check_out);s=new Date(e.getTime()+720*60*1e3),c=Date.now()<s.getTime()}let l=bd(i.check_in,e?.shift_start||ae.start_time,e?.grace_minutes||ae.grace_minutes,e?.shift_end||ae.end_time);a({...i,lock_until:s?.toISOString(),locked:c,late:l})}catch(e){console.error(`checkAttendance error:`,e)}},ze=async()=>{try{if(!e)return alert(`Profile not loaded yet.`);let{data:t}=await W.auth.getUser(),n=t?.user;if(!n)return alert(`Please login again.`);let r=new Date().toISOString(),i=bd(r,e.shift_start,e.grace_minutes,e.shift_end),{data:o,error:s}=await W.from(`attendance`).insert({employee_id:n.id,date:we(),check_in:r,status:i?`late`:`present`,late:i,created_at:r,updated_at:r}).select().single();if(s){if(s.code===`23505`){alert(`You have already checked in today.`);return}throw s}if(!o)throw Error(`Failed to create attendance record`);a({...o,locked:!0,lock_until:new Date(Date.now()+720*60*1e3).toISOString(),late:i}),await ve({type:`attendance`,title:i?`Checked In Late`:`Checked In On Time`,message:`You have successfully checked in at ${Se(r)} ${i?`(Late)`:`(On Time)`}`,read:!1}),await I(),await Ve(),await Ke()}catch(e){console.error(`handleCheckIn error:`,e),alert(e.message||`Check-in failed.`)}},Be=async()=>{try{let{data:e}=await W.auth.getUser(),t=e?.user;if(!t)return alert(`Please login again.`);let n=new Date().toISOString(),{data:r,error:i}=await W.from(`attendance`).update({check_out:n,updated_at:n}).eq(`employee_id`,t.id).eq(`date`,we()).select().single();if(i)throw i;if(!r)return alert(`No attendance record found for today. Please check in first.`);a({...r,locked:!0,lock_until:new Date(Date.now()+720*60*1e3).toISOString()}),await ve({type:`attendance`,title:`Checked Out`,message:`You have successfully checked out at ${Se(n)}`,read:!1}),await I(),await Ve(),await Ke()}catch(e){console.error(`handleCheckOut error:`,e),alert(e.message||`Check-out failed.`)}},Ve=async()=>{try{let{data:e}=await W.auth.getUser(),t=e?.user;if(!t)return;let{data:n}=await W.from(`attendance`).select(`*`).eq(`employee_id`,t.id).order(`date`,{ascending:!1}).limit(40);s(n||[]),ie(Ze(n||[]))}catch(e){console.error(`loadAttendanceHistory error:`,e)}},He=async e=>{try{let{error:t}=await W.from(`tasks`).update({status:`In Progress`,accepted_at:new Date().toISOString()}).eq(`id`,e);if(t)throw t;let r=n.find(t=>t.id===e);r&&await ve({type:`task_assigned`,title:`Task Accepted`,message:`You have accepted task: "${r.project_id}"`,task_id:e,read:!1}),l(null),y(`dashboard`),await Oe()}catch(e){console.error(`acceptTask error:`,e),alert(e.message||`Failed to accept task.`)}},Ue=async(e,t,r)=>{try{let{data:i}=await W.auth.getUser(),a=i?.user;if(!a)return;let{data:o,error:s}=await W.from(`task_submissions`).insert({task_id:e,employee_id:a.id,submitted_link:t,notes:r,status:`submitted`,submitted_at:new Date().toISOString()}).select().single();if(s)throw console.error(`Submission error:`,s),s;console.log(`Submission successful:`,o);let{error:c}=await W.from(`tasks`).update({status:`Delivered`,delivered_at:new Date().toISOString()}).eq(`id`,e);if(c)throw c;let u=n.find(t=>t.id===e);u&&await ve({type:`task_completed`,title:`Task Submitted`,message:`You have submitted task: "${u.project_id}"`,task_id:e,read:!1}),l(null),y(`dashboard`),setTimeout(async()=>{await Oe(),await We()},300)}catch(e){console.error(`submitTask error:`,e),alert(e.message||`Submit failed. Please try again.`)}},We=async()=>{try{let{data:e}=await W.auth.getUser(),t=e?.user;if(!t)return;let{data:n,error:r}=await W.from(`task_submissions`).select(`*, tasks(id, project_id)`).eq(`employee_id`,t.id).order(`created_at`,{ascending:!1});if(r){console.error(`loadSubmissions query error:`,r);return}let i={};(n||[]).forEach(e=>{if(!e||!e.created_at){console.warn(`Skipping row without created_at:`,e);return}try{let t=String(e.created_at).split(`T`)[0];i[t]||(i[t]=[]),i[t].push({id:e.id,title:e.tasks?.project_id||`Unknown`,status:`submitted`})}catch(e){console.warn(`Failed to process submission row:`,e)}}),E(i)}catch(e){console.error(`loadSubmissions error:`,e)}},Ge=async()=>{try{let{data:e}=await W.auth.getUser(),t=e?.user;if(!t)return;let{data:n}=await W.from(`events`).select(`*`).or(`organizer.eq.${t.id},attendee_ids.cs.{${t.id}}`);O(wd(n||[],`date`,e=>({id:e.id,title:e.title})))}catch(e){console.error(`loadEvents error:`,e),O({})}},Ke=async()=>{try{let{data:e}=await W.auth.getUser(),t=e?.user;if(!t)return;let{data:n}=await W.from(`attendance`).select(`*`).eq(`employee_id`,t.id),r={};(n||[]).forEach(e=>{e&&e.date&&(r[e.date]={status:e.late?`late`:e.status,checkIn:e.check_in,checkOut:e.check_out})}),x(r)}catch(e){console.error(`loadAllAttendanceForCalendar error:`,e)}},qe=async()=>{if(i&&!i.check_out){alert(`Please check out first.`);return}await W.auth.signOut(),window.location.href=`/login`},Je=(0,w.useCallback)((e=null)=>{let t=e||n||[],r=[],i=new Date,a={};t.forEach(e=>{if(!e.deadline)return;let t;if(typeof e.deadline==`string`)t=e.deadline.includes(`T`)?e.deadline.split(`T`)[0]:e.deadline.slice(0,10);else if(e.deadline instanceof Date)t=e.deadline.toISOString().split(`T`)[0];else return;a[t]||(a[t]=[]),a[t].push(e.project_id)});for(let e=0;e<15;e++){let t=new Date(i);t.setDate(i.getDate()+e);let n=t.toISOString().split(`T`)[0],o=Ye(t),s=a[n]||[];r.push({date:n,displayDate:o,count:s.length,projects:s})}te(r)},[n]),Ye=e=>{try{return new Date(e).toLocaleDateString(void 0,{month:`short`,day:`numeric`})}catch{return e.toISOString().split(`T`)[0]}},Xe=async()=>{try{let{data:t}=await W.auth.getUser(),n=t?.user;if(!n||!e)return;let{data:r}=await W.from(`tasks`).select(`id, project_id, assigned_to, created_at, assigned_by_manager:profiles!tasks_assigned_by_fkey(full_name, emp_id), client_name`).eq(`assigned_to`,n.id).order(`created_at`,{ascending:!1}).limit(20);k((r||[]).map(e=>{let t=e.created_at||new Date().toISOString(),n=e.assigned_by_manager?.full_name||`Manager`,r=`New task assigned: ${e.project_id||`Untitled`}  ${n}`;return{id:e.id,text:r,ts:t}}))}catch(e){console.error(`loadActivityFeed error:`,e),k([])}},Ze=(0,w.useCallback)((e=[])=>{let t=new Date,n=t.getFullYear(),r=t.getMonth(),i=0,a=0,o=0,s=0;return e.forEach(e=>{if(!e||!e.date)return;let t=!1;if(typeof e.date==`string`&&/^\d{4}-\d{2}-\d{2}$/.test(e.date)){let[i,a]=e.date.split(`-`),o=parseInt(i,10),s=parseInt(a,10)-1;t=o===n&&s===r}else try{let i=new Date(e.date);t=i.getFullYear()===n&&i.getMonth()===r}catch{return}if(!t)return;let c=(e.status||``).toString().toLowerCase();c===`absent`||e.absent===!0?o++:c===`leave`||c===`onleave`||c===`holiday`?s++:(c===`present`||c===`late`)&&(e.late?a++:i++)}),{onTime:i,late:a,absent:o,leave:s}},[]),Qe=()=>i?.status===`absent`||i?.absent===!0?(0,G.jsxs)(`div`,{className:`text-center`,children:[(0,G.jsx)(`span`,{className:`text-rose-700 font-semibold`,children:`Marked Absent`}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`No check-in within 3 hours of shift end`})]}):i?i.locked&&i.check_in&&!i.check_out?(0,G.jsxs)(`div`,{className:`text-center`,children:[(0,G.jsx)(`div`,{className:`text-sm text-slate-600 mb-2`,children:`Check-in locked for 12 hours`}),(0,G.jsx)(`button`,{onClick:Be,className:`bg-rose-500 px-4 py-2 rounded-lg text-white font-semibold hover:bg-rose-600 transition-colors`,children:`Check Out`})]}):i.check_in&&!i.check_out?(0,G.jsx)(`button`,{onClick:Be,className:`bg-rose-500 px-4 py-2 rounded-lg text-white font-semibold hover:bg-rose-600 transition-colors`,children:`Check Out`}):i.check_out?(0,G.jsxs)(`div`,{className:`text-center`,children:[(0,G.jsx)(`span`,{className:`text-emerald-700 font-semibold`,children:`Attendance Completed`}),i.locked&&(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:`Check-out locked for 12 hours`})]}):null:(0,G.jsx)(`button`,{onClick:ze,className:`bg-emerald-500 px-4 py-2 rounded-lg text-white font-semibold hover:bg-emerald-600 transition-colors`,children:`Check In`}),$e=o.slice(0,3),et=g?`w-64`:`w-16`;return u?(0,G.jsx)(`div`,{className:`p-6`,children:`Loading`}):(0,G.jsxs)(`div`,{className:`min-h-screen bg-gradient-to-br from-white to-slate-100`,children:[(0,G.jsxs)(`div`,{className:`flex gap-8 px-8`,children:[(0,G.jsx)(`div`,{className:`transition-all duration-200 border-r border-white/50 bg-white/60 backdrop-blur-lg ${et} min-h-screen sticky top-0`,children:(0,G.jsx)(Pu,{profile:e,isExpanded:g,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),onNavigate:e=>{y(e),window.scrollTo({top:0,behavior:`smooth`})},onLogout:qe,canLogout:!i||i.check_out,showNotificationBadge:m.length>0,notificationCount:m.length})}),(0,G.jsxs)(`div`,{className:`flex-1 max-w-4xl px-6 py-6`,children:[(0,G.jsx)(`div`,{className:`mb-6`,children:(0,G.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,G.jsx)(`h1`,{className:`text-2xl font-bold text-slate-800`,children:`Employee Dashboard`}),(0,G.jsx)(`div`,{className:`flex items-center gap-3`,children:(0,G.jsxs)(`div`,{className:`text-sm text-slate-600`,children:[`Welcome, `,(0,G.jsx)(`span`,{className:`font-semibold`,children:e?.full_name||`User`})]})})]})}),(0,G.jsxs)(`div`,{className:`space-y-6`,children:[(0,G.jsx)(`div`,{className:`rounded-xl bg-white/80 border border-white/60 p-4 shadow-lg backdrop-blur-sm`,children:(0,G.jsxs)(`div`,{className:`flex items-center justify-between gap-4`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h1`,{className:`text-2xl font-bold`,children:e?.full_name||``}),(0,G.jsxs)(`div`,{className:`text-sm text-slate-600`,children:[e?.emp_id,`  `,e?.job_type]}),(0,G.jsxs)(`div`,{className:`mt-2 text-sm text-slate-700`,children:[`Shift: `,e?.shift_start?.slice(0,5)||`09:00`,`  `,e?.shift_end?.slice(0,5)||`16:30`,` (Grace: `,e?.grace_minutes||15,` min)`]}),i?.check_in&&(0,G.jsxs)(`div`,{className:`mt-2`,children:[(0,G.jsx)(`span`,{className:`font-semibold ${i.late?`text-rose-600`:`text-emerald-600`}`,children:i.late?`Late Today`:`On Time (Checked In)`}),(0,G.jsx)(`span`,{className:`ml-3 text-xs text-slate-500`,children:i.check_in?`Checked in: ${Ce(i.check_in)} ${Se(i.check_in)}`:``}),i.check_out&&(0,G.jsxs)(`div`,{className:`text-xs text-slate-500 mt-1`,children:[`Checked out: `,Ce(i.check_out),` `,Se(i.check_out)]})]})]}),(0,G.jsx)(`div`,{className:`flex flex-col items-end gap-2`,children:(0,G.jsx)(`div`,{children:Qe()})})]})}),(0,G.jsxs)(`div`,{children:[v===`dashboard`&&(0,G.jsxs)(`div`,{className:`space-y-6`,children:[(0,G.jsxs)(`section`,{ref:de,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,G.jsx)(`h2`,{className:`text-xl font-bold`,children:`Assigned Tasks`}),(0,G.jsxs)(`div`,{className:`text-sm text-slate-500`,children:[n.length,` total`]})]}),n.length===0?(0,G.jsxs)(`div`,{className:`p-6 bg-white/70 border rounded-xl text-center`,children:[(0,G.jsx)(`div`,{className:`text-slate-500`,children:`No tasks assigned yet.`}),(0,G.jsx)(`div`,{className:`text-sm text-slate-400 mt-2`,children:`Tasks will appear here when your manager assigns them to you.`})]}):(0,G.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 gap-4`,children:n.map(e=>(0,G.jsx)(Zu,{task:e,onClick:()=>l(e),showManagerInfo:!0},`task-${e.id}-${e.project_id}`))})]}),(0,G.jsxs)(`section`,{ref:fe,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,G.jsx)(`h2`,{className:`text-xl font-bold`,children:`Recent Attendance`}),(0,G.jsxs)(`button`,{onClick:()=>{y(`attendance`),setTimeout(()=>{fe.current?.scrollIntoView({behavior:`smooth`})},100)},className:`text-sm text-blue-600 hover:text-blue-800`,children:[`View All (`,o.length,`)`]})]}),(0,G.jsx)(cd,{records:$e,formatTime:Se,formatDate:Ce})]}),(0,G.jsx)(`section`,{ref:pe,children:(0,G.jsx)(`div`,{className:`mt-4`,children:(0,G.jsx)(nd,{attendance:b,tasks:S,submissions:T,events:D})})})]}),v===`tasks`&&(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h1`,{className:`text-2xl font-bold`,children:`My Tasks`}),(0,G.jsx)(`p`,{className:`text-sm text-slate-600`,children:`Tasks assigned by manager`})]}),(0,G.jsxs)(`div`,{className:`text-sm text-slate-500`,children:[n.length,` tasks`]})]}),n.length===0?(0,G.jsxs)(`div`,{className:`p-6 bg-white/70 border rounded-xl text-center`,children:[(0,G.jsx)(`div`,{className:`text-slate-500`,children:`No tasks assigned.`}),(0,G.jsx)(`div`,{className:`text-sm text-slate-400 mt-2`,children:`Your manager will assign tasks to you based on your job type.`})]}):(0,G.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 gap-4`,children:n.map(e=>(0,G.jsx)(Zu,{task:e,onClick:()=>l(e),showManagerInfo:!0},`task-${e.id}-${e.project_id}`))})]}),v===`attendance`&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h1`,{className:`text-2xl font-bold mb-4`,children:`Full Attendance History`}),(0,G.jsxs)(`p`,{className:`text-sm text-slate-600 mb-4`,children:[`Showing all `,o.length,` attendance records`]}),(0,G.jsx)(cd,{records:o,formatTime:Se,formatDate:Ce})]}),v===`calendar`&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h1`,{className:`text-2xl font-bold mb-4`,children:`Calendar`}),(0,G.jsx)(nd,{attendance:b,tasks:S,submissions:T,events:D})]}),v===`files`&&(0,G.jsxs)(`div`,{ref:me,children:[(0,G.jsxs)(`div`,{className:`mb-4`,children:[(0,G.jsx)(`h1`,{className:`text-2xl font-bold`,children:`Company Drive`}),(0,G.jsx)(`p`,{className:`text-slate-600`,children:`Upload, share and manage company files`})]}),(0,G.jsx)(ld,{user:e,userRole:e?.job_type,mode:`page`})]}),v===`sales`&&(0,G.jsxs)(`div`,{ref:he,children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-center mb-6`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h1`,{className:`text-2xl font-bold`,children:`Sales Management`}),(0,G.jsx)(`p`,{className:`text-slate-600`,children:`Record, track and manage your sales with clients`})]}),(0,G.jsxs)(`button`,{onClick:()=>oe(!0),className:`bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-all transform hover:scale-105 shadow-md`,children:[(0,G.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M12 4v16m8-8H4`})}),`Record New Sale`]})]}),(0,G.jsxs)(`div`,{className:`mb-6 bg-white/90 border rounded-xl p-4 shadow-sm`,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,G.jsx)(`h3`,{className:`text-lg font-semibold`,children:`Date Range Filter`}),(0,G.jsx)(`button`,{onClick:()=>{ue({startDate:gd(),endDate:_d()}),Pe()},className:`text-sm text-blue-600 hover:text-blue-800`,children:`Reset to Current Period`})]}),(0,G.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`From Date`}),(0,G.jsx)(`input`,{type:`date`,value:N.startDate,onChange:e=>Fe(e.target.value,N.endDate),className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500`}),(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mt-1`,children:`Filter sales from 1st of month`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`To Date`}),(0,G.jsx)(`input`,{type:`date`,value:N.endDate,onChange:e=>Fe(N.startDate,e.target.value),className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500`}),(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mt-1`,children:`Filter sales until 2nd of next month`})]})]}),(0,G.jsxs)(`div`,{className:`mt-3 text-sm text-slate-600`,children:[`Showing sales from `,N.startDate,` to `,N.endDate]})]}),(0,G.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-4 gap-4 mb-6`,children:[(0,G.jsxs)(`div`,{className:`bg-white/90 border border-emerald-100 rounded-xl p-4 shadow-sm`,children:[(0,G.jsx)(`div`,{className:`text-sm text-slate-600 mb-1`,children:`Total Sales (USD)`}),(0,G.jsxs)(`div`,{className:`text-2xl font-bold text-emerald-700`,children:[`$`,M.totalAmount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,G.jsxs)(`div`,{className:`bg-white/90 border border-blue-100 rounded-xl p-4 shadow-sm`,children:[(0,G.jsx)(`div`,{className:`text-sm text-slate-600 mb-1`,children:`Amount Closed (USD)`}),(0,G.jsxs)(`div`,{className:`text-2xl font-bold text-blue-700`,children:[`$`,M.totalClosed.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,G.jsxs)(`div`,{className:`bg-white/90 border border-amber-100 rounded-xl p-4 shadow-sm`,children:[(0,G.jsx)(`div`,{className:`text-sm text-slate-600 mb-1`,children:`Pending Amount (USD)`}),(0,G.jsxs)(`div`,{className:`text-2xl font-bold text-amber-700`,children:[`$`,M.totalRemaining.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,G.jsxs)(`div`,{className:`bg-white/90 border border-purple-100 rounded-xl p-4 shadow-sm`,children:[(0,G.jsx)(`div`,{className:`text-sm text-slate-600 mb-1`,children:`Today's Sales`}),(0,G.jsx)(`div`,{className:`text-2xl font-bold text-purple-700`,children:M.todaySales})]})]}),(0,G.jsx)(`div`,{className:`mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg`,children:(0,G.jsxs)(`div`,{className:`flex items-center`,children:[(0,G.jsx)(`div`,{className:`mr-3 text-amber-600`,children:(0,G.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.998-.833-2.732 0L4.732 16.5c-.77.833.192 2.5 1.732 2.5z`})})}),(0,G.jsxs)(`div`,{className:`text-sm text-amber-700`,children:[(0,G.jsx)(`span`,{className:`font-semibold`,children:`Important:`}),` Employees cannot delete sales records. If you need to remove or correct a sale, please contact your manager.`]})]})}),(0,G.jsx)(`div`,{className:`mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg`,children:(0,G.jsxs)(`div`,{className:`flex items-center`,children:[(0,G.jsx)(`div`,{className:`mr-3 text-blue-600`,children:(0,G.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M13 16h-1v-4h1m0 0h-1m1 0v4m-5-4h.01M11 12h2`})})}),(0,G.jsxs)(`div`,{className:`text-sm text-blue-700`,children:[(0,G.jsx)(`span`,{className:`font-semibold`,children:`Order Number System:`}),` All sales now use sequential ORD-XXX format (ORD-001, ORD-002, etc.)`]})]})}),(0,G.jsxs)(`div`,{className:`bg-white/90 border rounded-xl p-4 shadow-sm`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-center mb-4`,children:[(0,G.jsx)(`h2`,{className:`text-lg font-bold`,children:`Sales History`}),(0,G.jsxs)(`div`,{className:`text-sm text-slate-600`,children:[`Showing `,se.length,` records`]})]}),(0,G.jsx)(fd,{userId:e?.id,sales:se,onUpdate:Re,onDelete:null,showActions:!0,dateRange:N})]})]}),v===`settings`&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h1`,{className:`text-2xl font-bold mb-4`,children:`Settings`}),(0,G.jsx)(`div`,{className:`p-6 bg-white/80 border rounded-xl`,children:(0,G.jsxs)(`div`,{className:`space-y-4`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h3`,{className:`font-semibold mb-2`,children:`Notification Settings`}),(0,G.jsx)(`button`,{onClick:be,className:`bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors`,children:`Mark All Notifications as Read`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h3`,{className:`font-semibold mb-2`,children:`Profile Information`}),(0,G.jsxs)(`p`,{className:`text-sm text-slate-600`,children:[`Name: `,e?.full_name]}),(0,G.jsxs)(`p`,{className:`text-sm text-slate-600`,children:[`Employee ID: `,e?.emp_id]}),(0,G.jsxs)(`p`,{className:`text-sm text-slate-600`,children:[`Job Type: `,e?.job_type]})]})]})})]})]})]})]}),(0,G.jsx)(`aside`,{className:`w-80 border-l border-white/50 bg-white/60 backdrop-blur-lg p-4 min-h-screen sticky top-0`,children:(0,G.jsxs)(`div`,{className:`space-y-6`,children:[(0,G.jsxs)(`div`,{className:`rounded-xl bg-white/80 border p-3 shadow-sm`,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,G.jsx)(`h3`,{className:`text-lg font-bold`,children:`Notifications`}),(0,G.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[m.length,` unread`]})]}),(0,G.jsx)(`div`,{className:`space-y-2 max-h-40 overflow-y-auto pr-2`,children:m.length===0?(0,G.jsx)(`div`,{className:`text-sm text-slate-600`,children:`No new notifications`}):m.slice(0,4).map(e=>(0,G.jsx)(`div`,{className:`p-2 rounded ${e.read?`bg-gray-50`:`bg-blue-50 border-l-4 border-blue-500`} cursor-pointer`,onClick:()=>ye(e.id),children:(0,G.jsxs)(`div`,{className:`flex items-start gap-2`,children:[(0,G.jsx)(`div`,{className:`text-sm mt-0.5`,children:P(e.type)}),(0,G.jsxs)(`div`,{className:`flex-1`,children:[(0,G.jsx)(`div`,{className:`text-sm font-medium`,children:e.title}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500 truncate`,children:e.message}),(0,G.jsx)(`div`,{className:`text-xs text-slate-400 mt-1`,children:xe(e.created_at)})]})]})},`notification-${e.id}`))}),m.length>0&&(0,G.jsx)(`button`,{onClick:be,className:`mt-3 w-full text-xs bg-blue-100 text-blue-600 py-1 rounded hover:bg-blue-200 transition-colors`,children:`Mark all as read`})]}),(0,G.jsxs)(`div`,{className:`rounded-xl bg-gradient-to-br from-green-50/80 to-emerald-50/80 border border-emerald-100 p-3 shadow-sm`,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,G.jsx)(`h3`,{className:`text-lg font-bold text-emerald-800`,children:`Sales Dashboard`}),(0,G.jsxs)(`div`,{className:`text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded-full`,children:[`Today: `,M.todaySales]})]}),(0,G.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mb-3`,children:[(0,G.jsxs)(`div`,{className:`p-2 bg-white/70 rounded-lg text-center border border-emerald-100`,children:[(0,G.jsx)(`div`,{className:`text-xs text-slate-600`,children:`Total Sales (USD)`}),(0,G.jsxs)(`div`,{className:`text-lg font-bold text-emerald-700`,children:[`$`,M.totalAmount.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})]})]}),(0,G.jsxs)(`div`,{className:`p-2 bg-white/70 rounded-lg text-center border border-amber-100`,children:[(0,G.jsx)(`div`,{className:`text-xs text-slate-600`,children:`Pending (USD)`}),(0,G.jsxs)(`div`,{className:`text-lg font-bold text-amber-700`,children:[`$`,M.totalRemaining.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})]})]})]}),(0,G.jsxs)(`div`,{className:`mb-2`,children:[(0,G.jsx)(`div`,{className:`text-xs text-slate-600 mb-1`,children:`Closed Amount (USD)`}),(0,G.jsxs)(`div`,{className:`text-xl font-bold text-blue-700`,children:[`$`,M.totalClosed.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,G.jsxs)(`div`,{className:`mb-2`,children:[(0,G.jsx)(`div`,{className:`text-xs text-slate-600 mb-1`,children:`Latest Order No`}),(0,G.jsx)(`div`,{className:`text-sm font-bold text-purple-700`,children:se.length>0?se[0].order_no:`ORD-000`})]}),(0,G.jsxs)(`div`,{className:`flex gap-2 mt-3`,children:[(0,G.jsx)(`button`,{onClick:()=>oe(!0),className:`flex-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white text-xs py-1.5 rounded hover:from-green-700 hover:to-emerald-700 transition-all`,children:`+ New Sale`}),(0,G.jsx)(`button`,{onClick:()=>{y(`sales`),setTimeout(()=>{he.current?.scrollIntoView({behavior:`smooth`})},100)},className:`flex-1 bg-white/80 text-emerald-600 text-xs py-1.5 rounded border border-emerald-200 hover:bg-white transition-all`,children:`View All`})]})]}),(0,G.jsx)(`div`,{className:`rounded-xl bg-white/80 border p-3 shadow-sm`,children:(0,G.jsx)(pd,{userId:e?.id})}),(0,G.jsxs)(`div`,{className:`rounded-xl bg-white/80 border p-3 shadow-sm`,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,G.jsx)(`h3`,{className:`text-lg font-bold`,children:`Performance Overview`}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Next 15 days`})]}),(0,G.jsx)(`div`,{className:`space-y-2 max-h-40 overflow-y-auto pr-2`,children:ee.length===0?(0,G.jsx)(`div`,{className:`text-sm text-slate-600`,children:`No upcoming tasks.`}):ee.map(e=>(0,G.jsx)(`div`,{className:`flex items-start justify-between`,children:(0,G.jsxs)(`div`,{className:`flex-1`,children:[(0,G.jsx)(`div`,{className:`text-sm font-medium`,children:e.displayDate}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:e.count===0?`No tasks`:`${e.count} task(s)`})]})},`performance-${e.date}`))})]}),(0,G.jsxs)(`div`,{className:`rounded-xl bg-white/80 border p-3 shadow-sm`,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,G.jsx)(`h3`,{className:`text-lg font-bold`,children:`Monthly Attendance`}),(0,G.jsx)(`div`,{className:`text-xs text-slate-500`,children:`This month`})]}),(0,G.jsxs)(`div`,{className:`grid grid-cols-2 gap-3 text-sm text-slate-700`,children:[(0,G.jsxs)(`div`,{className:`p-3 bg-white/60 rounded`,children:[(0,G.jsx)(`div`,{className:`text-xs`,children:`On-Time`}),(0,G.jsx)(`div`,{className:`text-xl font-bold text-emerald-600`,children:re.onTime})]}),(0,G.jsxs)(`div`,{className:`p-3 bg-white/60 rounded`,children:[(0,G.jsx)(`div`,{className:`text-xs`,children:`Late`}),(0,G.jsx)(`div`,{className:`text-xl font-bold text-rose-600`,children:re.late})]}),(0,G.jsxs)(`div`,{className:`p-3 bg-white/60 rounded`,children:[(0,G.jsx)(`div`,{className:`text-xs`,children:`Absent`}),(0,G.jsx)(`div`,{className:`text-xl font-bold text-gray-800`,children:re.absent})]}),(0,G.jsxs)(`div`,{className:`p-3 bg-white/60 rounded`,children:[(0,G.jsx)(`div`,{className:`text-xs`,children:`Leave`}),(0,G.jsx)(`div`,{className:`text-xl font-bold text-blue-600`,children:re.leave})]})]}),(0,G.jsx)(`div`,{className:`mt-3 text-right`,children:(0,G.jsx)(`button`,{onClick:()=>{y(`attendance`),setTimeout(()=>{fe.current?.scrollIntoView({behavior:`smooth`})},100)},className:`text-xs underline hover:text-blue-600`,children:`View details`})})]}),(0,G.jsxs)(`div`,{className:`rounded-xl bg-white/80 border p-3 shadow-sm`,children:[(0,G.jsx)(`h3`,{className:`text-lg font-bold mb-2`,children:`Activity Feed`}),(0,G.jsx)(hd,{userId:e?.id})]}),(0,G.jsxs)(`div`,{className:`rounded-xl bg-white/80 border p-3 shadow-sm`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,G.jsx)(`img`,{src:e?.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(e?.full_name||`User`)}&background=0D9488&color=ffffff`,className:`w-12 h-12 rounded-full border border-white`,alt:`avatar`}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`text-slate-900 font-bold text-sm`,children:e?.full_name||``}),(0,G.jsx)(`div`,{className:`text-slate-600 text-xs`,children:e?.emp_id||``})]})]}),(0,G.jsxs)(`div`,{className:`mt-4 text-slate-700 text-xs`,children:[(0,G.jsxs)(`div`,{children:[`Role: `,e?.job_type||``]}),(0,G.jsxs)(`div`,{className:`mt-1`,children:[`Joined: `,e?.created_at?new Date(e.created_at).toLocaleDateString():``]})]}),(0,G.jsx)(`button`,{onClick:qe,className:`mt-4 w-full bg-rose-500 text-white py-2 rounded-md font-semibold shadow hover:bg-rose-600 transition-colors`,children:`Logout`})]})]})})]}),c&&(0,G.jsx)(Cd,{task:c,onClose:()=>l(null),onAccept:async e=>{await He(e)},onSubmit:async(e,t,n)=>{await Ue(e,t,n)}}),j&&(0,G.jsx)(dd,{onClose:()=>oe(!1),onSuccess:Le,employeeId:e?.id,employeeName:e?.full_name,empId:e?.emp_id,saveSale:F,currencyOptions:Ae,convertToUSD:je,generateOrderNumber:vd})]})}function Cd({task:e,onClose:t,onAccept:n,onSubmit:r}){let[i,a]=(0,w.useState)(``),[o,s]=(0,w.useState)(``),[c,l]=(0,w.useState)(!1),u=e.status===`Pending`,d=e.status===`In Progress`||e.status===`Revision Required`,f=e.description||`No description provided.`,p=e.requirements||`No requirements.`,m=e.priority||e.priority_level||`Normal`,h=e.reference_link||null,g=e.drive_folder_link||e.google_drive_link||e.drive_link||e.google_drive_folder||null,_=e.assigned_by_name||e.assigned_by_manager?.full_name||`Manager`,v=e.created_at?new Date(e.created_at).toLocaleString():null;return(0,G.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4`,children:(0,G.jsxs)(`div`,{className:`bg-white/95 rounded-xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-xl`,children:[(0,G.jsxs)(`div`,{className:`flex justify-between items-start gap-4 mb-4`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h3`,{className:`text-2xl font-bold`,children:e.project_id}),(0,G.jsx)(`p`,{className:`text-sm text-slate-600`,children:e.client_name}),e.assigned_by_name&&(0,G.jsxs)(`p`,{className:`text-sm text-blue-600`,children:[`Assigned by: `,e.assigned_by_name]})]}),(0,G.jsx)(`div`,{className:`flex items-center gap-2`,children:(0,G.jsx)(`button`,{onClick:t,className:`text-xl hover:text-rose-600 transition-colors`,disabled:c,children:``})})]}),(0,G.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-6`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h4`,{className:`font-bold`,children:`Description`}),(0,G.jsx)(`p`,{className:`mt-2 whitespace-pre-line`,children:f})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h4`,{className:`font-bold`,children:`Requirements`}),(0,G.jsx)(`p`,{className:`mt-2 whitespace-pre-line`,children:p})]})]}),(0,G.jsxs)(`div`,{className:`grid grid-cols-2 gap-4 text-sm mt-6`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`b`,{children:`Priority:`}),` `,m]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`b`,{children:`Deadline:`}),` `,e.deadline]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`b`,{children:`Assigned By:`}),` `,_]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`b`,{children:`Created At:`}),` `,v]})]}),(0,G.jsxs)(`div`,{className:`mt-4`,children:[(0,G.jsx)(`b`,{children:`Reference Link:`}),` `,h?(0,G.jsx)(`a`,{href:h,target:`_blank`,rel:`noreferrer`,className:`text-blue-600 underline hover:text-blue-800`,children:`Open`}):`None`]}),(0,G.jsxs)(`div`,{className:`mt-2`,children:[(0,G.jsx)(`b`,{children:`Drive Folder:`}),` `,g?(0,G.jsxs)(`a`,{href:g,target:`_blank`,rel:`noreferrer`,className:`text-blue-600 underline hover:text-blue-800 flex items-center gap-1`,children:[(0,G.jsx)(`span`,{children:`Open Drive Folder`}),(0,G.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14`})})]}):(0,G.jsx)(`span`,{className:`text-slate-500 italic`,children:`No drive folder linked`})]}),u&&(0,G.jsx)(`button`,{onClick:async()=>{l(!0);try{await n(e.id)}finally{l(!1)}},disabled:c,className:`w-full mt-6 bg-emerald-600 text-white py-3 rounded-lg font-semibold hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:c?`Starting Work...`:`Start Work`}),d&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`h4`,{className:`font-bold mt-6`,children:`Submit Work`}),(0,G.jsx)(`input`,{value:i,onChange:e=>a(e.target.value),className:`mt-2 w-full p-3 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:`Submission link (required)`,disabled:c}),(0,G.jsx)(`textarea`,{value:o,onChange:e=>s(e.target.value),className:`mt-3 w-full p-3 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent`,rows:3,placeholder:`Notes (optional)`,disabled:c}),(0,G.jsx)(`button`,{onClick:async()=>{if(!i.trim()){alert(`Please provide a submission link`);return}l(!0);try{await r(e.id,i,o)}finally{l(!1)}},disabled:c||!i.trim(),className:`w-full mt-4 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:c?`Submitting...`:`Submit Work`})]}),e.status===`Delivered`&&(0,G.jsx)(`div`,{className:`mt-6 text-center p-3 bg-purple-100 text-purple-700 rounded`,children:`Submitted  Waiting for manager review.`})]})})}function wd(e=[],t=`date`,n=e=>e,r=!1){let i={};return Array.isArray(e)?(e.forEach((e,a)=>{try{if(!e||typeof e!=`object`){console.warn(`Skipping row ${a}: not an object`,e);return}let o=e[t];if(!o&&r&&e.created_at&&(o=e.created_at),!o){console.warn(`Skipping row ${a}: no date field found`,e);return}typeof o!=`string`&&(o=String(o));let s;if(s=o.includes(`T`)?o.split(`T`)[0]:o.includes(` `)?o.split(` `)[0]:o.substring(0,10),!/^\d{4}-\d{2}-\d{2}/.test(s)){console.warn(`Skipping row ${a}: invalid date format "${s}"`,e);return}i[s]||(i[s]=[]),i[s].push(n(e))}catch(t){console.error(`Error processing row ${a}:`,t,e)}}),i):(console.warn(`mapRowsToDateMap: rows is not an array`,e),i)}function Td(){return(0,G.jsxs)(yt,{children:[(0,G.jsx)(_t,{path:`/`,element:(0,G.jsx)(gt,{to:`/login`,replace:!0})}),(0,G.jsx)(_t,{path:`/login`,element:(0,G.jsx)(Pl,{})}),(0,G.jsx)(_t,{path:`/signup`,element:(0,G.jsx)(Rl,{})}),(0,G.jsx)(_t,{path:`/select-role`,element:(0,G.jsx)(K,{})}),(0,G.jsx)(_t,{path:`/forgot-password`,element:(0,G.jsx)(zl,{})}),(0,G.jsx)(_t,{path:`/reset-password`,element:(0,G.jsx)(q,{})}),(0,G.jsx)(_t,{path:`/employee/dashboard`,element:(0,G.jsx)(Ml,{children:(0,G.jsx)(Nl,{requiredRole:`employee`,children:(0,G.jsx)(Sd,{})})})}),(0,G.jsx)(_t,{path:`/manager/dashboard`,element:(0,G.jsx)(Ml,{children:(0,G.jsx)(Nl,{requiredRole:`manager`,children:(0,G.jsx)(lu,{})})})}),(0,G.jsx)(_t,{path:`/manager/analytics`,element:(0,G.jsx)(Ml,{children:(0,G.jsx)(Nl,{requiredRole:`manager`,children:(0,G.jsx)(ju,{})})})}),(0,G.jsx)(_t,{path:`/manager`,element:(0,G.jsx)(gt,{to:`/manager/dashboard`,replace:!0})}),(0,G.jsx)(_t,{path:`/employee`,element:(0,G.jsx)(gt,{to:`/employee/dashboard`,replace:!0})})]})}Bc.createRoot(document.getElementById(`root`)).render((0,G.jsx)(nn,{children:(0,G.jsx)(Td,{})}));